!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=465)}([function(t,e,i){"use strict";i.r(e),i.d(e,"DOCUMENT",function(){return r}),i.d(e,"XML_SCHEMA_INSTANCE_URI",function(){return o}),i.d(e,"createElementNS",function(){return s}),i.d(e,"getAllTextContent",function(){return a}),i.d(e,"getAllTextContent_",function(){return l}),i.d(e,"isDocument",function(){return u}),i.d(e,"isNode",function(){return c}),i.d(e,"getAttributeNS",function(){return h}),i.d(e,"parse",function(){return d}),i.d(e,"makeArrayExtender",function(){return f}),i.d(e,"makeArrayPusher",function(){return p}),i.d(e,"makeReplacer",function(){return g}),i.d(e,"makeObjectPropertyPusher",function(){return y}),i.d(e,"makeObjectPropertySetter",function(){return m}),i.d(e,"makeChildAppender",function(){return _}),i.d(e,"makeArraySerializer",function(){return v}),i.d(e,"makeSimpleNodeFactory",function(){return b}),i.d(e,"OBJECT_PROPERTY_NODE_FACTORY",function(){return S}),i.d(e,"makeSequence",function(){return O}),i.d(e,"makeStructureNS",function(){return C}),i.d(e,"parseNode",function(){return x}),i.d(e,"pushParseAndPop",function(){return T}),i.d(e,"serialize",function(){return E}),i.d(e,"pushSerializeAndPop",function(){return P});var n=i(12);const r=document.implementation.createDocument("","",null),o="http://www.w3.org/2001/XMLSchema-instance";function s(t,e){return r.createElementNS(t,e)}function a(t,e){return l(t,e,[]).join("")}function l(t,e,i){if(t.nodeType==Node.CDATA_SECTION_NODE||t.nodeType==Node.TEXT_NODE)e?i.push(String(t.nodeValue).replace(/(\r\n|\r|\n)/g,"")):i.push(t.nodeValue);else{let n;for(n=t.firstChild;n;n=n.nextSibling)l(n,e,i)}return i}function u(t){return t instanceof Document}function c(t){return t instanceof Node}function h(t,e,i){return t.getAttributeNS(e,i)||""}function d(t){return(new DOMParser).parseFromString(t,"application/xml")}function f(t,e){return function(i,r){const o=t.call(void 0!==e?e:this,i,r);if(void 0!==o){const t=r[r.length-1];Object(n.c)(t,o)}}}function p(t,e){return function(i,n){const r=t.call(void 0!==e?e:this,i,n);if(void 0!==r){n[n.length-1].push(r)}}}function g(t,e){return function(i,n){const r=t.call(void 0!==e?e:this,i,n);void 0!==r&&(n[n.length-1]=r)}}function y(t,e,i){return function(n,r){const o=t.call(void 0!==i?i:this,n,r);if(void 0!==o){const t=r[r.length-1],i=void 0!==e?e:n.localName;let s;(s=i in t?t[i]:t[i]=[]).push(o)}}}function m(t,e,i){return function(n,r){const o=t.call(void 0!==i?i:this,n,r);if(void 0!==o){r[r.length-1][void 0!==e?e:n.localName]=o}}}function _(t,e){return function(i,n,r){t.call(void 0!==e?e:this,i,n,r),r[r.length-1].node.appendChild(i)}}function v(t,e){let i,n;return function(e,r,o){if(void 0===i){i={};const r={};r[e.localName]=t,i[e.namespaceURI]=r,n=b(e.localName)}E(i,n,r,o)}}function b(t,e){const i=t;return function(t,n,r){const o=n[n.length-1].node;let a=i;return void 0===a&&(a=r),s(void 0!==e?e:o.namespaceURI,a)}}const S=b();function O(t,e){const i=e.length,n=new Array(i);for(let r=0;r<i;++r)n[r]=t[e[r]];return n}function C(t,e,i){const n=void 0!==i?i:{};let r,o;for(r=0,o=t.length;r<o;++r)n[t[r]]=e;return n}function x(t,e,i,n){let r;for(r=e.firstElementChild;r;r=r.nextElementSibling){const e=t[r.namespaceURI];if(void 0!==e){const t=e[r.localName];void 0!==t&&t.call(n,r,i)}}}function T(t,e,i,n,r){return n.push(t),x(e,i,n,r),n.pop()}function E(t,e,i,n,r,o){const s=(void 0!==r?r:i).length;let a,l;for(let u=0;u<s;++u)void 0!==(a=i[u])&&void 0!==(l=e.call(void 0!==o?o:this,a,n,void 0!==r?r[u]:void 0))&&t[l.namespaceURI][l.localName].call(o,l,a,n)}function P(t,e,i,n,r,o,s){return r.push(t),E(e,i,n,r,o,s),r.pop()}},function(t,e,i){"use strict";function n(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t}i.r(e),i.d(e,"inherits",function(){return n}),i.d(e,"getUid",function(){return o}),i.d(e,"VERSION",function(){return s});let r=0;function o(t){return t.ol_uid||(t.ol_uid=++r)}const s="5.0.0"},function(t,e,i){"use strict";i.r(e),i.d(e,"boundingExtent",function(){return s}),i.d(e,"buffer",function(){return a}),i.d(e,"clone",function(){return l}),i.d(e,"closestSquaredDistanceXY",function(){return u}),i.d(e,"containsCoordinate",function(){return c}),i.d(e,"containsExtent",function(){return h}),i.d(e,"containsXY",function(){return d}),i.d(e,"coordinateRelationship",function(){return f}),i.d(e,"createEmpty",function(){return p}),i.d(e,"createOrUpdate",function(){return g}),i.d(e,"createOrUpdateEmpty",function(){return y}),i.d(e,"createOrUpdateFromCoordinate",function(){return m}),i.d(e,"createOrUpdateFromCoordinates",function(){return _}),i.d(e,"createOrUpdateFromFlatCoordinates",function(){return v}),i.d(e,"createOrUpdateFromRings",function(){return b}),i.d(e,"equals",function(){return S}),i.d(e,"extend",function(){return O}),i.d(e,"extendCoordinate",function(){return C}),i.d(e,"extendCoordinates",function(){return x}),i.d(e,"extendFlatCoordinates",function(){return T}),i.d(e,"extendRings",function(){return E}),i.d(e,"extendXY",function(){return P}),i.d(e,"forEachCorner",function(){return j}),i.d(e,"getArea",function(){return w}),i.d(e,"getBottomLeft",function(){return I}),i.d(e,"getBottomRight",function(){return L}),i.d(e,"getCenter",function(){return R}),i.d(e,"getCorner",function(){return A}),i.d(e,"getEnlargedArea",function(){return M}),i.d(e,"getForViewAndSize",function(){return F}),i.d(e,"getHeight",function(){return k}),i.d(e,"getIntersectionArea",function(){return N}),i.d(e,"getIntersection",function(){return D}),i.d(e,"getMargin",function(){return G}),i.d(e,"getSize",function(){return B}),i.d(e,"getTopLeft",function(){return U}),i.d(e,"getTopRight",function(){return V}),i.d(e,"getWidth",function(){return Z}),i.d(e,"intersects",function(){return W}),i.d(e,"isEmpty",function(){return H}),i.d(e,"returnOrUpdate",function(){return z}),i.d(e,"scaleFromCenter",function(){return Y}),i.d(e,"intersectsSegment",function(){return X}),i.d(e,"applyTransform",function(){return q});var n=i(23),r=i(193),o=i(74);function s(t){const e=p();for(let i=0,n=t.length;i<n;++i)C(e,t[i]);return e}function a(t,e,i){return i?(i[0]=t[0]-e,i[1]=t[1]-e,i[2]=t[2]+e,i[3]=t[3]+e,i):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function l(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function u(t,e,i){let n,r;return(n=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*n+(r=i<t[1]?t[1]-i:t[3]<i?i-t[3]:0)*r}function c(t,e){return d(t,e[0],e[1])}function h(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function d(t,e,i){return t[0]<=e&&e<=t[2]&&t[1]<=i&&i<=t[3]}function f(t,e){const i=t[0],n=t[1],r=t[2],s=t[3],a=e[0],l=e[1];let u=o.a.UNKNOWN;return a<i?u|=o.a.LEFT:a>r&&(u|=o.a.RIGHT),l<n?u|=o.a.BELOW:l>s&&(u|=o.a.ABOVE),u===o.a.UNKNOWN&&(u=o.a.INTERSECTING),u}function p(){return[1/0,1/0,-1/0,-1/0]}function g(t,e,i,n,r){return r?(r[0]=t,r[1]=e,r[2]=i,r[3]=n,r):[t,e,i,n]}function y(t){return g(1/0,1/0,-1/0,-1/0,t)}function m(t,e){const i=t[0],n=t[1];return g(i,n,i,n,e)}function _(t,e){return x(y(e),t)}function v(t,e,i,n,r){return T(y(r),t,e,i,n)}function b(t,e){return E(y(e),t)}function S(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function O(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function C(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function x(t,e){for(let i=0,n=e.length;i<n;++i)C(t,e[i]);return t}function T(t,e,i,n,r){for(;i<n;i+=r)P(t,e[i],e[i+1]);return t}function E(t,e){for(let i=0,n=e.length;i<n;++i)x(t,e[i]);return t}function P(t,e,i){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],i),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],i)}function j(t,e,i){let n;return(n=e.call(i,I(t)))?n:(n=e.call(i,L(t)))?n:(n=e.call(i,V(t)))?n:(n=e.call(i,U(t)))||!1}function w(t){let e=0;return H(t)||(e=Z(t)*k(t)),e}function I(t){return[t[0],t[1]]}function L(t){return[t[2],t[1]]}function R(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function A(t,e){let i;return e===r.a.BOTTOM_LEFT?i=I(t):e===r.a.BOTTOM_RIGHT?i=L(t):e===r.a.TOP_LEFT?i=U(t):e===r.a.TOP_RIGHT?i=V(t):Object(n.a)(!1,13),i}function M(t,e){const i=Math.min(t[0],e[0]),n=Math.min(t[1],e[1]);return(Math.max(t[2],e[2])-i)*(Math.max(t[3],e[3])-n)}function F(t,e,i,n,r){const o=e*n[0]/2,s=e*n[1]/2,a=Math.cos(i),l=Math.sin(i),u=o*a,c=o*l,h=s*a,d=s*l,f=t[0],p=t[1],y=f-u+d,m=f-u-d,_=f+u-d,v=f+u+d,b=p-c-h,S=p-c+h,O=p+c+h,C=p+c-h;return g(Math.min(y,m,_,v),Math.min(b,S,O,C),Math.max(y,m,_,v),Math.max(b,S,O,C),r)}function k(t){return t[3]-t[1]}function N(t,e){return w(D(t,e))}function D(t,e,i){const n=i||[1/0,1/0,-1/0,-1/0];return W(t,e)?(t[0]>e[0]?n[0]=t[0]:n[0]=e[0],t[1]>e[1]?n[1]=t[1]:n[1]=e[1],t[2]<e[2]?n[2]=t[2]:n[2]=e[2],t[3]<e[3]?n[3]=t[3]:n[3]=e[3]):y(n),n}function G(t){return Z(t)+k(t)}function B(t){return[t[2]-t[0],t[3]-t[1]]}function U(t){return[t[0],t[3]]}function V(t){return[t[2],t[3]]}function Z(t){return t[2]-t[0]}function W(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function H(t){return t[2]<t[0]||t[3]<t[1]}function z(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function Y(t,e){const i=(t[2]-t[0])/2*(e-1),n=(t[3]-t[1])/2*(e-1);t[0]-=i,t[2]+=i,t[1]-=n,t[3]+=n}function X(t,e,i){let n=!1;const r=f(t,e),s=f(t,i);if(r===o.a.INTERSECTING||s===o.a.INTERSECTING)n=!0;else{const a=t[0],l=t[1],u=t[2],c=t[3],h=e[0],d=e[1],f=i[0],p=i[1],g=(p-d)/(f-h);let y,m;s&o.a.ABOVE&&!(r&o.a.ABOVE)&&(n=(y=f-(p-c)/g)>=a&&y<=u),n||!(s&o.a.RIGHT)||r&o.a.RIGHT||(n=(m=p-(f-u)*g)>=l&&m<=c),n||!(s&o.a.BELOW)||r&o.a.BELOW||(n=(y=f-(p-l)/g)>=a&&y<=u),n||!(s&o.a.LEFT)||r&o.a.LEFT||(n=(m=p-(f-a)*g)>=l&&m<=c)}return n}function q(t,e,i){const n=[t[0],t[1],t[0],t[3],t[2],t[1],t[2],t[3]];return e(n,n,2),function(t,e,i){return g(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),i)}([n[0],n[2],n[4],n[6]],[n[1],n[3],n[5],n[7]],i)}},function(t,e,i){"use strict";i.d(e,"a",function(){return o}),i.d(e,"b",function(){return s}),i.d(e,"c",function(){return a}),i.d(e,"d",function(){return l}),i.d(e,"e",function(){return u}),i.d(e,"f",function(){return c}),i.d(e,"g",function(){return h}),i.d(e,"h",function(){return d}),i.d(e,"i",function(){return f}),i.d(e,"j",function(){return p}),i.d(e,"k",function(){return g}),i.d(e,"l",function(){return y}),i.d(e,"m",function(){return m}),i.d(e,"n",function(){return _});var n=i(0),r=i(113);function o(t){return s(Object(n.getAllTextContent)(t,!1))}function s(t){const e=/^\s*(true|1)|(false|0)\s*$/.exec(t);return e?void 0!==e[1]||!1:void 0}function a(t){const e=Object(n.getAllTextContent)(t,!1),i=Date.parse(e);return isNaN(i)?void 0:i/1e3}function l(t){return u(Object(n.getAllTextContent)(t,!1))}function u(t){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t);return e?parseFloat(e[1]):void 0}function c(t){return h(Object(n.getAllTextContent)(t,!1))}function h(t){const e=/^\s*(\d+)\s*$/.exec(t);return e?parseInt(e[1],10):void 0}function d(t){return Object(n.getAllTextContent)(t,!1).trim()}function f(t,e){_(t,e?"1":"0")}function p(t,e){t.appendChild(n.DOCUMENT.createCDATASection(e))}function g(t,e){const i=new Date(1e3*e),o=i.getUTCFullYear()+"-"+Object(r.b)(i.getUTCMonth()+1,2)+"-"+Object(r.b)(i.getUTCDate(),2)+"T"+Object(r.b)(i.getUTCHours(),2)+":"+Object(r.b)(i.getUTCMinutes(),2)+":"+Object(r.b)(i.getUTCSeconds(),2)+"Z";t.appendChild(n.DOCUMENT.createTextNode(o))}function y(t,e){const i=e.toPrecision();t.appendChild(n.DOCUMENT.createTextNode(i))}function m(t,e){const i=e.toString();t.appendChild(n.DOCUMENT.createTextNode(i))}function _(t,e){t.appendChild(n.DOCUMENT.createTextNode(e))}},function(t,e,i){"use strict";i.r(e),i.d(e,"bindListener",function(){return r}),i.d(e,"findListener",function(){return o}),i.d(e,"getListeners",function(){return s}),i.d(e,"listen",function(){return u}),i.d(e,"listenOnce",function(){return c}),i.d(e,"unlisten",function(){return h}),i.d(e,"unlistenByKey",function(){return d}),i.d(e,"unlistenAll",function(){return f});var n=i(11);function r(t){const e=function(e){const i=t.listener,n=t.bindTo||t.target;return t.callOnce&&d(t),i.call(n,e)};return t.boundListener=e,e}function o(t,e,i,n){let r;for(let o=0,s=t.length;o<s;++o)if((r=t[o]).listener===e&&r.bindTo===i)return n&&(r.deleteIndex=o),r}function s(t,e){const i=t.ol_lm;return i?i[e]:void 0}function a(t){let e=t.ol_lm;return e||(e=t.ol_lm={}),e}function l(t,e){const i=s(t,e);if(i){for(let r=0,o=i.length;r<o;++r)t.removeEventListener(e,i[r].boundListener),Object(n.clear)(i[r]);i.length=0;const r=t.ol_lm;r&&(delete r[e],0===Object.keys(r).length&&delete t.ol_lm)}}function u(t,e,i,n,s){const l=a(t);let u=l[e];u||(u=l[e]=[]);let c=o(u,i,n,!1);return c?s||(c.callOnce=!1):(c={bindTo:n,callOnce:!!s,listener:i,target:t,type:e},t.addEventListener(e,r(c)),u.push(c)),c}function c(t,e,i,n){return u(t,e,i,n,!0)}function h(t,e,i,n){const r=s(t,e);if(r){const t=o(r,i,n,!0);t&&d(t)}}function d(t){if(t&&t.target){t.target.removeEventListener(t.type,t.boundListener);const e=s(t.target,t.type);if(e){const i="deleteIndex"in t?t.deleteIndex:e.indexOf(t);-1!==i&&e.splice(i,1),0===e.length&&l(t.target,t.type)}Object(n.clear)(t)}}function f(t){const e=a(t);for(const i in e)l(t,i)}},function(t,e,i){"use strict";i.r(e),e.default={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=window.Zondy=window.Zondy||{};n.Object=n.Object||{},n.Object.ContourAnalyse=n.Object.ContourAnalyse||{},n.Object.Theme=n.Object.Theme||{},n.Service=n.Service||{},n.Enum=n.Enum||{},n.Enum.Net=n.Enum.Net||{},n.Enum.Theme=n.Enum.Theme||{},n.Enum.Map=n.Enum.Map||{},n.Catalog=n.Catalog||{},n.Util=n.Util||{},n.Map=n.Map||{},n.LevelRenderer=n.LevelRenderer||{},n.LevelRenderer.Tool=n.LevelRenderer.Tool||{},n.LevelRenderer.Animation=n.LevelRenderer.Animation||{},n.Feature=n.Feature||{},n.Feature.ShapeParameters=n.Feature.ShapeParameters||{},n.Geometry=n.Geometry||{},n.Client=n.Client||{},n.Source=n.Source||{},n.GeomInteraction=n.GeomInteraction||{},n.Format=n.Format||{},n.Control=n.Control||{},e.Zondy=n},function(t,e,i){"use strict";i.d(e,"r",function(){return n}),i.d(e,"v",function(){return r}),i.d(e,"d",function(){return o}),i.d(e,"e",function(){return s}),i.d(e,"F",function(){return a}),i.d(e,"G",function(){return l}),i.d(e,"s",function(){return u}),i.d(e,"a",function(){return c}),i.d(e,"j",function(){return h}),i.d(e,"y",function(){return d}),i.d(e,"w",function(){return f}),i.d(e,"i",function(){return p}),i.d(e,"f",function(){return g}),i.d(e,"b",function(){return y}),i.d(e,"x",function(){return m}),i.d(e,"h",function(){return _}),i.d(e,"u",function(){return v}),i.d(e,"H",function(){return b}),i.d(e,"J",function(){return S}),i.d(e,"I",function(){return O}),i.d(e,"l",function(){return C}),i.d(e,"t",function(){return x}),i.d(e,"m",function(){return T}),i.d(e,"K",function(){return E}),i.d(e,"p",function(){return P}),i.d(e,"B",function(){return j}),i.d(e,"C",function(){return w}),i.d(e,"D",function(){return I}),i.d(e,"E",function(){return L}),i.d(e,"A",function(){return R}),i.d(e,"z",function(){return A}),i.d(e,"c",function(){return M}),i.d(e,"n",function(){return F}),i.d(e,"L",function(){return N}),i.d(e,"g",function(){return D}),i.d(e,"o",function(){return U}),i.d(e,"q",function(){return G}),i.d(e,"k",function(){return B});const n=1,r=770,o=36064,s=16384,a=4,l=5,u=771,c=34962,h=34963,d=35040,f=35044,p=35048,g=2884,y=3042,m=2960,_=2929,v=3089,b=5121,S=5123,O=5125,C=5126,x=6408,T=35632,E=35633,P=9729,j=10240,w=10241,I=10242,L=10243,R=3553,A=33984,M=33071,F=36160,k=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function N(t,e){const i=k.length;for(let n=0;n<i;++n)try{const i=t.getContext(k[n],e);if(i)return i}catch(t){}return null}const D=!0;let G,B,U=!1;if("undefined"!=typeof window&&"WebGLRenderingContext"in window)try{const t=N(document.createElement("CANVAS"),{failIfMajorPerformanceCaveat:!0});t&&(U=!0,G=t.getParameter(t.MAX_TEXTURE_SIZE),B=t.getSupportedExtensions())}catch(t){}},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,i){"use strict";i.r(e);var n=i(205),r=i(2),o=i(18),s=i(1),a=i(110),l=i(51);const u=6378137,c=Math.PI*u,h=[-c,-c,c,c],d=[-180,-85,180,85];function f(t){a.default.call(this,{code:t,units:l.default.METERS,extent:h,global:!0,worldExtent:d,getPointResolution:function(t,e){return t/Object(o.b)(e[1]/u)}})}Object(s.inherits)(f,a.default);const p=[new f("EPSG:3857"),new f("EPSG:102100"),new f("EPSG:102113"),new f("EPSG:900913"),new f("urn:ogc:def:crs:EPSG:6.18:3:3857"),new f("urn:ogc:def:crs:EPSG::3857"),new f("http://www.opengis.net/gml/srs/epsg.xml#3857")];function g(t,e,i){const n=t.length,r=i>1?i:2;let o=e;void 0===o&&(o=r>2?t.slice():new Array(n));const s=c;for(let e=0;e<n;e+=r){o[e]=s*t[e]/180;let i=u*Math.log(Math.tan(Math.PI*(t[e+1]+90)/360));i>s?i=s:i<-s&&(i=-s),o[e+1]=i}return o}function y(t,e,i){const n=t.length,r=i>1?i:2;let o=e;void 0===o&&(o=r>2?t.slice():new Array(n));for(let e=0;e<n;e+=r)o[e]=180*t[e]/c,o[e+1]=360*Math.atan(Math.exp(t[e+1]/u))/Math.PI-90;return o}const m=[-180,-90,180,90],_=6378137*Math.PI/180;function v(t,e){a.default.call(this,{code:t,units:l.default.DEGREES,extent:m,axisOrientation:e,global:!0,metersPerUnit:_,worldExtent:m})}Object(s.inherits)(v,a.default);const b=[new v("CRS:84"),new v("EPSG:4326","neu"),new v("urn:ogc:def:crs:EPSG::4326","neu"),new v("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new v("urn:ogc:def:crs:OGC:1.3:CRS84"),new v("urn:ogc:def:crs:OGC:2:84"),new v("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new v("urn:x-ogc:def:crs:EPSG:4326","neu")];let S={};var O=i(134);function C(t,e,i){let n;if(void 0!==e){for(let i=0,n=t.length;i<n;++i)e[i]=t[i];n=e}else n=t.slice();return n}function x(t,e,i){if(void 0!==e&&t!==e){for(let i=0,n=t.length;i<n;++i)e[i]=t[i];t=e}return t}function T(t){!function(t,e){S[t]=e}(t.getCode(),t),Object(O.a)(t,t,C)}function E(t){t.forEach(T)}function P(t){let e=null;if(t instanceof a.default)e=t;else if("string"==typeof t){e=S[t]||null}return e}function j(t,e,i,r){let o;const s=(t=P(t)).getPointResolutionFunc();if(s)o=s(e,i);else{if(t.getUnits()==l.default.DEGREES&&!r||r==l.default.DEGREES)o=e;else{const s=D(t,P("EPSG:4326"));let a=[i[0]-e/2,i[1],i[0]+e/2,i[1],i[0],i[1]-e/2,i[0],i[1]+e/2];a=s(a,a,2),o=(Object(n.getDistance)(a.slice(0,2),a.slice(2,4))+Object(n.getDistance)(a.slice(4,6),a.slice(6,8)))/2;const u=r?l.METERS_PER_UNIT[r]:t.getMetersPerUnit();void 0!==u&&(o/=u)}}return o}function w(t){E(t),t.forEach(function(e){t.forEach(function(t){e!==t&&Object(O.a)(e,t,C)})})}function I(t,e,i,n){t.forEach(function(t){e.forEach(function(e){Object(O.a)(t,e,i),Object(O.a)(e,t,n)})})}function L(){S={},Object(O.b)()}function R(t,e){return t?"string"==typeof t?P(t):t:P(e)}function A(t){return function(e,i,n){const r=e.length,o=void 0!==n?n:2,s=void 0!==i?i:new Array(r);for(let i=0;i<r;i+=o){const n=t([e[i],e[i+1]]);s[i]=n[0],s[i+1]=n[1];for(let t=o-1;t>=2;--t)s[i+t]=e[i+t]}return s}}function M(t,e,i,n){const r=P(t),o=P(e);Object(O.a)(r,o,A(i)),Object(O.a)(o,r,A(n))}function F(t,e){return B(t,"EPSG:4326",void 0!==e?e:"EPSG:3857")}function k(t,e){const i=B(t,void 0!==e?e:"EPSG:3857","EPSG:4326"),n=i[0];return(n<-180||n>180)&&(i[0]=Object(o.d)(n+180,360)-180),i}function N(t,e){if(t===e)return!0;const i=t.getUnits()===e.getUnits();if(t.getCode()===e.getCode())return i;return D(t,e)===C&&i}function D(t,e){const i=t.getCode(),n=e.getCode();let r=Object(O.c)(i,n);return r||(r=x),r}function G(t,e){return D(P(t),P(e))}function B(t,e,i){return G(e,i)(t,void 0,t.length)}function U(t,e,i){const n=G(e,i);return Object(r.applyTransform)(t,n)}function V(t,e,i){return D(e,i)(t)}function Z(){w(p),w(b),I(b,p,g,y)}i.d(e,"cloneTransform",function(){return C}),i.d(e,"identityTransform",function(){return x}),i.d(e,"addProjection",function(){return T}),i.d(e,"addProjections",function(){return E}),i.d(e,"get",function(){return P}),i.d(e,"getPointResolution",function(){return j}),i.d(e,"addEquivalentProjections",function(){return w}),i.d(e,"addEquivalentTransforms",function(){return I}),i.d(e,"clearAllProjections",function(){return L}),i.d(e,"createProjection",function(){return R}),i.d(e,"createTransformFromCoordinateTransform",function(){return A}),i.d(e,"addCoordinateTransforms",function(){return M}),i.d(e,"fromLonLat",function(){return F}),i.d(e,"toLonLat",function(){return k}),i.d(e,"equivalent",function(){return N}),i.d(e,"getTransformFromProjections",function(){return D}),i.d(e,"getTransform",function(){return G}),i.d(e,"transform",function(){return B}),i.d(e,"transformExtent",function(){return U}),i.d(e,"transformWithProjections",function(){return V}),i.d(e,"addCommon",function(){return Z}),i.d(e,"METERS_PER_UNIT",function(){return l.METERS_PER_UNIT}),Z()},function(t,e,i){"use strict";i.r(e),e.default={CHANGE:"change",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",ERROR:"error",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",MOUSEDOWN:"mousedown",MOUSEMOVE:"mousemove",MOUSEOUT:"mouseout",MOUSEUP:"mouseup",MOUSEWHEEL:"mousewheel",MSPOINTERDOWN:"MSPointerDown",RESIZE:"resize",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",WHEEL:"wheel"}},function(t,e,i){"use strict";i.r(e),i.d(e,"assign",function(){return n}),i.d(e,"clear",function(){return r}),i.d(e,"getValues",function(){return o}),i.d(e,"isEmpty",function(){return s});const n="function"==typeof Object.assign?Object.assign:function(t,e){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");const i=Object(t);for(let t=1,e=arguments.length;t<e;++t){const e=arguments[t];if(void 0!==e&&null!==e)for(const t in e)e.hasOwnProperty(t)&&(i[t]=e[t])}return i};function r(t){for(const e in t)delete t[e]}function o(t){const e=[];for(const i in t)e.push(t[i]);return e}function s(t){let e;for(e in t)return!1;return!e}},function(t,e,i){"use strict";function n(t,e,i){let n,o;const s=i||r;let a=0,l=t.length,u=!1;for(;a<l;)(o=+s(t[n=a+(l-a>>1)],e))<0?a=n+1:(l=n,u=!o);return u?a:~a}function r(t,e){return t>e?1:t<e?-1:0}function o(t,e){return t.indexOf(e)>=0}function s(t,e,i){const n=t.length;if(t[0]<=e)return 0;if(e<=t[n-1])return n-1;{let r;if(i>0){for(r=1;r<n;++r)if(t[r]<e)return r-1}else if(i<0){for(r=1;r<n;++r)if(t[r]<=e)return r}else for(r=1;r<n;++r){if(t[r]==e)return r;if(t[r]<e)return t[r-1]-e<e-t[r]?r-1:r}return n-1}}function a(t,e,i){for(;e<i;){const n=t[e];t[e]=t[i],t[i]=n,++e,--i}}function l(t,e){const i=Array.isArray(e)?e:[e],n=i.length;for(let e=0;e<n;e++)t[t.length]=i[e]}function u(t,e){const i=t.indexOf(e),n=i>-1;return n&&t.splice(i,1),n}function c(t,e){const i=t.length>>>0;let n;for(let r=0;r<i;r++)if(e(n=t[r],r,t))return n;return null}function h(t,e){const i=t.length;if(i!==e.length)return!1;for(let n=0;n<i;n++)if(t[n]!==e[n])return!1;return!0}function d(t,e){const i=t.length,n=Array(t.length);let r;for(r=0;r<i;r++)n[r]={index:r,value:t[r]};for(n.sort(function(t,i){return e(t.value,i.value)||t.index-i.index}),r=0;r<t.length;r++)t[r]=n[r].value}function f(t,e){let i;return!t.every(function(n,r){return i=r,!e(n,r,t)})?i:-1}function p(t,e,i){const n=e||r;return t.every(function(e,r){if(0===r)return!0;const o=n(t[r-1],e);return!(o>0||i&&0===o)})}i.d(e,"a",function(){return n}),i.d(e,"i",function(){return r}),i.d(e,"f",function(){return o}),i.d(e,"h",function(){return s}),i.d(e,"k",function(){return a}),i.d(e,"c",function(){return l}),i.d(e,"j",function(){return u}),i.d(e,"d",function(){return c}),i.d(e,"b",function(){return h}),i.d(e,"l",function(){return d}),i.d(e,"e",function(){return f}),i.d(e,"g",function(){return p})},function(t,e,i){t.exports={default:i(545),__esModule:!0}},function(t,e,i){"use strict";i.d(e,"c",function(){return o}),i.d(e,"f",function(){return s}),i.d(e,"e",function(){return a}),i.d(e,"i",function(){return u}),i.d(e,"a",function(){return c}),i.d(e,"g",function(){return h}),i.d(e,"h",function(){return d}),i.d(e,"j",function(){return f}),i.d(e,"b",function(){return p}),i.d(e,"d",function(){return g});var n=i(23);const r=new Array(6);function o(){return[1,0,0,1,0,0]}function s(t){return l(t,1,0,0,1,0,0)}function a(t,e){const i=t[0],n=t[1],r=t[2],o=t[3],s=t[4],a=t[5],l=e[0],u=e[1],c=e[2],h=e[3],d=e[4],f=e[5];return t[0]=i*l+r*u,t[1]=n*l+o*u,t[2]=i*c+r*h,t[3]=n*c+o*h,t[4]=i*d+r*f+s,t[5]=n*d+o*f+a,t}function l(t,e,i,n,r,o,s){return t[0]=e,t[1]=i,t[2]=n,t[3]=r,t[4]=o,t[5]=s,t}function u(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function c(t,e){const i=e[0],n=e[1];return e[0]=t[0]*i+t[2]*n+t[4],e[1]=t[1]*i+t[3]*n+t[5],e}function h(t,e){const i=Math.cos(e),n=Math.sin(e);return a(t,l(r,i,n,-n,i,0,0))}function d(t,e,i){return a(t,l(r,e,0,0,i,0,0))}function f(t,e,i){return a(t,l(r,1,0,0,1,e,i))}function p(t,e,i,n,r,o,s,a){const l=Math.sin(o),u=Math.cos(o);return t[0]=n*u,t[1]=r*l,t[2]=-n*l,t[3]=r*u,t[4]=s*n*u-a*n*l+e,t[5]=s*r*l+a*r*u+i,t}function g(t){const e=(i=t)[0]*i[3]-i[1]*i[2];var i;Object(n.a)(0!==e,32);const r=t[0],o=t[1],s=t[2],a=t[3],l=t[4],u=t[5];return t[0]=a/e,t[1]=-o/e,t[2]=-s/e,t[3]=r/e,t[4]=(s*u-a*l)/e,t[5]=-(r*u-o*l)/e,t}},function(t,e,i){"use strict";e.a={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4,ABORT:5}},function(t,e,i){"use strict";e.__esModule=!0;var n,r=i(136),o=(n=r)&&n.__esModule?n:{default:n};e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":(0,o.default)(e))&&"function"!=typeof e?t:e}},function(t,e,i){"use strict";e.__esModule=!0;var n=s(i(547)),r=s(i(551)),o=s(i(136));function s(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":(0,o.default)(e)));t.prototype=(0,r.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(n.default?(0,n.default)(t,e):t.__proto__=e)}},function(t,e,i){"use strict";i.d(e,"a",function(){return r}),i.d(e,"b",function(){return o}),i.d(e,"e",function(){return s}),i.d(e,"h",function(){return a}),i.d(e,"g",function(){return l}),i.d(e,"f",function(){return u}),i.d(e,"i",function(){return c}),i.d(e,"j",function(){return h}),i.d(e,"d",function(){return d}),i.d(e,"c",function(){return f});var n=i(23);function r(t,e,i){return Math.min(Math.max(t,e),i)}const o=function(){let t;return t="cosh"in Math?Math.cosh:function(t){const e=Math.exp(t);return(e+1/e)/2}}();function s(t){return Object(n.a)(0<t,29),Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function a(t,e,i,n,r,o){const s=r-i,a=o-n;if(0!==s||0!==a){const l=((t-i)*s+(e-n)*a)/(s*s+a*a);l>1?(i=r,n=o):l>0&&(i+=s*l,n+=a*l)}return l(t,e,i,n)}function l(t,e,i,n){const r=i-t,o=n-e;return r*r+o*o}function u(t){const e=t.length;for(let i=0;i<e;i++){let n=i,r=Math.abs(t[i][i]);for(let o=i+1;o<e;o++){const e=Math.abs(t[o][i]);e>r&&(r=e,n=o)}if(0===r)return null;const o=t[n];t[n]=t[i],t[i]=o;for(let n=i+1;n<e;n++){const r=-t[n][i]/t[i][i];for(let o=i;o<e+1;o++)i==o?t[n][o]=0:t[n][o]+=r*t[i][o]}}const i=new Array(e);for(let n=e-1;n>=0;n--){i[n]=t[n][e]/t[n][n];for(let r=n-1;r>=0;r--)t[r][e]-=t[r][n]*i[n]}return i}function c(t){return 180*t/Math.PI}function h(t){return t*Math.PI/180}function d(t,e){const i=t%e;return i*e<0?i+e:i}function f(t,e,i){return t+i*(e-t)}},function(t,e,i){"use strict";i.r(e),e.default={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"}},function(t,e,i){"use strict";e.__esModule=!0;var n,r=i(292),o=(n=r)&&n.__esModule?n:{default:n};e.default=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,o.default)(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCanvasContext2D=exports.mixin=exports.merge=exports.DeepMerge=exports.ChineseToUtf8=exports.getTopAnalysisResult=exports.bindAsEventListener=exports.bind=exports.newGuid=exports.cloneObject=exports.copyAttributesWithClip=exports.copyAttributes=exports.transformResult=exports.toJSON=exports.isInTheSameDomain=exports.supportCanvas=exports.isSupportCanvas=exports.getBrowser=exports.Browser=exports.IS_GECKO=exports.getParameters=exports.urlAppend=exports.getWFParameterString=exports.getParameterString=exports.applyDefaults=exports.modifyDOMElement=exports.indexOf=exports.removeItem=exports.isElement=exports.getElement=exports.reset=exports.copyExcluce=exports.copy=exports.extendDeep=exports.isArray=exports.extend=void 0;var _defineProperty=__webpack_require__(292),_defineProperty2=_interopRequireDefault(_defineProperty),_getOwnPropertyDescriptor=__webpack_require__(365),_getOwnPropertyDescriptor2=_interopRequireDefault(_getOwnPropertyDescriptor),_getOwnPropertySymbols=__webpack_require__(514),_getOwnPropertySymbols2=_interopRequireDefault(_getOwnPropertySymbols),_getOwnPropertyNames=__webpack_require__(374),_getOwnPropertyNames2=_interopRequireDefault(_getOwnPropertyNames),_classCallCheck2=__webpack_require__(8),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_typeof2=__webpack_require__(136),_typeof3=_interopRequireDefault(_typeof2),_Base=__webpack_require__(6);function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var extend=function(t,e){if(t=t||{},e){for(var i in e){var n=e[i];void 0!==n&&(t[i]=n)}!("function"==typeof window.Event&&e instanceof window.Event)&&e.hasOwnProperty&&e.hasOwnProperty("toString")&&(t.toString=e.toString)}return t},isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},extendDeep=function t(e,i){var n,r=Object.prototype.toString;for(n in e=e||{},i)i.hasOwnProperty(n)&&("object"===(0,_typeof3.default)(i[n])?("[object Null]"!==r.call(e[n])&&"[object Undefined]"!==r.call(e[n])||(e[n]="[object Array]"===r.call(i[n])?[]:{}),t(e[n],i[n])):e[n]=i[n]);return e},copy=function(t,e){var i;if(t=t||{},e)for(var n in t)void 0!==(i=e[n])&&(t[n]=i)},copyExcluce=function(t,e,i){var n;if(t=t||{},e)for(var r in e)void 0!==(n=e[r])&&"function"!=typeof n&&i.indexOf(r)<0&&(t[r]=n)},reset=function(t){for(var e in t=t||{})if(t.hasOwnProperty(e)){if("object"===(0,_typeof3.default)(t[e])&&t[e]instanceof Array){for(var i in t[e])t[e][i].destroy&&t[e][i].destroy();t[e].length=0}else"object"===(0,_typeof3.default)(t[e])&&t[e]instanceof Object&&t[e].destroy&&t[e].destroy();t[e]=null}},getElement=function(){for(var t=[],e=0,i=arguments.length;e<i;e++){var n=arguments[e];if("string"==typeof n&&(n=document.getElementById(n)),1===arguments.length)return n;t.push(n)}return t},isElement=function(t){return!(!t||1!==t.nodeType)},removeItem=function(t,e){for(var i=t.length-1;i>=0;i--)t[i]===e&&t.splice(i,1);return t},indexOf=function(t,e){if(null==t)return-1;if("function"==typeof t.indexOf)return t.indexOf(e);for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1},modifyDOMElement=function(t,e,i,n,r,o,s,a){e&&(t.id=e),i&&(t.style.left=i.x+"px",t.style.top=i.y+"px"),n&&(t.style.width=n.w+"px",t.style.height=n.h+"px"),r&&(t.style.position=r),o&&(t.style.border=o),s&&(t.style.overflow=s),parseFloat(a)>=0&&parseFloat(a)<1?(t.style.filter="alpha(opacity="+100*a+")",t.style.opacity=a):1===parseFloat(a)&&(t.style.filter="",t.style.opacity="")},applyDefaults=function(t,e){t=t||{};var i="function"==typeof window.Event&&e instanceof window.Event;for(var n in e)(void 0===t[n]||!i&&e.hasOwnProperty&&e.hasOwnProperty(n)&&!t.hasOwnProperty(n))&&(t[n]=e[n]);return!i&&e&&e.hasOwnProperty&&e.hasOwnProperty("toString")&&!t.hasOwnProperty("toString")&&(t.toString=e.toString),t},getParameterString=function(t){var e=[];for(var i in t){var n=t[i];if(null!=n&&"function"!=typeof n){var r;if("object"===(void 0===n?"undefined":(0,_typeof3.default)(n))&&n.constructor===Array){for(var o,s=[],a=0,l=n.length;a<l;a++)o=n[a],s.push(encodeURIComponent(null===o||void 0===o?"":o));r=s.join(",")}else r=encodeURIComponent(n);e.push(encodeURIComponent(i)+"="+r)}}return e.join("&")},getWFParameterString=function(t){var e=[];for(var i in t){var n=t[i];if(null!=n&&"function"!=typeof n){var r;if("object"===(void 0===n?"undefined":(0,_typeof3.default)(n))&&n.constructor===Array){for(var o,s=[],a=0,l=n.length;a<l;a++)o=n[a],s.push(encodeURIComponent(null===o||void 0===o?"":o));r=s.join(",")}else r=encodeURIComponent(n);e.push(encodeURIComponent(i)+":"+r)}}return e.join(";")},urlAppend=function(t,e){var i=t;if(e){var n=(t+" ").split(/[?&]/);i+=" "===n.pop()?e:n.length?"&"+e:"?"+e}return i},getParameters=function(t){var e="";if((t=null===t||void 0===t?window.location.href:t).indexOf("?")>-1){var i=t.indexOf("?")+1;t.indexOf("#");var n=t.indexOf("#")>-1?t.indexOf("#"):t.length;e=t.substring(i,n)}for(var r={},o=e.split(/[&;]/),s=0,a=o.length;s<a;++s){var l=o[s].split("=");if(l[0]){var u=l[0];try{u=decodeURIComponent(u)}catch(t){u=unescape(u)}var c=(l[1]||"").replace(/\+/g," ");try{c=decodeURIComponent(c)}catch(t){c=unescape(c)}1==(c=c.split(",")).length&&(c=c[0]),r[u]=c}}return r},IS_GECKO=(ua=navigator.userAgent.toLowerCase(),-1===ua.indexOf("webkit")&&-1!==ua.indexOf("gecko")),ua,Browser=function(){var t,e="",i="",n="pc",r=navigator.userAgent.toLowerCase();return r.indexOf("msie")>-1||r.indexOf("trident")>-1&&r.indexOf("rv")>-1?(e="msie",t=r.match(/msie ([\d.]+)/)||r.match(/rv:([\d.]+)/)):r.indexOf("chrome")>-1?(e="chrome",t=r.match(/chrome\/([\d.]+)/)):r.indexOf("firefox")>-1?(e="firefox",t=r.match(/firefox\/([\d.]+)/)):r.indexOf("opera")>-1?(e="opera",t=r.match(/version\/([\d.]+)/)):r.indexOf("safari")>-1&&(e="safari",t=r.match(/version\/([\d.]+)/)),i=t?t[1]:"",r.indexOf("ipad")>-1||r.indexOf("ipod")>-1||r.indexOf("iphone")>-1?n="apple":r.indexOf("android")>-1&&(i=(t=r.match(/version\/([\d.]+)/))?t[1]:"",n="android"),{name:e,version:i,device:n}}(),getBrowser=function(){return Browser},isSupportCanvas=(checkRes=!0,broz=getBrowser(),document.createElement("canvas").getContext?("firefox"===broz.name&&parseFloat(broz.version)<5&&(checkRes=!1),"safari"===broz.name&&parseFloat(broz.version)<4&&(checkRes=!1),"opera"===broz.name&&parseFloat(broz.version)<10&&(checkRes=!1),"msie"===broz.name&&parseFloat(broz.version)<9&&(checkRes=!1)):checkRes=!1,checkRes),checkRes,broz,supportCanvas=function(){return isSupportCanvas},isInTheSameDomain=function(t){if(!t)return!0;var e=t.indexOf("//"),i=document.location.toString(),n=i.indexOf("//");if(-1===e)return!0;var r,o=r=t.substring(0,e),s=i.substring(n+2);n=s.indexOf("/");var a=s.indexOf(":"),l=s.substring(0,n),u=document.location.protocol;if(-1!==a||(l+=":"+("http:"===u.toLowerCase()?80:443)),u.toLowerCase()!==o.toLowerCase())return!1;var c=(o=t.substring(e+2)).indexOf(":");e=o.indexOf("/");var h,d=o.substring(0,e);return-1!==c?h=o.substring(0,c):(h=o.substring(0,e),d+=":"+("http:"===r.toLowerCase()?80:443)),h===document.domain&&d===l},toJSON=function t(e){var i=e;if(null==i)return null;switch(i.constructor){case String:return i=(i=(i=(i=(i=(i=(i='"'+i.replace(/(["\\])/g,"\\$1")+'"').replace(/\n/g,"\\n")).replace(/\r/g,"\\r")).replace("<","&lt;")).replace(">","&gt;")).replace(/%/g,"%25")).replace(/&/g,"%26");case Array:for(var n=[],r=0,o=i.length;r<o;r++)n.push(t(i[r]));return"["+n.join(",")+"]";case Number:return isFinite(i)?String(i):null;case Boolean:return String(i);case Date:return"{'__type':\"System.DateTime\",'Year':"+i.getFullYear()+",'Month':"+(i.getMonth()+1)+",'Day':"+i.getDate()+",'Hour':"+i.getHours()+",'Minute':"+i.getMinutes()+",'Second':"+i.getSeconds()+",'Millisecond':"+i.getMilliseconds()+",'TimezoneOffset':"+i.getTimezoneOffset()+"}";default:if("object"===(void 0===i?"undefined":(0,_typeof3.default)(i))){if(i.length){for(n=[],r=0,o=i.length;r<o;r++)n.push(t(i[r]));return"["+n.join(",")+"]"}var s=[];for(var a in i)"function"!=typeof i[a]&&"CLASS_NAME"!==a&&s.push("'"+a+"':"+t(i[a]));return s.length>0?"{"+s.join(",")+"}":"{}"}return i.toString()}},transformResult=function(t){return t.responseText&&"string"==typeof t.responseText&&(t=JSON.parse(t.responseText)),t},copyAttributes=function(t,e){if(t=t||{},e)for(var i in e){var n=e[i];void 0!==n&&"CLASS_NAME"!==i&&"function"!=typeof n&&(t[i]=n)}return t},copyAttributesWithClip=function(t,e,i){if(t=t||{},e)for(var n in e){var r=!1;if(i&&i.length)for(var o=0,s=i.length;o<s;o++)if(n===i[o]){r=!0;break}if(!0!==r){var a=e[n];void 0!==a&&"CLASS_NAME"!==n&&"function"!=typeof a&&(t[n]=a)}}return t},cloneObject=function t(e){if(null===e||"object"!==(void 0===e?"undefined":(0,_typeof3.default)(e)))return e;if(e instanceof Date)return(i=new Date).setTime(e.getTime()),i;if(e instanceof Array)return i=e.slice(0);if(e instanceof Object){var i={};for(var n in e)e.hasOwnProperty(n)&&(i[n]=t(e[n]));return i}throw new Error("Unable to copy obj! Its type isn't supported.")},newGuid=function(){for(var t="",e=1;e<=32;e++){t+=Math.floor(16*Math.random()).toString(16),8!=e&&12!=e&&16!=e&&20!=e||(t+="-")}return t},bind=function(t,e){var i=Array.prototype.slice.apply(arguments,[2]);return function(){var n=i.concat(Array.prototype.slice.apply(arguments,[0]));return t.apply(e,n)}},bindAsEventListener=function(t,e){return function(i){return t.call(e,i||window.event)}},getTopAnalysisResult=function(t){switch(t.result.value){case 0:return"Intersect";case 1:return"Disjoin";case 2:return"Include";case 3:return"Adjacent";default:return"Unknown"}},ChineseToUtf8=function(t){return t.replace(/([\u4E00-\u9FA5]|[\uFE30-\uFFA0])/g,function(t){return EncodeUtf8(t)})},EncodeUtf8=function(t){var e=escape(t).split("%"),i="";""!=e[0]&&(i=e[0]);for(var n=1;n<e.length;n++)"u"==e[n].substring(0,1)?i+=Hex2Utf8(Str2Hex(e[n].substring(1,5))):i+="%"+e[n];return i},Str2Hex=function Str2Hex(s){for(var c="",n,ss="0123456789ABCDEF",digS="",i=0;i<s.length;i++)c=s.charAt(i),n=ss.indexOf(c),digS+=Dec2Dig(eval(n));return digS},Hex2Utf8=function Hex2Utf8(s){var retS="",tempS="",ss="";if(16==s.length){tempS="1110"+s.substring(0,4),tempS+="10"+s.substring(4,10),tempS+="10"+s.substring(10,16);for(var sss="0123456789ABCDEF",i=0;i<3;i++)retS+="%",ss=tempS.substring(8*i,8*(eval(i)+1)),retS+=sss.charAt(Dig2Dec(ss.substring(0,4))),retS+=sss.charAt(Dig2Dec(ss.substring(4,8)));return retS}return""},Dig2Dec=function Dig2Dec(s){var retV=0;if(4==s.length){for(var i=0;i<4;i++)retV+=eval(s.charAt(i))*Math.pow(2,3-i);return retV}return-1},Dec2Dig=function(t){for(var e="",i=0,n=0;n<4;n++)t>=(i=Math.pow(2,3-n))?(e+="1",t-=i):e+="0";return e},DeepMerge=function t(e,i){if("[object Object]"===Object.prototype.toString.call(e)&&"[object Object]"===Object.prototype.toString.call(i))for(var n in i)e[n]?e[n]=t(e[n],i[n]):e[n]=i[n];else e="[object Array]"===Object.prototype.toString.call(e)&&"[object Array]"===Object.prototype.toString.call(i)?e.concat(i):i;return e},mergeItem=function(t,e,i,n){e.hasOwnProperty(i)&&("object"!=(0,_typeof3.default)(t[i])||{"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1}[Object.prototype.toString.call(t[i])]?!n&&i in t||(t[i]=e[i]):merge(t[i],e[i],n))},merge=function(t,e,i){for(var n in e)mergeItem(t,e,n,i);return t},mixin=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];for(var n=function t(i){(0,_classCallCheck3.default)(this,t);for(var n=0;n<e.length;n++)s(this,new e[n](i))},r=0;r<e.length;r++){var o=e[r];s(n,o),s(n.prototype,o.prototype),s(n.prototype,new o)}return n;function s(t,e){var i=(0,_getOwnPropertyNames2.default)(e);_getOwnPropertySymbols2.default&&(i=i.concat((0,_getOwnPropertySymbols2.default)(e)));for(var n=0;n<i.length;n++){var r=i[n];if("constructor"!==r&&"prototype"!==r&&"name"!==r&&"length"!==r){var o=(0,_getOwnPropertyDescriptor2.default)(e,r);window.ActiveXObject?(0,_defineProperty2.default)(t,r,o||{}):(0,_defineProperty2.default)(t,r,o)}}}},createCanvasContext2D=function(t,e){var i=document.createElement("CANVAS");return t&&(i.width=t),e&&(i.height=e),i.getContext("2d")};exports.extend=extend,exports.isArray=isArray,exports.extendDeep=extendDeep,exports.copy=copy,exports.copyExcluce=copyExcluce,exports.reset=reset,exports.getElement=getElement,exports.isElement=isElement,exports.removeItem=removeItem,exports.indexOf=indexOf,exports.modifyDOMElement=modifyDOMElement,exports.applyDefaults=applyDefaults,exports.getParameterString=getParameterString,exports.getWFParameterString=getWFParameterString,exports.urlAppend=urlAppend,exports.getParameters=getParameters,exports.IS_GECKO=IS_GECKO,exports.Browser=Browser,exports.getBrowser=getBrowser,exports.isSupportCanvas=isSupportCanvas,exports.supportCanvas=supportCanvas,exports.isInTheSameDomain=isInTheSameDomain,exports.toJSON=toJSON,exports.transformResult=transformResult,exports.copyAttributes=copyAttributes,exports.copyAttributesWithClip=copyAttributesWithClip,exports.cloneObject=cloneObject,exports.newGuid=newGuid,exports.bind=bind,exports.bindAsEventListener=bindAsEventListener,exports.getTopAnalysisResult=getTopAnalysisResult,exports.ChineseToUtf8=ChineseToUtf8,exports.DeepMerge=DeepMerge,exports.merge=merge,exports.mixin=mixin,exports.createCanvasContext2D=createCanvasContext2D,_Base.Zondy.Util.extend=extend,_Base.Zondy.Util.isArray=isArray,_Base.Zondy.Util.extendDeep=extendDeep,_Base.Zondy.Util.copy=copy,_Base.Zondy.Util.copyExcluce=copyExcluce,_Base.Zondy.Util.reset=reset,_Base.Zondy.Util.getElement=getElement,_Base.Zondy.Util.isElement=isElement,_Base.Zondy.Util.removeItem=removeItem,_Base.Zondy.Util.indexOf=indexOf,_Base.Zondy.Util.modifyDOMElement=modifyDOMElement,_Base.Zondy.Util.applyDefaults=applyDefaults,_Base.Zondy.Util.getParameterString=getParameterString,_Base.Zondy.Util.getWFParameterString=getWFParameterString,_Base.Zondy.Util.urlAppend=urlAppend,_Base.Zondy.Util.getParameters=getParameters,_Base.Zondy.IS_GECKO=IS_GECKO,_Base.Zondy.Browser=Browser,_Base.Zondy.Util.getBrowser=getBrowser,_Base.Zondy.Util.isSupportCanvas=isSupportCanvas,_Base.Zondy.Util.supportCanvas=supportCanvas,_Base.Zondy.Util.isInTheSameDomain=isInTheSameDomain,_Base.Zondy.Util.toJSON=toJSON,_Base.Zondy.Util.transformResult=transformResult,_Base.Zondy.Util.copyAttributes=copyAttributes,_Base.Zondy.Util.copyAttributesWithClip=copyAttributesWithClip,_Base.Zondy.Util.cloneObject=cloneObject,_Base.Zondy.Util.newGuid=newGuid,_Base.Zondy.Util.bind=bind,_Base.Zondy.Util.bindAsEventListener=bindAsEventListener,_Base.Zondy.Util.getTopAnalysisResult=getTopAnalysisResult,_Base.Zondy.Util.ChineseToUtf8=ChineseToUtf8,_Base.Zondy.Util.DeepMerge=DeepMerge,_Base.Zondy.Util.merge=merge,_Base.Zondy.Util.mixin=mixin,_Base.Zondy.Util.createCanvasContext2D=createCanvasContext2D},function(t,e,i){"use strict";i.r(e),i.d(e,"defaultFont",function(){return l}),i.d(e,"defaultFillStyle",function(){return u}),i.d(e,"defaultLineCap",function(){return c}),i.d(e,"defaultLineDash",function(){return h}),i.d(e,"defaultLineDashOffset",function(){return d}),i.d(e,"defaultLineJoin",function(){return f}),i.d(e,"defaultMiterLimit",function(){return p}),i.d(e,"defaultStrokeStyle",function(){return g}),i.d(e,"defaultTextAlign",function(){return y}),i.d(e,"defaultTextBaseline",function(){return m}),i.d(e,"defaultPadding",function(){return _}),i.d(e,"defaultLineWidth",function(){return v}),i.d(e,"labelCache",function(){return b}),i.d(e,"checkedFonts",function(){return S}),i.d(e,"textHeights",function(){return C}),i.d(e,"checkFont",function(){return x}),i.d(e,"measureTextHeight",function(){return E}),i.d(e,"measureTextWidth",function(){return P}),i.d(e,"rotateAtOffset",function(){return j}),i.d(e,"resetTransform",function(){return w}),i.d(e,"drawImage",function(){return I});var n=i(40),r=i(26),o=i(11),s=i(172),a=i(14);const l="10px sans-serif",u=[0,0,0,1],c="round",h=[],d=0,f="round",p=10,g=[0,0,0,1],y="center",m="middle",_=[0,0,0,0],v=1,b=new s.default,S={};let O=null;const C={},x=function(){const t=60,e=S,i="32px ",r=["monospace","serif"],s=r.length,a="wmytzilWMYTZIL@#/&?$%10";let l,u;function c(t){const e=T();let n=!0;for(let o=0;o<s;++o){const s=r[o];if(e.font=i+s,u=e.measureText(a).width,t!=s){e.font=i+t+","+s;const r=e.measureText(a).width;n=n&&r!=u}}return n}function h(){let i=!0;for(const n in e)e[n]<t&&(c(n)?(e[n]=t,Object(o.clear)(C),O=null,b.clear()):(++e[n],i=!1));i&&(clearInterval(l),l=void 0)}return function(i){const r=Object(n.g)(i);if(r)for(let i=0,n=r.length;i<n;++i){const n=r[i];n in e||(e[n]=t,c(n)||(e[n]=0,void 0===l&&(l=setInterval(h,32))))}}}();function T(){return O||(O=Object(r.a)(1,1)),O}const E=function(){let t;const e=C;return function(i){let n=e[i];return void 0==n&&(t||((t=document.createElement("span")).textContent="M",t.style.margin=t.style.padding="0 !important",t.style.position="absolute !important",t.style.left="-99999px !important"),t.style.font=i,document.body.appendChild(t),n=e[i]=t.offsetHeight,document.body.removeChild(t)),n}}();function P(t,e){const i=T();return t!=i.font&&(i.font=t),i.measureText(e).width}function j(t,e,i,n){0!==e&&(t.translate(i,n),t.rotate(e),t.translate(-i,-n))}const w=Object(a.c)();function I(t,e,i,n,r,o,s,a,l,u,c){let h;1!=i&&(h=t.globalAlpha,t.globalAlpha=h*i),e&&t.setTransform.apply(t,e),t.drawImage(n,r,o,s,a,l,u,s*c,a*c),h&&(t.globalAlpha=h),e&&t.setTransform.apply(t,w)}},function(t,e,i){"use strict";i.d(e,"a",function(){return r});var n=i(201);function r(t,e){if(!t)throw new n.a(e)}},function(t,e,i){"use strict";function n(){return!0}function r(){return!1}function o(){}i.d(e,"b",function(){return n}),i.d(e,"a",function(){return r}),i.d(e,"c",function(){return o})},function(t,e,i){"use strict";i.r(e),i.d(e,"getChangeEventType",function(){return h});var n=i(1),r=i(121),o=i(137),s=i(29),a=i(11);const l=function(t,e,i){s.default.call(this,t),this.key=e,this.oldValue=i};Object(n.inherits)(l,s.default);const u=function(t){o.default.call(this),Object(n.getUid)(this),this.values_={},void 0!==t&&this.setProperties(t)};Object(n.inherits)(u,o.default);const c={};function h(t){return c.hasOwnProperty(t)?c[t]:c[t]="change:"+t}u.prototype.get=function(t){let e;return this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},u.prototype.getKeys=function(){return Object.keys(this.values_)},u.prototype.getProperties=function(){return Object(a.assign)({},this.values_)},u.prototype.notify=function(t,e){let i;i=h(t),this.dispatchEvent(new l(i,t,e)),i=r.a.PROPERTYCHANGE,this.dispatchEvent(new l(i,t,e))},u.prototype.set=function(t,e,i){if(i)this.values_[t]=e;else{const i=this.values_[t];this.values_[t]=e,i!==e&&this.notify(t,i)}},u.prototype.setProperties=function(t,e){for(const i in t)this.set(i,t[i],e)},u.prototype.unset=function(t,e){if(t in this.values_){const i=this.values_[t];delete this.values_[t],e||this.notify(t,i)}},e.default=u},function(t,e,i){"use strict";function n(t,e){const i=document.createElement("CANVAS");return t&&(i.width=t),e&&(i.height=e),i.getContext("2d")}function r(t){let e=t.offsetWidth;const i=getComputedStyle(t);return e+=parseInt(i.marginLeft,10)+parseInt(i.marginRight,10)}function o(t){let e=t.offsetHeight;const i=getComputedStyle(t);return e+=parseInt(i.marginTop,10)+parseInt(i.marginBottom,10)}function s(t,e){const i=e.parentNode;i&&i.replaceChild(t,e)}function a(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function l(t){for(;t.lastChild;)t.removeChild(t.lastChild)}i.d(e,"a",function(){return n}),i.d(e,"c",function(){return r}),i.d(e,"b",function(){return o}),i.d(e,"f",function(){return s}),i.d(e,"e",function(){return a}),i.d(e,"d",function(){return l})},function(t,e,i){"use strict";i.r(e),i.d(e,"add",function(){return o}),i.d(e,"closestOnCircle",function(){return s}),i.d(e,"closestOnSegment",function(){return a}),i.d(e,"createStringXY",function(){return l}),i.d(e,"degreesToStringHDMS",function(){return u}),i.d(e,"format",function(){return c}),i.d(e,"equals",function(){return h}),i.d(e,"rotate",function(){return d}),i.d(e,"scale",function(){return f}),i.d(e,"squaredDistance",function(){return p}),i.d(e,"distance",function(){return g}),i.d(e,"squaredDistanceToSegment",function(){return y}),i.d(e,"toStringHDMS",function(){return m}),i.d(e,"toStringXY",function(){return _});var n=i(18),r=i(113);function o(t,e){return t[0]+=e[0],t[1]+=e[1],t}function s(t,e){const i=e.getRadius(),n=e.getCenter(),r=n[0],o=n[1];let s=t[0]-r;const a=t[1]-o;0===s&&0===a&&(s=1);const l=Math.sqrt(s*s+a*a);return[r+i*s/l,o+i*a/l]}function a(t,e){const i=t[0],n=t[1],r=e[0],o=e[1],s=r[0],a=r[1],l=o[0],u=o[1],c=l-s,h=u-a,d=0===c&&0===h?0:(c*(i-s)+h*(n-a))/(c*c+h*h||0);let f,p;return d<=0?(f=s,p=a):d>=1?(f=l,p=u):(f=s+d*c,p=a+d*h),[f,p]}function l(t){return function(e){return _(e,t)}}function u(t,e,i){const o=Object(n.d)(e+180,360)-180,s=Math.abs(3600*o),a=i||0,l=Math.pow(10,a);let u=Math.floor(s/3600),c=Math.floor((s-3600*u)/60),h=s-3600*u-60*c;return(h=Math.ceil(h*l)/l)>=60&&(h=0,c+=1),c>=60&&(c=0,u+=1),u+"° "+Object(r.b)(c,2)+"′ "+Object(r.b)(h,2,a)+"″"+(0==o?"":" "+t.charAt(o<0?1:0))}function c(t,e,i){return t?e.replace("{x}",t[0].toFixed(i)).replace("{y}",t[1].toFixed(i)):""}function h(t,e){let i=!0;for(let n=t.length-1;n>=0;--n)if(t[n]!=e[n]){i=!1;break}return i}function d(t,e){const i=Math.cos(e),n=Math.sin(e),r=t[0]*i-t[1]*n,o=t[1]*i+t[0]*n;return t[0]=r,t[1]=o,t}function f(t,e){return t[0]*=e,t[1]*=e,t}function p(t,e){const i=t[0]-e[0],n=t[1]-e[1];return i*i+n*n}function g(t,e){return Math.sqrt(p(t,e))}function y(t,e){return p(t,a(t,e))}function m(t,e){return t?u("NS",t[1],e)+" "+u("EW",t[0],e):""}function _(t,e){return c(t,"{x}, {y}",e)}},function(t,e,i){"use strict";i.r(e),i.d(e,"centroid",function(){return p}),i.d(e,"handleEvent",function(){return g});var n=i(1),r=i(24),o=i(32),s=i(78),a=i(35),l=i(11);const u=r.c,c=r.a,h=r.a,d=r.c,f=function(t){const e=t||{};a.default.call(this,{handleEvent:e.handleEvent||g}),this.handleDownEvent_=e.handleDownEvent?e.handleDownEvent:h,this.handleDragEvent_=e.handleDragEvent?e.handleDragEvent:u,this.handleMoveEvent_=e.handleMoveEvent?e.handleMoveEvent:d,this.handleUpEvent_=e.handleUpEvent?e.handleUpEvent:c,this.handlingDownUpSequence=!1,this.trackedPointers_={},this.targetPointers=[]};function p(t){const e=t.length;let i=0,n=0;for(let r=0;r<e;r++)i+=t[r].clientX,n+=t[r].clientY;return[i/e,n/e]}function g(t){if(!(t instanceof s.default))return!0;let e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==o.default.POINTERDRAG)this.handleDragEvent_(t);else if(t.type==o.default.POINTERUP){const e=this.handleUpEvent_(t);this.handlingDownUpSequence=e&&this.targetPointers.length>0}}else if(t.type==o.default.POINTERDOWN){const i=this.handleDownEvent_(t);this.handlingDownUpSequence=i,e=this.shouldStopEvent(i)}else t.type==o.default.POINTERMOVE&&this.handleMoveEvent_(t);return!e}Object(n.inherits)(f,a.default),f.prototype.updateTrackedPointers_=function(t){if(function(t){const e=t.type;return e===o.default.POINTERDOWN||e===o.default.POINTERDRAG||e===o.default.POINTERUP}(t)){const e=t.pointerEvent,i=e.pointerId.toString();t.type==o.default.POINTERUP?delete this.trackedPointers_[i]:t.type==o.default.POINTERDOWN?this.trackedPointers_[i]=e:i in this.trackedPointers_&&(this.trackedPointers_[i]=e),this.targetPointers=Object(l.getValues)(this.trackedPointers_)}},f.prototype.shouldStopEvent=function(t){return t},e.default=f},function(t,e,i){"use strict";i.r(e),i.d(e,"stopPropagation",function(){return r}),i.d(e,"preventDefault",function(){return o});const n=function(t){this.propagationStopped,this.type=t,this.target=null};function r(t){t.stopPropagation()}function o(t){t.preventDefault()}n.prototype.preventDefault=n.prototype.stopPropagation=function(){this.propagationStopped=!0},e.default=n},function(t,e,i){"use strict";e.a={IDLE:0,LOADING:1,LOADED:2,ERROR:3}},function(t,e,i){"use strict";e.a={CIRCLE:"Circle",DEFAULT:"Default",IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"}},function(t,e,i){"use strict";i.r(e);var n=i(10);e.default={SINGLECLICK:"singleclick",CLICK:n.default.CLICK,DBLCLICK:n.default.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}},function(t,e,i){"use strict";i.r(e),i.d(e,"transformWithOptions",function(){return a});var n=i(77),r=i(11),o=i(9);const s=function(){this.dataProjection=null,this.defaultFeatureProjection=null};function a(t,e,i){const r=i?Object(o.get)(i.featureProjection):null,s=i?Object(o.get)(i.dataProjection):null;let a;if(a=r&&s&&!Object(o.equivalent)(r,s)?t instanceof n.default?(e?t.clone():t).transform(e?r:s,e?s:r):Object(o.transformExtent)(t,s,r):t,e&&i&&void 0!==i.decimals){const e=Math.pow(10,i.decimals),n=function(t){for(let i=0,n=t.length;i<n;++i)t[i]=Math.round(t[i]*e)/e;return t};a===t&&(a=a.clone()),a.applyTransform(n)}return a}s.prototype.getReadOptions=function(t,e){let i;return e&&(i={dataProjection:e.dataProjection?e.dataProjection:this.readProjection(t),featureProjection:e.featureProjection}),this.adaptOptions(i)},s.prototype.adaptOptions=function(t){return Object(r.assign)({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)},s.prototype.getLastExtent=function(){return null},s.prototype.getType=function(){},s.prototype.readFeature=function(t,e){},s.prototype.readFeatures=function(t,e){},s.prototype.readGeometry=function(t,e){},s.prototype.readProjection=function(t){},s.prototype.writeFeature=function(t,e){},s.prototype.writeFeatures=function(t,e){},s.prototype.writeGeometry=function(t,e){},e.default=s},function(t,e,i){"use strict";i.r(e),e.default={ANIMATING:0,INTERACTING:1}},function(t,e,i){"use strict";i.r(e),i.d(e,"pan",function(){return u}),i.d(e,"rotate",function(){return c}),i.d(e,"rotateWithoutConstraints",function(){return h}),i.d(e,"zoom",function(){return d}),i.d(e,"zoomByDelta",function(){return f}),i.d(e,"zoomWithoutConstraints",function(){return p});var n=i(1),r=i(25),o=i(59),s=i(190),a=i(18);const l=function(t){r.default.call(this),this.map_=null,this.setActive(!0),this.handleEvent=t.handleEvent};function u(t,e,i){const n=t.getCenter();if(n){const r=t.constrainCenter([n[0]+e[0],n[1]+e[1]]);i?t.animate({duration:i,easing:o.linear,center:r}):t.setCenter(r)}}function c(t,e,i,n){h(t,e=t.constrainRotation(e,0),i,n)}function h(t,e,i,n){if(void 0!==e){const r=t.getRotation(),s=t.getCenter();void 0!==r&&s&&n>0?t.animate({rotation:e,anchor:i,duration:n,easing:o.easeOut}):t.rotate(e,i)}}function d(t,e,i,n,r){p(t,e=t.constrainResolution(e,0,r),i,n)}function f(t,e,i,n){const r=t.getResolution();let o=t.constrainResolution(r,e,0);if(void 0!==o){const e=t.getResolutions();o=Object(a.a)(o,t.getMinResolution()||e[e.length-1],t.getMaxResolution()||e[0])}if(i&&void 0!==o&&o!==r){const e=t.getCenter();let n=t.calculateCenterZoom(o,i);n=t.constrainCenter(n),i=[(o*e[0]-r*n[0])/(o-r),(o*e[1]-r*n[1])/(o-r)]}p(t,o,i,n)}function p(t,e,i,n){if(e){const r=t.getResolution(),s=t.getCenter();if(void 0!==r&&s&&e!==r&&n)t.animate({resolution:e,anchor:i,duration:n,easing:o.easeOut});else{if(i){const n=t.calculateCenterZoom(e,i);t.setCenter(n)}t.setResolution(e)}}}Object(n.inherits)(l,r.default),l.prototype.getActive=function(){return this.get(s.a.ACTIVE)},l.prototype.getMap=function(){return this.map_},l.prototype.setActive=function(t){this.set(s.a.ACTIVE,t)},l.prototype.setMap=function(t){this.map_=t},e.default=l},function(t,e,i){"use strict";i.r(e),i.d(e,"circular",function(){return C}),i.d(e,"fromExtent",function(){return x}),i.d(e,"fromCircle",function(){return T}),i.d(e,"makeRegular",function(){return E});var n=i(1),r=i(12),o=i(2),s=i(19),a=i(5),l=i(154),u=i(39),c=i(48),h=i(205),d=i(173),f=i(97),p=i(102),g=i(81),y=i(82),m=i(187),_=i(174),v=i(87),b=i(118),S=i(18);const O=function(t,e){c.default.call(this),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,this.setCoordinates(t,e)};function C(t,e,i,n){const o=i||32,a=[];for(let i=0;i<o;++i)Object(r.c)(a,Object(h.offset)(t,e,2*Math.PI*i/o,n));a.push(a[0],a[1]);const l=new O(null);return l.setFlatCoordinates(s.default.XY,a,[a.length]),l}function x(t){const e=t[0],i=t[1],n=t[2],r=t[3],o=[e,i,e,r,n,r,n,i,e,i],a=new O(null);return a.setFlatCoordinates(s.default.XY,o,[o.length]),a}function T(t,e,i){const n=e||32,r=t.getStride(),o=t.getLayout(),s=new O(null,o),a=r*(n+1),l=new Array(a);for(let t=0;t<a;t++)l[t]=0;const u=[l.length];return s.setFlatCoordinates(o,l,u),E(s,t.getCenter(),t.getRadius(),i),s}function E(t,e,i,n){const r=t.getFlatCoordinates(),o=t.getLayout(),s=t.getStride(),a=t.getEnds(),l=r.length/s-1,u=n||0;for(let t=0;t<=l;++t){const n=t*s,o=u+2*Object(S.d)(t,l)*Math.PI/l;r[n]=e[0]+i*Math.cos(o),r[n+1]=e[1]+i*Math.sin(o)}t.setFlatCoordinates(o,r,a)}Object(n.inherits)(O,c.default),O.prototype.appendLinearRing=function(t){this.flatCoordinates?Object(r.c)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},O.prototype.clone=function(){const t=new O(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),this.ends_.slice()),t},O.prototype.closestPointXY=function(t,e,i,n){return n<Object(o.closestSquaredDistanceXY)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(f.a)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(f.b)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,i,n))},O.prototype.containsXY=function(t,e){return Object(p.c)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},O.prototype.getArea=function(){return Object(d.b)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},O.prototype.getCoordinates=function(t){let e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),Object(v.d)(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,Object(y.b)(e,0,this.ends_,this.stride)},O.prototype.getEnds=function(){return this.ends_},O.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=Object(o.getCenter)(this.getExtent());this.flatInteriorPoint_=Object(m.a)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},O.prototype.getInteriorPoint=function(){return new u.default(this.getFlatInteriorPoint(),s.default.XYM)},O.prototype.getLinearRingCount=function(){return this.ends_.length},O.prototype.getLinearRing=function(t){if(t<0||this.ends_.length<=t)return null;const e=new l.default(null);return e.setFlatCoordinates(this.layout,this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t])),e},O.prototype.getLinearRings=function(){const t=this.layout,e=this.flatCoordinates,i=this.ends_,n=[];let r=0;for(let o=0,s=i.length;o<s;++o){const s=i[o],a=new l.default(null);a.setFlatCoordinates(t,e.slice(r,s)),n.push(a),r=s}return n},O.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;Object(v.b)(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Object(v.d)(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},O.prototype.getSimplifiedGeometryInternal=function(t){const e=[],i=[];e.length=Object(b.c)(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,i);const n=new O(null);return n.setFlatCoordinates(s.default.XY,e,i),n},O.prototype.getType=function(){return a.default.POLYGON},O.prototype.intersectsExtent=function(t){return Object(_.c)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},O.prototype.setCoordinates=function(t,e){if(t){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=Object(g.c)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()}else this.setFlatCoordinates(s.default.XY,null,this.ends_)},O.prototype.setFlatCoordinates=function(t,e,i){this.setFlatCoordinatesInternal(t,e),this.ends_=i,this.changed()},e.default=O},function(t,e,i){"use strict";i.r(e),i.d(e,"altKeyOnly",function(){return a}),i.d(e,"altShiftKeysOnly",function(){return l}),i.d(e,"focus",function(){return u}),i.d(e,"always",function(){return c}),i.d(e,"click",function(){return h}),i.d(e,"mouseActionButton",function(){return d}),i.d(e,"never",function(){return f}),i.d(e,"pointerMove",function(){return p}),i.d(e,"singleClick",function(){return g}),i.d(e,"doubleClick",function(){return y}),i.d(e,"noModifierKeys",function(){return m}),i.d(e,"platformModifierKeyOnly",function(){return _}),i.d(e,"shiftKeyOnly",function(){return v}),i.d(e,"targetNotEditable",function(){return b}),i.d(e,"mouseOnly",function(){return S}),i.d(e,"primaryAction",function(){return O});var n=i(32),r=i(23),o=i(24),s=i(47);const a=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},l=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},u=function(t){return t.target.getTargetElement()===document.activeElement},c=o.b,h=function(t){return t.type==n.default.CLICK},d=function(t){const e=t.originalEvent;return 0==e.button&&!(s.WEBKIT&&s.MAC&&e.ctrlKey)},f=o.a,p=function(t){return"pointermove"==t.type},g=function(t){return t.type==n.default.SINGLECLICK},y=function(t){return t.type==n.default.DBLCLICK},m=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},_=function(t){const e=t.originalEvent;return!e.altKey&&(s.MAC?e.metaKey:e.ctrlKey)&&!e.shiftKey},v=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},b=function(t){const e=t.originalEvent.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e},S=function(t){return Object(r.a)(t.pointerEvent,56),"mouse"==t.pointerEvent.pointerType},O=function(t){const e=t.pointerEvent;return e.isPrimary&&0===e.button}},function(t,e,i){"use strict";i.r(e),i.d(e,"createStyleFunction",function(){return h});var n=i(23),r=i(4),o=i(10),s=i(1),a=i(25),l=i(77),u=i(62);const c=function(t){if(a.default.call(this),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,Object(r.listen)(this,Object(a.getChangeEventType)(this.geometryName_),this.handleGeometryChanged_,this),void 0!==t)if(t instanceof l.default||!t){const e=t;this.setGeometry(e)}else{const e=t;this.setProperties(e)}};function h(t){if("function"==typeof t)return t;{let e;return Array.isArray(t)?e=t:(Object(n.a)(t instanceof u.default,41),e=[t]),function(){return e}}}Object(s.inherits)(c,a.default),c.prototype.clone=function(){const t=new c(this.getProperties());t.setGeometryName(this.getGeometryName());const e=this.getGeometry();e&&t.setGeometry(e.clone());const i=this.getStyle();return i&&t.setStyle(i),t},c.prototype.getGeometry=function(){return this.get(this.geometryName_)},c.prototype.getId=function(){return this.id_},c.prototype.getGeometryName=function(){return this.geometryName_},c.prototype.getStyle=function(){return this.style_},c.prototype.getStyleFunction=function(){return this.styleFunction_},c.prototype.handleGeometryChange_=function(){this.changed()},c.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(Object(r.unlistenByKey)(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=Object(r.listen)(t,o.default.CHANGE,this.handleGeometryChange_,this)),this.changed()},c.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},c.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?h(t):void 0,this.changed()},c.prototype.setId=function(t){this.id_=t,this.changed()},c.prototype.setGeometryName=function(t){Object(r.unlisten)(this,Object(a.getChangeEventType)(this.geometryName_),this.handleGeometryChanged_,this),this.geometryName_=t,Object(r.listen)(this,Object(a.getChangeEventType)(this.geometryName_),this.handleGeometryChanged_,this),this.handleGeometryChanged_()},e.default=c},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(2),o=i(19),s=i(5),a=i(48),l=i(81),u=i(18);const c=function(t,e){a.default.call(this),this.setCoordinates(t,e)};Object(n.inherits)(c,a.default),c.prototype.clone=function(){const t=new c(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice()),t},c.prototype.closestPointXY=function(t,e,i,n){const r=this.flatCoordinates,o=Object(u.g)(t,e,r[0],r[1]);if(o<n){const t=this.stride;for(let e=0;e<t;++e)i[e]=r[e];return i.length=t,o}return n},c.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},c.prototype.computeExtent=function(t){return Object(r.createOrUpdateFromCoordinate)(this.flatCoordinates,t)},c.prototype.getType=function(){return s.default.POINT},c.prototype.intersectsExtent=function(t){return Object(r.containsXY)(t,this.flatCoordinates[0],this.flatCoordinates[1])},c.prototype.setCoordinates=function(t,e){t?(this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(l.a)(this.flatCoordinates,0,t,this.stride),this.changed()):this.setFlatCoordinates(o.default.XY,null)},c.prototype.setFlatCoordinates=function(t,e){this.setFlatCoordinatesInternal(t,e),this.changed()},e.default=c},function(t,e,i){"use strict";i.d(e,"c",function(){return n}),i.d(e,"d",function(){return r}),i.d(e,"e",function(){return o}),i.d(e,"f",function(){return s}),i.d(e,"b",function(){return a}),i.d(e,"a",function(){return l}),i.d(e,"g",function(){return u});const n="ol-hidden",r="ol-selectable",o="ol-unselectable",s="ol-unsupported",a="ol-control",l="ol-collapsed",u=function(){let t;const e={};return function(i){if(t||(t=document.createElement("div").style),!(i in e)){t.font=i;const n=t.fontFamily;if(t.font="",!n)return null;e[i]=n.split(/,\s?/)}return e[i]}}()},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(12),o=i(2),s=i(19),a=i(5),l=i(48),u=i(97),c=i(81),h=i(82),d=i(156),f=i(174),p=i(270),g=i(269),y=i(118);const m=function(t,e){l.default.call(this),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.setCoordinates(t,e)};Object(n.inherits)(m,l.default),m.prototype.appendCoordinate=function(t){this.flatCoordinates?Object(r.c)(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},m.prototype.clone=function(){const t=new m(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice()),t},m.prototype.closestPointXY=function(t,e,i,n){return n<Object(o.closestSquaredDistanceXY)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(u.e)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(u.d)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,i,n))},m.prototype.forEachSegment=function(t){return Object(g.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},m.prototype.getCoordinateAtM=function(t,e){if(this.layout!=s.default.XYM&&this.layout!=s.default.XYZM)return null;const i=void 0!==e&&e;return Object(d.b)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i)},m.prototype.getCoordinates=function(){return Object(h.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},m.prototype.getCoordinateAt=function(t,e){return Object(d.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e)},m.prototype.getLength=function(){return Object(p.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},m.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},m.prototype.getSimplifiedGeometryInternal=function(t){const e=[];e.length=Object(y.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0);const i=new m(null);return i.setFlatCoordinates(s.default.XY,e),i},m.prototype.getType=function(){return a.default.LINE_STRING},m.prototype.intersectsExtent=function(t){return Object(f.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},m.prototype.setCoordinates=function(t,e){t?(this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(c.b)(this.flatCoordinates,0,t,this.stride),this.changed()):this.setFlatCoordinates(s.default.XY,null)},m.prototype.setFlatCoordinates=function(t,e){this.setFlatCoordinatesInternal(t,e),this.changed()},e.default=m},function(t,e,i){"use strict";i.r(e),i.d(e,"CollectionEvent",function(){return u});var n=i(1),r=i(201),o=i(52),s=i(25),a=i(29);const l="length",u=function(t,e){a.default.call(this,t),this.element=e};Object(n.inherits)(u,a.default);const c=function(t,e){s.default.call(this);const i=e||{};if(this.unique_=!!i.unique,this.array_=t||[],this.unique_)for(let t=0,e=this.array_.length;t<e;++t)this.assertUnique_(this.array_[t],t);this.updateLength_()};Object(n.inherits)(c,s.default),c.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},c.prototype.extend=function(t){for(let e=0,i=t.length;e<i;++e)this.push(t[e]);return this},c.prototype.forEach=function(t){const e=this.array_;for(let i=0,n=e.length;i<n;++i)t(e[i],i,e)},c.prototype.getArray=function(){return this.array_},c.prototype.item=function(t){return this.array_[t]},c.prototype.getLength=function(){return this.get(l)},c.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new u(o.default.ADD,e))},c.prototype.pop=function(){return this.removeAt(this.getLength()-1)},c.prototype.push=function(t){this.unique_&&this.assertUnique_(t);const e=this.getLength();return this.insertAt(e,t),this.getLength()},c.prototype.remove=function(t){const e=this.array_;for(let i=0,n=e.length;i<n;++i)if(e[i]===t)return this.removeAt(i)},c.prototype.removeAt=function(t){const e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new u(o.default.REMOVE,e)),e},c.prototype.setAt=function(t,e){const i=this.getLength();if(t<i){this.unique_&&this.assertUnique_(e,t);const i=this.array_[t];this.array_[t]=e,this.dispatchEvent(new u(o.default.REMOVE,i)),this.dispatchEvent(new u(o.default.ADD,e))}else{for(let e=i;e<t;++e)this.insertAt(e,void 0);this.insertAt(t,e)}},c.prototype.updateLength_=function(){this.set(l,this.array_.length)},c.prototype.assertUnique_=function(t,e){for(let i=0,n=this.array_.length;i<n;++i)if(this.array_[i]===t&&i!==e)throw new r.a(58)},e.default=c},function(t,e,i){"use strict";i.r(e),i.d(e,"GMLNS",function(){return v});var n=i(1),r=i(12),o=i(38),s=i(33),a=i(85),l=i(19),u=i(41),c=i(154),h=i(58),d=i(71),f=i(76),p=i(39),g=i(36),y=i(11),m=i(9),_=i(0);const v="http://www.opengis.net/gml",b=function(t){const e=t||{};this.featureType=e.featureType,this.featureNS=e.featureNS,this.srsName=e.srsName,this.schemaLocation="",this.FEATURE_COLLECTION_PARSERS={},this.FEATURE_COLLECTION_PARSERS[v]={featureMember:Object(_.makeReplacer)(b.prototype.readFeaturesInternal),featureMembers:Object(_.makeReplacer)(b.prototype.readFeaturesInternal)},a.a.call(this)};Object(n.inherits)(b,a.a);const S=/^[\s\xa0]*$/;b.prototype.readFeaturesInternal=function(t,e){const i=t.localName;let n=null;if("FeatureCollection"==i)n="http://www.opengis.net/wfs"===t.namespaceURI?Object(_.pushParseAndPop)([],this.FEATURE_COLLECTION_PARSERS,t,e,this):Object(_.pushParseAndPop)(null,this.FEATURE_COLLECTION_PARSERS,t,e,this);else if("featureMembers"==i||"featureMember"==i){const r=e[0];let o=r.featureType,s=r.featureNS;const a="p",l="p0";if(!o&&t.childNodes){o=[],s={};for(let e=0,i=t.childNodes.length;e<i;++e){const i=t.childNodes[e];if(1===i.nodeType){const t=i.nodeName.split(":").pop();if(-1===o.indexOf(t)){let e="",n=0;const r=i.namespaceURI;for(const t in s){if(s[t]===r){e=t;break}++n}e||(s[e=a+n]=r),o.push(e+":"+t)}}}"featureMember"!=i&&(r.featureType=o,r.featureNS=s)}if("string"==typeof s){const t=s;(s={})[l]=t}const u={},c=Array.isArray(o)?o:[o];for(const t in s){const e={};for(let n=0,r=c.length;n<r;++n){(-1===c[n].indexOf(":")?l:c[n].split(":")[0])===t&&(e[c[n].split(":").pop()]="featureMembers"==i?Object(_.makeArrayPusher)(this.readFeatureElement,this):Object(_.makeReplacer)(this.readFeatureElement,this))}u[s[t]]=e}n="featureMember"==i?Object(_.pushParseAndPop)(void 0,u,t,e):Object(_.pushParseAndPop)([],u,t,e)}return null===n&&(n=[]),n},b.prototype.readGeometryElement=function(t,e){const i=e[0];i.srsName=t.firstElementChild.getAttribute("srsName"),i.srsDimension=t.firstElementChild.getAttribute("srsDimension");const n=Object(_.pushParseAndPop)(null,this.GEOMETRY_PARSERS_,t,e,this);return n?Object(s.transformWithOptions)(n,!1,i):void 0},b.prototype.readFeatureElement=function(t,e){let i;const n=t.getAttribute("fid")||Object(_.getAttributeNS)(t,v,"id"),r={};let s;for(i=t.firstElementChild;i;i=i.nextElementSibling){const t=i.localName;if(0===i.childNodes.length||1===i.childNodes.length&&(3===i.firstChild.nodeType||4===i.firstChild.nodeType)){let e=Object(_.getAllTextContent)(i,!1);S.test(e)&&(e=void 0),r[t]=e}else"boundedBy"!==t&&(s=t),r[t]=this.readGeometryElement(i,e)}const a=new o.default(r);return s&&a.setGeometryName(s),n&&a.setId(n),a},b.prototype.readPoint=function(t,e){const i=this.readFlatCoordinatesFromNode_(t,e);if(i){const t=new p.default(null);return t.setFlatCoordinates(l.default.XYZ,i),t}},b.prototype.readMultiPoint=function(t,e){const i=Object(_.pushParseAndPop)([],this.MULTIPOINT_PARSERS_,t,e,this);return i?new d.default(i):void 0},b.prototype.readMultiLineString=function(t,e){const i=Object(_.pushParseAndPop)([],this.MULTILINESTRING_PARSERS_,t,e,this);if(i){const t=new h.default(null);return t.setLineStrings(i),t}},b.prototype.readMultiPolygon=function(t,e){const i=Object(_.pushParseAndPop)([],this.MULTIPOLYGON_PARSERS_,t,e,this);if(i){const t=new f.default(null);return t.setPolygons(i),t}},b.prototype.pointMemberParser_=function(t,e){Object(_.parseNode)(this.POINTMEMBER_PARSERS_,t,e,this)},b.prototype.lineStringMemberParser_=function(t,e){Object(_.parseNode)(this.LINESTRINGMEMBER_PARSERS_,t,e,this)},b.prototype.polygonMemberParser_=function(t,e){Object(_.parseNode)(this.POLYGONMEMBER_PARSERS_,t,e,this)},b.prototype.readLineString=function(t,e){const i=this.readFlatCoordinatesFromNode_(t,e);if(i){const t=new u.default(null);return t.setFlatCoordinates(l.default.XYZ,i),t}},b.prototype.readFlatLinearRing_=function(t,e){const i=Object(_.pushParseAndPop)(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS_,t,e,this);return i||void 0},b.prototype.readLinearRing=function(t,e){const i=this.readFlatCoordinatesFromNode_(t,e);if(i){const t=new c.default(null);return t.setFlatCoordinates(l.default.XYZ,i),t}},b.prototype.readPolygon=function(t,e){const i=Object(_.pushParseAndPop)([null],this.FLAT_LINEAR_RINGS_PARSERS_,t,e,this);if(i&&i[0]){const t=new g.default(null),e=i[0],n=[e.length];let o,s;for(o=1,s=i.length;o<s;++o)Object(r.c)(e,i[o]),n.push(e.length);return t.setFlatCoordinates(l.default.XYZ,e,n),t}},b.prototype.readFlatCoordinatesFromNode_=function(t,e){return Object(_.pushParseAndPop)(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS_,t,e,this)},b.prototype.MULTIPOINT_PARSERS_={"http://www.opengis.net/gml":{pointMember:Object(_.makeArrayPusher)(b.prototype.pointMemberParser_),pointMembers:Object(_.makeArrayPusher)(b.prototype.pointMemberParser_)}},b.prototype.MULTILINESTRING_PARSERS_={"http://www.opengis.net/gml":{lineStringMember:Object(_.makeArrayPusher)(b.prototype.lineStringMemberParser_),lineStringMembers:Object(_.makeArrayPusher)(b.prototype.lineStringMemberParser_)}},b.prototype.MULTIPOLYGON_PARSERS_={"http://www.opengis.net/gml":{polygonMember:Object(_.makeArrayPusher)(b.prototype.polygonMemberParser_),polygonMembers:Object(_.makeArrayPusher)(b.prototype.polygonMemberParser_)}},b.prototype.POINTMEMBER_PARSERS_={"http://www.opengis.net/gml":{Point:Object(_.makeArrayPusher)(b.prototype.readFlatCoordinatesFromNode_)}},b.prototype.LINESTRINGMEMBER_PARSERS_={"http://www.opengis.net/gml":{LineString:Object(_.makeArrayPusher)(b.prototype.readLineString)}},b.prototype.POLYGONMEMBER_PARSERS_={"http://www.opengis.net/gml":{Polygon:Object(_.makeArrayPusher)(b.prototype.readPolygon)}},b.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:Object(_.makeReplacer)(b.prototype.readFlatLinearRing_)}},b.prototype.readGeometryFromNode=function(t,e){const i=this.readGeometryElement(t,[this.getReadOptions(t,e||{})]);return i||null},b.prototype.readFeatures,b.prototype.readFeaturesFromNode=function(t,e){const i={featureType:this.featureType,featureNS:this.featureNS};return e&&Object(y.assign)(i,this.getReadOptions(t,e)),this.readFeaturesInternal(t,[i])||[]},b.prototype.readProjectionFromNode=function(t){return Object(m.get)(this.srsName?this.srsName:t.firstElementChild.getAttribute("srsName"))},e.default=b},function(t,e,i){"use strict";e.a={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"}},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(24),o=i(138),s=i(25),a=i(26),l=i(4);const u=function(t){s.default.call(this),this.element=t.element?t.element:null,this.target_=null,this.map_=null,this.listenerKeys=[],this.render=t.render?t.render:r.c,t.target&&this.setTarget(t.target)};Object(n.inherits)(u,s.default),u.prototype.disposeInternal=function(){Object(a.e)(this.element),s.default.prototype.disposeInternal.call(this)},u.prototype.getMap=function(){return this.map_},u.prototype.setMap=function(t){this.map_&&Object(a.e)(this.element);for(let t=0,e=this.listenerKeys.length;t<e;++t)Object(l.unlistenByKey)(this.listenerKeys[t]);if(this.listenerKeys.length=0,this.map_=t,this.map_){(this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==r.c&&this.listenerKeys.push(Object(l.listen)(t,o.a.POSTRENDER,this.render,this)),t.render()}},u.prototype.setTarget=function(t){this.target_="string"==typeof t?document.getElementById(t):t},e.default=u},function(t,e,i){"use strict";e.__esModule=!0;var n=o(i(13)),r=o(i(365));function o(t){return t&&t.__esModule?t:{default:t}}e.default=function t(e,i,o){null===e&&(e=Function.prototype);var s=(0,r.default)(e,i);if(void 0===s){var a=(0,n.default)(e);return null===a?void 0:t(a,i,o)}if("value"in s)return s.value;var l=s.get;return void 0!==l?l.call(o):void 0}},function(t,e,i){"use strict";i.r(e),i.d(e,"FIREFOX",function(){return o}),i.d(e,"SAFARI",function(){return s}),i.d(e,"WEBKIT",function(){return a}),i.d(e,"MAC",function(){return l}),i.d(e,"DEVICE_PIXEL_RATIO",function(){return u}),i.d(e,"CANVAS_LINE_DASH",function(){return c}),i.d(e,"GEOLOCATION",function(){return h}),i.d(e,"TOUCH",function(){return d}),i.d(e,"POINTER",function(){return f}),i.d(e,"MSPOINTER",function(){return p});var n=i(7);i.d(e,"WEBGL",function(){return n.o});const r="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",o=-1!==r.indexOf("firefox"),s=-1!==r.indexOf("safari")&&-1==r.indexOf("chrom"),a=-1!==r.indexOf("webkit")&&-1==r.indexOf("edge"),l=-1!==r.indexOf("macintosh"),u=window.devicePixelRatio||1,c=function(){let t=!1;try{t=!!document.createElement("CANVAS").getContext("2d").setLineDash}catch(t){}return t}(),h="geolocation"in navigator,d="ontouchstart"in window,f="PointerEvent"in window,p=!!navigator.msPointerEnabled},function(t,e,i){"use strict";i.r(e),i.d(e,"getStrideForLayout",function(){return h}),i.d(e,"transformGeom2D",function(){return d});var n=i(1),r=i(24),o=i(2),s=i(77),a=i(19),l=i(55),u=i(11);const c=function(){s.default.call(this),this.layout=a.default.XY,this.stride=2,this.flatCoordinates=null};function h(t){let e;return t==a.default.XY?e=2:t==a.default.XYZ||t==a.default.XYM?e=3:t==a.default.XYZM&&(e=4),e}function d(t,e,i){const n=t.getFlatCoordinates();if(n){const r=t.getStride();return Object(l.c)(n,0,n.length,r,e,i)}return null}Object(n.inherits)(c,s.default),c.prototype.containsXY=r.a,c.prototype.computeExtent=function(t){return Object(o.createOrUpdateFromFlatCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},c.prototype.getCoordinates=function(){},c.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},c.prototype.getFlatCoordinates=function(){return this.flatCoordinates},c.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},c.prototype.getLayout=function(){return this.layout},c.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!=this.getRevision()&&(Object(u.clear)(this.simplifiedGeometryCache),this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=t.toString();if(this.simplifiedGeometryCache.hasOwnProperty(e))return this.simplifiedGeometryCache[e];{const i=this.getSimplifiedGeometryInternal(t);return i.getFlatCoordinates().length<this.flatCoordinates.length?(this.simplifiedGeometryCache[e]=i,i):(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}},c.prototype.getSimplifiedGeometryInternal=function(t){return this},c.prototype.getStride=function(){return this.stride},c.prototype.setFlatCoordinatesInternal=function(t,e){this.stride=h(t),this.layout=t,this.flatCoordinates=e},c.prototype.setCoordinates=function(t,e){},c.prototype.setLayout=function(t,e,i){let n;if(t)n=h(t);else{for(let t=0;t<i;++t){if(0===e.length)return this.layout=a.default.XY,void(this.stride=2);e=e[0]}t=function(t){let e;return 2==t?e=a.default.XY:3==t?e=a.default.XYZ:4==t&&(e=a.default.XYZM),e}(n=e.length)}this.layout=t,this.stride=n},c.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},c.prototype.rotate=function(t,e){const i=this.getFlatCoordinates();if(i){const n=this.getStride();Object(l.a)(i,0,i.length,n,t,e,i),this.changed()}},c.prototype.scale=function(t,e,i){let n=e;void 0===n&&(n=t);let r=i;r||(r=Object(o.getCenter)(this.getExtent()));const s=this.getFlatCoordinates();if(s){const e=this.getStride();Object(l.b)(s,0,s.length,e,t,n,r,s),this.changed()}},c.prototype.translate=function(t,e){const i=this.getFlatCoordinates();if(i){const n=this.getStride();Object(l.d)(i,0,i.length,n,t,e,i),this.changed()}},e.default=c},function(t,e,i){"use strict";function n(t,e,i){return void 0===i&&(i=[0,0]),i[0]=t[0]+2*e,i[1]=t[1]+2*e,i}function r(t){return t[0]>0&&t[1]>0}function o(t,e,i){return void 0===i&&(i=[0,0]),i[0]=t[0]*e+.5|0,i[1]=t[1]*e+.5|0,i}function s(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:e[0]=e[1]=t,e)}i.r(e),i.d(e,"buffer",function(){return n}),i.d(e,"hasArea",function(){return r}),i.d(e,"scale",function(){return o}),i.d(e,"toSize",function(){return s})},function(t,e,i){"use strict";function n(t,e,i,n){return void 0!==n?(n[0]=t,n[1]=e,n[2]=i,n):[t,e,i]}function r(t,e,i){return t+"/"+e+"/"+i}function o(t){return r(t[0],t[1],t[2])}function s(t){return t.split("/").map(Number)}function a(t){return(t[1]<<t[0])+t[2]}function l(t){const e=t[0],i=new Array(e);let n,r,o=1<<e-1;for(n=0;n<e;++n)r=48,t[1]&o&&(r+=1),t[2]&o&&(r+=2),i[n]=String.fromCharCode(r),o>>=1;return i.join("")}function u(t,e){const i=t[0],n=t[1],r=t[2];if(e.getMinZoom()>i||i>e.getMaxZoom())return!1;const o=e.getExtent();let s;return!(s=o?e.getTileRangeForExtentAndZ(o,i):e.getFullTileRange(i))||s.containsXY(n,r)}i.d(e,"a",function(){return n}),i.d(e,"d",function(){return r}),i.d(e,"c",function(){return o}),i.d(e,"b",function(){return s}),i.d(e,"e",function(){return a}),i.d(e,"f",function(){return l}),i.d(e,"g",function(){return u})},function(t,e,i){"use strict";i.r(e),i.d(e,"METERS_PER_UNIT",function(){return r});const n={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},r={};r[n.DEGREES]=2*Math.PI*6370997/360,r[n.FEET]=.3048,r[n.METERS]=1,r[n.USFEET]=1200/3937,e.default=n},function(t,e,i){"use strict";i.r(e),e.default={ADD:"add",REMOVE:"remove"}},function(t,e,i){"use strict";i.r(e);var n=i(72),r=i(1),o=i(151),s=i(203),a=i(15),l=i(4),u=i(10),c=i(9),h=i(56),d=i(2),f=i(18),p=i(140),g=i(277);const y=function(t,e,i,r,o,s,l,u,c,y,m){h.default.call(this,o,a.a.IDLE),this.renderEdges_=void 0!==m&&m,this.pixelRatio_=l,this.gutter_=u,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=r,this.wrappedTileCoord_=s||o,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const _=r.getTileCoordExtent(this.wrappedTileCoord_),v=this.targetTileGrid_.getExtent();let b=this.sourceTileGrid_.getExtent();const S=v?Object(d.getIntersection)(_,v):_;if(0===Object(d.getArea)(S))return void(this.state=a.a.EMPTY);const O=t.getExtent();O&&(b=b?Object(d.getIntersection)(b,O):O);const C=r.getResolution(this.wrappedTileCoord_[0]),x=Object(d.getCenter)(S),T=Object(p.a)(t,i,x,C);if(!isFinite(T)||T<=0)return void(this.state=a.a.EMPTY);const E=void 0!==y?y:n.b;if(this.triangulation_=new g.a(t,i,S,b,T*E),0===this.triangulation_.getTriangles().length)return void(this.state=a.a.EMPTY);this.sourceZ_=e.getZForResolution(T);let P=this.triangulation_.calculateSourceExtent();if(b&&(t.canWrapX()?(P[1]=Object(f.a)(P[1],b[1],b[3]),P[3]=Object(f.a)(P[3],b[1],b[3])):P=Object(d.getIntersection)(P,b)),Object(d.getArea)(P)){const t=e.getTileRangeForExtentAndZ(P,this.sourceZ_);for(let e=t.minX;e<=t.maxX;e++)for(let i=t.minY;i<=t.maxY;i++){const t=c(this.sourceZ_,e,i,l);t&&this.sourceTiles_.push(t)}0===this.sourceTiles_.length&&(this.state=a.a.EMPTY)}else this.state=a.a.EMPTY};Object(r.inherits)(y,h.default),y.prototype.disposeInternal=function(){this.state==a.a.LOADING&&this.unlistenSources_(),h.default.prototype.disposeInternal.call(this)},y.prototype.getImage=function(){return this.canvas_},y.prototype.reproject_=function(){const t=[];if(this.sourceTiles_.forEach(function(e,i,n){e&&e.getState()==a.a.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=a.a.ERROR;else{const e=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(e),n="number"==typeof i?i:i[0],r="number"==typeof i?i:i[1],o=this.targetTileGrid_.getResolution(e),s=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Object(p.b)(n,r,this.pixelRatio_,s,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,t,this.gutter_,this.renderEdges_),this.state=a.a.LOADED}this.changed()},y.prototype.load=function(){if(this.state==a.a.IDLE){this.state=a.a.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,i,n){const r=e.getState();if(r==a.a.IDLE||r==a.a.LOADING){t++;const i=Object(l.listen)(e,u.default.CHANGE,function(n){const r=e.getState();r!=a.a.LOADED&&r!=a.a.ERROR&&r!=a.a.EMPTY||(Object(l.unlistenByKey)(i),0===--t&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(i)}}.bind(this)),this.sourceTiles_.forEach(function(t,e,i){t.getState()==a.a.IDLE&&t.load()}),0===t&&setTimeout(this.reproject_.bind(this),0)}},y.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(l.unlistenByKey),this.sourcesListenerKeys_=null};var m=y,_=i(127),v=i(50),b=i(64);const S=function(t){_.default.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,extent:t.extent,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:O,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition}),this.crossOrigin=void 0!==t.crossOrigin?t.crossOrigin:null,this.tileClass=void 0!==t.tileClass?t.tileClass:o.default,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1};function O(t,e){t.getImage().src=e}Object(r.inherits)(S,_.default),S.prototype.canExpireCache=function(){if(!n.a)return _.default.prototype.canExpireCache.call(this);if(this.tileCache.canExpireCache())return!0;for(const t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},S.prototype.expireCache=function(t,e){if(!n.a)return void _.default.prototype.expireCache.call(this,t,e);const i=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==i?e:{});for(const t in this.tileCacheForProjection){const n=this.tileCacheForProjection[t];n.expireCache(n==i?e:{})}},S.prototype.getGutter=function(t){return n.a&&this.getProjection()&&t&&!Object(c.equivalent)(this.getProjection(),t)?0:this.getGutterInternal()},S.prototype.getGutterInternal=function(){return 0},S.prototype.getOpaque=function(t){return!(n.a&&this.getProjection()&&t&&!Object(c.equivalent)(this.getProjection(),t))&&_.default.prototype.getOpaque.call(this,t)},S.prototype.getTileGridForProjection=function(t){if(!n.a)return _.default.prototype.getTileGridForProjection.call(this,t);const e=this.getProjection();if(!this.tileGrid||e&&!Object(c.equivalent)(e,t)){const e=Object(r.getUid)(t).toString();return e in this.tileGridForProjection||(this.tileGridForProjection[e]=Object(b.getForProjection)(t)),this.tileGridForProjection[e]}return this.tileGrid},S.prototype.getTileCacheForProjection=function(t){if(!n.a)return _.default.prototype.getTileCacheForProjection.call(this,t);const e=this.getProjection();if(!e||Object(c.equivalent)(e,t))return this.tileCache;{const e=Object(r.getUid)(t).toString();return e in this.tileCacheForProjection||(this.tileCacheForProjection[e]=new s.a(this.tileCache.highWaterMark)),this.tileCacheForProjection[e]}},S.prototype.createTile_=function(t,e,i,n,r,o){const s=[t,e,i],c=this.getTileCoordForTileUrlFunction(s,r),h=c?this.tileUrlFunction(c,n,r):void 0,d=new this.tileClass(s,void 0!==h?a.a.IDLE:a.a.EMPTY,void 0!==h?h:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return d.key=o,Object(l.listen)(d,u.default.CHANGE,this.handleTileChange,this),d},S.prototype.getTile=function(t,e,i,r,o){const s=this.getProjection();if(n.a&&s&&o&&!Object(c.equivalent)(s,o)){const n=this.getTileCacheForProjection(o),a=[t,e,i];let l;const u=Object(v.c)(a);n.containsKey(u)&&(l=n.get(u));const c=this.getKey();if(l&&l.key==c)return l;{const t=this.getTileGridForProjection(s),e=this.getTileGridForProjection(o),i=this.getTileCoordForTileUrlFunction(a,o),h=new m(s,t,o,e,a,i,this.getTilePixelRatio(r),this.getGutterInternal(),function(t,e,i,n){return this.getTileInternal(t,e,i,n,s)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_);return h.key=c,l?(h.interimTile=l,h.refreshInterimChain(),n.replace(u,h)):n.set(u,h),h}}return this.getTileInternal(t,e,i,r,s||o)},S.prototype.getTileInternal=function(t,e,i,n,r){let o=null;const s=Object(v.d)(t,e,i),l=this.getKey();if(this.tileCache.containsKey(s)){if((o=this.tileCache.get(s)).key!=l){const u=o;o=this.createTile_(t,e,i,n,r,l),u.getState()==a.a.IDLE?o.interimTile=u.interimTile:o.interimTile=u,o.refreshInterimChain(),this.tileCache.replace(s,o)}}else o=this.createTile_(t,e,i,n,r,l),this.tileCache.set(s,o);return o},S.prototype.setRenderReprojectionEdges=function(t){if(n.a&&this.renderReprojectionEdges_!=t){this.renderReprojectionEdges_=t;for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}},S.prototype.setTileGridForProjection=function(t,e){if(n.a){const i=Object(c.get)(t);if(i){const t=Object(r.getUid)(i).toString();t in this.tileGridForProjection||(this.tileGridForProjection[t]=e)}}};e.default=S},function(t,e,i){"use strict";e.a={IMAGE:"IMAGE",TILE:"TILE",VECTOR_TILE:"VECTOR_TILE",VECTOR:"VECTOR"}},function(t,e,i){"use strict";function n(t,e,i,n,r,o){const s=o||[];let a=0;for(let o=e;o<i;o+=n){const e=t[o],i=t[o+1];s[a++]=r[0]*e+r[2]*i+r[4],s[a++]=r[1]*e+r[3]*i+r[5]}return o&&s.length!=a&&(s.length=a),s}function r(t,e,i,n,r,o,s){const a=s||[],l=Math.cos(r),u=Math.sin(r),c=o[0],h=o[1];let d=0;for(let r=e;r<i;r+=n){const e=t[r]-c,i=t[r+1]-h;a[d++]=c+e*l-i*u,a[d++]=h+e*u+i*l;for(let e=r+2;e<r+n;++e)a[d++]=t[e]}return s&&a.length!=d&&(a.length=d),a}function o(t,e,i,n,r,o,s,a){const l=a||[],u=s[0],c=s[1];let h=0;for(let s=e;s<i;s+=n){const e=t[s]-u,i=t[s+1]-c;l[h++]=u+r*e,l[h++]=c+o*i;for(let e=s+2;e<s+n;++e)l[h++]=t[e]}return a&&l.length!=h&&(l.length=h),l}function s(t,e,i,n,r,o,s){const a=s||[];let l=0;for(let s=e;s<i;s+=n){a[l++]=t[s]+r,a[l++]=t[s+1]+o;for(let e=s+2;e<s+n;++e)a[l++]=t[e]}return s&&a.length!=l&&(a.length=l),a}i.d(e,"c",function(){return n}),i.d(e,"a",function(){return r}),i.d(e,"b",function(){return o}),i.d(e,"d",function(){return s})},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(15),o=i(59),s=i(61),a=i(10);const l=function(t,e,i){s.a.call(this);const n=i||{};this.tileCoord=t,this.state=e,this.interimTile=null,this.key="",this.transition_=void 0===n.transition?250:n.transition,this.transitionStarts_={}};Object(n.inherits)(l,s.a),l.prototype.changed=function(){this.dispatchEvent(a.default.CHANGE)},l.prototype.getKey=function(){return this.key+"/"+this.tileCoord},l.prototype.getInterimTile=function(){if(!this.interimTile)return this;let t=this.interimTile;do{if(t.getState()==r.a.LOADED)return t;t=t.interimTile}while(t);return this},l.prototype.refreshInterimChain=function(){if(!this.interimTile)return;let t=this.interimTile,e=this;do{if(t.getState()==r.a.LOADED){t.interimTile=null;break}t.getState()==r.a.LOADING?e=t:t.getState()==r.a.IDLE?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)},l.prototype.getTileCoord=function(){return this.tileCoord},l.prototype.getState=function(){return this.state},l.prototype.setState=function(t){this.state=t,this.changed()},l.prototype.load=function(){},l.prototype.getAlpha=function(t,e){if(!this.transition_)return 1;let i=this.transitionStarts_[t];if(i){if(-1===i)return 1}else i=e,this.transitionStarts_[t]=i;const n=e-i+1e3/60;return n>=this.transition_?1:Object(o.easeIn)(n/this.transition_)},l.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},l.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},e.default=l},function(t,e,i){"use strict";i.r(e);var n=i(72),r=i(1),o=i(30),s=i(12),a=i(29),l=i(2),u=i(9),c=i(122),h=i(4),d=i(10),f=i(140),p=i(277);const g=function(t,e,i,r,s,a){this.targetProj_=e,this.maxSourceExtent_=t.getExtent();const u=e.getExtent(),h=u?Object(l.getIntersection)(i,u):i,d=Object(l.getCenter)(h),g=Object(f.a)(t,e,d,r),y=n.b;this.triangulation_=new p.a(t,e,h,this.maxSourceExtent_,g*y),this.targetResolution_=r,this.targetExtent_=i;const m=this.triangulation_.calculateSourceExtent();this.sourceImage_=a(m,g,s),this.sourcePixelRatio_=this.sourceImage_?this.sourceImage_.getPixelRatio():1,this.canvas_=null,this.sourceListenerKey_=null;let _=o.a.LOADED;this.sourceImage_&&(_=o.a.IDLE),c.a.call(this,i,r,this.sourcePixelRatio_,_)};Object(r.inherits)(g,c.a),g.prototype.disposeInternal=function(){this.state==o.a.LOADING&&this.unlistenSource_(),c.a.prototype.disposeInternal.call(this)},g.prototype.getImage=function(){return this.canvas_},g.prototype.getProjection=function(){return this.targetProj_},g.prototype.reproject_=function(){const t=this.sourceImage_.getState();if(t==o.a.LOADED){const t=Object(l.getWidth)(this.targetExtent_)/this.targetResolution_,e=Object(l.getHeight)(this.targetExtent_)/this.targetResolution_;this.canvas_=Object(f.b)(t,e,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0)}this.state=t,this.changed()},g.prototype.load=function(){if(this.state==o.a.IDLE){this.state=o.a.LOADING,this.changed();const t=this.sourceImage_.getState();t==o.a.LOADED||t==o.a.ERROR?this.reproject_():(this.sourceListenerKey_=Object(h.listen)(this.sourceImage_,d.default.CHANGE,function(t){const e=this.sourceImage_.getState();e!=o.a.LOADED&&e!=o.a.ERROR||(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}},g.prototype.unlistenSource_=function(){Object(h.unlistenByKey)(this.sourceListenerKey_),this.sourceListenerKey_=null};var y=g,m=i(139);i.d(e,"defaultImageLoadFunction",function(){return C});const _="imageloadstart",v="imageloadend",b="imageloaderror",S=function(t,e){a.default.call(this,t),this.image=e};Object(r.inherits)(S,a.default);const O=function(t){m.default.call(this,{attributions:t.attributions,extent:t.extent,projection:t.projection,state:t.state}),this.resolutions_=void 0!==t.resolutions?t.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0};function C(t,e){t.getImage().src=e}Object(r.inherits)(O,m.default),O.prototype.getResolutions=function(){return this.resolutions_},O.prototype.findNearestResolution=function(t){if(this.resolutions_){const e=Object(s.h)(this.resolutions_,t,0);t=this.resolutions_[e]}return t},O.prototype.getImage=function(t,e,i,r){const o=this.getProjection();if(n.a&&o&&r&&!Object(u.equivalent)(o,r)){if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&Object(u.equivalent)(this.reprojectedImage_.getProjection(),r)&&this.reprojectedImage_.getResolution()==e&&Object(l.equals)(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new y(o,r,t,e,i,function(t,e,i){return this.getImageInternal(t,e,i,o)}.bind(this)),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}return o&&(r=o),this.getImageInternal(t,e,i,r)},O.prototype.getImageInternal=function(t,e,i,n){},O.prototype.handleImageChange=function(t){const e=t.target;switch(e.getState()){case o.a.LOADING:this.dispatchEvent(new S(_,e));break;case o.a.LOADED:this.dispatchEvent(new S(v,e));break;case o.a.ERROR:this.dispatchEvent(new S(b,e))}};e.default=O},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(12),o=i(2),s=i(19),a=i(5),l=i(41),u=i(48),c=i(97),h=i(81),d=i(82),f=i(156),p=i(174),g=i(118);const y=function(t,e){u.default.call(this),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.setCoordinates(t,e)};Object(n.inherits)(y,u.default),y.prototype.appendLineString=function(t){this.flatCoordinates?Object(r.c)(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},y.prototype.clone=function(){const t=new y(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),this.ends_.slice()),t},y.prototype.closestPointXY=function(t,e,i,n){return n<Object(o.closestSquaredDistanceXY)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(c.a)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(c.b)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,i,n))},y.prototype.getCoordinateAtM=function(t,e,i){if(this.layout!=s.default.XYM&&this.layout!=s.default.XYZM||0===this.flatCoordinates.length)return null;const n=void 0!==e&&e,r=void 0!==i&&i;return Object(f.c)(this.flatCoordinates,0,this.ends_,this.stride,t,n,r)},y.prototype.getCoordinates=function(){return Object(d.b)(this.flatCoordinates,0,this.ends_,this.stride)},y.prototype.getEnds=function(){return this.ends_},y.prototype.getLineString=function(t){if(t<0||this.ends_.length<=t)return null;const e=new l.default(null);return e.setFlatCoordinates(this.layout,this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t])),e},y.prototype.getLineStrings=function(){const t=this.flatCoordinates,e=this.ends_,i=this.layout,n=[];let r=0;for(let o=0,s=e.length;o<s;++o){const s=e[o],a=new l.default(null);a.setFlatCoordinates(i,t.slice(r,s)),n.push(a),r=s}return n},y.prototype.getFlatMidpoints=function(){const t=[],e=this.flatCoordinates;let i=0;const n=this.ends_,o=this.stride;for(let s=0,a=n.length;s<a;++s){const a=n[s],l=Object(f.a)(e,i,a,o,.5);Object(r.c)(t,l),i=a}return t},y.prototype.getSimplifiedGeometryInternal=function(t){const e=[],i=[];e.length=Object(g.b)(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,i);const n=new y(null);return n.setFlatCoordinates(s.default.XY,e,i),n},y.prototype.getType=function(){return a.default.MULTI_LINE_STRING},y.prototype.intersectsExtent=function(t){return Object(p.b)(this.flatCoordinates,0,this.ends_,this.stride,t)},y.prototype.setCoordinates=function(t,e){if(t){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=Object(h.c)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()}else this.setFlatCoordinates(s.default.XY,null,this.ends_)},y.prototype.setFlatCoordinates=function(t,e,i){this.setFlatCoordinatesInternal(t,e),this.ends_=i,this.changed()},y.prototype.setLineStrings=function(t){let e=this.getLayout();const i=[],n=[];for(let o=0,s=t.length;o<s;++o){const s=t[o];0===o&&(e=s.getLayout()),Object(r.c)(i,s.getFlatCoordinates()),n.push(i.length)}this.setFlatCoordinates(e,i,n)},e.default=y},function(t,e,i){"use strict";function n(t){return Math.pow(t,3)}function r(t){return 1-n(1-t)}function o(t){return 3*t*t-2*t*t*t}function s(t){return t}function a(t){return t<.5?o(2*t):1-o(2*(t-.5))}i.r(e),i.d(e,"easeIn",function(){return n}),i.d(e,"easeOut",function(){return r}),i.d(e,"inAndOut",function(){return o}),i.d(e,"linear",function(){return s}),i.d(e,"upAndDown",function(){return a})},function(t,e,i){"use strict";i.r(e),i.d(e,"visibleAtResolution",function(){return f});var n=i(4),r=i(10),o=i(1),s=i(25),a=i(189),l=i(66),u=i(11),c=i(68),h=i(44);const d=function(t){const e=Object(u.assign)({},t);delete e.source,a.default.call(this,e),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,t.map&&this.setMap(t.map),Object(n.listen)(this,Object(s.getChangeEventType)(l.a.SOURCE),this.handleSourcePropertyChange_,this);const i=t.source?t.source:null;this.setSource(i)};function f(t,e){return t.visible&&e>=t.minResolution&&e<t.maxResolution}Object(o.inherits)(d,a.default),d.prototype.getLayersArray=function(t){const e=t||[];return e.push(this),e},d.prototype.getLayerStatesArray=function(t){const e=t||[];return e.push(this.getLayerState()),e},d.prototype.getSource=function(){return this.get(l.a.SOURCE)||null},d.prototype.getSourceState=function(){const t=this.getSource();return t?t.getState():h.a.UNDEFINED},d.prototype.handleSourceChange_=function(){this.changed()},d.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(Object(n.unlistenByKey)(this.sourceChangeKey_),this.sourceChangeKey_=null);const t=this.getSource();t&&(this.sourceChangeKey_=Object(n.listen)(t,r.default.CHANGE,this.handleSourceChange_,this)),this.changed()},d.prototype.setMap=function(t){this.mapPrecomposeKey_&&(Object(n.unlistenByKey)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(Object(n.unlistenByKey)(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=Object(n.listen)(t,c.a.PRECOMPOSE,function(t){const e=this.getLayerState();e.managed=!1,e.zIndex=1/0,t.frameState.layerStatesArray.push(e),t.frameState.layerStates[Object(o.getUid)(this)]=e},this),this.mapRenderKey_=Object(n.listen)(this,r.default.CHANGE,t.render,t),this.changed())},d.prototype.setSource=function(t){this.set(l.a.SOURCE,t)},e.default=d},function(t,e,i){"use strict";var n=i(1),r=i(117),o=i(4),s=i(24),a=i(29);const l=function(){r.a.call(this),this.pendingRemovals_={},this.dispatching_={},this.listeners_={}};Object(n.inherits)(l,r.a),l.prototype.addEventListener=function(t,e){let i=this.listeners_[t];i||(i=this.listeners_[t]=[]),-1===i.indexOf(e)&&i.push(e)},l.prototype.dispatchEvent=function(t){const e="string"==typeof t?new a.default(t):t,i=e.type;e.target=this;const n=this.listeners_[i];let r;if(n){i in this.dispatching_||(this.dispatching_[i]=0,this.pendingRemovals_[i]=0),++this.dispatching_[i];for(let t=0,i=n.length;t<i;++t)if(!1===n[t].call(this,e)||e.propagationStopped){r=!1;break}if(--this.dispatching_[i],0===this.dispatching_[i]){let t=this.pendingRemovals_[i];for(delete this.pendingRemovals_[i];t--;)this.removeEventListener(i,s.c);delete this.dispatching_[i]}return r}},l.prototype.disposeInternal=function(){Object(o.unlistenAll)(this)},l.prototype.getListeners=function(t){return this.listeners_[t]},l.prototype.hasListener=function(t){return t?t in this.listeners_:Object.keys(this.listeners_).length>0},l.prototype.removeEventListener=function(t,e){const i=this.listeners_[t];if(i){const n=i.indexOf(e);t in this.pendingRemovals_?(i[n]=s.c,++this.pendingRemovals_[t]):(i.splice(n,1),0===i.length&&delete this.listeners_[t])}},e.a=l},function(t,e,i){"use strict";i.r(e),i.d(e,"toFunction",function(){return u}),i.d(e,"createDefaultStyle",function(){return h}),i.d(e,"createEditingStyle",function(){return d});var n=i(23),r=i(5),o=i(267),s=i(96),a=i(91);const l=function(t){const e=t||{};this.geometry_=null,this.geometryFunction_=f,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex};function u(t){let e;if("function"==typeof t)e=t;else{let i;Array.isArray(t)?i=t:(Object(n.a)(t instanceof l,41),i=[t]),e=function(){return i}}return e}l.prototype.clone=function(){let t=this.getGeometry();return t&&t.clone&&(t=t.clone()),new l({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},l.prototype.getRenderer=function(){return this.renderer_},l.prototype.setRenderer=function(t){this.renderer_=t},l.prototype.getGeometry=function(){return this.geometry_},l.prototype.getGeometryFunction=function(){return this.geometryFunction_},l.prototype.getFill=function(){return this.fill_},l.prototype.setFill=function(t){this.fill_=t},l.prototype.getImage=function(){return this.image_},l.prototype.setImage=function(t){this.image_=t},l.prototype.getStroke=function(){return this.stroke_},l.prototype.setStroke=function(t){this.stroke_=t},l.prototype.getText=function(){return this.text_},l.prototype.setText=function(t){this.text_=t},l.prototype.getZIndex=function(){return this.zIndex_},l.prototype.setGeometry=function(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=f,this.geometry_=t},l.prototype.setZIndex=function(t){this.zIndex_=t};let c=null;function h(t,e){if(!c){const t=new s.default({color:"rgba(255,255,255,0.4)"}),e=new a.default({color:"#3399CC",width:1.25});c=[new l({image:new o.default({fill:t,stroke:e,radius:5}),fill:t,stroke:e})]}return c}function d(){const t={},e=[255,255,255,1],i=[0,153,255,1];return t[r.default.POLYGON]=[new l({fill:new s.default({color:[255,255,255,.5]})})],t[r.default.MULTI_POLYGON]=t[r.default.POLYGON],t[r.default.LINE_STRING]=[new l({stroke:new a.default({color:e,width:5})}),new l({stroke:new a.default({color:i,width:3})})],t[r.default.MULTI_LINE_STRING]=t[r.default.LINE_STRING],t[r.default.CIRCLE]=t[r.default.POLYGON].concat(t[r.default.LINE_STRING]),t[r.default.POINT]=[new l({image:new o.default({radius:6,fill:new s.default({color:i}),stroke:new a.default({color:e,width:1.5})}),zIndex:1/0})],t[r.default.MULTI_POINT]=t[r.default.POINT],t[r.default.GEOMETRY_COLLECTION]=t[r.default.POLYGON].concat(t[r.default.LINE_STRING],t[r.default.POINT]),t}function f(t){return t.getGeometry()}e.default=l},function(t,e,i){"use strict";i.r(e),i.d(e,"asString",function(){return a}),i.d(e,"fromString",function(){return l}),i.d(e,"asArray",function(){return u}),i.d(e,"normalize",function(){return c}),i.d(e,"toString",function(){return h});var n=i(23),r=i(18);const o=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,s=/^([a-z]*)$/i;function a(t){return"string"==typeof t?t:h(t)}const l=function(){const t={};let e=0;return function(i){let r;if(t.hasOwnProperty(i))r=t[i];else{if(e>=1024){let i=0;for(const n in t)0==(3&i++)&&(delete t[n],--e)}r=function(t){let e,i,r,a,l;s.exec(t)&&(t=function(t){const e=document.createElement("div");if(e.style.color=t,""!==e.style.color){document.body.appendChild(e);const t=getComputedStyle(e).color;return document.body.removeChild(e),t}return""}(t));if(o.exec(t)){const n=t.length-1;let o;o=n<=4?1:2;const s=4===n||8===n;e=parseInt(t.substr(1+0*o,o),16),i=parseInt(t.substr(1+1*o,o),16),r=parseInt(t.substr(1+2*o,o),16),a=s?parseInt(t.substr(1+3*o,o),16):255,1==o&&(e=(e<<4)+e,i=(i<<4)+i,r=(r<<4)+r,s&&(a=(a<<4)+a)),l=[e,i,r,a/255]}else 0==t.indexOf("rgba(")?c(l=t.slice(5,-1).split(",").map(Number)):0==t.indexOf("rgb(")?((l=t.slice(4,-1).split(",").map(Number)).push(1),c(l)):Object(n.a)(!1,14);return l}(i),t[i]=r,++e}return r}}();function u(t){return Array.isArray(t)?t:l(t)}function c(t){return t[0]=Object(r.a)(t[0]+.5|0,0,255),t[1]=Object(r.a)(t[1]+.5|0,0,255),t[2]=Object(r.a)(t[2]+.5|0,0,255),t[3]=Object(r.a)(t[3],0,1),t}function h(t){let e=t[0];e!=(0|e)&&(e=e+.5|0);let i=t[1];i!=(0|i)&&(i=i+.5|0);let n=t[2];return n!=(0|n)&&(n=n+.5|0),"rgba("+e+","+i+","+n+","+(void 0===t[3]?1:t[3])+")"}},function(t,e,i){"use strict";i.r(e),i.d(e,"getForProjection",function(){return h}),i.d(e,"wrapX",function(){return d}),i.d(e,"createForExtent",function(){return f}),i.d(e,"createXYZ",function(){return p}),i.d(e,"createForProjection",function(){return y}),i.d(e,"extentFromProjection",function(){return m});var n=i(155),r=i(49),o=i(2),s=i(193),a=i(11),l=i(9),u=i(51),c=i(101);function h(t){let e=t.getDefaultTileGrid();return e||(e=y(t),t.setDefaultTileGrid(e)),e}function d(t,e,i){const n=e[0],r=t.getTileCoordCenter(e),s=m(i);if(Object(o.containsCoordinate)(s,r))return e;{const e=Object(o.getWidth)(s),i=Math.ceil((s[0]-r[0])/e);return r[0]+=e*i,t.getTileCoordForCoordAndZ(r,n)}}function f(t,e,i,n){const r=void 0!==n?n:s.a.TOP_LEFT,a=g(t,e,i);return new c.default({extent:t,origin:Object(o.getCorner)(t,r),resolutions:a,tileSize:i})}function p(t){const e={};return Object(a.assign)(e,void 0!==t?t:{}),void 0===e.extent&&(e.extent=Object(l.get)("EPSG:3857").getExtent()),e.resolutions=g(e.extent,e.maxZoom,e.tileSize),delete e.maxZoom,new c.default(e)}function g(t,e,i){const s=void 0!==e?e:n.a,a=Object(o.getHeight)(t),l=Object(o.getWidth)(t),u=Object(r.toSize)(void 0!==i?i:n.b),c=Math.max(l/u[0],a/u[1]),h=s+1,d=new Array(h);for(let t=0;t<h;++t)d[t]=c/Math.pow(2,t);return d}function y(t,e,i,n){return f(m(t),e,i,n)}function m(t){let e=(t=Object(l.get)(t)).getExtent();if(!e){const i=180*l.METERS_PER_UNIT[u.default.DEGREES]/t.getMetersPerUnit();e=Object(o.createOrUpdate)(-i,-i,i,i)}return e}},function(t,e,i){"use strict";i.r(e),e.default={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"}},function(t,e,i){"use strict";e.a={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",SOURCE:"source"}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IgsServiceBase=void 0;var n=c(i(13)),r=c(i(8)),o=c(i(20)),s=c(i(16)),a=c(i(46)),l=c(i(17)),u=i(21);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t,i){(0,r.default)(this,e);i=i||{};var o=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,i));return o.CLASS_NAME="Zondy.IgsServiceBase",o}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){(0,a.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"destroy",this).call(this);var t=this;t.events&&(t.events.un(t.eventListeners),t.events.listeners=null,t.events.destroy(),t.events=null,t.eventListeners=null)}},{key:"processAsync",value:function(t){this.request({method:t&&t.method?t.method:"GET",scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed,data:t&&t.data?t.data:null,headers:t&&t.headers?t.headers:null})}},{key:"serviceProcessCompleted",value:function(t){(t=(0,u.transformResult)(t)).succeed?this.events&&this.events.triggerEvent("processCompleted",{result:t}):this.events.triggerEvent("processFailed",{error:t})}}]),e}(i(426).CommonServiceBase);e.IgsServiceBase=h,Zondy.Service.IgsServiceBase=h},function(t,e,i){"use strict";e.a={POSTCOMPOSE:"postcompose",PRECOMPOSE:"precompose",RENDER:"render"}},function(t,e,i){"use strict";i.d(e,"a",function(){return r}),i.d(e,"b",function(){return o});var n=i(31);const r=[n.a.POLYGON,n.a.CIRCLE,n.a.LINE_STRING,n.a.IMAGE,n.a.TEXT,n.a.DEFAULT],o={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1}},function(t,e,i){"use strict";e.a={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"}},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(12),o=i(2),s=i(19),a=i(5),l=i(39),u=i(48),c=i(81),h=i(82),d=i(18);const f=function(t,e){u.default.call(this),this.setCoordinates(t,e)};Object(n.inherits)(f,u.default),f.prototype.appendPoint=function(t){this.flatCoordinates?Object(r.c)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},f.prototype.clone=function(){const t=new f(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice()),t},f.prototype.closestPointXY=function(t,e,i,n){if(n<Object(o.closestSquaredDistanceXY)(this.getExtent(),t,e))return n;const r=this.flatCoordinates,s=this.stride;for(let o=0,a=r.length;o<a;o+=s){const a=Object(d.g)(t,e,r[o],r[o+1]);if(a<n){n=a;for(let t=0;t<s;++t)i[t]=r[o+t];i.length=s}}return n},f.prototype.getCoordinates=function(){return Object(h.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},f.prototype.getPoint=function(t){const e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;if(t<0||e<=t)return null;const i=new l.default(null);return i.setFlatCoordinates(this.layout,this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride)),i},f.prototype.getPoints=function(){const t=this.flatCoordinates,e=this.layout,i=this.stride,n=[];for(let r=0,o=t.length;r<o;r+=i){const o=new l.default(null);o.setFlatCoordinates(e,t.slice(r,r+i)),n.push(o)}return n},f.prototype.getType=function(){return a.default.MULTI_POINT},f.prototype.intersectsExtent=function(t){const e=this.flatCoordinates,i=this.stride;for(let n=0,r=e.length;n<r;n+=i){const i=e[n],r=e[n+1];if(Object(o.containsXY)(t,i,r))return!0}return!1},f.prototype.setCoordinates=function(t,e){t?(this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(c.b)(this.flatCoordinates,0,t,this.stride),this.changed()):this.setFlatCoordinates(s.default.XY,null)},f.prototype.setFlatCoordinates=function(t,e){this.setFlatCoordinatesInternal(t,e),this.changed()},e.default=f},function(t,e,i){"use strict";i.d(e,"b",function(){return n}),i.d(e,"a",function(){return r});const n=.5,r=!0},function(t,e,i){"use strict";i.d(e,"a",function(){return a}),i.d(e,"b",function(){return l}),i.d(e,"d",function(){return u}),i.d(e,"c",function(){return c});var n=i(23),r=i(18),o=i(50);function s(t,e){const i=/\{z\}/g,r=/\{x\}/g,o=/\{y\}/g,s=/\{-y\}/g;return function(a,l,u){return a?t.replace(i,a[0].toString()).replace(r,a[1].toString()).replace(o,function(){return(-a[2]-1).toString()}).replace(s,function(){const t=a[0],i=e.getFullTileRange(t);return Object(n.a)(i,55),(i.getHeight()+a[2]).toString()}):void 0}}function a(t,e){const i=t.length,n=new Array(i);for(let r=0;r<i;++r)n[r]=s(t[r],e);return l(n)}function l(t){return 1===t.length?t[0]:function(e,i,n){if(e){const s=Object(o.e)(e),a=Object(r.d)(s,t.length);return t[a](e,i,n)}}}function u(t,e,i){}function c(t){const e=[];let i=/\{([a-z])-([a-z])\}/.exec(t);if(i){const n=i[1].charCodeAt(0),r=i[2].charCodeAt(0);let o;for(o=n;o<=r;++o)e.push(t.replace(i[0],String.fromCharCode(o)));return e}if(i=i=/\{(\d+)-(\d+)\}/.exec(t)){const n=parseInt(i[2],10);for(let r=parseInt(i[1],10);r<=n;r++)e.push(t.replace(i[0],r.toString()));return e}return e.push(t),e}},function(t,e,i){"use strict";e.a={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16}},function(t,e,i){t.exports={default:i(508),__esModule:!0}},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(12),o=i(2),s=i(19),a=i(5),l=i(71),u=i(36),c=i(48),h=i(173),d=i(274),f=i(97),p=i(102),g=i(81),y=i(82),m=i(187),_=i(174),v=i(87),b=i(118);const S=function(t,e){c.default.call(this),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,this.setCoordinates(t,e)};Object(n.inherits)(S,c.default),S.prototype.appendPolygon=function(t){let e;if(this.flatCoordinates){const i=this.flatCoordinates.length;Object(r.c)(this.flatCoordinates,t.getFlatCoordinates());for(let n=0,r=(e=t.getEnds().slice()).length;n<r;++n)e[n]+=i}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()},S.prototype.clone=function(){const t=new S(null),e=this.endss_.length,i=new Array(e);for(let t=0;t<e;++t)i[t]=this.endss_[t].slice();return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),i),t},S.prototype.closestPointXY=function(t,e,i,n){return n<Object(o.closestSquaredDistanceXY)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(f.f)(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(f.c)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,i,n))},S.prototype.containsXY=function(t,e){return Object(p.d)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)},S.prototype.getArea=function(){return Object(h.c)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},S.prototype.getCoordinates=function(t){let e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),Object(v.e)(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,Object(y.c)(e,0,this.endss_,this.stride)},S.prototype.getEndss=function(){return this.endss_},S.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=Object(d.a)(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Object(m.b)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},S.prototype.getInteriorPoints=function(){const t=new l.default(null);return t.setFlatCoordinates(s.default.XYM,this.getFlatInteriorPoints().slice()),t},S.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;Object(v.c)(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Object(v.e)(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},S.prototype.getSimplifiedGeometryInternal=function(t){const e=[],i=[];e.length=Object(b.d)(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,i);const n=new S(null);return n.setFlatCoordinates(s.default.XY,e,i),n},S.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;let e;if(0===t)e=0;else{const i=this.endss_[t-1];e=i[i.length-1]}const i=this.endss_[t].slice(),n=i[i.length-1];if(0!==e)for(let t=0,n=i.length;t<n;++t)i[t]-=e;const r=new u.default(null);return r.setFlatCoordinates(this.layout,this.flatCoordinates.slice(e,n),i),r},S.prototype.getPolygons=function(){const t=this.layout,e=this.flatCoordinates,i=this.endss_,n=[];let r=0;for(let o=0,s=i.length;o<s;++o){const s=i[o].slice(),a=s[s.length-1];if(0!==r)for(let t=0,e=s.length;t<e;++t)s[t]-=r;const l=new u.default(null);l.setFlatCoordinates(t,e.slice(r,a),s),n.push(l),r=a}return n},S.prototype.getType=function(){return a.default.MULTI_POLYGON},S.prototype.intersectsExtent=function(t){return Object(_.d)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},S.prototype.setCoordinates=function(t,e){if(t){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=Object(g.d)(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{const t=i[i.length-1];this.flatCoordinates.length=0===t.length?0:t[t.length-1]}this.changed()}else this.setFlatCoordinates(s.default.XY,null,this.endss_)},S.prototype.setFlatCoordinates=function(t,e,i){this.setFlatCoordinatesInternal(t,e),this.endss_=i,this.changed()},S.prototype.setPolygons=function(t){let e=this.getLayout();const i=[],n=[];for(let o=0,s=t.length;o<s;++o){const s=t[o];0===o&&(e=s.getLayout());const a=i.length,l=s.getEnds();for(let t=0,e=l.length;t<e;++t)l[t]+=a;Object(r.c)(i,s.getFlatCoordinates()),n.push(l)}this.setFlatCoordinates(e,i,n)},e.default=S},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(25),o=i(2),s=i(24),a=i(55),l=i(9),u=i(51),c=i(14);const h=function(){r.default.call(this),this.extent_=Object(o.createEmpty)(),this.extentRevision_=-1,this.simplifiedGeometryCache={},this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0};Object(n.inherits)(h,r.default);const d=Object(c.c)();h.prototype.clone=function(){},h.prototype.closestPointXY=function(t,e,i,n){},h.prototype.getClosestPoint=function(t,e){const i=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],i,1/0),i},h.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},h.prototype.computeExtent=function(t){},h.prototype.containsXY=s.a,h.prototype.getExtent=function(t){return this.extentRevision_!=this.getRevision()&&(this.extent_=this.computeExtent(this.extent_),this.extentRevision_=this.getRevision()),Object(o.returnOrUpdate)(this.extent_,t)},h.prototype.rotate=function(t,e){},h.prototype.scale=function(t,e,i){},h.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},h.prototype.getSimplifiedGeometry=function(t){},h.prototype.getType=function(){},h.prototype.applyTransform=function(t){},h.prototype.intersectsExtent=function(t){},h.prototype.translate=function(t,e){},h.prototype.transform=function(t,e){const i=(t=Object(l.get)(t)).getUnits()==u.default.TILE_PIXELS?function(i,n,r){const s=t.getExtent(),u=t.getWorldExtent(),h=Object(o.getHeight)(u)/Object(o.getHeight)(s);return Object(c.b)(d,u[0],u[3],h,-h,0,0,0),Object(a.c)(i,0,i.length,r,d,n),Object(l.getTransform)(t,e)(i,n,r)}:Object(l.getTransform)(t,e);return this.applyTransform(i),this},e.default=h},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(170);const o=function(t,e,i,n,o){r.default.call(this,t,e,i.originalEvent,n,o),this.pointerEvent=i};Object(n.inherits)(o,r.default),e.default=o},function(t,e,i){"use strict";var n=i(7);const r={STATIC_DRAW:n.w,STREAM_DRAW:n.y,DYNAMIC_DRAW:n.i},o=function(t,e){this.arr_=void 0!==t?t:[],this.usage_=void 0!==e?e:r.STATIC_DRAW};o.prototype.getArray=function(){return this.arr_},o.prototype.getUsage=function(){return this.usage_},e.a=o},function(t,e){var i=t.exports={version:"2.5.3"};"number"==typeof __e&&(__e=i)},function(t,e,i){"use strict";function n(t,e,i,n){for(let n=0,r=i.length;n<r;++n)t[e++]=i[n];return e}function r(t,e,i,n){for(let r=0,o=i.length;r<o;++r){const o=i[r];for(let i=0;i<n;++i)t[e++]=o[i]}return e}function o(t,e,i,n,o){const s=o||[];let a=0;for(let o=0,l=i.length;o<l;++o){const l=r(t,e,i[o],n);s[a++]=l,e=l}return s.length=a,s}function s(t,e,i,n,r){const s=r||[];let a=0;for(let r=0,l=i.length;r<l;++r){const l=o(t,e,i[r],n,s[a]);s[a++]=l,e=l[l.length-1]}return s.length=a,s}i.d(e,"a",function(){return n}),i.d(e,"b",function(){return r}),i.d(e,"c",function(){return o}),i.d(e,"d",function(){return s})},function(t,e,i){"use strict";function n(t,e,i,n,r){const o=void 0!==r?r:[];let s=0;for(let r=e;r<i;r+=n)o[s++]=t.slice(r,r+n);return o.length=s,o}function r(t,e,i,r,o){const s=void 0!==o?o:[];let a=0;for(let o=0,l=i.length;o<l;++o){const l=i[o];s[a++]=n(t,e,l,r,s[a]),e=l}return s.length=a,s}function o(t,e,i,n,o){const s=void 0!==o?o:[];let a=0;for(let o=0,l=i.length;o<l;++o){const l=i[o];s[a++]=r(t,e,l,n,s[a]),e=l[l.length-1]}return s.length=a,s}i.d(e,"a",function(){return n}),i.d(e,"b",function(){return r}),i.d(e,"c",function(){return o})},function(t,e,i){"use strict";i.r(e),i.d(e,"VectorSourceEvent",function(){return S});var n=i(1),r=i(42),o=i(52),s=i(121),a=i(12),l=i(23),u=i(4),c=i(29),h=i(10),d=i(2),f=i(240),p=i(24),g=i(336),y=i(11),m=i(139),_=i(44),v=i(104),b=i(123);const S=function(t,e){c.default.call(this,t),this.feature=e};Object(n.inherits)(S,c.default);const O=function(t){const e=t||{};m.default.call(this,{attributions:e.attributions,projection:void 0,state:_.a.READY,wrapX:void 0===e.wrapX||e.wrapX}),this.loader_=p.c,this.format_=e.format,this.overlaps_=void 0==e.overlaps||e.overlaps,this.url_=e.url,void 0!==e.loader?this.loader_=e.loader:void 0!==this.url_&&(Object(l.a)(this.format_,7),this.loader_=Object(f.xhr)(this.url_,this.format_)),this.strategy_=void 0!==e.strategy?e.strategy:g.all;const i=void 0===e.useSpatialIndex||e.useSpatialIndex;let n,o;this.featuresRtree_=i?new b.default:null,this.loadedExtentsRtree_=new b.default,this.nullGeometryFeatures_={},this.idIndex_={},this.undefIdIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,e.features instanceof r.default?o=(n=e.features).getArray():Array.isArray(e.features)&&(o=e.features),i||void 0!==n||(n=new r.default(o)),void 0!==o&&this.addFeaturesInternal(o),void 0!==n&&this.bindFeaturesCollection_(n)};Object(n.inherits)(O,m.default),O.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},O.prototype.addFeatureInternal=function(t){const e=Object(n.getUid)(t).toString();if(!this.addToIndex_(e,t))return;this.setupChangeEvents_(e,t);const i=t.getGeometry();if(i){const e=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(e,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new S(v.a.ADDFEATURE,t))},O.prototype.setupChangeEvents_=function(t,e){this.featureChangeKeys_[t]=[Object(u.listen)(e,h.default.CHANGE,this.handleFeatureChange_,this),Object(u.listen)(e,s.a.PROPERTYCHANGE,this.handleFeatureChange_,this)]},O.prototype.addToIndex_=function(t,e){let i=!0;const n=e.getId();return void 0!==n?n.toString()in this.idIndex_?i=!1:this.idIndex_[n.toString()]=e:(Object(l.a)(!(t in this.undefIdIndex_),30),this.undefIdIndex_[t]=e),i},O.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},O.prototype.addFeaturesInternal=function(t){const e=[],i=[],r=[];for(let e=0,r=t.length;e<r;e++){const r=t[e],o=Object(n.getUid)(r).toString();this.addToIndex_(o,r)&&i.push(r)}for(let t=0,o=i.length;t<o;t++){const o=i[t],s=Object(n.getUid)(o).toString();this.setupChangeEvents_(s,o);const a=o.getGeometry();if(a){const t=a.getExtent();e.push(t),r.push(o)}else this.nullGeometryFeatures_[s]=o}this.featuresRtree_&&this.featuresRtree_.load(e,r);for(let t=0,e=i.length;t<e;t++)this.dispatchEvent(new S(v.a.ADDFEATURE,i[t]))},O.prototype.bindFeaturesCollection_=function(t){let e=!1;Object(u.listen)(this,v.a.ADDFEATURE,function(i){e||(e=!0,t.push(i.feature),e=!1)}),Object(u.listen)(this,v.a.REMOVEFEATURE,function(i){e||(e=!0,t.remove(i.feature),e=!1)}),Object(u.listen)(t,o.default.ADD,function(t){e||(e=!0,this.addFeature(t.element),e=!1)},this),Object(u.listen)(t,o.default.REMOVE,function(t){e||(e=!0,this.removeFeature(t.element),e=!1)},this),this.featuresCollection_=t},O.prototype.clear=function(t){if(t){for(const t in this.featureChangeKeys_){this.featureChangeKeys_[t].forEach(u.unlistenByKey)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.undefIdIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(this.removeFeatureInternal,this);for(const t in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[t])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.loadedExtentsRtree_.clear(),this.nullGeometryFeatures_={};const e=new S(v.a.CLEAR);this.dispatchEvent(e),this.changed()},O.prototype.forEachFeature=function(t){return this.featuresRtree_?this.featuresRtree_.forEach(t):this.featuresCollection_?this.featuresCollection_.forEach(t):void 0},O.prototype.forEachFeatureAtCoordinateDirect=function(t,e){const i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,function(i){return i.getGeometry().intersectsCoordinate(t)?e(i):void 0})},O.prototype.forEachFeatureInExtent=function(t,e){return this.featuresRtree_?this.featuresRtree_.forEachInExtent(t,e):this.featuresCollection_?this.featuresCollection_.forEach(e):void 0},O.prototype.forEachFeatureIntersectingExtent=function(t,e){return this.forEachFeatureInExtent(t,function(i){if(i.getGeometry().intersectsExtent(t)){const t=e(i);if(t)return t}})},O.prototype.getFeaturesCollection=function(){return this.featuresCollection_},O.prototype.getFeatures=function(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray():this.featuresRtree_&&(t=this.featuresRtree_.getAll(),Object(y.isEmpty)(this.nullGeometryFeatures_)||Object(a.c)(t,Object(y.getValues)(this.nullGeometryFeatures_))),t},O.prototype.getFeaturesAtCoordinate=function(t){const e=[];return this.forEachFeatureAtCoordinateDirect(t,function(t){e.push(t)}),e},O.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_.getInExtent(t)},O.prototype.getClosestFeatureToCoordinate=function(t,e){const i=t[0],n=t[1];let r=null;const o=[NaN,NaN];let s=1/0;const a=[-1/0,-1/0,1/0,1/0],l=e||p.b;return this.featuresRtree_.forEachInExtent(a,function(t){if(l(t)){const e=t.getGeometry(),l=s;if((s=e.closestPointXY(i,n,o,s))<l){r=t;const e=Math.sqrt(s);a[0]=i-e,a[1]=n-e,a[2]=i+e,a[3]=n+e}}}),r},O.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},O.prototype.getFeatureById=function(t){const e=this.idIndex_[t.toString()];return void 0!==e?e:null},O.prototype.getFormat=function(){return this.format_},O.prototype.getOverlaps=function(){return this.overlaps_},O.prototype.getResolutions=function(){},O.prototype.getUrl=function(){return this.url_},O.prototype.handleFeatureChange_=function(t){const e=t.target,i=Object(n.getUid)(e).toString(),r=e.getGeometry();if(r){const t=r.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(t,e)):this.featuresRtree_&&this.featuresRtree_.update(t,e)}else i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[i]=e);const o=e.getId();if(void 0!==o){const t=o.toString();i in this.undefIdIndex_?(delete this.undefIdIndex_[i],this.idIndex_[t]=e):this.idIndex_[t]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[t]=e)}else i in this.undefIdIndex_||(this.removeFromIdIndex_(e),this.undefIdIndex_[i]=e);this.changed(),this.dispatchEvent(new S(v.a.CHANGEFEATURE,e))},O.prototype.hasFeature=function(t){const e=t.getId();if(void 0!==e)return e in this.idIndex_;return Object(n.getUid)(t).toString()in this.undefIdIndex_},O.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&Object(y.isEmpty)(this.nullGeometryFeatures_)},O.prototype.loadFeatures=function(t,e,i){const n=this.loadedExtentsRtree_,r=this.strategy_(t,e);for(let t=0,o=r.length;t<o;++t){const o=r[t];n.forEachInExtent(o,function(t){return Object(d.containsExtent)(t.extent,o)})||(this.loader_.call(this,o,e,i),n.insert(o,{extent:o.slice()}))}},O.prototype.removeLoadedExtent=function(t){const e=this.loadedExtentsRtree_;let i;e.forEachInExtent(t,function(e){if(Object(d.equals)(e.extent,t))return i=e,!0}),i&&e.remove(i)},O.prototype.removeFeature=function(t){const e=Object(n.getUid)(t).toString();e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()},O.prototype.removeFeatureInternal=function(t){const e=Object(n.getUid)(t).toString();this.featureChangeKeys_[e].forEach(u.unlistenByKey),delete this.featureChangeKeys_[e];const i=t.getId();void 0!==i?delete this.idIndex_[i.toString()]:delete this.undefIdIndex_[e],this.dispatchEvent(new S(v.a.REMOVEFEATURE,t))},O.prototype.removeFromIdIndex_=function(t){let e=!1;for(const i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],e=!0;break}return e},O.prototype.setLoader=function(t){this.loader_=t},e.default=O},function(t,e,i){"use strict";i.r(e),i.d(e,"asColorLike",function(){return r}),i.d(e,"isColorLike",function(){return o});var n=i(63);function r(t){return o(t)?t:Object(n.toString)(t)}function o(t){return"string"==typeof t||t instanceof CanvasPattern||t instanceof CanvasGradient}},function(t,e,i){"use strict";var n=i(1),r=i(12),o=i(33),s=i(103),a=i(0);const l=function(){this.xmlSerializer_=new XMLSerializer,o.default.call(this)};Object(n.inherits)(l,o.default),l.prototype.getType=function(){return s.a.XML},l.prototype.readFeature=function(t,e){if(Object(a.isDocument)(t))return this.readFeatureFromDocument(t,e);if(Object(a.isNode)(t))return this.readFeatureFromNode(t,e);if("string"==typeof t){const i=Object(a.parse)(t);return this.readFeatureFromDocument(i,e)}return null},l.prototype.readFeatureFromDocument=function(t,e){const i=this.readFeaturesFromDocument(t,e);return i.length>0?i[0]:null},l.prototype.readFeatureFromNode=function(t,e){return null},l.prototype.readFeatures=function(t,e){if(Object(a.isDocument)(t))return this.readFeaturesFromDocument(t,e);if(Object(a.isNode)(t))return this.readFeaturesFromNode(t,e);if("string"==typeof t){const i=Object(a.parse)(t);return this.readFeaturesFromDocument(i,e)}return[]},l.prototype.readFeaturesFromDocument=function(t,e){const i=[];for(let n=t.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&Object(r.c)(i,this.readFeaturesFromNode(n,e));return i},l.prototype.readFeaturesFromNode=function(t,e){},l.prototype.readGeometry=function(t,e){if(Object(a.isDocument)(t))return this.readGeometryFromDocument(t,e);if(Object(a.isNode)(t))return this.readGeometryFromNode(t,e);if("string"==typeof t){const i=Object(a.parse)(t);return this.readGeometryFromDocument(i,e)}return null},l.prototype.readGeometryFromDocument=function(t,e){return null},l.prototype.readGeometryFromNode=function(t,e){return null},l.prototype.readProjection=function(t){if(Object(a.isDocument)(t))return this.readProjectionFromDocument(t);if(Object(a.isNode)(t))return this.readProjectionFromNode(t);if("string"==typeof t){const e=Object(a.parse)(t);return this.readProjectionFromDocument(e)}return null},l.prototype.readProjectionFromDocument=function(t){return this.dataProjection},l.prototype.readProjectionFromNode=function(t){return this.dataProjection},l.prototype.writeFeature=function(t,e){const i=this.writeFeatureNode(t,e);return this.xmlSerializer_.serializeToString(i)},l.prototype.writeFeatureNode=function(t,e){return null},l.prototype.writeFeatures=function(t,e){const i=this.writeFeaturesNode(t,e);return this.xmlSerializer_.serializeToString(i)},l.prototype.writeFeaturesNode=function(t,e){return null},l.prototype.writeGeometry=function(t,e){const i=this.writeGeometryNode(t,e);return this.xmlSerializer_.serializeToString(i)},l.prototype.writeGeometryNode=function(t,e){return null},e.a=l},function(t,e,i){"use strict";var n=i(1),r=i(99);const o=function(t,e,i,n){r.a.call(this,t,e),this.expression=i,this.matchCase=n};Object(n.inherits)(o,r.a),e.a=o},function(t,e,i){"use strict";function n(t,e,i,n){for(;e<i-n;){for(let r=0;r<n;++r){const o=t[e+r];t[e+r]=t[i-n+r],t[i-n+r]=o}e+=n,i-=n}}function r(t,e,i,n){let r=0,o=t[i-n],s=t[i-n+1];for(;e<i;e+=n){const i=t[e],n=t[e+1];r+=(i-o)*(n+s),o=i,s=n}return r>0}function o(t,e,i,n,o){const s=void 0!==o&&o;for(let o=0,a=i.length;o<a;++o){const a=i[o],l=r(t,e,a,n);if(0===o){if(s&&l||!s&&!l)return!1}else if(s&&!l||!s&&l)return!1;e=a}return!0}function s(t,e,i,n,r){for(let s=0,a=i.length;s<a;++s)if(!o(t,e,i[s],n,r))return!1;return!0}function a(t,e,i,o,s){const a=void 0!==s&&s;for(let s=0,l=i.length;s<l;++s){const l=i[s],u=r(t,e,l,o);(0===s?a&&u||!a&&!u:a&&!u||!a&&u)&&n(t,e,l,o),e=l}return e}function l(t,e,i,n,r){for(let o=0,s=i.length;o<s;++o)e=a(t,e,i[o],n,r);return e}i.d(e,"a",function(){return r}),i.d(e,"b",function(){return o}),i.d(e,"c",function(){return s}),i.d(e,"d",function(){return a}),i.d(e,"e",function(){return l})},function(t,e,i){"use strict";i.d(e,"a",function(){return u}),i.d(e,"b",function(){return c}),i.d(e,"c",function(){return h}),i.d(e,"d",function(){return d});var n=i(1),r=i(30),o=i(5),s=i(31);const a=.5,l={Point:function(t,e,i,n){const o=i.getImage();if(o){if(o.getImageState()!=r.a.LOADED)return;const a=t.getReplay(i.getZIndex(),s.a.IMAGE);a.setImageStyle(o,t.addDeclutter(!1)),a.drawPoint(e,n)}const a=i.getText();if(a){const r=t.getReplay(i.getZIndex(),s.a.TEXT);r.setTextStyle(a,t.addDeclutter(!!o)),r.drawText(e,n)}},LineString:function(t,e,i,n){const r=i.getStroke();if(r){const o=t.getReplay(i.getZIndex(),s.a.LINE_STRING);o.setFillStrokeStyle(null,r),o.drawLineString(e,n)}const o=i.getText();if(o){const r=t.getReplay(i.getZIndex(),s.a.TEXT);r.setTextStyle(o,t.addDeclutter(!1)),r.drawText(e,n)}},Polygon:function(t,e,i,n){const r=i.getFill(),o=i.getStroke();if(r||o){const a=t.getReplay(i.getZIndex(),s.a.POLYGON);a.setFillStrokeStyle(r,o),a.drawPolygon(e,n)}const a=i.getText();if(a){const r=t.getReplay(i.getZIndex(),s.a.TEXT);r.setTextStyle(a,t.addDeclutter(!1)),r.drawText(e,n)}},MultiPoint:function(t,e,i,n){const o=i.getImage();if(o){if(o.getImageState()!=r.a.LOADED)return;const a=t.getReplay(i.getZIndex(),s.a.IMAGE);a.setImageStyle(o,t.addDeclutter(!1)),a.drawMultiPoint(e,n)}const a=i.getText();if(a){const r=t.getReplay(i.getZIndex(),s.a.TEXT);r.setTextStyle(a,t.addDeclutter(!!o)),r.drawText(e,n)}},MultiLineString:function(t,e,i,n){const r=i.getStroke();if(r){const o=t.getReplay(i.getZIndex(),s.a.LINE_STRING);o.setFillStrokeStyle(null,r),o.drawMultiLineString(e,n)}const o=i.getText();if(o){const r=t.getReplay(i.getZIndex(),s.a.TEXT);r.setTextStyle(o,t.addDeclutter(!1)),r.drawText(e,n)}},MultiPolygon:function(t,e,i,n){const r=i.getFill(),o=i.getStroke();if(o||r){const a=t.getReplay(i.getZIndex(),s.a.POLYGON);a.setFillStrokeStyle(r,o),a.drawMultiPolygon(e,n)}const a=i.getText();if(a){const r=t.getReplay(i.getZIndex(),s.a.TEXT);r.setTextStyle(a,t.addDeclutter(!1)),r.drawText(e,n)}},GeometryCollection:function(t,e,i,n){const r=e.getGeometriesArray();let o,s;for(o=0,s=r.length;o<s;++o){const e=l[r[o].getType()];e(t,r[o],i,n)}},Circle:function(t,e,i,n){const r=i.getFill(),o=i.getStroke();if(r||o){const a=t.getReplay(i.getZIndex(),s.a.CIRCLE);a.setFillStrokeStyle(r,o),a.drawCircle(e,n)}const a=i.getText();if(a){const r=t.getReplay(i.getZIndex(),s.a.TEXT);r.setTextStyle(a,t.addDeclutter(!1)),r.drawText(e,n)}}};function u(t,e){return Object(n.getUid)(t)-Object(n.getUid)(e)}function c(t,e){const i=h(t,e);return i*i}function h(t,e){return a*t/e}function d(t,e,i,n,a,u){let c=!1;const h=i.getImage();if(h){let t=h.getImageState();t==r.a.LOADED||t==r.a.ERROR?h.unlistenImageChange(a,u):(t==r.a.IDLE&&h.load(),t=h.getImageState(),h.listenImageChange(a,u),c=!0)}return function(t,e,i,n){const r=i.getGeometryFunction()(e);if(!r)return;const a=r.getSimplifiedGeometry(n);if(i.getRenderer())!function t(e,i,n,r){if(i.getType()==o.default.GEOMETRY_COLLECTION){const o=i.getGeometries();for(let i=0,s=o.length;i<s;++i)t(e,o[i],n,r);return}const a=e.getReplay(n.getZIndex(),s.a.DEFAULT);a.drawCustom(i,r,n.getRenderer())}(t,a,i,e);else{const n=l[a.getType()];n(t,a,i,e)}}(t,e,i,n),c}},function(t,e,i){"use strict";e.a={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"}},function(t,e,i){"use strict";i.r(e),i.d(e,"RenderType",function(){return u});var n=i(1),r=i(54),o=i(60),s=i(275),a=i(11),l=i(62);const u={IMAGE:"image",VECTOR:"vector"},c="renderOrder",h=function(t){const e=t||{},i=Object(a.assign)({},e);delete i.style,delete i.renderBuffer,delete i.updateWhileAnimating,delete i.updateWhileInteracting,o.default.call(this,i),this.declutter_=void 0!==e.declutter&&e.declutter,this.renderBuffer_=void 0!==e.renderBuffer?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=void 0!==e.updateWhileAnimating&&e.updateWhileAnimating,this.updateWhileInteracting_=void 0!==e.updateWhileInteracting&&e.updateWhileInteracting,this.renderMode_=e.renderMode||s.a.VECTOR,this.type=r.a.VECTOR};Object(n.inherits)(h,o.default),h.prototype.getDeclutter=function(){return this.declutter_},h.prototype.setDeclutter=function(t){this.declutter_=t},h.prototype.getRenderBuffer=function(){return this.renderBuffer_},h.prototype.getRenderOrder=function(){return this.get(c)},h.prototype.getSource,h.prototype.getStyle=function(){return this.style_},h.prototype.getStyleFunction=function(){return this.styleFunction_},h.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},h.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},h.prototype.setRenderOrder=function(t){this.set(c,t)},h.prototype.setStyle=function(t){this.style_=void 0!==t?t:l.createDefaultStyle,this.styleFunction_=null===t?void 0:Object(l.toFunction)(this.style_),this.changed()},h.prototype.getRenderMode=function(){return this.renderMode_},e.default=h},function(t,e,i){"use strict";i.r(e);var n=i(1);const r=function(t){const e=t||{};this.color_=void 0!==e.color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width,this.checksum_=void 0};r.prototype.clone=function(){const t=this.getColor();return new r({color:t&&t.slice?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},r.prototype.getColor=function(){return this.color_},r.prototype.getLineCap=function(){return this.lineCap_},r.prototype.getLineDash=function(){return this.lineDash_},r.prototype.getLineDashOffset=function(){return this.lineDashOffset_},r.prototype.getLineJoin=function(){return this.lineJoin_},r.prototype.getMiterLimit=function(){return this.miterLimit_},r.prototype.getWidth=function(){return this.width_},r.prototype.setColor=function(t){this.color_=t,this.checksum_=void 0},r.prototype.setLineCap=function(t){this.lineCap_=t,this.checksum_=void 0},r.prototype.setLineDash=function(t){this.lineDash_=t,this.checksum_=void 0},r.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t,this.checksum_=void 0},r.prototype.setLineJoin=function(t){this.lineJoin_=t,this.checksum_=void 0},r.prototype.setMiterLimit=function(t){this.miterLimit_=t,this.checksum_=void 0},r.prototype.setWidth=function(t){this.width_=t,this.checksum_=void 0},r.prototype.getChecksum=function(){return void 0===this.checksum_&&(this.checksum_="s",this.color_?"string"==typeof this.color_?this.checksum_+=this.color_:this.checksum_+=Object(n.getUid)(this.color_).toString():this.checksum_+="-",this.checksum_+=","+(void 0!==this.lineCap_?this.lineCap_.toString():"-")+","+(this.lineDash_?this.lineDash_.toString():"-")+","+(void 0!==this.lineDashOffset_?this.lineDashOffset_:"-")+","+(void 0!==this.lineJoin_?this.lineJoin_:"-")+","+(void 0!==this.miterLimit_?this.miterLimit_.toString():"-")+","+(void 0!==this.width_?this.width_.toString():"-")),this.checksum_},e.default=r},function(t,e,i){"use strict";e.a={FRACTION:"fraction",PIXELS:"pixels"}},function(t,e,i){"use strict";e.a={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}},function(t,e,i){"use strict";e.a={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"}},function(t,e,i){"use strict";function n(t,e){const i=[];Object.keys(e).forEach(function(t){null!==e[t]&&void 0!==e[t]&&i.push(t+"="+encodeURIComponent(e[t]))});const n=i.join("&");return(t=-1===(t=t.replace(/[?&]$/,"")).indexOf("?")?t+"?":t+"&")+n}i.r(e),i.d(e,"appendParams",function(){return n})},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(63);const o=function(t){const e=t||{};this.color_=void 0!==e.color?e.color:null,this.checksum_=void 0};o.prototype.clone=function(){const t=this.getColor();return new o({color:t&&t.slice?t.slice():t||void 0})},o.prototype.getColor=function(){return this.color_},o.prototype.setColor=function(t){this.color_=t,this.checksum_=void 0},o.prototype.getChecksum=function(){return void 0===this.checksum_&&(this.color_ instanceof CanvasPattern||this.color_ instanceof CanvasGradient?this.checksum_=Object(n.getUid)(this.color_).toString():this.checksum_="f"+(this.color_?Object(r.asString)(this.color_):"-")),this.checksum_},e.default=o},function(t,e,i){"use strict";i.d(e,"e",function(){return o}),i.d(e,"a",function(){return s}),i.d(e,"f",function(){return a}),i.d(e,"d",function(){return l}),i.d(e,"b",function(){return u}),i.d(e,"c",function(){return c});var n=i(18);function r(t,e,i,r,o,s,a){const l=t[e],u=t[e+1],c=t[i]-l,h=t[i+1]-u;let d;if(0===c&&0===h)d=e;else{const f=((o-l)*c+(s-u)*h)/(c*c+h*h);if(f>1)d=i;else{if(f>0){for(let o=0;o<r;++o)a[o]=Object(n.c)(t[e+o],t[i+o],f);return void(a.length=r)}d=e}}for(let e=0;e<r;++e)a[e]=t[d+e];a.length=r}function o(t,e,i,r,o){let s=t[e],a=t[e+1];for(e+=r;e<i;e+=r){const i=t[e],r=t[e+1],l=Object(n.g)(s,a,i,r);l>o&&(o=l),s=i,a=r}return o}function s(t,e,i,n,r){for(let s=0,a=i.length;s<a;++s){const a=i[s];r=o(t,e,a,n,r),e=a}return r}function a(t,e,i,n,r){for(let o=0,a=i.length;o<a;++o){const a=i[o];r=s(t,e,a,n,r),e=a[a.length-1]}return r}function l(t,e,i,o,s,a,l,u,c,h,d){if(e==i)return h;let f,p;if(0===s){if((p=Object(n.g)(l,u,t[e],t[e+1]))<h){for(f=0;f<o;++f)c[f]=t[e+f];return c.length=o,p}return h}const g=d||[NaN,NaN];let y=e+o;for(;y<i;)if(r(t,y-o,y,o,l,u,g),(p=Object(n.g)(l,u,g[0],g[1]))<h){for(h=p,f=0;f<o;++f)c[f]=g[f];c.length=o,y+=o}else y+=o*Math.max((Math.sqrt(p)-Math.sqrt(h))/s|0,1);if(a&&(r(t,i-o,e,o,l,u,g),(p=Object(n.g)(l,u,g[0],g[1]))<h)){for(h=p,f=0;f<o;++f)c[f]=g[f];c.length=o}return h}function u(t,e,i,n,r,o,s,a,u,c,h){const d=h||[NaN,NaN];for(let h=0,f=i.length;h<f;++h){const f=i[h];c=l(t,e,f,n,r,o,s,a,u,c,d),e=f}return c}function c(t,e,i,n,r,o,s,a,l,c,h){const d=h||[NaN,NaN];for(let h=0,f=i.length;h<f;++h){const f=i[h];c=u(t,e,f,n,r,o,s,a,l,c,d),e=f[f.length-1]}return c}},function(t,e,i){"use strict";const n=function(t){this.tagName_=t};n.prototype.getTagName=function(){return this.tagName_},e.a=n},function(t,e,i){"use strict";var n=i(1),r=i(98);const o=function(t,e){r.a.call(this,t),this.propertyName=e};Object(n.inherits)(o,r.a),e.a=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Point2D=void 0;var n=l(i(13)),r=l(i(8)),o=l(i(20)),s=l(i(16)),a=l(i(17));function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t,i,o){(0,r.default)(this,e);var a=o||{},l=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,a));return l.x=void 0!==t?t:null,l.y=void 0!==i?i:null,l.nearDis=void 0!==a.nearDis?parseFloat(a.nearDis):null,l.CLASS_NAME="Zondy.Object.Point2D",l}return(0,a.default)(e,t),(0,o.default)(e,[{key:"getGeometryType",value:function(){return"point"}},{key:"setByOL",value:function(t){if(void 0!==t){var e=t.getCoordinates();this.x=e[0],this.y=e[1]}}},{key:"toString",value:function(){if(null==this.x||null==this.y)return"";var t=this.x+","+this.y;return void 0!==this.nearDis&&(t+=";"+this.nearDis),t}}]),e}(i(183).Tangram);e.Point2D=u,Zondy.Object.Point2D=u},function(t,e,i){"use strict";i.r(e);var n=i(155),r=i(23),o=i(130),s=i(12),a=i(2),l=i(18),u=i(49),c=i(50);const h=function(t){let e;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,Object(r.a)(Object(s.g)(this.resolutions_,function(t,e){return e-t},!0),17),!t.origins)for(let t=0,i=this.resolutions_.length-1;t<i;++t)if(e){if(this.resolutions_[t]/this.resolutions_[t+1]!==e){e=void 0;break}}else e=this.resolutions_[t]/this.resolutions_[t+1];this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,Object(r.a)(this.origins_.length==this.resolutions_.length,20));const i=t.extent;void 0===i||this.origin_||this.origins_||(this.origin_=Object(a.getTopLeft)(i)),Object(r.a)(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,Object(r.a)(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:n.b,Object(r.a)(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==i?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map(function(t,e){return new o.b(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1))},this):i&&this.calculateTileRanges_(i)},d=[0,0,0];h.prototype.forEachTileCoord=function(t,e,i){const n=this.getTileRangeForExtentAndZ(t,e);for(let t=n.minX,r=n.maxX;t<=r;++t)for(let r=n.minY,o=n.maxY;r<=o;++r)i([e,t,r])},h.prototype.forEachTileCoordParentTileRange=function(t,e,i,n,r){let s,a,l,u=null,c=t[0]-1;for(2===this.zoomFactor_?(a=t[1],l=t[2]):u=this.getTileCoordExtent(t,r);c>=this.minZoom;){if(2===this.zoomFactor_?(a=Math.floor(a/2),l=Math.floor(l/2),s=Object(o.a)(a,a,l,l,n)):s=this.getTileRangeForExtentAndZ(u,c,n),e.call(i,c,s))return!0;--c}return!1},h.prototype.getExtent=function(){return this.extent_},h.prototype.getMaxZoom=function(){return this.maxZoom},h.prototype.getMinZoom=function(){return this.minZoom},h.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},h.prototype.getResolution=function(t){return this.resolutions_[t]},h.prototype.getResolutions=function(){return this.resolutions_},h.prototype.getTileCoordChildTileRange=function(t,e,i){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){const i=2*t[1],n=2*t[2];return Object(o.a)(i,i+1,n,n+1,e)}const n=this.getTileCoordExtent(t,i);return this.getTileRangeForExtentAndZ(n,t[0]+1,e)}return null},h.prototype.getTileRangeExtent=function(t,e,i){const n=this.getOrigin(t),r=this.getResolution(t),o=Object(u.toSize)(this.getTileSize(t),this.tmpSize_),s=n[0]+e.minX*o[0]*r,l=n[0]+(e.maxX+1)*o[0]*r,c=n[1]+e.minY*o[1]*r,h=n[1]+(e.maxY+1)*o[1]*r;return Object(a.createOrUpdate)(s,c,l,h,i)},h.prototype.getTileRangeForExtentAndZ=function(t,e,i){const n=d;this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,n);const r=n[1],s=n[2];return this.getTileCoordForXYAndZ_(t[2],t[3],e,!0,n),Object(o.a)(r,n[1],s,n[2],i)},h.prototype.getTileCoordCenter=function(t){const e=this.getOrigin(t[0]),i=this.getResolution(t[0]),n=Object(u.toSize)(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*n[0]*i,e[1]+(t[2]+.5)*n[1]*i]},h.prototype.getTileCoordExtent=function(t,e){const i=this.getOrigin(t[0]),n=this.getResolution(t[0]),r=Object(u.toSize)(this.getTileSize(t[0]),this.tmpSize_),o=i[0]+t[1]*r[0]*n,s=i[1]+t[2]*r[1]*n,l=o+r[0]*n,c=s+r[1]*n;return Object(a.createOrUpdate)(o,s,l,c,e)},h.prototype.getTileCoordForCoordAndResolution=function(t,e,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,i)},h.prototype.getTileCoordForXYAndResolution_=function(t,e,i,n,r){const o=this.getZForResolution(i),s=i/this.getResolution(o),a=this.getOrigin(o),l=Object(u.toSize)(this.getTileSize(o),this.tmpSize_),h=n?.5:0,d=n?0:.5,f=Math.floor((t-a[0])/i+h),p=Math.floor((e-a[1])/i+d);let g=s*f/l[0],y=s*p/l[1];return n?(g=Math.ceil(g)-1,y=Math.ceil(y)-1):(g=Math.floor(g),y=Math.floor(y)),Object(c.a)(o,g,y,r)},h.prototype.getTileCoordForXYAndZ_=function(t,e,i,n,r){const o=this.getOrigin(i),s=this.getResolution(i),a=Object(u.toSize)(this.getTileSize(i),this.tmpSize_),l=n?.5:0,h=n?0:.5,d=Math.floor((t-o[0])/s+l),f=Math.floor((e-o[1])/s+h);let p=d/a[0],g=f/a[1];return n?(p=Math.ceil(p)-1,g=Math.ceil(g)-1):(p=Math.floor(p),g=Math.floor(g)),Object(c.a)(i,p,g,r)},h.prototype.getTileCoordForCoordAndZ=function(t,e,i){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i)},h.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},h.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},h.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:null},h.prototype.getZForResolution=function(t,e){const i=Object(s.h)(this.resolutions_,t,e||0);return Object(l.a)(i,this.minZoom,this.maxZoom)},h.prototype.calculateTileRanges_=function(t){const e=this.resolutions_.length,i=new Array(e);for(let n=this.minZoom;n<e;++n)i[n]=this.getTileRangeForExtentAndZ(t,n);this.fullTileRanges_=i},e.default=h},function(t,e,i){"use strict";i.d(e,"a",function(){return r}),i.d(e,"b",function(){return o}),i.d(e,"c",function(){return s}),i.d(e,"d",function(){return a});var n=i(2);function r(t,e,i,r,s){return!Object(n.forEachCorner)(s,function(n){return!o(t,e,i,r,n[0],n[1])})}function o(t,e,i,n,r,o){let s=0,a=t[i-n],l=t[i-n+1];for(;e<i;e+=n){const i=t[e],n=t[e+1];l<=o?n>o&&(i-a)*(o-l)-(r-a)*(n-l)>0&&s++:n<=o&&(i-a)*(o-l)-(r-a)*(n-l)<0&&s--,a=i,l=n}return 0!==s}function s(t,e,i,n,r,s){if(0===i.length)return!1;if(!o(t,e,i[0],n,r,s))return!1;for(let e=1,a=i.length;e<a;++e)if(o(t,i[e-1],i[e],n,r,s))return!1;return!0}function a(t,e,i,n,r,o){if(0===i.length)return!1;for(let a=0,l=i.length;a<l;++a){const l=i[a];if(s(t,e,l,n,r,o))return!0;e=l[l.length-1]}return!1}},function(t,e,i){"use strict";e.a={ARRAY_BUFFER:"arraybuffer",JSON:"json",TEXT:"text",XML:"xml"}},function(t,e,i){"use strict";e.a={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature"}},function(t,e){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(t,e,i){var n=i(299)("wks"),r=i(248),o=i(105).Symbol,s="function"==typeof o;(t.exports=function(t){return n[t]||(n[t]=s&&o[t]||(s?o:r)("Symbol."+t))}).store=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Shape=void 0;var n=p(i(13)),r=p(i(8)),o=p(i(20)),s=p(i(16)),a=p(i(46)),l=p(i(17)),u=i(6),c=i(21),h=i(220),d=i(251),f=i(116);function p(t){return t&&t.__esModule?t:{default:t}}var g=function(t){function e(t){(0,r.default)(this,e);var i,o=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t));return t=t||{},o.id=null,o.style={},o.highlightStyle=null,o.parent=null,o.__dirty=!0,o.__clipShapes=[],o.invisible=!1,o.ignore=!1,o.zlevel=0,o.draggable=!1,o.clickable=!1,o.hoverable=!0,o.z=0,o.refOriginalPosition=[0,0],o.refDataID=null,o.isHoverByRefDataID=!1,o.refDataHoverGroup=null,o.dataInfo=null,(0,c.extend)(o,t),o.id=o.id||(0,c.newGuid)(),o.CLASS_NAME="Zondy.LevelRenderer.Shape",o.getTansform=(i=[],function(t,e){var n=[t,e];return this.needTransform&&this.transform&&(f.SUtil.Util_matrix.invert(i,this.transform),f.SUtil.Util_matrix.mulVector(n,i,[t,e,1]),t==n[0]&&e==n[1]&&this.updateNeedTransform()),n}),o}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.id=null,this.style=null,this.highlightStyle=null,this.parent=null,this.__dirty=null,this.__clipShapes=null,this.invisible=null,this.ignore=null,this.zlevel=null,this.draggable=null,this.clickable=null,this.hoverable=null,this.z=null,this.refOriginalPosition=null,this.refDataID=null,this.refDataHoverGroup=null,this.isHoverByRefDataID=null,this.dataInfo=null,(0,a.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"destroy",this).call(this)}},{key:"brush",value:function(t,e){var i=this.beforeBrush(t,e);switch(t.beginPath(),this.buildPath(t,i),i.brushType){case"both":this.setCtxGlobalAlpha(t,"fill",i),t.fill(),i.lineWidth>0&&(this.setCtxGlobalAlpha(t,"stroke",i),t.stroke()),this.setCtxGlobalAlpha(t,"reset",i);break;case"stroke":this.setCtxGlobalAlpha(t,"stroke",i),i.lineWidth>0&&t.stroke(),this.setCtxGlobalAlpha(t,"reset",i);break;default:this.setCtxGlobalAlpha(t,"fill",i),t.fill(),this.setCtxGlobalAlpha(t,"reset",i)}this.drawText(t,i,this.style),this.afterBrush(t)}},{key:"beforeBrush",value:function(t,e){var i=this.style;return this.brushTypeOnly&&(i.brushType=this.brushTypeOnly),e&&(i=this.getHighlightStyle(i,this.highlightStyle||{},this.brushTypeOnly)),"stroke"==this.brushTypeOnly&&(i.strokeColor=i.strokeColor||i.color),t.save(),this.doClip(t),this.setContext(t,i),this.setTransform(t),i}},{key:"afterBrush",value:function(t){t.restore()}},{key:"setContext",value:function(t,e){for(var i=[["color","fillStyle"],["strokeColor","strokeStyle"],["opacity","globalAlpha"],["lineCap","lineCap"],["lineJoin","lineJoin"],["miterLimit","miterLimit"],["lineWidth","lineWidth"],["shadowBlur","shadowBlur"],["shadowColor","shadowColor"],["shadowOffsetX","shadowOffsetX"],["shadowOffsetY","shadowOffsetY"]],n=0,r=i.length;n<r;n++){var o=e[i[n][0]],s=i[n][1];void 0!==o&&(t[s]=o)}}},{key:"doClip",value:function(t){var e=f.SUtil.Util_matrix.create();if(this.__clipShapes)for(var i=0;i<this.__clipShapes.length;i++){var n=this.__clipShapes[i];if(n.needTransform){var r=n.transform;f.SUtil.Util_matrix.invert(e,r),t.transform(r[0],r[1],r[2],r[3],r[4],r[5])}if(t.beginPath(),n.buildPath(t,n.style),t.clip(),n.needTransform){var o=e;t.transform(o[0],o[1],o[2],o[3],o[4],o[5])}}}},{key:"getHighlightStyle",value:function(t,e,i){var n={};for(var r in t)n[r]=t[r];var o=f.SUtil.Util_color.getHighlightColor();for(var s in"stroke"!=t.brushType?(n.strokeColor=o,n.lineWidth=t.lineWidth||1,n.brushType="both"):"stroke"!=i?(n.strokeColor=o,n.lineWidth=t.lineWidth||1):n.strokeColor=e.strokeColor||f.SUtil.Util_color.mix(t.strokeColor,f.SUtil.Util_color.toRGB(o)),e)void 0!==e[s]&&(n[s]=e[s]);return n}},{key:"getHighlightZoom",value:function(){return"text"!=this.type?6:2}},{key:"drift",value:function(t,e){this.position[0]+=t,this.position[1]+=e}},{key:"buildPath",value:function(t,e){}},{key:"getRect",value:function(t){}},{key:"isCover",value:function(t,e){var i=this.getTansform(t,e);t=i[0],e=i[1];var n=this.style.__rect;return n||(n=this.style.__rect=this.getRect(this.style)),t>=n.x&&t<=n.x+n.width&&e>=n.y&&e<=n.y+n.height&&f.SUtil.Util_area.isInside(this,this.style,t,e)}},{key:"drawText",value:function(t,i,n){if(void 0!==i.text&&!1!==i.text){var r=i.textColor||i.color||i.strokeColor;t.fillStyle=r;var o,s,a,l,u=10,c=i.textPosition||this.textPosition||"top",h=[];switch(h=this.refOriginalPosition&&2===this.refOriginalPosition.length?this.refOriginalPosition:[0,0],c){case"inside":case"top":case"bottom":case"left":case"right":if(this.getRect){var d=(n||i).__rect||this.getRect(n||i);switch(c){case"inside":a=d.x+d.width/2,l=d.y+d.height/2,o="center",s="middle","stroke"!=i.brushType&&r==i.color&&(t.fillStyle="#fff");break;case"left":a=d.x-u,l=d.y+d.height/2,o="end",s="middle";break;case"right":a=d.x+d.width+u,l=d.y+d.height/2,o="start",s="middle";break;case"top":a=d.x+d.width/2,l=d.y-u,o="center",s="bottom";break;case"bottom":a=d.x+d.width/2,l=d.y+d.height+u,o="center",s="top"}}break;case"start":case"end":var f=0,p=0,g=0,y=0;if(void 0!==i.pointList){var m=i.pointList;if(m.length<2)return;var _=m.length;switch(c){case"start":f=m[0][0]+h[0],p=m[1][0]+h[0],g=m[0][1]+h[1],y=m[1][1]+h[1];break;case"end":f=m[_-2][0]+h[0],p=m[_-1][0]+h[0],g=m[_-2][1]+h[1],y=m[_-1][1]+h[1]}}else f=i.xStart+h[0]||0,p=i.xEnd+h[0]||0,g=i.yStart+h[1]||0,y=i.yEnd+h[1]||0;switch(c){case"start":o=f<p?"end":"start",s=g<y?"bottom":"top",a=f,l=g;break;case"end":o=f<p?"start":"end",s=g<y?"top":"bottom",a=p,l=y}u-=4,f&&p&&f!=p?a-="end"==o?u:-u:o="center",g!=y?l-="bottom"==s?u:-u:s="middle";break;case"specific":a=i.textX||0,l=i.textY||0,o="start",s="middle"}i.labelXOffset&&!isNaN(i.labelXOffset)&&(a+=i.labelXOffset),i.labelYOffset&&!isNaN(i.labelYOffset)&&(l+=i.labelYOffset),null!=a&&null!=l&&e._fillText(t,i.text,a,l,i.textFont,i.textAlign||o,i.textBaseline||s)}}},{key:"modSelf",value:function(){this.__dirty=!0,this.style&&(this.style.__rect=null),this.highlightStyle&&(this.highlightStyle.__rect=null)}},{key:"isSilent",value:function(){return!(this.hoverable||this.draggable||this.clickable||this.onmousemove||this.onmouseover||this.onmouseout||this.onmousedown||this.onmouseup||this.onclick||this.ondragenter||this.ondragover||this.ondragleave||this.ondrop)}},{key:"setCtxGlobalAlpha",value:function(t,e,i){t.globalAlpha="fill"===e?void 0===i.fillOpacity?void 0===i.opacity?1:i.opacity:i.fillOpacity:"stroke"===e?void 0===i.strokeOpacity?void 0===i.opacity?1:i.opacity:i.strokeOpacity:void 0===i.opacity?1:i.opacity}}],[{key:"_fillText",value:function(t,i,n,r,o,s,a){o&&(t.font=o),t.textAlign=s,t.textBaseline=a;var l=e._getTextRect(i,n,r,o,s,a);i=(i+"").split("\n");var u=f.SUtil.Util_area.getTextHeight("ZH",o);switch(a){case"top":r=l.y;break;case"bottom":r=l.y+u;break;default:r=l.y+u/2}for(var c=0,h=i.length;c<h;c++)t.fillText(i[c],n,r),r+=u}},{key:"_getTextRect",value:function(t,e,i,n,r,o){var s=f.SUtil.Util_area.getTextWidth(t,n),a=f.SUtil.Util_area.getTextHeight("ZH",n);switch(t=(t+"").split("\n"),r){case"end":case"right":e-=s;break;case"center":e-=s/2}switch(o){case"top":break;case"bottom":i-=a*t.length;break;default:i-=a*t.length/2}return{x:e,y:i,width:s,height:a*t.length}}}]),e}((0,c.mixin)(h.Eventful,d.Transformable));e.Shape=g,u.Zondy.LevelRenderer.Shape=g},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShapeFactory=void 0;var n=C(i(8)),r=C(i(20)),o=i(6),s=i(254),a=i(311),l=i(255),u=i(400),c=i(256),h=i(401),d=i(402),f=i(312),p=i(313),g=i(403),y=i(404),m=i(314),_=i(310),v=i(257),b=i(405),S=i(406),O=i(21);function C(t){return t&&t.__esModule?t:{default:t}}var x=function(){function t(e){(0,n.default)(this,t),this.shapeParameters=e,this.CLASS_NAME="Zondy.Feature.ShapeFactory"}return(0,r.default)(t,[{key:"destroy",value:function(){this.shapeParameters=null}},{key:"createShape",value:function(e){if(e&&(this.shapeParameters=e),!this.shapeParameters)return null;var i=this.shapeParameters;if(i instanceof s.Point){var n=new Object;n.x=i.x,n.y=i.y,n.r=i.r,n=(0,O.copyAttributesWithClip)(n,i.style,["x","y"]);var r=new p.SmicPoint;return r.style=t.transformStyle(n),r.highlightStyle=t.transformStyle(i.highlightStyle),(0,O.copyAttributesWithClip)(r,i,["x","y","style","highlightStyle"]),r}if(i instanceof a.Line){if(!i.pointList)return null;var o=new Object;o.pointList=i.pointList,o=(0,O.copyAttributesWithClip)(o,i.style,["pointList"]);var C=new m.SmicBrokenLine;return C.style=t.transformStyle(o),C.highlightStyle=t.transformStyle(i.highlightStyle),(0,O.copyAttributesWithClip)(C,i,["pointList","style","highlightStyle"]),C}if(i instanceof l.Polygon){if(!i.pointList)return null;var x=new Object;x.pointList=i.pointList,x=(0,O.copyAttributesWithClip)(x,i.style,["pointList"]);var T=new v.SmicPolygon;return T.style=t.transformStyle(x),T.highlightStyle=t.transformStyle(i.highlightStyle),(0,O.copyAttributesWithClip)(T,i,["pointList","style","highlightStyle"]),T}if(i instanceof u.Rectangle){if(!i.x&&!i.y&!i.width&!i.height)return null;var E=new Object;E.x=i.x,E.y=i.y,E.width=i.width,E.height=i.height,E=(0,O.copyAttributesWithClip)(E,i.style,["x","y","width","height"]);var P=new b.SmicRectangle;return P.style=t.transformStyle(E),P.highlightStyle=t.transformStyle(i.highlightStyle),(0,O.copyAttributesWithClip)(P,i,["x","y","width","height","style","highlightStyle"]),P}if(i instanceof c.Sector){var j=new Object;j.x=i.x,j.y=i.y,j.r=i.r,j.startAngle=i.startAngle,j.endAngle=i.endAngle,i.r0&&(j.r0=i.r0),i.clockWise&&(j.clockWise=i.clockWise),j=(0,O.copyAttributesWithClip)(j,i.style,["x","y","r","startAngle","endAngle","r0","endAngle"]);var w=new S.SmicSector;return w.style=t.transformStyle(j),w.highlightStyle=t.transformStyle(i.highlightStyle),(0,O.copyAttributesWithClip)(w,i,["x","y","r","startAngle","endAngle","r0","endAngle","style","highlightStyle"]),w}if(i instanceof h.Label){var I=new Object;I.x=i.x,I.y=i.y,I.text=i.text,I=(0,O.copyAttributesWithClip)(I,i.style,["x","y","text"]);var L=new g.SmicText;return L.style=t.transformStyle(I),L.highlightStyle=t.transformStyle(i.highlightStyle),(0,O.copyAttributesWithClip)(L,i,["x","y","text","style","highlightStyle"]),L}if(i instanceof d.Image){var R=new Object;R.x=i.x,R.y=i.y,i.image&&(R.image=i.image),i.width&&(R.width=i.width),i.height&&(R.height=i.height),i.sx&&(R.sx=i.sx),i.sy&&(R.sy=i.sy),i.sWidth&&(R.sWidth=i.sWidth),i.sHeight&&(R.sHeight=i.sHeight),R=(0,O.copyAttributesWithClip)(R,i.style,["x","y","image","width","height","sx","sy","sWidth","sHeight"]);var A=new _.SmicImage;return A.style=t.transformStyle(R),A.highlightStyle=t.transformStyle(i.highlightStyle),(0,O.copyAttributesWithClip)(A,i,["x","y","image","width","height","style","highlightStyle"]),A}if(i instanceof f.Circle){var M=new Object;M.x=i.x,M.r=i.r,M.y=i.y,M=(0,O.copyAttributesWithClip)(M,i.style,["x","y","r"]);var F=new y.SmicCircle;return F.style=new t.transformStyle(M),F.highlightStyle=new t.transformStyle(i.highlightStyle),(0,O.copyAttributesWithClip)(F,i,["x","y","r","style","highlightStyle","lineWidth","text","textPosition"]),F}return null}}],[{key:"transformStyle",value:function(t){var e={},i=["normal","normal","normal","12","arial,sans-serif"],n=[!0,!1];for(var r in t)switch(r){case"fill":n[0]=t[r];break;case"fillColor":e.color=t[r];break;case"stroke":n[1]=t[r];break;case"strokeWidth":e.lineWidth=t[r];break;case"strokeLinecap":e.lineCap=t[r];break;case"strokeLineJoin":e.lineJoin=t[r];break;case"strokeDashstyle":e.lineType=t[r];break;case"pointRadius":e.r=t[r];break;case"label":e.text=t[r];break;case"labelRect":e.labelRect=t[r];break;case"fontColor":e.textColor=t[r];break;case"fontStyle":i[0]=t[r];break;case"fontVariant":i[1]=t[r];break;case"fontWeight":i[2]=t[r];break;case"fontSize":var o="";t[r]&&t[r].toString().indexOf("px")<0&&(o="px"),i[3]=t[r]+o;break;case"fontFamily":i[4]=t[r];break;case"fontOpacity":e.opacity=t[r];break;case"labelPosition":e.textPosition=t[r];break;case"labelAlign":e.textAlign=t[r];break;case"labelBaseline":e.textBaseline=t[r];break;case"labelRotation":e.textRotation=t[r];break;default:e[r]=t[r]}return e.textFont=i.join(" "),!0===n[0]&&!1===n[1]?e.brushType="fill":!1===n[0]&&!0===n[1]?e.brushType="stroke":!0===n[0]&&!0===n[1]?e.brushType="both":e.brushType="fill",null==e.lineWidth&&(e.lineWidth=1),e}},{key:"Background",value:function(t,e,i){var n=i||{},r=new u.Rectangle(e[0],e[3],Math.abs(e[2]-e[0]),Math.abs(e[3]-e[1]));return r.style={fillColor:"#f3f3f3"},n.backgroundStyle&&(0,O.copyAttributesWithClip)(r.style,n.backgroundStyle),n.backgroundRadius&&(r.style.radius=n.backgroundRadius),r.clickable=!1,r.hoverable=!1,t.createShape(r)}},{key:"GraphAxis",value:function(t,e,i,n){var r,o=e,s=i||{},u=[],c=[],d=!!s.useXReferenceLine&&s.useXReferenceLine,f=s.axisYTick&&!isNaN(s.axisYTick)?s.axisYTick:0,p=[],g=[];if(0==f){if(g.push([o[0],o[3]-5]),g.push([o[0],o[1]]),s.axis3DParameter&&!isNaN(s.axis3DParameter)&&s.axis3DParameter>=15){var y=parseInt(s.axis3DParameter),m=[o[0]-y,o[1]+y];s.axisUseArrow?(p.push([m[0]+1.5,m[1]-7.5]),p.push([m[0]-1,m[1]+1]),p.push([m[0]+7.5,m[1]-1.5]),g.push([m[0],m[1]])):g.push([m[0],m[1]]),g.push([o[0],o[1]])}g.push([o[2]+5,o[1]])}else{var _=Math.abs(o[1]-o[3])/f,v=o[3];g.push([o[0],v-5]);for(var b=0;b<f;b++){if(g.push([o[0],v]),g.push([o[0]-5,v]),g.push([o[0],v]),d){var S=new a.Line([[o[0],v],[o[2],v]]);S.style={strokeColor:"#cfcfcf",strokeLinecap:"butt",strokeLineJoin:"round",strokeWidth:1},S.clickable=!1,S.hoverable=!1,s.xReferenceLineStyle&&(0,O.copyAttributesWithClip)(S.style,s.xReferenceLineStyle),u.push(t.createShape(S))}v+=_}if(g.push([o[0],o[1]]),s.axis3DParameter&&!isNaN(s.axis3DParameter)&&s.axis3DParameter>=15){var C=parseInt(s.axis3DParameter),x=[o[0]-C,o[1]+C];s.axisUseArrow?(p.push([x[0]+1.5,x[1]-7.5]),p.push([x[0]-1,x[1]+1]),p.push([x[0]+7.5,x[1]-1.5]),g.push([x[0],x[1]])):g.push([x[0],x[1]]),g.push([o[0],o[1]])}g.push([o[2]+5,o[1]])}if(s.axisUseArrow){var T=[[o[2]+5,o[1]+4],[o[2]+13,o[1]],[o[2]+5,o[1]-4]],E=[[o[0]-4,o[3]-5],[o[0],o[3]-13],[o[0]+4,o[3]-5]],P=new l.Polygon(T);P.style={fillColor:"#008acd"},(0,O.copyAttributesWithClip)(P.style,s.axisStyle),c.push(t.createShape(P));var j=new l.Polygon(E);if(j.style={fillColor:"#008acd"},(0,O.copyAttributesWithClip)(j.style,s.axisStyle),c.push(t.createShape(j)),s.axis3DParameter&&!isNaN(s.axis3DParameter)&&s.axis3DParameter>=15){var w=new l.Polygon(p);w.style={fillColor:"#008acd"},(0,O.copyAttributesWithClip)(w.style,s.axisStyle),c.push(t.createShape(w))}}r=g;var I=new a.Line(r);I.style={strokeLinecap:"butt",strokeLineJoin:"round",strokeColor:"#008acd",strokeWidth:1},s.axisStyle&&(0,O.copyAttributesWithClip)(I.style,s.axisStyle),I.clickable=!1,I.hoverable=!1;var L=[t.createShape(I)],R=[];if(s.axisYLabels&&s.axisYLabels.length&&s.axisYLabels.length>0){var A=s.axisYLabels,M=A.length,F=[0,0];if(s.axisYLabelsOffset&&s.axisYLabelsOffset.length&&(F=s.axisYLabelsOffset),1==M){var k=new h.Label(o[0]-5+F[0],o[3]+F[1],A[0]);k.style={labelAlign:"right"},s.axisYLabelsStyle&&(0,O.copyAttributesWithClip)(k.style,s.axisYLabelsStyle),k.clickable=!1,k.hoverable=!1,R.push(t.createShape(k))}else for(var N=o[3],D=Math.abs(o[1]-o[3])/(M-1),G=0;G<M;G++){var B=new h.Label(o[0]-5+F[0],N+F[1],A[G]);B.style={labelAlign:"right"},s.axisYLabelsStyle&&(0,O.copyAttributesWithClip)(B.style,s.axisYLabelsStyle),B.clickable=!1,B.hoverable=!1,R.push(t.createShape(B)),N+=D}}var U=[];if(s.axisXLabels&&s.axisXLabels.length&&s.axisXLabels.length>0){var V=s.axisXLabels,Z=V.length,W=[0,0];if(s.axisXLabelsOffset&&s.axisXLabelsOffset.length&&(W=s.axisXLabelsOffset),n&&n.xPositions&&n.xPositions.length&&n.xPositions.length==Z)for(var H=n.xPositions,z=0;z<Z;z++){var Y=new h.Label(H[z]+W[0],o[1]+W[1],V[z]);Y.style={labelAlign:"center",labelBaseline:"top"},s.axisXLabelsStyle&&(0,O.copyAttributesWithClip)(Y.style,s.axisXLabelsStyle),Y.clickable=!1,Y.hoverable=!1,U.push(t.createShape(Y))}else if(1==Z){var X=new h.Label(o[0]-5+W[0],o[1]+W[0],V[0]);X.style={labelAlign:"center",labelBaseline:"top"},s.axisXLabelsStyle&&(0,O.copyAttributesWithClip)(X.style,s.axisXLabelsStyle),X.clickable=!1,X.hoverable=!1,U.push(t.createShape(X))}else for(var q=o[0],K=Math.abs(o[2]-o[0])/(Z-1),J=0;J<Z;J++){var Q=new h.Label(q+W[0],o[1]+W[1],V[J]);Q.style={labelAlign:"center",labelBaseline:"top"},s.axisXLabelsStyle&&(0,O.copyAttributesWithClip)(Q.style,s.axisXLabelsStyle),Q.clickable=!1,Q.hoverable=!1,U.push(t.createShape(Q)),q+=K}}return u.concat(L).concat(R).concat(U).concat(c)}},{key:"ShapeStyleTool",value:function(t,e,i,n,r,o){var s=t||{};if(e&&(0,O.copyAttributesWithClip)(s,e),i&&i.length&&void 0!==r&&!isNaN(r)&&r>=0&&i[r]&&(0,O.copyAttributesWithClip)(s,i[r]),n&&n.length&&void 0!==o)for(var a=n,l=a.length,u=parseFloat(o),c=0;c<l;c++)if(a[c].start<=u&&u<a[c].end){(0,O.copyAttributesWithClip)(s,a[c].style);break}return s}}]),t}();e.ShapeFactory=x,o.Zondy.Feature.ShapeFactory=x},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LayerStatusType=e.MapType=e.CItemType=e.CLinStyleMakeType=e.CLinJointType=e.CLinHeadType=e.CLinAdjustType=e.NetElemType=e.NetAnalyType=e.ISShowArc=e.EightDirType=e.LineConstrain=e.LabelSpreadType=e.RepeatType=e.LabelPntType=e.LabelRegType=e.LabelLinType=e.FontShape=e.FeatureType=e.VectClsType=e.XClsType=void 0;var n,r,o=i(554),s=(n=o)&&n.__esModule?n:{default:n},a=i(6);var l={SFCls:"SFeatureCls",OCls:"ObjectCls",ACls:"AnnotationCls",GnetCls:"GNetCls",RDS:"RasterDataset",SFClsInfo:"sfcls_new"};e.XClsType=l,a.Zondy.Enum.XClsType=l;var u={Unknown:0,SFCls:"SFeatureCls",AnnoCls:"AnnotationCls"};e.VectClsType=u,a.Zondy.Enum.VectClsType=u;var c={Unknown:0,Pnt:1,Lin:2,Reg:3};e.FeatureType=c,a.Zondy.Enum.FeatureType=c;var h={Positive:0,LeftOblique:1,RightOblique:2,LeftTowering:3,RightTowering:4};e.FontShape=h,a.Zondy.Enum.FontShape=h;var d={Curved:0,Forward:1,Horizontal:2,Tangent:3};e.LabelLinType=d,a.Zondy.Enum.LabelLinType=d;var f={Curved:0,Forward:1,Horizontal:2,Boundray:3,Outside:4};e.LabelRegType=f,a.Zondy.Enum.LabelRegType=f;var p={PntAnyDir:0,PntEightDir:1,PntOnFea:2};e.LabelPntType=p,a.Zondy.Enum.LabelPntType=p;var g={Auto:0,NoRep:1,OnStep:2};e.RepeatType=g,a.Zondy.Enum.RepeatType=g;var y={AutoSpread:0,Centralization:1,Decentralization:2};e.LabelSpreadType=y,a.Zondy.Enum.LabelSpreadType=y;var m={Left:0,Right:1,Above:2,Below:3,Both:4,NoRes:5};e.LineConstrain=m,a.Zondy.Enum.LineConstrain=m;var _={East:0,North:1,NorthEast:2,NorthWest:3,South:4,SouthEast:5,SouthWest:6,West:7,NoDir:8};e.EightDirType=_,a.Zondy.Enum.EightDirType=_;var v={Reg:0,Arc:1,All:2};e.ISShowArc=v,a.Zondy.Enum.ISShowArc=v;var b=(r={UserMode:"UserMode",SysModeCommwayPrefer:"SysModeCommwayPrefer",SysModeHighWayPrefer:"SysModeHighWayPrefer",SysModeMinCost:"SysModeMinCost",SysModeMinDis:"SysModeMinDis"},(0,s.default)(r,"SysModeMinDis","SysModeMinDis"),(0,s.default)(r,"SysModeSysRecommend","SysModeSysRecommend"),r);e.NetAnalyType=b,a.Zondy.Enum.Net.NetAnalyType=b;var S={Node:1,Edge:2,CNode:3,Chain:4,Center:5,Source:13,Sink:13};e.NetElemType=S,a.Zondy.Enum.Net.NetElemType=S;var O={Adjust:0,NoAdjust:1};e.CLinAdjustType=O,a.Zondy.Enum.Theme.CLinAdjustType=O;var C={Round:0,Square:1,Butt:2};e.CLinHeadType=C,a.Zondy.Enum.Theme.CLinHeadType=C;var x={Round:0,Square:1,Butt:2};e.CLinJointType=x,a.Zondy.Enum.Theme.CLinJointType=x;var T={Byrule:0,Bypoint:1};e.CLinStyleMakeType=T,a.Zondy.Enum.Theme.CLinStyleMakeType=T;var E={Unknown:0,UniqueTheme:1,RangeTheme:2};e.CItemType=E,a.Zondy.Enum.Theme.CItemType=E;var P={Doc:"mapType",Tile:"tileType"};e.MapType=P,a.Zondy.Enum.Map.MapType=P;var j={Show:"show",Hide:"hide",Include:"include",Exclude:"exclude"};e.LayerStatusType=j,a.Zondy.Enum.Map.LayerStatusType=j},function(t,e,i){"use strict";i.r(e);var n=i(51);const r=function(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit};r.prototype.canWrapX=function(){return this.canWrapX_},r.prototype.getCode=function(){return this.code_},r.prototype.getExtent=function(){return this.extent_},r.prototype.getUnits=function(){return this.units_},r.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||n.METERS_PER_UNIT[this.units_]},r.prototype.getWorldExtent=function(){return this.worldExtent_},r.prototype.getAxisOrientation=function(){return this.axisOrientation_},r.prototype.isGlobal=function(){return this.global_},r.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},r.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},r.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},r.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},r.prototype.setWorldExtent=function(t){this.worldExtent_=t},r.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},r.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},e.default=r},function(t,e,i){"use strict";i.r(e);const n=function(){};n.prototype.drawCustom=function(t,e,i){},n.prototype.drawGeometry=function(t){},n.prototype.setStyle=function(t){},n.prototype.drawCircle=function(t,e){},n.prototype.drawFeature=function(t,e){},n.prototype.drawGeometryCollection=function(t,e){},n.prototype.drawLineString=function(t,e){},n.prototype.drawMultiLineString=function(t,e){},n.prototype.drawMultiPoint=function(t,e){},n.prototype.drawMultiPolygon=function(t,e){},n.prototype.drawPoint=function(t,e){},n.prototype.drawPolygon=function(t,e){},n.prototype.drawText=function(t,e){},n.prototype.setFillStrokeStyle=function(t,e){},n.prototype.setImageStyle=function(t,e){},n.prototype.setTextStyle=function(t,e){},e.default=n},function(t,e,i){"use strict";i.r(e),i.d(e,"TileSourceEvent",function(){return p});var n=i(1),r=i(24),o=i(203),s=i(15),a=i(29),l=i(9),u=i(49),c=i(139),h=i(50),d=i(64);const f=function(t){c.default.call(this,{attributions:t.attributions,extent:t.extent,projection:t.projection,state:t.state,wrapX:t.wrapX}),this.opaque_=void 0!==t.opaque&&t.opaque,this.tilePixelRatio_=void 0!==t.tilePixelRatio?t.tilePixelRatio:1,this.tileGrid=void 0!==t.tileGrid?t.tileGrid:null,this.tileCache=new o.a(t.cacheSize),this.tmpSize=[0,0],this.key_="",this.tileOptions={transition:t.transition}};Object(n.inherits)(f,c.default),f.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},f.prototype.expireCache=function(t,e){const i=this.getTileCacheForProjection(t);i&&i.expireCache(e)},f.prototype.forEachLoadedTile=function(t,e,i,n){const r=this.getTileCacheForProjection(t);if(!r)return!1;let o,a,l,u=!0;for(let t=i.minX;t<=i.maxX;++t)for(let c=i.minY;c<=i.maxY;++c)a=Object(h.d)(e,t,c),l=!1,r.containsKey(a)&&(l=(o=r.get(a)).getState()===s.a.LOADED)&&(l=!1!==n(o)),l||(u=!1);return u},f.prototype.getGutter=function(t){return 0},f.prototype.getKey=function(){return this.key_},f.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},f.prototype.getOpaque=function(t){return this.opaque_},f.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},f.prototype.getTile=function(t,e,i,n,r){},f.prototype.getTileGrid=function(){return this.tileGrid},f.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:Object(d.getForProjection)(t)},f.prototype.getTileCacheForProjection=function(t){const e=this.getProjection();return e&&!Object(l.equivalent)(e,t)?null:this.tileCache},f.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},f.prototype.getTilePixelSize=function(t,e,i){const n=this.getTileGridForProjection(i),r=this.getTilePixelRatio(e),o=Object(u.toSize)(n.getTileSize(t),this.tmpSize);return 1==r?o:Object(u.scale)(o,r,this.tmpSize)},f.prototype.getTileCoordForTileUrlFunction=function(t,e){const i=void 0!==e?e:this.getProjection(),n=this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(t=Object(d.wrapX)(n,t,i)),Object(h.g)(t,n)?t:null},f.prototype.refresh=function(){this.tileCache.clear(),this.changed()},f.prototype.useTile=r.c;const p=function(t,e){a.default.call(this,t),this.tile=e};Object(n.inherits)(p,a.default),e.default=f},function(t,e,i){"use strict";function n(t,e,i){const n=void 0!==i?t.toFixed(i):""+t;let r=n.indexOf(".");return(r=-1===r?n.length:r)>e?n:new Array(1+e-r).join("0")+n}function r(t,e){const i=(""+t).split("."),n=(""+e).split(".");for(let t=0;t<Math.max(i.length,n.length);t++){const e=parseInt(i[t]||"0",10),r=parseInt(n[t]||"0",10);if(e>r)return 1;if(r>e)return-1}return 0}i.d(e,"b",function(){return n}),i.d(e,"a",function(){return r})},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(54),o=i(130),s=i(15),a=i(34),l=i(26),u=i(2),c=i(177),h=i(14);const d=function(t){c.a.call(this,t),this.context=null===this.context?null:Object(l.a)(),this.oversampling_,this.renderedExtent_=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=Object(u.createEmpty)(),this.tmpTileRange_=new o.b(0,0,0,0),this.imageTransform_=Object(h.c)(),this.zDirection=0};Object(n.inherits)(d,c.a),d.handles=function(t){return t.getType()===r.a.TILE},d.create=function(t,e){return new d(e)},d.prototype.isDrawableTile_=function(t){const e=t.getState(),i=this.getLayer().getUseInterimTilesOnError();return e==s.a.LOADED||e==s.a.EMPTY||e==s.a.ERROR&&!i},d.prototype.getTile=function(t,e,i,n,r){const o=this.getLayer();let a=o.getSource().getTile(t,e,i,n,r);return a.getState()==s.a.ERROR&&(o.getUseInterimTilesOnError()?o.getPreload()>0&&(this.newTiles_=!0):a.setState(s.a.LOADED)),this.isDrawableTile_(a)||(a=a.getInterimTile()),a},d.prototype.prepareFrame=function(t,e){const i=t.pixelRatio,r=t.size,o=t.viewState,l=o.projection,c=o.resolution,d=o.center,f=this.getLayer(),p=f.getSource(),g=p.getRevision(),y=p.getTileGridForProjection(l),m=y.getZForResolution(c,this.zDirection),_=y.getResolution(m);let v=Math.round(c/_)||1,b=t.extent;if(void 0!==e.extent&&(b=Object(u.getIntersection)(b,e.extent)),Object(u.isEmpty)(b))return!1;const S=y.getTileRangeForExtentAndZ(b,m),O=y.getTileRangeExtent(m,S),C=p.getTilePixelRatio(i),x={};x[m]={};const T=this.createLoadedTileFinder(p,l,x),E=t.viewHints,P=E[a.default.ANIMATING]||E[a.default.INTERACTING],j=this.tmpExtent,w=this.tmpTileRange_;let I,L,R;for(this.newTiles_=!1,L=S.minX;L<=S.maxX;++L)for(R=S.minY;R<=S.maxY;++R){if(Date.now()-t.time>16&&P)continue;if(I=this.getTile(m,L,R,i,l),this.isDrawableTile_(I)){const e=Object(n.getUid)(this);if(I.getState()==s.a.LOADED){x[m][I.tileCoord.toString()]=I;const t=I.inTransition(e);this.newTiles_||!t&&-1!==this.renderedTiles.indexOf(I)||(this.newTiles_=!0)}if(1===I.getAlpha(e,t.time))continue}const e=y.getTileCoordChildTileRange(I.tileCoord,w,j);let r=!1;e&&(r=T(m+1,e)),r||y.forEachTileCoordParentTileRange(I.tileCoord,T,null,w,j)}const A=_*i/C*v;if(!(this.renderedResolution&&Date.now()-t.time>16&&P)&&(this.newTiles_||!this.renderedExtent_||!Object(u.containsExtent)(this.renderedExtent_,b)||this.renderedRevision!=g||v!=this.oversampling_||!P&&A!=this.renderedResolution)){const n=this.context;if(n){const t=p.getTilePixelSize(m,i,l),e=Math.round(S.getWidth()*t[0]/v),r=Math.round(S.getHeight()*t[1]/v),o=n.canvas;o.width!=e||o.height!=r?(this.oversampling_=v,o.width=e,o.height=r):(this.renderedExtent_&&!Object(u.equals)(O,this.renderedExtent_)&&n.clearRect(0,0,e,r),v=this.oversampling_)}this.renderedTiles.length=0;const r=Object.keys(x).map(Number);let o,s,a,c,h,d,f,b,T,E,P;for(r.sort(function(t,e){return t===m?1:e===m?-1:t>e?1:t<e?-1:0}),h=0,d=r.length;h<d;++h){c=r[h],a=p.getTilePixelSize(c,i,l),s=(o=y.getResolution(c))/_,b=C*p.getGutter(l),T=x[c];for(const i in T)I=T[i],L=((f=y.getTileCoordExtent(I.getTileCoord(),j))[0]-O[0])/_*C/v,R=(O[3]-f[3])/_*C/v,E=a[0]*s/v,P=a[1]*s/v,this.drawTileImage(I,t,e,L,R,E,P,b,m===c),this.renderedTiles.push(I)}this.renderedRevision=g,this.renderedResolution=_*i/C*v,this.renderedExtent_=O}const M=this.renderedResolution/c,F=Object(h.b)(this.imageTransform_,i*r[0]/2,i*r[1]/2,M,M,0,(this.renderedExtent_[0]-d[0])/this.renderedResolution*i,(d[1]-this.renderedExtent_[3])/this.renderedResolution*i);return Object(h.b)(this.coordinateToCanvasPixelTransform,i*r[0]/2-F[4],i*r[1]/2-F[5],i/c,-i/c,0,-d[0],-d[1]),this.updateUsedTiles(t.usedTiles,p,m,S),this.manageTilePyramid(t,p,y,i,l,b,m,f.getPreload()),this.scheduleExpireCache(t,p),this.renderedTiles.length>0},d.prototype.drawTileImage=function(t,e,i,r,o,s,a,l,u){const c=t.getImage(this.getLayer());if(!c)return;const h=Object(n.getUid)(this),d=u?t.getAlpha(h,e.time):1;1!==d||this.getLayer().getSource().getOpaque(e.viewState.projection)||this.context.clearRect(r,o,s,a);const f=d!==this.context.globalAlpha;f&&(this.context.save(),this.context.globalAlpha=d),this.context.drawImage(c,l,l,c.width-2*l,c.height-2*l,r,o,s,a),f&&this.context.restore(),1!==d?e.animate=!0:u&&t.endTransition(h)},d.prototype.getImage=function(){const t=this.context;return t?t.canvas:null},d.prototype.getLayer,d.prototype.getImageTransform=function(){return this.imageTransform_},e.default=d},function(t,e,i){"use strict";e.a={IMAGE:"image",HYBRID:"hybrid",VECTOR:"vector"}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SUtil=void 0;var n=m(i(8)),r=m(i(20)),o=i(6),s=i(388),a=i(308),l=i(389),u=i(252),c=i(390),h=i(391),d=i(392),f=i(393),p=i(394),g=i(194),y=i(253);function m(t){return t&&t.__esModule?t:{default:t}}var _=function(){function t(){(0,n.default)(this,t)}return(0,r.default)(t,null,[{key:"SUtil_smoothBezier",value:function(e,i,n,r,o){o&&2===o||(o=[0,0]);var s,a,l=o,u=[],c=[],h=[],d=[],f=!!r;if(f){s=[1/0,1/0],a=[-1/0,-1/0];for(var p=e.length,g=0;g<p;g++)t.Util_vector.min(s,s,[e[g][0]+l[0],e[g][1]+l[1]]),t.Util_vector.max(a,a,[e[g][0]+l[0],e[g][1]+l[1]]);t.Util_vector.min(s,s,r[0]),t.Util_vector.max(a,a,r[1])}for(var y=e.length,m=0;m<y;m++){var _=[e[m][0]+l[0],e[m][1]+l[1]],v=void 0,b=void 0;if(n)v=[e[m?m-1:y-1][0]+l[0],e[m?m-1:y-1][1]+l[1]],b=[e[(m+1)%y][0]+l[0],e[(m+1)%y][1]+l[1]];else{if(0===m||m===y-1){u.push([e[m][0]+l[0],e[m][1]+l[1]]);continue}v=[e[m-1][0]+l[0],e[m-1][1]+l[1]],b=[e[m+1][0]+l[0],e[m+1][1]+l[1]]}t.Util_vector.sub(c,b,v),t.Util_vector.scale(c,c,i);var S=t.Util_vector.distance(_,v),O=t.Util_vector.distance(_,b),C=S+O;0!==C&&(S/=C,O/=C),t.Util_vector.scale(h,c,-S),t.Util_vector.scale(d,c,O);var x=t.Util_vector.add([],_,h),T=t.Util_vector.add([],_,d);f&&(t.Util_vector.max(x,x,s),t.Util_vector.min(x,x,a),t.Util_vector.max(T,T,s),t.Util_vector.min(T,T,a)),u.push(x),u.push(T)}return n&&u.push(u.shift()),u}},{key:"SUtil_smoothSpline",value:function(e,i,n,r){r&&2===r||(r=[0,0]);for(var o=r,s=e.length,a=[],l=0,u=1;u<s;u++)l+=t.Util_vector.distance([e[u-1][0]+o[0],e[u-1][1]+o[1]],[e[u][0]+o[0],e[u][1]+o[1]]);var c=l/5;c=c<s?s:c;for(var h=0;h<c;h++){var d=h/(c-1)*(i?s:s-1),f=Math.floor(d),p=d-f,g=void 0,y=[e[f%s][0]+o[0],e[f%s][1]+o[1]],m=void 0,_=void 0;i?(g=[e[(f-1+s)%s][0]+o[0],e[(f-1+s)%s][1]+o[1]],m=[e[(f+1)%s][0]+o[0],e[(f+1)%s][1]+o[1]],_=[e[(f+2)%s][0]+o[0],e[(f+2)%s][1]+o[1]]):(g=[e[0===f?f:f-1][0]+o[0],e[0===f?f:f-1][1]+o[1]],m=[e[f>s-2?s-1:f+1][0]+o[0],e[f>s-2?s-1:f+1][1]+o[1]],_=[e[f>s-3?s-1:f+2][0]+o[0],e[f>s-3?s-1:f+2][1]+o[1]]);var v=p*p,b=p*v;a.push([S(g[0],y[0],m[0],_[0],p,v,b),S(g[1],y[1],m[1],_[1],p,v,b)])}return a;function S(t,e,i,n,r,o,s){var a=.5*(i-t),l=.5*(n-e);return(2*(e-i)+a+l)*s+(-3*(e-i)-2*a-l)*o+a*r+e}}},{key:"SUtil_dashedLineTo",value:function(t,e,i,n,r,o,s){var a=[5,5];if(o="number"!=typeof o?5:o,t.setLineDash)return a[0]=o,a[1]=o,s&&s instanceof Array?t.setLineDash(s):t.setLineDash(a),t.moveTo(e,i),void t.lineTo(n,r);var l=n-e,u=r-i,c=Math.floor(Math.sqrt(l*l+u*u)/o);l/=c,u/=c;for(var h=!0,d=0;d<c;++d)h?t.moveTo(e,i):t.lineTo(e,i),h=!h,e+=l,i+=u;t.lineTo(n,r)}}]),t}();_.Util_area=new s.Area,_.Util_color=new a.Color,_.Util_computeBoundingBox=new l.ComputeBoundingBox,_.Util_curve=new u.Curve,_.Util_env=new c.Env,_.Util_event=new h.Event,_.Util_http=new d.Http,_.Util_math=new f.Math,_.Util_matrix=new p.Matrix,_.Util=new g.Util,_.Util_vector=new y.Vector,e.SUtil=_,o.Zondy.LevelRenderer.SUtil=_},function(t,e,i){"use strict";var n=i(24);const r=function(){};r.prototype.disposed_=!1,r.prototype.dispose=function(){this.disposed_||(this.disposed_=!0,this.disposeInternal())},r.prototype.disposeInternal=n.c,e.a=r},function(t,e,i){"use strict";i.d(e,"a",function(){return r}),i.d(e,"b",function(){return o}),i.d(e,"e",function(){return s}),i.d(e,"c",function(){return l}),i.d(e,"d",function(){return u});var n=i(18);function r(t,e,i,r,o,s,a){const l=(i-e)/r;if(l<3){for(;e<i;e+=r)s[a++]=t[e],s[a++]=t[e+1];return a}const u=new Array(l);u[0]=1,u[l-1]=1;const c=[e,i-r];let h=0;for(;c.length>0;){const i=c.pop(),s=c.pop();let a=0;const l=t[s],d=t[s+1],f=t[i],p=t[i+1];for(let e=s+r;e<i;e+=r){const i=t[e],r=t[e+1],o=Object(n.h)(i,r,l,d,f,p);o>a&&(h=e,a=o)}a>o&&(u[(h-e)/r]=1,s+r<h&&c.push(s,h),h+r<i&&c.push(h,i))}for(let i=0;i<l;++i)u[i]&&(s[a++]=t[e+i*r],s[a++]=t[e+i*r+1]);return a}function o(t,e,i,n,o,s,a,l){for(let u=0,c=i.length;u<c;++u){const c=i[u];a=r(t,e,c,n,o,s,a),l.push(a),e=c}return a}function s(t,e){return e*Math.round(t/e)}function a(t,e,i,n,r,o,a){if(e==i)return a;let l,u,c=s(t[e],r),h=s(t[e+1],r);e+=n,o[a++]=c,o[a++]=h;do{if(l=s(t[e],r),u=s(t[e+1],r),(e+=n)==i)return o[a++]=l,o[a++]=u,a}while(l==c&&u==h);for(;e<i;){const i=s(t[e],r),d=s(t[e+1],r);if(e+=n,i==l&&d==u)continue;const f=l-c,p=u-h,g=i-c,y=d-h;f*y==p*g&&(f<0&&g<f||f==g||f>0&&g>f)&&(p<0&&y<p||p==y||p>0&&y>p)?(l=i,u=d):(o[a++]=l,o[a++]=u,c=l,h=u,l=i,u=d)}return o[a++]=l,o[a++]=u,a}function l(t,e,i,n,r,o,s,l){for(let u=0,c=i.length;u<c;++u){const c=i[u];s=a(t,e,c,n,r,o,s),l.push(s),e=c}return s}function u(t,e,i,n,r,o,s,a){for(let u=0,c=i.length;u<c;++u){const c=i[u],h=[];s=l(t,e,c,n,r,o,s,h),a.push(h),e=c[c.length-1]}return s}},function(t,e,i){"use strict";var n=i(1),r=i(7),o=i(213);const s=function(t){o.a.call(this,t)};Object(n.inherits)(s,o.a),s.prototype.getType=function(){return r.m},e.a=s},function(t,e,i){"use strict";var n=i(1),r=i(7),o=i(213);const s=function(t){o.a.call(this,t)};Object(n.inherits)(s,o.a),s.prototype.getType=function(){return r.K},e.a=s},function(t,e,i){"use strict";e.a={PROPERTYCHANGE:"propertychange"}},function(t,e,i){"use strict";var n=i(1),r=i(61),o=i(10);const s=function(t,e,i,n){r.a.call(this),this.extent=t,this.pixelRatio_=i,this.resolution=e,this.state=n};Object(n.inherits)(s,r.a),s.prototype.changed=function(){this.dispatchEvent(o.default.CHANGE)},s.prototype.getExtent=function(){return this.extent},s.prototype.getImage=function(){},s.prototype.getPixelRatio=function(){return this.pixelRatio_},s.prototype.getResolution=function(){return this.resolution},s.prototype.getState=function(){return this.state},s.prototype.load=function(){},e.a=s},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(206),o=i.n(r),s=i(2),a=i(11);const l=function(t){this.rbush_=o()(t,void 0),this.items_={}};l.prototype.insert=function(t,e){const i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(i),this.items_[Object(n.getUid)(e)]=i},l.prototype.load=function(t,e){const i=new Array(e.length);for(let r=0,o=e.length;r<o;r++){const o=t[r],s=e[r],a={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:s};i[r]=a,this.items_[Object(n.getUid)(s)]=a}this.rbush_.load(i)},l.prototype.remove=function(t){const e=Object(n.getUid)(t),i=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(i)},l.prototype.update=function(t,e){const i=this.items_[Object(n.getUid)(e)],r=[i.minX,i.minY,i.maxX,i.maxY];Object(s.equals)(r,t)||(this.remove(e),this.insert(t,e))},l.prototype.getAll=function(){return this.rbush_.all().map(function(t){return t.value})},l.prototype.getInExtent=function(t){const e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(t){return t.value})},l.prototype.forEach=function(t,e){return this.forEach_(this.getAll(),t,e)},l.prototype.forEachInExtent=function(t,e,i){return this.forEach_(this.getInExtent(t),e,i)},l.prototype.forEach_=function(t,e,i){let n;for(let r=0,o=t.length;r<o;r++)if(n=e.call(i,t[r]))return n;return n},l.prototype.isEmpty=function(){return Object(a.isEmpty)(this.items_)},l.prototype.clear=function(){this.rbush_.clear(),this.items_={}},l.prototype.getExtent=function(t){const e=this.rbush_.data;return Object(s.createOrUpdate)(e.minX,e.minY,e.maxX,e.maxY,t)},l.prototype.concat=function(t){this.rbush_.load(t.rbush_.all());for(const e in t.items_)this.items_[0|e]=t.items_[0|e]},e.default=l},function(t,e,i){"use strict";const n=function(t,e){this.dispatcher=t,this.mapping_=e};n.prototype.getEvents=function(){return Object.keys(this.mapping_)},n.prototype.getHandlerForEvent=function(t){return this.mapping_[t]},e.a=n},function(t,e,i){"use strict";i.d(e,"c",function(){return r}),i.d(e,"d",function(){return o}),i.d(e,"a",function(){return s}),i.d(e,"b",function(){return a});var n=i(18);function r(t,e){return void 0!==t?0:void 0}function o(t,e){return void 0!==t?t+e:void 0}function s(t){const e=2*Math.PI/t;return function(t,i){return void 0!==t?t=Math.floor((t+i)/e+.5)*e:void 0}}function a(t){const e=t||Object(n.j)(5);return function(t,i){return void 0!==t?Math.abs(t+i)<=e?0:t+i:void 0}}},function(t,e,i){"use strict";var n=i(1),r=i(175),o=i(68),s=i(241),a=i(211),l=i(7),u=i(119),c=i(120);const h=new u.a(l.g?"precision mediump float;\nvarying vec2 v_texCoord;\n\n\nuniform float u_opacity;\nuniform sampler2D u_texture;\n\nvoid main(void) {\n  vec4 texColor = texture2D(u_texture, v_texCoord);\n  gl_FragColor.rgb = texColor.rgb;\n  gl_FragColor.a = texColor.a * u_opacity;\n}\n":"precision mediump float;varying vec2 a;uniform float f;uniform sampler2D g;void main(void){vec4 texColor=texture2D(g,a);gl_FragColor.rgb=texColor.rgb;gl_FragColor.a=texColor.a*f;}"),d=new c.a(l.g?"varying vec2 v_texCoord;\n\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\n\nuniform mat4 u_texCoordMatrix;\nuniform mat4 u_projectionMatrix;\n\nvoid main(void) {\n  gl_Position = u_projectionMatrix * vec4(a_position, 0., 1.);\n  v_texCoord = (u_texCoordMatrix * vec4(a_texCoord, 0., 1.)).st;\n}\n\n\n":"varying vec2 a;attribute vec2 b;attribute vec2 c;uniform mat4 d;uniform mat4 e;void main(void){gl_Position=e*vec4(b,0.,1.);a=(d*vec4(c,0.,1.)).st;}");var f=function(t,e){this.u_texCoordMatrix=t.getUniformLocation(e,l.g?"u_texCoordMatrix":"d"),this.u_projectionMatrix=t.getUniformLocation(e,l.g?"u_projectionMatrix":"e"),this.u_opacity=t.getUniformLocation(e,l.g?"u_opacity":"f"),this.u_texture=t.getUniformLocation(e,l.g?"u_texture":"g"),this.a_position=t.getAttribLocation(e,l.g?"a_position":"b"),this.a_texCoord=t.getAttribLocation(e,l.g?"a_texCoord":"c")},p=i(14),g=i(163),y=i(79),m=i(153);const _=function(t,e){a.a.call(this,e),this.mapRenderer=t,this.arrayBuffer_=new y.a([-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1]),this.texture=null,this.framebuffer=null,this.framebufferDimension=void 0,this.texCoordMatrix=Object(p.c)(),this.projectionMatrix=Object(p.c)(),this.tmpMat4_=Object(g.a)(),this.defaultLocations_=null};Object(n.inherits)(_,a.a),_.prototype.bindFramebuffer=function(t,e){const i=this.mapRenderer.getGL();if(void 0===this.framebufferDimension||this.framebufferDimension!=e){const n=function(t,e,i){t.isContextLost()||(t.deleteFramebuffer(e),t.deleteTexture(i))}.bind(null,i,this.framebuffer,this.texture);t.postRenderFunctions.push(n);const r=Object(m.createEmptyTexture)(i,e,e),o=i.createFramebuffer();i.bindFramebuffer(l.n,o),i.framebufferTexture2D(l.n,l.d,l.A,r,0),this.texture=r,this.framebuffer=o,this.framebufferDimension=e}else i.bindFramebuffer(l.n,this.framebuffer)},_.prototype.composeFrame=function(t,e,i){this.dispatchComposeEvent_(o.a.PRECOMPOSE,i,t),i.bindBuffer(l.a,this.arrayBuffer_);const n=i.getGL(),r=i.getProgram(h,d);let s;this.defaultLocations_?s=this.defaultLocations_:(s=new f(n,r),this.defaultLocations_=s),i.useProgram(r)&&(n.enableVertexAttribArray(s.a_position),n.vertexAttribPointer(s.a_position,2,l.l,!1,16,0),n.enableVertexAttribArray(s.a_texCoord),n.vertexAttribPointer(s.a_texCoord,2,l.l,!1,16,8),n.uniform1i(s.u_texture,0)),n.uniformMatrix4fv(s.u_texCoordMatrix,!1,Object(g.b)(this.tmpMat4_,this.getTexCoordMatrix())),n.uniformMatrix4fv(s.u_projectionMatrix,!1,Object(g.b)(this.tmpMat4_,this.getProjectionMatrix())),n.uniform1f(s.u_opacity,e.opacity),n.bindTexture(l.A,this.getTexture()),n.drawArrays(l.G,0,4),this.dispatchComposeEvent_(o.a.POSTCOMPOSE,i,t)},_.prototype.dispatchComposeEvent_=function(t,e,i){const n=this.getLayer();if(n.hasListener(t)){const o=i.viewState,a=o.resolution,l=i.pixelRatio,u=i.extent,c=o.center,h=o.rotation,d=i.size,f=new s.default(e,c,a,h,d,u,l),p=new r.a(t,f,i,null,e);n.dispatchEvent(p)}},_.prototype.getTexCoordMatrix=function(){return this.texCoordMatrix},_.prototype.getTexture=function(){return this.texture},_.prototype.getProjectionMatrix=function(){return this.projectionMatrix},_.prototype.handleWebGLContextLost=function(){this.texture=null,this.framebuffer=null,this.framebufferDimension=void 0},_.prototype.prepareFrame=function(t,e,i){},_.prototype.forEachLayerAtPixel=function(t,e,i,n){};e.a=_},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(15),o=i(73),s=i(112),a="tileloadstart",l="tileloadend",u="tileloaderror",c=i(50);const h=function(t){s.default.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,extent:t.extent,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition}),this.tileLoadFunction=t.tileLoadFunction,this.tileUrlFunction=this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):o.d,this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),t.tileUrlFunction&&this.setTileUrlFunction(t.tileUrlFunction),this.tileLoadingKeys_={}};Object(n.inherits)(h,s.default),h.prototype.fixedTileUrlFunction,h.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},h.prototype.getTileUrlFunction=function(){return this.tileUrlFunction},h.prototype.getUrls=function(){return this.urls},h.prototype.handleTileChange=function(t){const e=t.target,i=Object(n.getUid)(e),o=e.getState();let c;o==r.a.LOADING?(this.tileLoadingKeys_[i]=!0,c=a):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],c=o==r.a.ERROR?u:o==r.a.LOADED||o==r.a.ABORT?l:void 0),void 0!=c&&this.dispatchEvent(new s.TileSourceEvent(c,e))},h.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},h.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},h.prototype.setUrl=function(t){const e=this.urls=Object(o.c)(t);this.setTileUrlFunction(this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):Object(o.a)(e,this.tileGrid),t)},h.prototype.setUrls=function(t){this.urls=t;const e=t.join("\n");this.setTileUrlFunction(this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):Object(o.a)(t,this.tileGrid),e)},h.prototype.useTile=function(t,e,i){const n=Object(c.d)(t,e,i);this.tileCache.containsKey(n)&&this.tileCache.get(n)};e.default=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CTheme=void 0;var n,r=i(8),o=(n=r)&&n.__esModule?n:{default:n},s=i(6),a=i(21);var l=function t(e){(0,o.default)(this,t);var i=void 0!==e?e:{};(0,a.extend)(this,i),this.Name=i&&i.Name?i.Name:null,this.IsBaseTheme=!i||!i.IsBaseTheme||i.IsBaseTheme,this.Visible=!i||!i.Visible||i.Visible};e.CTheme=l,s.Zondy.Object.Theme.CTheme=l},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(122),o=i(30),s=i(4),a=i(10),l=i(2);const u=function(t,e,i,n,s,a){r.a.call(this,t,e,i,o.a.IDLE),this.src_=n,this.image_=new Image,null!==s&&(this.image_.crossOrigin=s),this.imageListenerKeys_=null,this.state=o.a.IDLE,this.imageLoadFunction_=a};Object(n.inherits)(u,r.a),u.prototype.getImage=function(){return this.image_},u.prototype.handleImageError_=function(){this.state=o.a.ERROR,this.unlistenImage_(),this.changed()},u.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=Object(l.getHeight)(this.extent)/this.image_.height),this.state=o.a.LOADED,this.unlistenImage_(),this.changed()},u.prototype.load=function(){this.state!=o.a.IDLE&&this.state!=o.a.ERROR||(this.state=o.a.LOADING,this.changed(),this.imageListenerKeys_=[Object(s.listenOnce)(this.image_,a.default.ERROR,this.handleImageError_,this),Object(s.listenOnce)(this.image_,a.default.LOAD,this.handleImageLoad_,this)],this.imageLoadFunction_(this,this.src_))},u.prototype.setImage=function(t){this.image_=t},u.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(s.unlistenByKey),this.imageListenerKeys_=null},e.default=u},function(t,e,i){"use strict";i.d(e,"a",function(){return r});const n=function(t,e,i,n){this.minX=t,this.maxX=e,this.minY=i,this.maxY=n};function r(t,e,i,r,o){return void 0!==o?(o.minX=t,o.maxX=e,o.minY=i,o.maxY=r,o):new n(t,e,i,r)}n.prototype.contains=function(t){return this.containsXY(t[1],t[2])},n.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},n.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},n.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},n.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},n.prototype.getHeight=function(){return this.maxY-this.minY+1},n.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},n.prototype.getWidth=function(){return this.maxX-this.minX+1},n.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},e.b=n},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(4),o=i(10),s=i(2),a=i(77),l=i(5),u=i(11);const c=function(t){a.default.call(this),this.geometries_=t||null,this.listenGeometriesChange_()};function h(t){const e=[];for(let i=0,n=t.length;i<n;++i)e.push(t[i].clone());return e}Object(n.inherits)(c,a.default),c.prototype.unlistenGeometriesChange_=function(){if(this.geometries_)for(let t=0,e=this.geometries_.length;t<e;++t)Object(r.unlisten)(this.geometries_[t],o.default.CHANGE,this.changed,this)},c.prototype.listenGeometriesChange_=function(){if(this.geometries_)for(let t=0,e=this.geometries_.length;t<e;++t)Object(r.listen)(this.geometries_[t],o.default.CHANGE,this.changed,this)},c.prototype.clone=function(){const t=new c(null);return t.setGeometries(this.geometries_),t},c.prototype.closestPointXY=function(t,e,i,n){if(n<Object(s.closestSquaredDistanceXY)(this.getExtent(),t,e))return n;const r=this.geometries_;for(let o=0,s=r.length;o<s;++o)n=r[o].closestPointXY(t,e,i,n);return n},c.prototype.containsXY=function(t,e){const i=this.geometries_;for(let n=0,r=i.length;n<r;++n)if(i[n].containsXY(t,e))return!0;return!1},c.prototype.computeExtent=function(t){Object(s.createOrUpdateEmpty)(t);const e=this.geometries_;for(let i=0,n=e.length;i<n;++i)Object(s.extend)(t,e[i].getExtent());return t},c.prototype.getGeometries=function(){return h(this.geometries_)},c.prototype.getGeometriesArray=function(){return this.geometries_},c.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!=this.getRevision()&&(Object(u.clear)(this.simplifiedGeometryCache),this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=t.toString();if(this.simplifiedGeometryCache.hasOwnProperty(e))return this.simplifiedGeometryCache[e];{const i=[],n=this.geometries_;let r=!1;for(let e=0,o=n.length;e<o;++e){const o=n[e],s=o.getSimplifiedGeometry(t);i.push(s),s!==o&&(r=!0)}if(r){const t=new c(null);return t.setGeometriesArray(i),this.simplifiedGeometryCache[e]=t,t}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this}},c.prototype.getType=function(){return l.default.GEOMETRY_COLLECTION},c.prototype.intersectsExtent=function(t){const e=this.geometries_;for(let i=0,n=e.length;i<n;++i)if(e[i].intersectsExtent(t))return!0;return!1},c.prototype.isEmpty=function(){return 0===this.geometries_.length},c.prototype.rotate=function(t,e){const i=this.geometries_;for(let n=0,r=i.length;n<r;++n)i[n].rotate(t,e);this.changed()},c.prototype.scale=function(t,e,i){let n=i;n||(n=Object(s.getCenter)(this.getExtent()));const r=this.geometries_;for(let i=0,o=r.length;i<o;++i)r[i].scale(t,e,n);this.changed()},c.prototype.setGeometries=function(t){this.setGeometriesArray(h(t))},c.prototype.setGeometriesArray=function(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()},c.prototype.applyTransform=function(t){const e=this.geometries_;for(let i=0,n=e.length;i<n;++i)e[i].applyTransform(t);this.changed()},c.prototype.translate=function(t,e){const i=this.geometries_;for(let n=0,r=i.length;n<r;++n)i[n].translate(t,e);this.changed()},c.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),a.default.prototype.disposeInternal.call(this)},e.default=c},function(t,e,i){"use strict";var n=i(1),r=i(29);const o=function(t,e,i){r.default.call(this,t),this.map=e,this.frameState=void 0!==i?i:null};Object(n.inherits)(o,r.default),e.a=o},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(12),o=i(2),s=i(33),a=i(43),l=i(3),u=i(77),c=i(19),h=i(41),d=i(58),f=i(76),p=i(36),g=i(11),y=i(9),m=i(0);const _=a.GMLNS+" http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",v=function(t){const e=t||{};a.default.call(this,e),this.surface_=void 0!==e.surface&&e.surface,this.curve_=void 0!==e.curve&&e.curve,this.multiCurve_=void 0===e.multiCurve||e.multiCurve,this.multiSurface_=void 0===e.multiSurface||e.multiSurface,this.schemaLocation=e.schemaLocation?e.schemaLocation:_,this.hasZ=void 0!==e.hasZ&&e.hasZ};Object(n.inherits)(v,a.default),v.prototype.readMultiCurve_=function(t,e){const i=Object(m.pushParseAndPop)([],this.MULTICURVE_PARSERS_,t,e,this);if(i){const t=new d.default(null);return t.setLineStrings(i),t}},v.prototype.readMultiSurface_=function(t,e){const i=Object(m.pushParseAndPop)([],this.MULTISURFACE_PARSERS_,t,e,this);if(i){const t=new f.default(null);return t.setPolygons(i),t}},v.prototype.curveMemberParser_=function(t,e){Object(m.parseNode)(this.CURVEMEMBER_PARSERS_,t,e,this)},v.prototype.surfaceMemberParser_=function(t,e){Object(m.parseNode)(this.SURFACEMEMBER_PARSERS_,t,e,this)},v.prototype.readPatch_=function(t,e){return Object(m.pushParseAndPop)([null],this.PATCHES_PARSERS_,t,e,this)},v.prototype.readSegment_=function(t,e){return Object(m.pushParseAndPop)([null],this.SEGMENTS_PARSERS_,t,e,this)},v.prototype.readPolygonPatch_=function(t,e){return Object(m.pushParseAndPop)([null],this.FLAT_LINEAR_RINGS_PARSERS_,t,e,this)},v.prototype.readLineStringSegment_=function(t,e){return Object(m.pushParseAndPop)([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS_,t,e,this)},v.prototype.interiorParser_=function(t,e){const i=Object(m.pushParseAndPop)(void 0,this.RING_PARSERS,t,e,this);if(i){e[e.length-1].push(i)}},v.prototype.exteriorParser_=function(t,e){const i=Object(m.pushParseAndPop)(void 0,this.RING_PARSERS,t,e,this);if(i){e[e.length-1][0]=i}},v.prototype.readSurface_=function(t,e){const i=Object(m.pushParseAndPop)([null],this.SURFACE_PARSERS_,t,e,this);if(i&&i[0]){const t=new p.default(null),e=i[0],n=[e.length];let o,s;for(o=1,s=i.length;o<s;++o)Object(r.c)(e,i[o]),n.push(e.length);return t.setFlatCoordinates(c.default.XYZ,e,n),t}},v.prototype.readCurve_=function(t,e){const i=Object(m.pushParseAndPop)([null],this.CURVE_PARSERS_,t,e,this);if(i){const t=new h.default(null);return t.setFlatCoordinates(c.default.XYZ,i),t}},v.prototype.readEnvelope_=function(t,e){const i=Object(m.pushParseAndPop)([null],this.ENVELOPE_PARSERS_,t,e,this);return Object(o.createOrUpdate)(i[1][0],i[1][1],i[2][0],i[2][1])},v.prototype.readFlatPos_=function(t,e){let i=Object(m.getAllTextContent)(t,!1);const n=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,r=[];let o;for(;o=n.exec(i);)r.push(parseFloat(o[1])),i=i.substr(o[0].length);if(""!==i)return;const s=e[0].srsName;let a="enu";if(s){a=Object(y.get)(s).getAxisOrientation()}if("neu"===a){let t,e;for(t=0,e=r.length;t<e;t+=3){const e=r[t],i=r[t+1];r[t]=i,r[t+1]=e}}const l=r.length;return 2==l&&r.push(0),0!==l?r:void 0},v.prototype.readFlatPosList_=function(t,e){const i=Object(m.getAllTextContent)(t,!1).replace(/^\s*|\s*$/g,""),n=e[0],r=n.srsName,o=n.srsDimension;let s="enu";if(r){s=Object(y.get)(r).getAxisOrientation()}const a=i.split(/\s+/);let u,c,h,d=2;t.getAttribute("srsDimension")?d=Object(l.g)(t.getAttribute("srsDimension")):t.getAttribute("dimension")?d=Object(l.g)(t.getAttribute("dimension")):t.parentNode.getAttribute("srsDimension")?d=Object(l.g)(t.parentNode.getAttribute("srsDimension")):o&&(d=Object(l.g)(o));const f=[];for(let t=0,e=a.length;t<e;t+=d)u=parseFloat(a[t]),c=parseFloat(a[t+1]),h=3===d?parseFloat(a[t+2]):0,"en"===s.substr(0,2)?f.push(u,c,h):f.push(c,u,h);return f},v.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS_={"http://www.opengis.net/gml":{pos:Object(m.makeReplacer)(v.prototype.readFlatPos_),posList:Object(m.makeReplacer)(v.prototype.readFlatPosList_)}},v.prototype.FLAT_LINEAR_RINGS_PARSERS_={"http://www.opengis.net/gml":{interior:v.prototype.interiorParser_,exterior:v.prototype.exteriorParser_}},v.prototype.GEOMETRY_PARSERS_={"http://www.opengis.net/gml":{Point:Object(m.makeReplacer)(a.default.prototype.readPoint),MultiPoint:Object(m.makeReplacer)(a.default.prototype.readMultiPoint),LineString:Object(m.makeReplacer)(a.default.prototype.readLineString),MultiLineString:Object(m.makeReplacer)(a.default.prototype.readMultiLineString),LinearRing:Object(m.makeReplacer)(a.default.prototype.readLinearRing),Polygon:Object(m.makeReplacer)(a.default.prototype.readPolygon),MultiPolygon:Object(m.makeReplacer)(a.default.prototype.readMultiPolygon),Surface:Object(m.makeReplacer)(v.prototype.readSurface_),MultiSurface:Object(m.makeReplacer)(v.prototype.readMultiSurface_),Curve:Object(m.makeReplacer)(v.prototype.readCurve_),MultiCurve:Object(m.makeReplacer)(v.prototype.readMultiCurve_),Envelope:Object(m.makeReplacer)(v.prototype.readEnvelope_)}},v.prototype.MULTICURVE_PARSERS_={"http://www.opengis.net/gml":{curveMember:Object(m.makeArrayPusher)(v.prototype.curveMemberParser_),curveMembers:Object(m.makeArrayPusher)(v.prototype.curveMemberParser_)}},v.prototype.MULTISURFACE_PARSERS_={"http://www.opengis.net/gml":{surfaceMember:Object(m.makeArrayPusher)(v.prototype.surfaceMemberParser_),surfaceMembers:Object(m.makeArrayPusher)(v.prototype.surfaceMemberParser_)}},v.prototype.CURVEMEMBER_PARSERS_={"http://www.opengis.net/gml":{LineString:Object(m.makeArrayPusher)(a.default.prototype.readLineString),Curve:Object(m.makeArrayPusher)(v.prototype.readCurve_)}},v.prototype.SURFACEMEMBER_PARSERS_={"http://www.opengis.net/gml":{Polygon:Object(m.makeArrayPusher)(a.default.prototype.readPolygon),Surface:Object(m.makeArrayPusher)(v.prototype.readSurface_)}},v.prototype.SURFACE_PARSERS_={"http://www.opengis.net/gml":{patches:Object(m.makeReplacer)(v.prototype.readPatch_)}},v.prototype.CURVE_PARSERS_={"http://www.opengis.net/gml":{segments:Object(m.makeReplacer)(v.prototype.readSegment_)}},v.prototype.ENVELOPE_PARSERS_={"http://www.opengis.net/gml":{lowerCorner:Object(m.makeArrayPusher)(v.prototype.readFlatPosList_),upperCorner:Object(m.makeArrayPusher)(v.prototype.readFlatPosList_)}},v.prototype.PATCHES_PARSERS_={"http://www.opengis.net/gml":{PolygonPatch:Object(m.makeReplacer)(v.prototype.readPolygonPatch_)}},v.prototype.SEGMENTS_PARSERS_={"http://www.opengis.net/gml":{LineStringSegment:Object(m.makeReplacer)(v.prototype.readLineStringSegment_)}},v.prototype.writePos_=function(t,e,i){const n=i[i.length-1],r=n.hasZ,o=r?3:2;t.setAttribute("srsDimension",o);const s=n.srsName;let a="enu";s&&(a=Object(y.get)(s).getAxisOrientation());const u=e.getCoordinates();let c;if(c="en"===a.substr(0,2)?u[0]+" "+u[1]:u[1]+" "+u[0],r){c+=" "+(u[2]||0)}Object(l.n)(t,c)},v.prototype.getCoords_=function(t,e,i){let n="enu";e&&(n=Object(y.get)(e).getAxisOrientation());let r="en"===n.substr(0,2)?t[0]+" "+t[1]:t[1]+" "+t[0];if(i){r+=" "+(t[2]||0)}return r},v.prototype.writePosList_=function(t,e,i){const n=i[i.length-1],r=n.hasZ,o=r?3:2;t.setAttribute("srsDimension",o);const s=n.srsName,a=e.getCoordinates(),u=a.length,c=new Array(u);let h;for(let t=0;t<u;++t)h=a[t],c[t]=this.getCoords_(h,s,r);Object(l.n)(t,c.join(" "))},v.prototype.writePoint_=function(t,e,i){const n=i[i.length-1].srsName;n&&t.setAttribute("srsName",n);const r=Object(m.createElementNS)(t.namespaceURI,"pos");t.appendChild(r),this.writePos_(r,e,i)},v.prototype.writeEnvelope=function(t,e,i){const n=i[i.length-1].srsName;n&&t.setAttribute("srsName",n);const r=[e[0]+" "+e[1],e[2]+" "+e[3]];Object(m.pushSerializeAndPop)({node:t},this.ENVELOPE_SERIALIZERS_,m.OBJECT_PROPERTY_NODE_FACTORY,r,i,["lowerCorner","upperCorner"],this)},v.prototype.writeLinearRing_=function(t,e,i){const n=i[i.length-1].srsName;n&&t.setAttribute("srsName",n);const r=Object(m.createElementNS)(t.namespaceURI,"posList");t.appendChild(r),this.writePosList_(r,e,i)},v.prototype.RING_NODE_FACTORY_=function(t,e,i){const n=e[e.length-1],r=n.node,o=n.exteriorWritten;return void 0===o&&(n.exteriorWritten=!0),Object(m.createElementNS)(r.namespaceURI,void 0!==o?"interior":"exterior")},v.prototype.writeSurfaceOrPolygon_=function(t,e,i){const n=i[i.length-1],r=n.hasZ,o=n.srsName;if("PolygonPatch"!==t.nodeName&&o&&t.setAttribute("srsName",o),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){const n=e.getLinearRings();Object(m.pushSerializeAndPop)({node:t,hasZ:r,srsName:o},this.RING_SERIALIZERS_,this.RING_NODE_FACTORY_,n,i,void 0,this)}else if("Surface"===t.nodeName){const n=Object(m.createElementNS)(t.namespaceURI,"patches");t.appendChild(n),this.writeSurfacePatches_(n,e,i)}},v.prototype.writeCurveOrLineString_=function(t,e,i){const n=i[i.length-1].srsName;if("LineStringSegment"!==t.nodeName&&n&&t.setAttribute("srsName",n),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){const n=Object(m.createElementNS)(t.namespaceURI,"posList");t.appendChild(n),this.writePosList_(n,e,i)}else if("Curve"===t.nodeName){const n=Object(m.createElementNS)(t.namespaceURI,"segments");t.appendChild(n),this.writeCurveSegments_(n,e,i)}},v.prototype.writeMultiSurfaceOrPolygon_=function(t,e,i){const n=i[i.length-1],r=n.hasZ,o=n.srsName,s=n.surface;o&&t.setAttribute("srsName",o);const a=e.getPolygons();Object(m.pushSerializeAndPop)({node:t,hasZ:r,srsName:o,surface:s},this.SURFACEORPOLYGONMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,a,i,void 0,this)},v.prototype.writeMultiPoint_=function(t,e,i){const n=i[i.length-1],r=n.srsName,o=n.hasZ;r&&t.setAttribute("srsName",r);const s=e.getPoints();Object(m.pushSerializeAndPop)({node:t,hasZ:o,srsName:r},this.POINTMEMBER_SERIALIZERS_,Object(m.makeSimpleNodeFactory)("pointMember"),s,i,void 0,this)},v.prototype.writeMultiCurveOrLineString_=function(t,e,i){const n=i[i.length-1],r=n.hasZ,o=n.srsName,s=n.curve;o&&t.setAttribute("srsName",o);const a=e.getLineStrings();Object(m.pushSerializeAndPop)({node:t,hasZ:r,srsName:o,curve:s},this.LINESTRINGORCURVEMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,a,i,void 0,this)},v.prototype.writeRing_=function(t,e,i){const n=Object(m.createElementNS)(t.namespaceURI,"LinearRing");t.appendChild(n),this.writeLinearRing_(n,e,i)},v.prototype.writeSurfaceOrPolygonMember_=function(t,e,i){const n=this.GEOMETRY_NODE_FACTORY_(e,i);n&&(t.appendChild(n),this.writeSurfaceOrPolygon_(n,e,i))},v.prototype.writePointMember_=function(t,e,i){const n=Object(m.createElementNS)(t.namespaceURI,"Point");t.appendChild(n),this.writePoint_(n,e,i)},v.prototype.writeLineStringOrCurveMember_=function(t,e,i){const n=this.GEOMETRY_NODE_FACTORY_(e,i);n&&(t.appendChild(n),this.writeCurveOrLineString_(n,e,i))},v.prototype.writeSurfacePatches_=function(t,e,i){const n=Object(m.createElementNS)(t.namespaceURI,"PolygonPatch");t.appendChild(n),this.writeSurfaceOrPolygon_(n,e,i)},v.prototype.writeCurveSegments_=function(t,e,i){const n=Object(m.createElementNS)(t.namespaceURI,"LineStringSegment");t.appendChild(n),this.writeCurveOrLineString_(n,e,i)},v.prototype.writeGeometryElement=function(t,e,i){const n=i[i.length-1],r=Object(g.assign)({},n);let o;r.node=t,o=Array.isArray(e)?n.dataProjection?Object(y.transformExtent)(e,n.featureProjection,n.dataProjection):e:Object(s.transformWithOptions)(e,!0,n),Object(m.pushSerializeAndPop)(r,this.GEOMETRY_SERIALIZERS_,this.GEOMETRY_NODE_FACTORY_,[o],i,void 0,this)},v.prototype.writeFeatureElement=function(t,e,i){const n=e.getId();n&&t.setAttribute("fid",n);const r=i[i.length-1],o=r.featureNS,s=e.getGeometryName();r.serializers||(r.serializers={},r.serializers[o]={});const a=e.getProperties(),c=[],h=[];for(const t in a){const e=a[t];null!==e&&(c.push(t),h.push(e),t==s||e instanceof u.default?t in r.serializers[o]||(r.serializers[o][t]=Object(m.makeChildAppender)(this.writeGeometryElement,this)):t in r.serializers[o]||(r.serializers[o][t]=Object(m.makeChildAppender)(l.n)))}const d=Object(g.assign)({},r);d.node=t,Object(m.pushSerializeAndPop)(d,r.serializers,Object(m.makeSimpleNodeFactory)(void 0,o),h,i,c)},v.prototype.writeFeatureMembers_=function(t,e,i){const n=i[i.length-1],r=n.featureType,o=n.featureNS,s={};s[o]={},s[o][r]=Object(m.makeChildAppender)(this.writeFeatureElement,this);const a=Object(g.assign)({},n);a.node=t,Object(m.pushSerializeAndPop)(a,s,Object(m.makeSimpleNodeFactory)(r,o),e,i)};const b={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};v.prototype.MULTIGEOMETRY_MEMBER_NODE_FACTORY_=function(t,e,i){const n=e[e.length-1].node;return Object(m.createElementNS)("http://www.opengis.net/gml",b[n.nodeName])},v.prototype.GEOMETRY_NODE_FACTORY_=function(t,e,i){const n=e[e.length-1],r=n.multiSurface,o=n.surface,s=n.curve,a=n.multiCurve;let l;return Array.isArray(t)?l="Envelope":"MultiPolygon"===(l=t.getType())&&!0===r?l="MultiSurface":"Polygon"===l&&!0===o?l="Surface":"LineString"===l&&!0===s?l="Curve":"MultiLineString"===l&&!0===a&&(l="MultiCurve"),Object(m.createElementNS)("http://www.opengis.net/gml",l)},v.prototype.writeGeometryNode=function(t,e){e=this.adaptOptions(e);const i=Object(m.createElementNS)("http://www.opengis.net/gml","geom"),n={node:i,hasZ:this.hasZ,srsName:this.srsName,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_};return e&&Object(g.assign)(n,e),this.writeGeometryElement(i,t,[n]),i},v.prototype.writeFeatures,v.prototype.writeFeaturesNode=function(t,e){e=this.adaptOptions(e);const i=Object(m.createElementNS)("http://www.opengis.net/gml","featureMembers");i.setAttributeNS(m.XML_SCHEMA_INSTANCE_URI,"xsi:schemaLocation",this.schemaLocation);const n={srsName:this.srsName,hasZ:this.hasZ,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_,featureNS:this.featureNS,featureType:this.featureType};return e&&Object(g.assign)(n,e),this.writeFeatureMembers_(i,t,[n]),i},v.prototype.RING_SERIALIZERS_={"http://www.opengis.net/gml":{exterior:Object(m.makeChildAppender)(v.prototype.writeRing_),interior:Object(m.makeChildAppender)(v.prototype.writeRing_)}},v.prototype.ENVELOPE_SERIALIZERS_={"http://www.opengis.net/gml":{lowerCorner:Object(m.makeChildAppender)(l.n),upperCorner:Object(m.makeChildAppender)(l.n)}},v.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{surfaceMember:Object(m.makeChildAppender)(v.prototype.writeSurfaceOrPolygonMember_),polygonMember:Object(m.makeChildAppender)(v.prototype.writeSurfaceOrPolygonMember_)}},v.prototype.POINTMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{pointMember:Object(m.makeChildAppender)(v.prototype.writePointMember_)}},v.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{lineStringMember:Object(m.makeChildAppender)(v.prototype.writeLineStringOrCurveMember_),curveMember:Object(m.makeChildAppender)(v.prototype.writeLineStringOrCurveMember_)}},v.prototype.GEOMETRY_SERIALIZERS_={"http://www.opengis.net/gml":{Curve:Object(m.makeChildAppender)(v.prototype.writeCurveOrLineString_),MultiCurve:Object(m.makeChildAppender)(v.prototype.writeMultiCurveOrLineString_),Point:Object(m.makeChildAppender)(v.prototype.writePoint_),MultiPoint:Object(m.makeChildAppender)(v.prototype.writeMultiPoint_),LineString:Object(m.makeChildAppender)(v.prototype.writeCurveOrLineString_),MultiLineString:Object(m.makeChildAppender)(v.prototype.writeMultiCurveOrLineString_),LinearRing:Object(m.makeChildAppender)(v.prototype.writeLinearRing_),Polygon:Object(m.makeChildAppender)(v.prototype.writeSurfaceOrPolygon_),MultiPolygon:Object(m.makeChildAppender)(v.prototype.writeMultiSurfaceOrPolygon_),Surface:Object(m.makeChildAppender)(v.prototype.writeSurfaceOrPolygon_),MultiSurface:Object(m.makeChildAppender)(v.prototype.writeMultiSurfaceOrPolygon_),Envelope:Object(m.makeChildAppender)(v.prototype.writeEnvelope)}},e.default=v},function(t,e,i){"use strict";i.d(e,"b",function(){return r}),i.d(e,"a",function(){return o}),i.d(e,"c",function(){return s});i(11);let n={};function r(){n={}}function o(t,e,i){const r=t.getCode(),o=e.getCode();r in n||(n[r]={}),n[r][o]=i}function s(t,e){let i;return t in n&&e in n[t]&&(i=n[t][e]),i}},function(t,e,i){var n=i(105),r=i(80),o=i(216),s=i(180),a=function(t,e,i){var l,u,c,h=t&a.F,d=t&a.G,f=t&a.S,p=t&a.P,g=t&a.B,y=t&a.W,m=d?r:r[e]||(r[e]={}),_=m.prototype,v=d?n:f?n[e]:(n[e]||{}).prototype;for(l in d&&(i=e),i)(u=!h&&v&&void 0!==v[l])&&l in m||(c=u?v[l]:i[l],m[l]=d&&"function"!=typeof v[l]?i[l]:g&&u?o(c,n):y&&v[l]==c?function(t){var e=function(e,i,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,i)}return new t(e,i,n)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(c):p&&"function"==typeof c?o(Function.call,c):c,p&&((m.virtual||(m.virtual={}))[l]=c,t&a.R&&_&&!_[l]&&s(_,l,c)))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,t.exports=a},function(t,e,i){"use strict";e.__esModule=!0;var n=s(i(524)),r=s(i(531)),o="function"==typeof r.default&&"symbol"==typeof n.default?function(t){return typeof t}:function(t){return t&&"function"==typeof r.default&&t.constructor===r.default&&t!==r.default.prototype?"symbol":typeof t};function s(t){return t&&t.__esModule?t:{default:t}}e.default="function"==typeof r.default&&"symbol"===o(n.default)?function(t){return void 0===t?"undefined":o(t)}:function(t){return t&&"function"==typeof r.default&&t.constructor===r.default&&t!==r.default.prototype?"symbol":void 0===t?"undefined":o(t)}},function(t,e,i){"use strict";i.r(e),i.d(e,"unByKey",function(){return l});var n=i(1),r=i(4),o=i(61),s=i(10);const a=function(){o.a.call(this),this.revision_=0};function l(t){if(Array.isArray(t))for(let e=0,i=t.length;e<i;++e)Object(r.unlistenByKey)(t[e]);else Object(r.unlistenByKey)(t)}Object(n.inherits)(a,o.a),a.prototype.changed=function(){++this.revision_,this.dispatchEvent(s.default.CHANGE)},a.prototype.dispatchEvent,a.prototype.getRevision=function(){return this.revision_},a.prototype.on=function(t,e){if(Array.isArray(t)){const i=t.length,n=new Array(i);for(let o=0;o<i;++o)n[o]=Object(r.listen)(this,t[o],e);return n}return Object(r.listen)(this,t,e)},a.prototype.once=function(t,e){if(Array.isArray(t)){const i=t.length,n=new Array(i);for(let o=0;o<i;++o)n[o]=Object(r.listenOnce)(this,t[o],e);return n}return Object(r.listenOnce)(this,t,e)},a.prototype.un=function(t,e){if(Array.isArray(t))for(let i=0,n=t.length;i<n;++i)Object(r.unlisten)(this,t[i],e);else Object(r.unlisten)(this,t,e)},e.default=a},function(t,e,i){"use strict";e.a={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend"}},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(24),o=i(25),s=i(9),a=i(44);const l=function(t){o.default.call(this),this.projection_=Object(s.get)(t.projection),this.attributions_=this.adaptAttributions_(t.attributions),this.state_=void 0!==t.state?t.state:a.a.READY,this.wrapX_=void 0!==t.wrapX&&t.wrapX};Object(n.inherits)(l,o.default),l.prototype.adaptAttributions_=function(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null},l.prototype.forEachFeatureAtCoordinate=r.c,l.prototype.getAttributions=function(){return this.attributions_},l.prototype.getProjection=function(){return this.projection_},l.prototype.getResolutions=function(){},l.prototype.getState=function(){return this.state_},l.prototype.getWrapX=function(){return this.wrapX_},l.prototype.refresh=function(){this.changed()},l.prototype.setAttributions=function(t){this.attributions_=this.adaptAttributions_(t),this.changed()},l.prototype.setState=function(t){this.state_=t,this.changed()},e.default=l},function(t,e,i){"use strict";i.d(e,"a",function(){return a}),i.d(e,"b",function(){return u});var n=i(26),r=i(2),o=i(18),s=i(9);function a(t,e,i,n){const o=Object(s.transform)(i,e,t);let a=Object(s.getPointResolution)(e,n,i);const l=e.getMetersPerUnit();void 0!==l&&(a*=l);const u=t.getMetersPerUnit();void 0!==u&&(a/=u);const c=t.getExtent();if(!c||Object(r.containsCoordinate)(c,o)){const e=Object(s.getPointResolution)(t,a,o)/a;isFinite(e)&&e>0&&(a/=e)}return a}function l(t,e,i,n){const r=i-t,o=n-e,s=Math.sqrt(r*r+o*o);return[Math.round(i+r/s),Math.round(n+o/s)]}function u(t,e,i,s,a,u,c,h,d,f,p){const g=Object(n.a)(Math.round(i*t),Math.round(i*e));if(0===d.length)return g.canvas;g.scale(i,i);const y=Object(r.createEmpty)();d.forEach(function(t,e,i){Object(r.extend)(y,t.extent)});const m=Object(r.getWidth)(y),_=Object(r.getHeight)(y),v=Object(n.a)(Math.round(i*m/s),Math.round(i*_/s)),b=i/s;d.forEach(function(t,e,i){const n=t.extent[0]-y[0],o=-(t.extent[3]-y[3]),s=Object(r.getWidth)(t.extent),a=Object(r.getHeight)(t.extent);v.drawImage(t.image,f,f,t.image.width-2*f,t.image.height-2*f,n*b,o*b,s*b,a*b)});const S=Object(r.getTopLeft)(c);return h.getTriangles().forEach(function(t,e,n){const r=t.source,a=t.target;let c=r[0][0],h=r[0][1],d=r[1][0],f=r[1][1],p=r[2][0],m=r[2][1];const _=(a[0][0]-S[0])/u,b=-(a[0][1]-S[1])/u,O=(a[1][0]-S[0])/u,C=-(a[1][1]-S[1])/u,x=(a[2][0]-S[0])/u,T=-(a[2][1]-S[1])/u,E=c,P=h;c=0,h=0;const j=[[d-=E,f-=P,0,0,O-_],[p-=E,m-=P,0,0,x-_],[0,0,d,f,C-b],[0,0,p,m,T-b]],w=Object(o.f)(j);if(!w)return;g.save(),g.beginPath();const I=(_+O+x)/3,L=(b+C+T)/3,R=l(I,L,_,b),A=l(I,L,O,C),M=l(I,L,x,T);g.moveTo(A[0],A[1]),g.lineTo(R[0],R[1]),g.lineTo(M[0],M[1]),g.clip(),g.transform(w[0],w[2],w[1],w[3],_,b),g.translate(y[0]-E,y[3]-P),g.scale(s/i,-s/i),g.drawImage(v.canvas,0,0),g.restore()}),p&&(g.save(),g.strokeStyle="black",g.lineWidth=1,h.getTriangles().forEach(function(t,e,i){const n=t.target,r=(n[0][0]-S[0])/u,o=-(n[0][1]-S[1])/u,s=(n[1][0]-S[0])/u,a=-(n[1][1]-S[1])/u,l=(n[2][0]-S[0])/u,c=-(n[2][1]-S[1])/u;g.beginPath(),g.moveTo(s,a),g.lineTo(r,o),g.lineTo(l,c),g.closePath(),g.stroke()}),g.restore()),g.canvas}},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(53),o=i(64);const s=function(t){const e=t||{},i=void 0!==e.projection?e.projection:"EPSG:3857",n=void 0!==e.tileGrid?e.tileGrid:Object(o.createXYZ)({extent:Object(o.extentFromProjection)(i),maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});r.default.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,opaque:e.opaque,projection:i,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition})};Object(n.inherits)(s,r.default),e.default=s},function(t,e,i){"use strict";i.d(e,"b",function(){return p});var n=i(1),r=i(117),o=i(4),s=i(10),a=i(2),l=i(24),u=i(60),c=i(209),h=i(14);const d=function(t){r.a.call(this),this.map_=t,this.layerRenderers_={},this.layerRendererListeners_={},this.layerRendererConstructors_=[]};function f(t,e){c.shared.expire()}function p(t,e){return t.zIndex-e.zIndex}Object(n.inherits)(d,r.a),d.prototype.registerLayerRenderers=function(t){this.layerRendererConstructors_.push.apply(this.layerRendererConstructors_,t)},d.prototype.getLayerRendererConstructors=function(){return this.layerRendererConstructors_},d.prototype.calculateMatrices2D=function(t){const e=t.viewState,i=t.coordinateToPixelTransform,n=t.pixelToCoordinateTransform;Object(h.b)(i,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),Object(h.d)(Object(h.i)(n,i))},d.prototype.removeLayerRenderers=function(){for(const t in this.layerRenderers_)this.removeLayerRendererByKey_(t).dispose()},d.prototype.forEachFeatureAtCoordinate=function(t,e,i,r,o,s,l){let c;const h=e.viewState,d=h.resolution;function f(t,i){const s=Object(n.getUid)(t).toString(),a=e.layerStates[Object(n.getUid)(i)].managed;if(!(s in e.skippedFeatureUids)||a)return r.call(o,t,a?i:null)}const p=h.projection;let g=t;if(p.canWrapX()){const e=p.getExtent(),i=Object(a.getWidth)(e),n=t[0];if(n<e[0]||n>e[2]){g=[n+i*Math.ceil((e[0]-n)/i),t[1]]}}const y=e.layerStatesArray;let m;for(m=y.length-1;m>=0;--m){const n=y[m],r=n.layer;if(Object(u.visibleAtResolution)(n,d)&&s.call(l,r)){const n=this.getLayerRenderer(r);if(r.getSource()&&(c=n.forEachFeatureAtCoordinate(r.getSource().getWrapX()?g:t,e,i,f,o)),c)return c}}},d.prototype.forEachLayerAtPixel=function(t,e,i,n,r,o,s){},d.prototype.hasFeatureAtCoordinate=function(t,e,i,n,r){return void 0!==this.forEachFeatureAtCoordinate(t,e,i,l.b,this,n,r)},d.prototype.getLayerRenderer=function(t){const e=Object(n.getUid)(t).toString();if(e in this.layerRenderers_)return this.layerRenderers_[e];{let i;for(let e=0,n=this.layerRendererConstructors_.length;e<n;++e){const n=this.layerRendererConstructors_[e];if(n.handles(t)){i=n.create(this,t);break}}if(!i)throw new Error("Unable to create renderer for layer: "+t.getType());return this.layerRenderers_[e]=i,this.layerRendererListeners_[e]=Object(o.listen)(i,s.default.CHANGE,this.handleLayerRendererChange_,this),i}},d.prototype.getLayerRendererByKey=function(t){return this.layerRenderers_[t]},d.prototype.getLayerRenderers=function(){return this.layerRenderers_},d.prototype.getMap=function(){return this.map_},d.prototype.handleLayerRendererChange_=function(){this.map_.render()},d.prototype.removeLayerRendererByKey_=function(t){const e=this.layerRenderers_[t];return delete this.layerRenderers_[t],Object(o.unlistenByKey)(this.layerRendererListeners_[t]),delete this.layerRendererListeners_[t],e},d.prototype.renderFrame=l.c,d.prototype.removeUnusedLayerRenderers_=function(t,e){for(const t in this.layerRenderers_)e&&t in e.layerStates||this.removeLayerRendererByKey_(t).dispose()},d.prototype.scheduleExpireIconCache=function(t){t.postRenderFunctions.push(f)},d.prototype.scheduleRemoveUnusedLayerRenderers=function(t){for(const e in this.layerRenderers_)if(!(e in t.layerStates))return void t.postRenderFunctions.push(this.removeUnusedLayerRenderers_.bind(this))},e.a=d},function(t,e,i){"use strict";e.a={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"}},function(t,e,i){"use strict";e.a={CARMENTA_SERVER:"carmentaserver",GEOSERVER:"geoserver",MAPSERVER:"mapserver",QGIS:"qgis"}},function(t,e,i){"use strict";var n=i(1),r=i(12),o=i(2),s=i(11),a=i(69),l=i(212),u=i(63),c=i(55),h=i(7),d=i(119),f=i(120);const p=new d.a(h.g?"precision mediump float;\nvarying vec2 v_center;\nvarying vec2 v_offset;\nvarying float v_halfWidth;\nvarying float v_pixelRatio;\n\n\n\nuniform float u_opacity;\nuniform vec4 u_fillColor;\nuniform vec4 u_strokeColor;\nuniform vec2 u_size;\n\nvoid main(void) {\n  vec2 windowCenter = vec2((v_center.x + 1.0) / 2.0 * u_size.x * v_pixelRatio,\n      (v_center.y + 1.0) / 2.0 * u_size.y * v_pixelRatio);\n  vec2 windowOffset = vec2((v_offset.x + 1.0) / 2.0 * u_size.x * v_pixelRatio,\n      (v_offset.y + 1.0) / 2.0 * u_size.y * v_pixelRatio);\n  float radius = length(windowCenter - windowOffset);\n  float dist = length(windowCenter - gl_FragCoord.xy);\n  if (dist > radius + v_halfWidth) {\n    if (u_strokeColor.a == 0.0) {\n      gl_FragColor = u_fillColor;\n    } else {\n      gl_FragColor = u_strokeColor;\n    }\n    gl_FragColor.a = gl_FragColor.a - (dist - (radius + v_halfWidth));\n  } else if (u_fillColor.a == 0.0) {\n    // Hooray, no fill, just stroke. We can use real antialiasing.\n    gl_FragColor = u_strokeColor;\n    if (dist < radius - v_halfWidth) {\n      gl_FragColor.a = gl_FragColor.a - (radius - v_halfWidth - dist);\n    }\n  } else {\n    gl_FragColor = u_fillColor;\n    float strokeDist = radius - v_halfWidth;\n    float antialias = 2.0 * v_pixelRatio;\n    if (dist > strokeDist) {\n      gl_FragColor = u_strokeColor;\n    } else if (dist >= strokeDist - antialias) {\n      float step = smoothstep(strokeDist - antialias, strokeDist, dist);\n      gl_FragColor = mix(u_fillColor, u_strokeColor, step);\n    }\n  }\n  gl_FragColor.a = gl_FragColor.a * u_opacity;\n  if (gl_FragColor.a <= 0.0) {\n    discard;\n  }\n}\n":"precision mediump float;varying vec2 a;varying vec2 b;varying float c;varying float d;uniform float m;uniform vec4 n;uniform vec4 o;uniform vec2 p;void main(void){vec2 windowCenter=vec2((a.x+1.0)/2.0*p.x*d,(a.y+1.0)/2.0*p.y*d);vec2 windowOffset=vec2((b.x+1.0)/2.0*p.x*d,(b.y+1.0)/2.0*p.y*d);float radius=length(windowCenter-windowOffset);float dist=length(windowCenter-gl_FragCoord.xy);if(dist>radius+c){if(o.a==0.0){gl_FragColor=n;}else{gl_FragColor=o;}gl_FragColor.a=gl_FragColor.a-(dist-(radius+c));}else if(n.a==0.0){gl_FragColor=o;if(dist<radius-c){gl_FragColor.a=gl_FragColor.a-(radius-c-dist);}} else{gl_FragColor=n;float strokeDist=radius-c;float antialias=2.0*d;if(dist>strokeDist){gl_FragColor=o;}else if(dist>=strokeDist-antialias){float step=smoothstep(strokeDist-antialias,strokeDist,dist);gl_FragColor=mix(n,o,step);}} gl_FragColor.a=gl_FragColor.a*m;if(gl_FragColor.a<=0.0){discard;}}"),g=new f.a(h.g?"varying vec2 v_center;\nvarying vec2 v_offset;\nvarying float v_halfWidth;\nvarying float v_pixelRatio;\n\n\nattribute vec2 a_position;\nattribute float a_instruction;\nattribute float a_radius;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\nuniform float u_lineWidth;\nuniform float u_pixelRatio;\n\nvoid main(void) {\n  mat4 offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  v_center = vec4(u_projectionMatrix * vec4(a_position, 0.0, 1.0)).xy;\n  v_pixelRatio = u_pixelRatio;\n  float lineWidth = u_lineWidth * u_pixelRatio;\n  v_halfWidth = lineWidth / 2.0;\n  if (lineWidth == 0.0) {\n    lineWidth = 2.0 * u_pixelRatio;\n  }\n  vec2 offset;\n  // Radius with anitaliasing (roughly).\n  float radius = a_radius + 3.0 * u_pixelRatio;\n  // Until we get gl_VertexID in WebGL, we store an instruction.\n  if (a_instruction == 0.0) {\n    // Offsetting the edges of the triangle by lineWidth / 2 is necessary, however\n    // we should also leave some space for the antialiasing, thus we offset by lineWidth.\n    offset = vec2(-1.0, 1.0);\n  } else if (a_instruction == 1.0) {\n    offset = vec2(-1.0, -1.0);\n  } else if (a_instruction == 2.0) {\n    offset = vec2(1.0, -1.0);\n  } else {\n    offset = vec2(1.0, 1.0);\n  }\n\n  gl_Position = u_projectionMatrix * vec4(a_position + offset * radius, 0.0, 1.0) +\n      offsetMatrix * vec4(offset * lineWidth, 0.0, 0.0);\n  v_offset = vec4(u_projectionMatrix * vec4(a_position.x + a_radius, a_position.y,\n      0.0, 1.0)).xy;\n\n  if (distance(v_center, v_offset) > 20000.0) {\n    gl_Position = vec4(v_center, 0.0, 1.0);\n  }\n}\n\n\n":"varying vec2 a;varying vec2 b;varying float c;varying float d;attribute vec2 e;attribute float f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;uniform float k;uniform float l;void main(void){mat4 offsetMatrix=i*j;a=vec4(h*vec4(e,0.0,1.0)).xy;d=l;float lineWidth=k*l;c=lineWidth/2.0;if(lineWidth==0.0){lineWidth=2.0*l;}vec2 offset;float radius=g+3.0*l;if(f==0.0){offset=vec2(-1.0,1.0);}else if(f==1.0){offset=vec2(-1.0,-1.0);}else if(f==2.0){offset=vec2(1.0,-1.0);}else{offset=vec2(1.0,1.0);}gl_Position=h*vec4(e+offset*radius,0.0,1.0)+offsetMatrix*vec4(offset*lineWidth,0.0,0.0);b=vec4(h*vec4(e.x+g,e.y,0.0,1.0)).xy;if(distance(a,b)>20000.0){gl_Position=vec4(a,0.0,1.0);}}");var y=function(t,e){this.u_projectionMatrix=t.getUniformLocation(e,h.g?"u_projectionMatrix":"h"),this.u_offsetScaleMatrix=t.getUniformLocation(e,h.g?"u_offsetScaleMatrix":"i"),this.u_offsetRotateMatrix=t.getUniformLocation(e,h.g?"u_offsetRotateMatrix":"j"),this.u_lineWidth=t.getUniformLocation(e,h.g?"u_lineWidth":"k"),this.u_pixelRatio=t.getUniformLocation(e,h.g?"u_pixelRatio":"l"),this.u_opacity=t.getUniformLocation(e,h.g?"u_opacity":"m"),this.u_fillColor=t.getUniformLocation(e,h.g?"u_fillColor":"n"),this.u_strokeColor=t.getUniformLocation(e,h.g?"u_strokeColor":"o"),this.u_size=t.getUniformLocation(e,h.g?"u_size":"p"),this.a_position=t.getAttribLocation(e,h.g?"a_position":"e"),this.a_instruction=t.getAttribLocation(e,h.g?"a_instruction":"f"),this.a_radius=t.getAttribLocation(e,h.g?"a_radius":"g")},m=i(111),_=i(14),v=i(163);const b=function(t,e){m.default.call(this),this.tolerance=t,this.maxExtent=e,this.origin=Object(o.getCenter)(e),this.projectionMatrix_=Object(_.c)(),this.offsetRotateMatrix_=Object(_.c)(),this.offsetScaleMatrix_=Object(_.c)(),this.tmpMat4_=Object(v.a)(),this.indices=[],this.indicesBuffer=null,this.startIndices=[],this.startIndicesFeature=[],this.vertices=[],this.verticesBuffer=null,this.lineStringReplay=void 0};Object(n.inherits)(b,m.default),b.prototype.getDeleteResourcesFunction=function(t){},b.prototype.finish=function(t){},b.prototype.setUpProgram=function(t,e,i,n){},b.prototype.shutDownProgram=function(t,e){},b.prototype.drawReplay=function(t,e,i,n){},b.prototype.drawHitDetectionReplayOneByOne=function(t,e,i,n,r){},b.prototype.drawHitDetectionReplay=function(t,e,i,n,r,o){return r?this.drawHitDetectionReplayOneByOne(t,e,i,n,o):this.drawHitDetectionReplayAll(t,e,i,n)},b.prototype.drawHitDetectionReplayAll=function(t,e,i,n){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawReplay(t,e,i,!0);const r=n(null);return r||void 0},b.prototype.replay=function(t,e,i,n,r,o,s,a,l,u,c){const d=t.getGL();let f,p,g,y,m,b,S,O;this.lineStringReplay&&(f=d.isEnabled(d.STENCIL_TEST),p=d.getParameter(d.STENCIL_FUNC),g=d.getParameter(d.STENCIL_VALUE_MASK),y=d.getParameter(d.STENCIL_REF),m=d.getParameter(d.STENCIL_WRITEMASK),b=d.getParameter(d.STENCIL_FAIL),S=d.getParameter(d.STENCIL_PASS_DEPTH_PASS),O=d.getParameter(d.STENCIL_PASS_DEPTH_FAIL),d.enable(d.STENCIL_TEST),d.clear(d.STENCIL_BUFFER_BIT),d.stencilMask(255),d.stencilFunc(d.ALWAYS,1,255),d.stencilOp(d.KEEP,d.KEEP,d.REPLACE),this.lineStringReplay.replay(t,e,i,n,r,o,s,a,l,u,c),d.stencilMask(0),d.stencilFunc(d.NOTEQUAL,1,255)),t.bindBuffer(h.a,this.verticesBuffer),t.bindBuffer(h.j,this.indicesBuffer);const C=this.setUpProgram(d,t,r,o),x=Object(_.f)(this.projectionMatrix_);Object(_.h)(x,2/(i*r[0]),2/(i*r[1])),Object(_.g)(x,-n),Object(_.j)(x,-(e[0]-this.origin[0]),-(e[1]-this.origin[1]));const T=Object(_.f)(this.offsetScaleMatrix_);Object(_.h)(T,2/r[0],2/r[1]);const E=Object(_.f)(this.offsetRotateMatrix_);let P;return 0!==n&&Object(_.g)(E,-n),d.uniformMatrix4fv(C.u_projectionMatrix,!1,Object(v.b)(this.tmpMat4_,x)),d.uniformMatrix4fv(C.u_offsetScaleMatrix,!1,Object(v.b)(this.tmpMat4_,T)),d.uniformMatrix4fv(C.u_offsetRotateMatrix,!1,Object(v.b)(this.tmpMat4_,E)),d.uniform1f(C.u_opacity,s),void 0===l?this.drawReplay(d,t,a,!1):P=this.drawHitDetectionReplay(d,t,a,l,u,c),this.shutDownProgram(d,C),this.lineStringReplay&&(f||d.disable(d.STENCIL_TEST),d.clear(d.STENCIL_BUFFER_BIT),d.stencilFunc(p,y,g),d.stencilMask(m),d.stencilOp(b,O,S)),P},b.prototype.drawElements=function(t,e,i,n){const r=e.hasOESElementIndexUint?h.I:h.J,o=n-i,s=i*(e.hasOESElementIndexUint?4:2);t.drawElements(h.F,o,r,s)};var S=b;const O=[0,0,0,1],C=[],x=[0,0,0,1],T=Number.EPSILON||2.220446049250313e-16,E=function(t,e,i,n,r,o){const s=(i-t)*(o-e)-(r-t)*(n-e);return s<=T&&s>=-T?void 0:s>0};var P=i(79);const j=function(t,e){S.call(this,t,e),this.defaultLocations_=null,this.styles_=[],this.styleIndices_=[],this.radius_=0,this.state_={fillColor:null,strokeColor:null,lineDash:null,lineDashOffset:void 0,lineWidth:void 0,changed:!1}};Object(n.inherits)(j,S),j.prototype.drawCoordinates_=function(t,e,i,n){let r,o,s=this.vertices.length,a=this.indices.length,l=s/4;for(r=e,o=i;r<o;r+=n)this.vertices[s++]=t[r],this.vertices[s++]=t[r+1],this.vertices[s++]=0,this.vertices[s++]=this.radius_,this.vertices[s++]=t[r],this.vertices[s++]=t[r+1],this.vertices[s++]=1,this.vertices[s++]=this.radius_,this.vertices[s++]=t[r],this.vertices[s++]=t[r+1],this.vertices[s++]=2,this.vertices[s++]=this.radius_,this.vertices[s++]=t[r],this.vertices[s++]=t[r+1],this.vertices[s++]=3,this.vertices[s++]=this.radius_,this.indices[a++]=l,this.indices[a++]=l+1,this.indices[a++]=l+2,this.indices[a++]=l+2,this.indices[a++]=l+3,this.indices[a++]=l,l+=4},j.prototype.drawCircle=function(t,e){const i=t.getRadius(),n=t.getStride();if(i){this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e),this.state_.changed&&(this.styleIndices_.push(this.indices.length),this.state_.changed=!1),this.radius_=i;let r=t.getFlatCoordinates();r=Object(c.d)(r,0,2,n,-this.origin[0],-this.origin[1]),this.drawCoordinates_(r,0,2,n)}else if(this.state_.changed&&(this.styles_.pop(),this.styles_.length)){const t=this.styles_[this.styles_.length-1];this.state_.fillColor=t[0],this.state_.strokeColor=t[1],this.state_.lineWidth=t[2],this.state_.changed=!1}},j.prototype.finish=function(t){this.verticesBuffer=new P.a(this.vertices),this.indicesBuffer=new P.a(this.indices),this.startIndices.push(this.indices.length),0===this.styleIndices_.length&&this.styles_.length>0&&(this.styles_=[]),this.vertices=null,this.indices=null},j.prototype.getDeleteResourcesFunction=function(t){const e=this.verticesBuffer,i=this.indicesBuffer;return function(){t.deleteBuffer(e),t.deleteBuffer(i)}},j.prototype.setUpProgram=function(t,e,i,n){const r=e.getProgram(p,g);let o;return this.defaultLocations_?o=this.defaultLocations_:(o=new y(t,r),this.defaultLocations_=o),e.useProgram(r),t.enableVertexAttribArray(o.a_position),t.vertexAttribPointer(o.a_position,2,h.l,!1,16,0),t.enableVertexAttribArray(o.a_instruction),t.vertexAttribPointer(o.a_instruction,1,h.l,!1,16,8),t.enableVertexAttribArray(o.a_radius),t.vertexAttribPointer(o.a_radius,1,h.l,!1,16,12),t.uniform2fv(o.u_size,i),t.uniform1f(o.u_pixelRatio,n),o},j.prototype.shutDownProgram=function(t,e){t.disableVertexAttribArray(e.a_position),t.disableVertexAttribArray(e.a_instruction),t.disableVertexAttribArray(e.a_radius)},j.prototype.drawReplay=function(t,e,i,n){if(Object(s.isEmpty)(i)){let i,n,r,o;for(r=this.startIndices[this.startIndices.length-1],i=this.styleIndices_.length-1;i>=0;--i)n=this.styleIndices_[i],o=this.styles_[i],this.setFillStyle_(t,o[0]),this.setStrokeStyle_(t,o[1],o[2]),this.drawElements(t,e,n,r),r=n}else this.drawReplaySkipping_(t,e,i)},j.prototype.drawHitDetectionReplayOneByOne=function(t,e,i,r,s){let a,l,u,c,h,d,f,p;for(p=this.startIndices.length-2,u=this.startIndices[p+1],a=this.styleIndices_.length-1;a>=0;--a)for(c=this.styles_[a],this.setFillStyle_(t,c[0]),this.setStrokeStyle_(t,c[1],c[2]),h=this.styleIndices_[a];p>=0&&this.startIndices[p]>=h;){if(l=this.startIndices[p],d=this.startIndicesFeature[p],void 0===i[f=Object(n.getUid)(d).toString()]&&d.getGeometry()&&(void 0===s||Object(o.intersects)(s,d.getGeometry().getExtent()))){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawElements(t,e,l,u);const i=r(d);if(i)return i}p--,u=l}},j.prototype.drawReplaySkipping_=function(t,e,i){let r,o,s,a,l,u,c,h,d;for(h=this.startIndices.length-2,s=o=this.startIndices[h+1],r=this.styleIndices_.length-1;r>=0;--r){for(a=this.styles_[r],this.setFillStyle_(t,a[0]),this.setStrokeStyle_(t,a[1],a[2]),l=this.styleIndices_[r];h>=0&&this.startIndices[h]>=l;)d=this.startIndices[h],u=this.startIndicesFeature[h],i[c=Object(n.getUid)(u).toString()]&&(o!==s&&this.drawElements(t,e,o,s),s=d),h--,o=d;o!==s&&this.drawElements(t,e,o,s),o=s=l}},j.prototype.setFillStyle_=function(t,e){t.uniform4fv(this.defaultLocations_.u_fillColor,e)},j.prototype.setStrokeStyle_=function(t,e,i){t.uniform4fv(this.defaultLocations_.u_strokeColor,e),t.uniform1f(this.defaultLocations_.u_lineWidth,i)},j.prototype.setFillStrokeStyle=function(t,e){let i,n;if(e){const t=e.getLineDash();this.state_.lineDash=t||C;const r=e.getLineDashOffset();this.state_.lineDashOffset=r||0,i=(i=e.getColor())instanceof CanvasGradient||i instanceof CanvasPattern?x:Object(u.asArray)(i).map(function(t,e){return 3!=e?t/255:t})||x,n=void 0!==(n=e.getWidth())?n:1}else i=[0,0,0,0],n=0;let o=t?t.getColor():[0,0,0,0];o=o instanceof CanvasGradient||o instanceof CanvasPattern?O:Object(u.asArray)(o).map(function(t,e){return 3!=e?t/255:t})||O,this.state_.strokeColor&&Object(r.b)(this.state_.strokeColor,i)&&this.state_.fillColor&&Object(r.b)(this.state_.fillColor,o)&&this.state_.lineWidth===n||(this.state_.changed=!0,this.state_.fillColor=o,this.state_.strokeColor=i,this.state_.lineWidth=n,this.styles_.push([o,i,n]))};var w=j;const I=new d.a(h.g?"precision mediump float;\nvarying vec2 v_texCoord;\nvarying float v_opacity;\n\nuniform float u_opacity;\nuniform sampler2D u_image;\n\nvoid main(void) {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor.rgb = texColor.rgb;\n  float alpha = texColor.a * v_opacity * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n}\n":"precision mediump float;varying vec2 a;varying float b;uniform float k;uniform sampler2D l;void main(void){vec4 texColor=texture2D(l,a);gl_FragColor.rgb=texColor.rgb;float alpha=texColor.a*b*k;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}"),L=new f.a(h.g?"varying vec2 v_texCoord;\nvarying float v_opacity;\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nattribute vec2 a_offsets;\nattribute float a_opacity;\nattribute float a_rotateWithView;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\n\nvoid main(void) {\n  mat4 offsetMatrix = u_offsetScaleMatrix;\n  if (a_rotateWithView == 1.0) {\n    offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  }\n  vec4 offsets = offsetMatrix * vec4(a_offsets, 0.0, 0.0);\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n  v_texCoord = a_texCoord;\n  v_opacity = a_opacity;\n}\n\n\n":"varying vec2 a;varying float b;attribute vec2 c;attribute vec2 d;attribute vec2 e;attribute float f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;void main(void){mat4 offsetMatrix=i;if(g==1.0){offsetMatrix=i*j;}vec4 offsets=offsetMatrix*vec4(e,0.0,0.0);gl_Position=h*vec4(c,0.0,1.0)+offsets;a=d;b=f;}");var R=function(t,e){this.u_projectionMatrix=t.getUniformLocation(e,h.g?"u_projectionMatrix":"h"),this.u_offsetScaleMatrix=t.getUniformLocation(e,h.g?"u_offsetScaleMatrix":"i"),this.u_offsetRotateMatrix=t.getUniformLocation(e,h.g?"u_offsetRotateMatrix":"j"),this.u_opacity=t.getUniformLocation(e,h.g?"u_opacity":"k"),this.u_image=t.getUniformLocation(e,h.g?"u_image":"l"),this.a_position=t.getAttribLocation(e,h.g?"a_position":"c"),this.a_texCoord=t.getAttribLocation(e,h.g?"a_texCoord":"d"),this.a_offsets=t.getAttribLocation(e,h.g?"a_offsets":"e"),this.a_opacity=t.getAttribLocation(e,h.g?"a_opacity":"f"),this.a_rotateWithView=t.getAttribLocation(e,h.g?"a_rotateWithView":"g")},A=i(153);const M=function(t,e){S.call(this,t,e),this.anchorX=void 0,this.anchorY=void 0,this.groupIndices=[],this.hitDetectionGroupIndices=[],this.height=void 0,this.imageHeight=void 0,this.imageWidth=void 0,this.defaultLocations=null,this.opacity=void 0,this.originX=void 0,this.originY=void 0,this.rotateWithView=void 0,this.rotation=void 0,this.scale=void 0,this.width=void 0};Object(n.inherits)(M,S),M.prototype.getDeleteResourcesFunction=function(t){const e=this.verticesBuffer,i=this.indicesBuffer,n=this.getTextures(!0),r=t.getGL();return function(){if(!r.isContextLost()){let t,e;for(t=0,e=n.length;t<e;++t)r.deleteTexture(n[t])}t.deleteBuffer(e),t.deleteBuffer(i)}},M.prototype.drawCoordinates=function(t,e,i,n){const r=this.anchorX,o=this.anchorY,s=this.height,a=this.imageHeight,l=this.imageWidth,u=this.opacity,c=this.originX,h=this.originY,d=this.rotateWithView?1:0,f=-this.rotation,p=this.scale,g=this.width,y=Math.cos(f),m=Math.sin(f);let _,v,b,S,O,C,x=this.indices.length,T=this.vertices.length;for(_=e;_<i;_+=n)O=t[_]-this.origin[0],C=t[_+1]-this.origin[1],v=T/8,b=-p*r,S=-p*(s-o),this.vertices[T++]=O,this.vertices[T++]=C,this.vertices[T++]=b*y-S*m,this.vertices[T++]=b*m+S*y,this.vertices[T++]=c/l,this.vertices[T++]=(h+s)/a,this.vertices[T++]=u,this.vertices[T++]=d,b=p*(g-r),S=-p*(s-o),this.vertices[T++]=O,this.vertices[T++]=C,this.vertices[T++]=b*y-S*m,this.vertices[T++]=b*m+S*y,this.vertices[T++]=(c+g)/l,this.vertices[T++]=(h+s)/a,this.vertices[T++]=u,this.vertices[T++]=d,b=p*(g-r),S=p*o,this.vertices[T++]=O,this.vertices[T++]=C,this.vertices[T++]=b*y-S*m,this.vertices[T++]=b*m+S*y,this.vertices[T++]=(c+g)/l,this.vertices[T++]=h/a,this.vertices[T++]=u,this.vertices[T++]=d,b=-p*r,S=p*o,this.vertices[T++]=O,this.vertices[T++]=C,this.vertices[T++]=b*y-S*m,this.vertices[T++]=b*m+S*y,this.vertices[T++]=c/l,this.vertices[T++]=h/a,this.vertices[T++]=u,this.vertices[T++]=d,this.indices[x++]=v,this.indices[x++]=v+1,this.indices[x++]=v+2,this.indices[x++]=v,this.indices[x++]=v+2,this.indices[x++]=v+3;return T},M.prototype.createTextures=function(t,e,i,r){let o,s,a,l;const u=e.length;for(l=0;l<u;++l)s=e[l],(a=Object(n.getUid)(s).toString())in i?o=i[a]:(o=Object(A.createTexture)(r,s,h.c,h.c),i[a]=o),t[l]=o},M.prototype.setUpProgram=function(t,e,i,n){const r=e.getProgram(I,L);let o;return this.defaultLocations?o=this.defaultLocations:(o=new R(t,r),this.defaultLocations=o),e.useProgram(r),t.enableVertexAttribArray(o.a_position),t.vertexAttribPointer(o.a_position,2,h.l,!1,32,0),t.enableVertexAttribArray(o.a_offsets),t.vertexAttribPointer(o.a_offsets,2,h.l,!1,32,8),t.enableVertexAttribArray(o.a_texCoord),t.vertexAttribPointer(o.a_texCoord,2,h.l,!1,32,16),t.enableVertexAttribArray(o.a_opacity),t.vertexAttribPointer(o.a_opacity,1,h.l,!1,32,24),t.enableVertexAttribArray(o.a_rotateWithView),t.vertexAttribPointer(o.a_rotateWithView,1,h.l,!1,32,28),o},M.prototype.shutDownProgram=function(t,e){t.disableVertexAttribArray(e.a_position),t.disableVertexAttribArray(e.a_offsets),t.disableVertexAttribArray(e.a_texCoord),t.disableVertexAttribArray(e.a_opacity),t.disableVertexAttribArray(e.a_rotateWithView)},M.prototype.drawReplay=function(t,e,i,n){const r=n?this.getHitDetectionTextures():this.getTextures(),o=n?this.hitDetectionGroupIndices:this.groupIndices;if(Object(s.isEmpty)(i)){let i,n,s;for(i=0,n=r.length,s=0;i<n;++i){t.bindTexture(h.A,r[i]);const n=o[i];this.drawElements(t,e,s,n),s=n}}else this.drawReplaySkipping(t,e,i,r,o)},M.prototype.drawReplaySkipping=function(t,e,i,r,o){let s,a,l=0;for(s=0,a=r.length;s<a;++s){t.bindTexture(h.A,r[s]);const a=s>0?o[s-1]:0,u=o[s];let c=a,d=a;for(;l<this.startIndices.length&&this.startIndices[l]<=u;){const r=this.startIndicesFeature[l];void 0!==i[Object(n.getUid)(r).toString()]?(c!==d&&this.drawElements(t,e,c,d),d=c=l===this.startIndices.length-1?u:this.startIndices[l+1]):d=l===this.startIndices.length-1?u:this.startIndices[l+1],l++}c!==d&&this.drawElements(t,e,c,d)}},M.prototype.drawHitDetectionReplayOneByOne=function(t,e,i,r,s){let a,l,u,c,d,f,p=this.startIndices.length-1;const g=this.getHitDetectionTextures();for(a=g.length-1;a>=0;--a)for(t.bindTexture(h.A,g[a]),l=a>0?this.hitDetectionGroupIndices[a-1]:0,c=this.hitDetectionGroupIndices[a];p>=0&&this.startIndices[p]>=l;){if(u=this.startIndices[p],d=this.startIndicesFeature[p],void 0===i[f=Object(n.getUid)(d).toString()]&&d.getGeometry()&&(void 0===s||Object(o.intersects)(s,d.getGeometry().getExtent()))){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawElements(t,e,u,c);const i=r(d);if(i)return i}c=u,p--}},M.prototype.finish=function(t){this.anchorX=void 0,this.anchorY=void 0,this.height=void 0,this.imageHeight=void 0,this.imageWidth=void 0,this.indices=null,this.opacity=void 0,this.originX=void 0,this.originY=void 0,this.rotateWithView=void 0,this.rotation=void 0,this.scale=void 0,this.vertices=null,this.width=void 0},M.prototype.getTextures=function(t){},M.prototype.getHitDetectionTextures=function(){};var F=M;const k=function(t,e){F.call(this,t,e),this.images_=[],this.hitDetectionImages_=[],this.textures_=[],this.hitDetectionTextures_=[]};Object(n.inherits)(k,F),k.prototype.drawMultiPoint=function(t,e){this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e);const i=t.getFlatCoordinates(),n=t.getStride();this.drawCoordinates(i,0,i.length,n)},k.prototype.drawPoint=function(t,e){this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e);const i=t.getFlatCoordinates(),n=t.getStride();this.drawCoordinates(i,0,i.length,n)},k.prototype.finish=function(t){const e=t.getGL();this.groupIndices.push(this.indices.length),this.hitDetectionGroupIndices.push(this.indices.length),this.verticesBuffer=new P.a(this.vertices);const i=this.indices;this.indicesBuffer=new P.a(i);const n={};this.createTextures(this.textures_,this.images_,n,e),this.createTextures(this.hitDetectionTextures_,this.hitDetectionImages_,n,e),this.images_=null,this.hitDetectionImages_=null,F.prototype.finish.call(this,t)},k.prototype.setImageStyle=function(t){const e=t.getAnchor(),i=t.getImage(1),r=t.getImageSize(),o=t.getHitDetectionImage(1),s=t.getOpacity(),a=t.getOrigin(),l=t.getRotateWithView(),u=t.getRotation(),c=t.getSize(),h=t.getScale();let d;0===this.images_.length?this.images_.push(i):(d=this.images_[this.images_.length-1],Object(n.getUid)(d)!=Object(n.getUid)(i)&&(this.groupIndices.push(this.indices.length),this.images_.push(i))),0===this.hitDetectionImages_.length?this.hitDetectionImages_.push(o):(d=this.hitDetectionImages_[this.hitDetectionImages_.length-1],Object(n.getUid)(d)!=Object(n.getUid)(o)&&(this.hitDetectionGroupIndices.push(this.indices.length),this.hitDetectionImages_.push(o))),this.anchorX=e[0],this.anchorY=e[1],this.height=c[1],this.imageHeight=r[1],this.imageWidth=r[0],this.opacity=s,this.originX=a[0],this.originY=a[1],this.rotation=u,this.rotateWithView=l,this.scale=h,this.width=c[0]},k.prototype.getTextures=function(t){return t?this.textures_.concat(this.hitDetectionTextures_):this.textures_},k.prototype.getHitDetectionTextures=function(){return this.hitDetectionTextures_};var N=k,D=i(87),G=i(173);function B(t,e,i,n){const r=i-n;return t[e]===t[r]&&t[e+1]===t[r+1]&&(i-e)/n>3&&!!Object(G.a)(t,e,i,n)}const U=new d.a(h.g?"precision mediump float;\nvarying float v_round;\nvarying vec2 v_roundVertex;\nvarying float v_halfWidth;\n\n\n\nuniform float u_opacity;\nuniform vec4 u_color;\nuniform vec2 u_size;\nuniform float u_pixelRatio;\n\nvoid main(void) {\n  if (v_round > 0.0) {\n    vec2 windowCoords = vec2((v_roundVertex.x + 1.0) / 2.0 * u_size.x * u_pixelRatio,\n        (v_roundVertex.y + 1.0) / 2.0 * u_size.y * u_pixelRatio);\n    if (length(windowCoords - gl_FragCoord.xy) > v_halfWidth * u_pixelRatio) {\n      discard;\n    }\n  }\n  gl_FragColor = u_color;\n  float alpha = u_color.a * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n}\n":"precision mediump float;varying float a;varying vec2 aVertex;varying float c;uniform float m;uniform vec4 n;uniform vec2 o;uniform float p;void main(void){if(a>0.0){vec2 windowCoords=vec2((aVertex.x+1.0)/2.0*o.x*p,(aVertex.y+1.0)/2.0*o.y*p);if(length(windowCoords-gl_FragCoord.xy)>c*p){discard;}} gl_FragColor=n;float alpha=n.a*m;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}"),V=new f.a(h.g?"varying float v_round;\nvarying vec2 v_roundVertex;\nvarying float v_halfWidth;\n\n\nattribute vec2 a_lastPos;\nattribute vec2 a_position;\nattribute vec2 a_nextPos;\nattribute float a_direction;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\nuniform float u_lineWidth;\nuniform float u_miterLimit;\n\nbool nearlyEquals(in float value, in float ref) {\n  float epsilon = 0.000000000001;\n  return value >= ref - epsilon && value <= ref + epsilon;\n}\n\nvoid alongNormal(out vec2 offset, in vec2 nextP, in float turnDir, in float direction) {\n  vec2 dirVect = nextP - a_position;\n  vec2 normal = normalize(vec2(-turnDir * dirVect.y, turnDir * dirVect.x));\n  offset = u_lineWidth / 2.0 * normal * direction;\n}\n\nvoid miterUp(out vec2 offset, out float round, in bool isRound, in float direction) {\n  float halfWidth = u_lineWidth / 2.0;\n  vec2 tangent = normalize(normalize(a_nextPos - a_position) + normalize(a_position - a_lastPos));\n  vec2 normal = vec2(-tangent.y, tangent.x);\n  vec2 dirVect = a_nextPos - a_position;\n  vec2 tmpNormal = normalize(vec2(-dirVect.y, dirVect.x));\n  float miterLength = abs(halfWidth / dot(normal, tmpNormal));\n  offset = normal * direction * miterLength;\n  round = 0.0;\n  if (isRound) {\n    round = 1.0;\n  } else if (miterLength > u_miterLimit + u_lineWidth) {\n    offset = halfWidth * tmpNormal * direction;\n  }\n}\n\nbool miterDown(out vec2 offset, in vec4 projPos, in mat4 offsetMatrix, in float direction) {\n  bool degenerate = false;\n  vec2 tangent = normalize(normalize(a_nextPos - a_position) + normalize(a_position - a_lastPos));\n  vec2 normal = vec2(-tangent.y, tangent.x);\n  vec2 dirVect = a_lastPos - a_position;\n  vec2 tmpNormal = normalize(vec2(-dirVect.y, dirVect.x));\n  vec2 longOffset, shortOffset, longVertex;\n  vec4 shortProjVertex;\n  float halfWidth = u_lineWidth / 2.0;\n  if (length(a_nextPos - a_position) > length(a_lastPos - a_position)) {\n    longOffset = tmpNormal * direction * halfWidth;\n    shortOffset = normalize(vec2(dirVect.y, -dirVect.x)) * direction * halfWidth;\n    longVertex = a_nextPos;\n    shortProjVertex = u_projectionMatrix * vec4(a_lastPos, 0.0, 1.0);\n  } else {\n    shortOffset = tmpNormal * direction * halfWidth;\n    longOffset = normalize(vec2(dirVect.y, -dirVect.x)) * direction * halfWidth;\n    longVertex = a_lastPos;\n    shortProjVertex = u_projectionMatrix * vec4(a_nextPos, 0.0, 1.0);\n  }\n  //Intersection algorithm based on theory by Paul Bourke (http://paulbourke.net/geometry/pointlineplane/).\n  vec4 p1 = u_projectionMatrix * vec4(longVertex, 0.0, 1.0) + offsetMatrix * vec4(longOffset, 0.0, 0.0);\n  vec4 p2 = projPos + offsetMatrix * vec4(longOffset, 0.0, 0.0);\n  vec4 p3 = shortProjVertex + offsetMatrix * vec4(-shortOffset, 0.0, 0.0);\n  vec4 p4 = shortProjVertex + offsetMatrix * vec4(shortOffset, 0.0, 0.0);\n  float denom = (p4.y - p3.y) * (p2.x - p1.x) - (p4.x - p3.x) * (p2.y - p1.y);\n  float firstU = ((p4.x - p3.x) * (p1.y - p3.y) - (p4.y - p3.y) * (p1.x - p3.x)) / denom;\n  float secondU = ((p2.x - p1.x) * (p1.y - p3.y) - (p2.y - p1.y) * (p1.x - p3.x)) / denom;\n  float epsilon = 0.000000000001;\n  if (firstU > epsilon && firstU < 1.0 - epsilon && secondU > epsilon && secondU < 1.0 - epsilon) {\n    shortProjVertex.x = p1.x + firstU * (p2.x - p1.x);\n    shortProjVertex.y = p1.y + firstU * (p2.y - p1.y);\n    offset = shortProjVertex.xy;\n    degenerate = true;\n  } else {\n    float miterLength = abs(halfWidth / dot(normal, tmpNormal));\n    offset = normal * direction * miterLength;\n  }\n  return degenerate;\n}\n\nvoid squareCap(out vec2 offset, out float round, in bool isRound, in vec2 nextP,\n    in float turnDir, in float direction) {\n  round = 0.0;\n  vec2 dirVect = a_position - nextP;\n  vec2 firstNormal = normalize(dirVect);\n  vec2 secondNormal = vec2(turnDir * firstNormal.y * direction, -turnDir * firstNormal.x * direction);\n  vec2 hypotenuse = normalize(firstNormal - secondNormal);\n  vec2 normal = vec2(turnDir * hypotenuse.y * direction, -turnDir * hypotenuse.x * direction);\n  float length = sqrt(v_halfWidth * v_halfWidth * 2.0);\n  offset = normal * length;\n  if (isRound) {\n    round = 1.0;\n  }\n}\n\nvoid main(void) {\n  bool degenerate = false;\n  float direction = float(sign(a_direction));\n  mat4 offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  vec2 offset;\n  vec4 projPos = u_projectionMatrix * vec4(a_position, 0.0, 1.0);\n  bool round = nearlyEquals(mod(a_direction, 2.0), 0.0);\n\n  v_round = 0.0;\n  v_halfWidth = u_lineWidth / 2.0;\n  v_roundVertex = projPos.xy;\n\n  if (nearlyEquals(mod(a_direction, 3.0), 0.0) || nearlyEquals(mod(a_direction, 17.0), 0.0)) {\n    alongNormal(offset, a_nextPos, 1.0, direction);\n  } else if (nearlyEquals(mod(a_direction, 5.0), 0.0) || nearlyEquals(mod(a_direction, 13.0), 0.0)) {\n    alongNormal(offset, a_lastPos, -1.0, direction);\n  } else if (nearlyEquals(mod(a_direction, 23.0), 0.0)) {\n    miterUp(offset, v_round, round, direction);\n  } else if (nearlyEquals(mod(a_direction, 19.0), 0.0)) {\n    degenerate = miterDown(offset, projPos, offsetMatrix, direction);\n  } else if (nearlyEquals(mod(a_direction, 7.0), 0.0)) {\n    squareCap(offset, v_round, round, a_nextPos, 1.0, direction);\n  } else if (nearlyEquals(mod(a_direction, 11.0), 0.0)) {\n    squareCap(offset, v_round, round, a_lastPos, -1.0, direction);\n  }\n  if (!degenerate) {\n    vec4 offsets = offsetMatrix * vec4(offset, 0.0, 0.0);\n    gl_Position = projPos + offsets;\n  } else {\n    gl_Position = vec4(offset, 0.0, 1.0);\n  }\n}\n\n\n":"varying float a;varying vec2 aVertex;varying float c;attribute vec2 d;attribute vec2 e;attribute vec2 f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;uniform float k;uniform float l;bool nearlyEquals(in float value,in float ref){float epsilon=0.000000000001;return value>=ref-epsilon&&value<=ref+epsilon;}void alongNormal(out vec2 offset,in vec2 nextP,in float turnDir,in float direction){vec2 dirVect=nextP-e;vec2 normal=normalize(vec2(-turnDir*dirVect.y,turnDir*dirVect.x));offset=k/2.0*normal*direction;}void miterUp(out vec2 offset,out float round,in bool isRound,in float direction){float halfWidth=k/2.0;vec2 tangent=normalize(normalize(f-e)+normalize(e-d));vec2 normal=vec2(-tangent.y,tangent.x);vec2 dirVect=f-e;vec2 tmpNormal=normalize(vec2(-dirVect.y,dirVect.x));float miterLength=abs(halfWidth/dot(normal,tmpNormal));offset=normal*direction*miterLength;round=0.0;if(isRound){round=1.0;}else if(miterLength>l+k){offset=halfWidth*tmpNormal*direction;}} bool miterDown(out vec2 offset,in vec4 projPos,in mat4 offsetMatrix,in float direction){bool degenerate=false;vec2 tangent=normalize(normalize(f-e)+normalize(e-d));vec2 normal=vec2(-tangent.y,tangent.x);vec2 dirVect=d-e;vec2 tmpNormal=normalize(vec2(-dirVect.y,dirVect.x));vec2 longOffset,shortOffset,longVertex;vec4 shortProjVertex;float halfWidth=k/2.0;if(length(f-e)>length(d-e)){longOffset=tmpNormal*direction*halfWidth;shortOffset=normalize(vec2(dirVect.y,-dirVect.x))*direction*halfWidth;longVertex=f;shortProjVertex=h*vec4(d,0.0,1.0);}else{shortOffset=tmpNormal*direction*halfWidth;longOffset=normalize(vec2(dirVect.y,-dirVect.x))*direction*halfWidth;longVertex=d;shortProjVertex=h*vec4(f,0.0,1.0);}vec4 p1=h*vec4(longVertex,0.0,1.0)+offsetMatrix*vec4(longOffset,0.0,0.0);vec4 p2=projPos+offsetMatrix*vec4(longOffset,0.0,0.0);vec4 p3=shortProjVertex+offsetMatrix*vec4(-shortOffset,0.0,0.0);vec4 p4=shortProjVertex+offsetMatrix*vec4(shortOffset,0.0,0.0);float denom=(p4.y-p3.y)*(p2.x-p1.x)-(p4.x-p3.x)*(p2.y-p1.y);float firstU=((p4.x-p3.x)*(p1.y-p3.y)-(p4.y-p3.y)*(p1.x-p3.x))/denom;float secondU=((p2.x-p1.x)*(p1.y-p3.y)-(p2.y-p1.y)*(p1.x-p3.x))/denom;float epsilon=0.000000000001;if(firstU>epsilon&&firstU<1.0-epsilon&&secondU>epsilon&&secondU<1.0-epsilon){shortProjVertex.x=p1.x+firstU*(p2.x-p1.x);shortProjVertex.y=p1.y+firstU*(p2.y-p1.y);offset=shortProjVertex.xy;degenerate=true;}else{float miterLength=abs(halfWidth/dot(normal,tmpNormal));offset=normal*direction*miterLength;}return degenerate;}void squareCap(out vec2 offset,out float round,in bool isRound,in vec2 nextP,in float turnDir,in float direction){round=0.0;vec2 dirVect=e-nextP;vec2 firstNormal=normalize(dirVect);vec2 secondNormal=vec2(turnDir*firstNormal.y*direction,-turnDir*firstNormal.x*direction);vec2 hypotenuse=normalize(firstNormal-secondNormal);vec2 normal=vec2(turnDir*hypotenuse.y*direction,-turnDir*hypotenuse.x*direction);float length=sqrt(c*c*2.0);offset=normal*length;if(isRound){round=1.0;}} void main(void){bool degenerate=false;float direction=float(sign(g));mat4 offsetMatrix=i*j;vec2 offset;vec4 projPos=h*vec4(e,0.0,1.0);bool round=nearlyEquals(mod(g,2.0),0.0);a=0.0;c=k/2.0;aVertex=projPos.xy;if(nearlyEquals(mod(g,3.0),0.0)||nearlyEquals(mod(g,17.0),0.0)){alongNormal(offset,f,1.0,direction);}else if(nearlyEquals(mod(g,5.0),0.0)||nearlyEquals(mod(g,13.0),0.0)){alongNormal(offset,d,-1.0,direction);}else if(nearlyEquals(mod(g,23.0),0.0)){miterUp(offset,a,round,direction);}else if(nearlyEquals(mod(g,19.0),0.0)){degenerate=miterDown(offset,projPos,offsetMatrix,direction);}else if(nearlyEquals(mod(g,7.0),0.0)){squareCap(offset,a,round,f,1.0,direction);}else if(nearlyEquals(mod(g,11.0),0.0)){squareCap(offset,a,round,d,-1.0,direction);}if(!degenerate){vec4 offsets=offsetMatrix*vec4(offset,0.0,0.0);gl_Position=projPos+offsets;}else{gl_Position=vec4(offset,0.0,1.0);}}");var Z=function(t,e){this.u_projectionMatrix=t.getUniformLocation(e,h.g?"u_projectionMatrix":"h"),this.u_offsetScaleMatrix=t.getUniformLocation(e,h.g?"u_offsetScaleMatrix":"i"),this.u_offsetRotateMatrix=t.getUniformLocation(e,h.g?"u_offsetRotateMatrix":"j"),this.u_lineWidth=t.getUniformLocation(e,h.g?"u_lineWidth":"k"),this.u_miterLimit=t.getUniformLocation(e,h.g?"u_miterLimit":"l"),this.u_opacity=t.getUniformLocation(e,h.g?"u_opacity":"m"),this.u_color=t.getUniformLocation(e,h.g?"u_color":"n"),this.u_size=t.getUniformLocation(e,h.g?"u_size":"o"),this.u_pixelRatio=t.getUniformLocation(e,h.g?"u_pixelRatio":"p"),this.a_lastPos=t.getAttribLocation(e,h.g?"a_lastPos":"d"),this.a_position=t.getAttribLocation(e,h.g?"a_position":"e"),this.a_nextPos=t.getAttribLocation(e,h.g?"a_nextPos":"f"),this.a_direction=t.getAttribLocation(e,h.g?"a_direction":"g")};const W=3,H=5,z=7,Y=11,X=13,q=17,K=19,J=23,Q=function(t,e){S.call(this,t,e),this.defaultLocations_=null,this.styles_=[],this.styleIndices_=[],this.state_={strokeColor:null,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0,changed:!1}};Object(n.inherits)(Q,S),Q.prototype.drawCoordinates_=function(t,e,i,n){let o,s,a=this.vertices.length,l=this.indices.length;const u="bevel"===this.state_.lineJoin?0:"miter"===this.state_.lineJoin?1:2,c="butt"===this.state_.lineCap?0:"square"===this.state_.lineCap?1:2,h=B(t,e,i,n);let d,f,p,g,y,m,_=l,v=1;for(o=e,s=i;o<s;o+=n){if(p=a/7,g=y,y=m||[t[o],t[o+1]],o===e){if(m=[t[o+n],t[o+n+1]],i-e==2*n&&Object(r.b)(y,m))break;if(!h){c&&(a=this.addVertices_([0,0],y,m,v*z*c,a),a=this.addVertices_([0,0],y,m,-v*z*c,a),this.indices[l++]=p+2,this.indices[l++]=p,this.indices[l++]=p+1,this.indices[l++]=p+1,this.indices[l++]=p+3,this.indices[l++]=p+2),a=this.addVertices_([0,0],y,m,v*W*(c||1),a),_=(a=this.addVertices_([0,0],y,m,-v*W*(c||1),a))/7-1;continue}g=[t[i-2*n],t[i-2*n+1]],d=m}else{if(o===i-n){if(h){m=d;break}g=g||[0,0],a=this.addVertices_(g,y,[0,0],v*H*(c||1),a),a=this.addVertices_(g,y,[0,0],-v*H*(c||1),a),this.indices[l++]=p,this.indices[l++]=_-1,this.indices[l++]=_,this.indices[l++]=_,this.indices[l++]=p+1,this.indices[l++]=p,c&&(a=this.addVertices_(g,y,[0,0],v*Y*c,a),a=this.addVertices_(g,y,[0,0],-v*Y*c,a),this.indices[l++]=p+2,this.indices[l++]=p,this.indices[l++]=p+1,this.indices[l++]=p+1,this.indices[l++]=p+3,this.indices[l++]=p+2);break}m=[t[o+n],t[o+n+1]]}f=E(g[0],g[1],y[0],y[1],m[0],m[1])?-1:1,a=this.addVertices_(g,y,m,f*X*(u||1),a),a=this.addVertices_(g,y,m,f*q*(u||1),a),a=this.addVertices_(g,y,m,-f*K*(u||1),a),o>e&&(this.indices[l++]=p,this.indices[l++]=_-1,this.indices[l++]=_,this.indices[l++]=p+2,this.indices[l++]=p,this.indices[l++]=v*f>0?_:_-1),this.indices[l++]=p,this.indices[l++]=p+2,this.indices[l++]=p+1,_=p+2,v=f,u&&(a=this.addVertices_(g,y,m,f*J*u,a),this.indices[l++]=p+1,this.indices[l++]=p+3,this.indices[l++]=p)}h&&(p=p||a/7,f=Object(D.a)([g[0],g[1],y[0],y[1],m[0],m[1]],0,6,2)?1:-1,a=this.addVertices_(g,y,m,f*X*(u||1),a),a=this.addVertices_(g,y,m,-f*K*(u||1),a),this.indices[l++]=p,this.indices[l++]=_-1,this.indices[l++]=_,this.indices[l++]=p+1,this.indices[l++]=p,this.indices[l++]=v*f>0?_:_-1)},Q.prototype.addVertices_=function(t,e,i,n,r){return this.vertices[r++]=t[0],this.vertices[r++]=t[1],this.vertices[r++]=e[0],this.vertices[r++]=e[1],this.vertices[r++]=i[0],this.vertices[r++]=i[1],this.vertices[r++]=n,r},Q.prototype.isValid_=function(t,e,i,n){const o=i-e;if(o<2*n)return!1;if(o===2*n){const i=[t[e],t[e+1]],o=[t[e+n],t[e+n+1]];return!Object(r.b)(i,o)}return!0},Q.prototype.drawLineString=function(t,e){let i=t.getFlatCoordinates();const n=t.getStride();this.isValid_(i,0,i.length,n)&&(i=Object(c.d)(i,0,i.length,n,-this.origin[0],-this.origin[1]),this.state_.changed&&(this.styleIndices_.push(this.indices.length),this.state_.changed=!1),this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e),this.drawCoordinates_(i,0,i.length,n))},Q.prototype.drawMultiLineString=function(t,e){const i=this.indices.length,n=t.getEnds();n.unshift(0);const r=t.getFlatCoordinates(),o=t.getStride();let s,a;if(n.length>1)for(s=1,a=n.length;s<a;++s)if(this.isValid_(r,n[s-1],n[s],o)){const t=Object(c.d)(r,n[s-1],n[s],o,-this.origin[0],-this.origin[1]);this.drawCoordinates_(t,0,t.length,o)}this.indices.length>i&&(this.startIndices.push(i),this.startIndicesFeature.push(e),this.state_.changed&&(this.styleIndices_.push(i),this.state_.changed=!1))},Q.prototype.drawPolygonCoordinates=function(t,e,i){if(B(t,0,t.length,i)||(t.push(t[0]),t.push(t[1])),this.drawCoordinates_(t,0,t.length,i),e.length){let t,n;for(t=0,n=e.length;t<n;++t)B(e[t],0,e[t].length,i)||(e[t].push(e[t][0]),e[t].push(e[t][1])),this.drawCoordinates_(e[t],0,e[t].length,i)}},Q.prototype.setPolygonStyle=function(t,e){const i=void 0===e?this.indices.length:e;this.startIndices.push(i),this.startIndicesFeature.push(t),this.state_.changed&&(this.styleIndices_.push(i),this.state_.changed=!1)},Q.prototype.getCurrentIndex=function(){return this.indices.length},Q.prototype.finish=function(t){this.verticesBuffer=new P.a(this.vertices),this.indicesBuffer=new P.a(this.indices),this.startIndices.push(this.indices.length),0===this.styleIndices_.length&&this.styles_.length>0&&(this.styles_=[]),this.vertices=null,this.indices=null},Q.prototype.getDeleteResourcesFunction=function(t){const e=this.verticesBuffer,i=this.indicesBuffer;return function(){t.deleteBuffer(e),t.deleteBuffer(i)}},Q.prototype.setUpProgram=function(t,e,i,n){const r=e.getProgram(U,V);let o;return this.defaultLocations_?o=this.defaultLocations_:(o=new Z(t,r),this.defaultLocations_=o),e.useProgram(r),t.enableVertexAttribArray(o.a_lastPos),t.vertexAttribPointer(o.a_lastPos,2,h.l,!1,28,0),t.enableVertexAttribArray(o.a_position),t.vertexAttribPointer(o.a_position,2,h.l,!1,28,8),t.enableVertexAttribArray(o.a_nextPos),t.vertexAttribPointer(o.a_nextPos,2,h.l,!1,28,16),t.enableVertexAttribArray(o.a_direction),t.vertexAttribPointer(o.a_direction,1,h.l,!1,28,24),t.uniform2fv(o.u_size,i),t.uniform1f(o.u_pixelRatio,n),o},Q.prototype.shutDownProgram=function(t,e){t.disableVertexAttribArray(e.a_lastPos),t.disableVertexAttribArray(e.a_position),t.disableVertexAttribArray(e.a_nextPos),t.disableVertexAttribArray(e.a_direction)},Q.prototype.drawReplay=function(t,e,i,n){const r=t.getParameter(t.DEPTH_FUNC),o=t.getParameter(t.DEPTH_WRITEMASK);if(n||(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.NOTEQUAL)),Object(s.isEmpty)(i)){let i,n,r,o;for(r=this.startIndices[this.startIndices.length-1],i=this.styleIndices_.length-1;i>=0;--i)n=this.styleIndices_[i],o=this.styles_[i],this.setStrokeStyle_(t,o[0],o[1],o[2]),this.drawElements(t,e,n,r),t.clear(t.DEPTH_BUFFER_BIT),r=n}else this.drawReplaySkipping_(t,e,i);n||(t.disable(t.DEPTH_TEST),t.clear(t.DEPTH_BUFFER_BIT),t.depthMask(o),t.depthFunc(r))},Q.prototype.drawReplaySkipping_=function(t,e,i){let r,o,s,a,l,u,c,h,d;for(h=this.startIndices.length-2,s=o=this.startIndices[h+1],r=this.styleIndices_.length-1;r>=0;--r){for(a=this.styles_[r],this.setStrokeStyle_(t,a[0],a[1],a[2]),l=this.styleIndices_[r];h>=0&&this.startIndices[h]>=l;)d=this.startIndices[h],u=this.startIndicesFeature[h],i[c=Object(n.getUid)(u).toString()]&&(o!==s&&(this.drawElements(t,e,o,s),t.clear(t.DEPTH_BUFFER_BIT)),s=d),h--,o=d;o!==s&&(this.drawElements(t,e,o,s),t.clear(t.DEPTH_BUFFER_BIT)),o=s=l}},Q.prototype.drawHitDetectionReplayOneByOne=function(t,e,i,r,s){let a,l,u,c,h,d,f,p;for(p=this.startIndices.length-2,u=this.startIndices[p+1],a=this.styleIndices_.length-1;a>=0;--a)for(c=this.styles_[a],this.setStrokeStyle_(t,c[0],c[1],c[2]),h=this.styleIndices_[a];p>=0&&this.startIndices[p]>=h;){if(l=this.startIndices[p],d=this.startIndicesFeature[p],void 0===i[f=Object(n.getUid)(d).toString()]&&d.getGeometry()&&(void 0===s||Object(o.intersects)(s,d.getGeometry().getExtent()))){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawElements(t,e,l,u);const i=r(d);if(i)return i}p--,u=l}},Q.prototype.setStrokeStyle_=function(t,e,i,n){t.uniform4fv(this.defaultLocations_.u_color,e),t.uniform1f(this.defaultLocations_.u_lineWidth,i),t.uniform1f(this.defaultLocations_.u_miterLimit,n)},Q.prototype.setFillStrokeStyle=function(t,e){const i=e.getLineCap();this.state_.lineCap=void 0!==i?i:"round";const n=e.getLineDash();this.state_.lineDash=n||C;const o=e.getLineDashOffset();this.state_.lineDashOffset=o||0;const s=e.getLineJoin();this.state_.lineJoin=void 0!==s?s:"round";let a=e.getColor();a=a instanceof CanvasGradient||a instanceof CanvasPattern?x:Object(u.asArray)(a).map(function(t,e){return 3!=e?t/255:t})||x;let l=e.getWidth();l=void 0!==l?l:1;let c=e.getMiterLimit();c=void 0!==c?c:10,this.state_.strokeColor&&Object(r.b)(this.state_.strokeColor,a)&&this.state_.lineWidth===l&&this.state_.miterLimit===c||(this.state_.changed=!0,this.state_.strokeColor=a,this.state_.lineWidth=l,this.state_.miterLimit=c,this.styles_.push([a,l,c]))};var $=Q,tt=i(102);const et=new d.a(h.g?"precision mediump float;\n\n\n\nuniform vec4 u_color;\nuniform float u_opacity;\n\nvoid main(void) {\n  gl_FragColor = u_color;\n  float alpha = u_color.a * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n}\n":"precision mediump float;uniform vec4 e;uniform float f;void main(void){gl_FragColor=e;float alpha=e.a*f;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}"),it=new f.a(h.g?"\n\nattribute vec2 a_position;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\n\nvoid main(void) {\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0);\n}\n\n\n":"attribute vec2 a;uniform mat4 b;uniform mat4 c;uniform mat4 d;void main(void){gl_Position=b*vec4(a,0.0,1.0);}");var nt=function(t,e){this.u_projectionMatrix=t.getUniformLocation(e,h.g?"u_projectionMatrix":"b"),this.u_offsetScaleMatrix=t.getUniformLocation(e,h.g?"u_offsetScaleMatrix":"c"),this.u_offsetRotateMatrix=t.getUniformLocation(e,h.g?"u_offsetRotateMatrix":"d"),this.u_color=t.getUniformLocation(e,h.g?"u_color":"e"),this.u_opacity=t.getUniformLocation(e,h.g?"u_opacity":"f"),this.a_position=t.getAttribLocation(e,h.g?"a_position":"a")},rt=i(91);const ot=function(t){this.first_,this.last_,this.head_,this.circular_=void 0===t||t,this.length_=0};ot.prototype.insertItem=function(t){const e={prev:void 0,next:void 0,data:t},i=this.head_;if(i){const t=i.next;e.prev=i,e.next=t,i.next=e,t&&(t.prev=e),i===this.last_&&(this.last_=e)}else this.first_=e,this.last_=e,this.circular_&&(e.next=e,e.prev=e);this.head_=e,this.length_++},ot.prototype.removeItem=function(){const t=this.head_;if(t){const e=t.next,i=t.prev;e&&(e.prev=i),i&&(i.next=e),this.head_=e||i,this.first_===this.last_?(this.head_=void 0,this.first_=void 0,this.last_=void 0):this.first_===t?this.first_=this.head_:this.last_===t&&(this.last_=i?this.head_.prev:this.head_),this.length_--}},ot.prototype.firstItem=function(){if(this.head_=this.first_,this.head_)return this.head_.data},ot.prototype.lastItem=function(){if(this.head_=this.last_,this.head_)return this.head_.data},ot.prototype.nextItem=function(){if(this.head_&&this.head_.next)return this.head_=this.head_.next,this.head_.data},ot.prototype.getNextItem=function(){if(this.head_&&this.head_.next)return this.head_.next.data},ot.prototype.prevItem=function(){if(this.head_&&this.head_.prev)return this.head_=this.head_.prev,this.head_.data},ot.prototype.getPrevItem=function(){if(this.head_&&this.head_.prev)return this.head_.prev.data},ot.prototype.getCurrItem=function(){if(this.head_)return this.head_.data},ot.prototype.setFirstItem=function(){this.circular_&&this.head_&&(this.first_=this.head_,this.last_=this.head_.prev)},ot.prototype.concat=function(t){if(t.head_){if(this.head_){const e=this.head_.next;this.head_.next=t.first_,t.first_.prev=this.head_,e.prev=t.last_,t.last_.next=e,this.length_+=t.length_}else this.head_=t.head_,this.first_=t.first_,this.last_=t.last_,this.length_=t.length_;t.head_=void 0,t.first_=void 0,t.last_=void 0,t.length_=0}},ot.prototype.getLength=function(){return this.length_};var st=ot,at=i(123);const lt=function(t,e){S.call(this,t,e),this.lineStringReplay=new $(t,e),this.defaultLocations_=null,this.styles_=[],this.styleIndices_=[],this.state_={fillColor:null,changed:!1}};Object(n.inherits)(lt,S),lt.prototype.drawCoordinates_=function(t,e,i){const n=new st,r=new at.default;this.processFlatCoordinates_(t,i,n,r,!0);const o=this.getMaxCoords_(n);if(e.length){let t,s;const a=[];for(t=0,s=e.length;t<s;++t){const n={list:new st,maxCoords:void 0,rtree:new at.default};a.push(n),this.processFlatCoordinates_(e[t],i,n.list,n.rtree,!1),this.classifyPoints_(n.list,n.rtree,!0),n.maxCoords=this.getMaxCoords_(n.list)}for(a.sort(function(t,e){return e.maxCoords[0]===t.maxCoords[0]?t.maxCoords[1]-e.maxCoords[1]:e.maxCoords[0]-t.maxCoords[0]}),t=0;t<a.length;++t){const e=a[t].list,i=e.firstItem();let s,l=i;do{if(this.getIntersections_(l,r).length){s=!0;break}l=e.nextItem()}while(i!==l);s||this.bridgeHole_(e,a[t].maxCoords[0],n,o[0],r)&&(r.concat(a[t].rtree),this.classifyPoints_(n,r,!1))}}else this.classifyPoints_(n,r,!1);this.triangulate_(n,r)},lt.prototype.processFlatCoordinates_=function(t,e,i,n,r){const o=Object(D.a)(t,0,t.length,e);let s,a,l,u,c,h=this.vertices.length/2;const d=[],f=[];if(r===o){for(u=l=this.createPoint_(t[0],t[1],h++),s=e,a=t.length;s<a;s+=e)c=this.createPoint_(t[s],t[s+1],h++),f.push(this.insertItem_(u,c,i)),d.push([Math.min(u.x,c.x),Math.min(u.y,c.y),Math.max(u.x,c.x),Math.max(u.y,c.y)]),u=c;f.push(this.insertItem_(c,l,i)),d.push([Math.min(u.x,c.x),Math.min(u.y,c.y),Math.max(u.x,c.x),Math.max(u.y,c.y)])}else{const n=t.length-e;for(u=l=this.createPoint_(t[n],t[n+1],h++),s=n-e,a=0;s>=a;s-=e)c=this.createPoint_(t[s],t[s+1],h++),f.push(this.insertItem_(u,c,i)),d.push([Math.min(u.x,c.x),Math.min(u.y,c.y),Math.max(u.x,c.x),Math.max(u.y,c.y)]),u=c;f.push(this.insertItem_(c,l,i)),d.push([Math.min(u.x,c.x),Math.min(u.y,c.y),Math.max(u.x,c.x),Math.max(u.y,c.y)])}n.load(d,f)},lt.prototype.getMaxCoords_=function(t){const e=t.firstItem();let i=e,n=[i.p0.x,i.p0.y];do{(i=t.nextItem()).p0.x>n[0]&&(n=[i.p0.x,i.p0.y])}while(i!==e);return n},lt.prototype.classifyPoints_=function(t,e,i){let n=t.firstItem(),r=n,o=t.nextItem(),s=!1;do{const a=i?E(o.p1.x,o.p1.y,r.p1.x,r.p1.y,r.p0.x,r.p0.y):E(r.p0.x,r.p0.y,r.p1.x,r.p1.y,o.p1.x,o.p1.y);void 0===a?(this.removeItem_(r,o,t,e),s=!0,o===n&&(n=t.getNextItem()),o=r,t.prevItem()):r.p1.reflex!==a&&(r.p1.reflex=a,s=!0),r=o,o=t.nextItem()}while(r!==n);return s},lt.prototype.bridgeHole_=function(t,e,i,n,r){let o=t.firstItem();for(;o.p1.x!==e;)o=t.nextItem();const s=o.p1,a={x:n,y:s.y,i:-1};let l,u,c,h,d=1/0;const f=this.getIntersections_({p0:s,p1:a},r,!0);for(l=0,u=f.length;l<u;++l){const t=f[l],e=this.calculateIntersection_(s,a,t.p0,t.p1,!0),i=Math.abs(s.x-e[0]);i<d&&void 0!==E(s.x,s.y,t.p0.x,t.p0.y,t.p1.x,t.p1.y)&&(d=i,h={x:e[0],y:e[1],i:-1},o=t)}if(d===1/0)return!1;if(c=o.p1,d>0){const t=this.getPointsInTriangle_(s,h,o.p1,r);if(t.length){let e=1/0;for(l=0,u=t.length;l<u;++l){const i=t[l],n=Math.atan2(s.y-i.y,a.x-i.x);(n<e||n===e&&i.x<c.x)&&(e=n,c=i)}}}for(o=i.firstItem();o.p1.x!==c.x||o.p1.y!==c.y;)o=i.nextItem();const p={x:s.x,y:s.y,i:s.i,reflex:void 0},g={x:o.p1.x,y:o.p1.y,i:o.p1.i,reflex:void 0};return t.getNextItem().p0=p,this.insertItem_(s,o.p1,t,r),this.insertItem_(g,p,t,r),o.p1=g,t.setFirstItem(),i.concat(t),!0},lt.prototype.triangulate_=function(t,e){let i=!1,n=this.isSimple_(t,e);for(;t.getLength()>3;)if(n){if(!this.clipEars_(t,e,n,i)&&!this.classifyPoints_(t,e,i)&&!this.resolveSelfIntersections_(t,e,!0))break}else if(!this.clipEars_(t,e,n,i)&&!this.classifyPoints_(t,e,i)&&!this.resolveSelfIntersections_(t,e)){if(!(n=this.isSimple_(t,e))){this.splitPolygon_(t,e);break}i=!this.isClockwise_(t),this.classifyPoints_(t,e,i)}if(3===t.getLength()){let e=this.indices.length;this.indices[e++]=t.getPrevItem().p0.i,this.indices[e++]=t.getCurrItem().p0.i,this.indices[e++]=t.getNextItem().p0.i}},lt.prototype.clipEars_=function(t,e,i,n){let r,o,s,a=this.indices.length,l=t.firstItem(),u=t.getPrevItem(),c=l,h=t.nextItem(),d=t.getNextItem(),f=!1;do{if(r=c.p0,o=c.p1,s=h.p1,!1===o.reflex){let p;p=i?0===this.getPointsInTriangle_(r,o,s,e,!0).length:n?this.diagonalIsInside_(d.p1,s,o,r,u.p0):this.diagonalIsInside_(u.p0,r,o,s,d.p1),(i||0===this.getIntersections_({p0:r,p1:s},e).length)&&p&&(i||!1===r.reflex||!1===s.reflex||Object(D.a)([u.p0.x,u.p0.y,r.x,r.y,o.x,o.y,s.x,s.y,d.p1.x,d.p1.y],0,10,2)===!n)&&(this.indices[a++]=r.i,this.indices[a++]=o.i,this.indices[a++]=s.i,this.removeItem_(c,h,t,e),h===l&&(l=d),f=!0)}u=t.getPrevItem(),c=t.getCurrItem(),h=t.nextItem(),d=t.getNextItem()}while(c!==l&&t.getLength()>3);return f},lt.prototype.resolveSelfIntersections_=function(t,e,i){const n=t.firstItem();t.nextItem();let r=n,o=t.nextItem(),s=!1;do{const a=this.calculateIntersection_(r.p0,r.p1,o.p0,o.p1,i);if(a){let l=!1;const u=this.vertices.length;let c=this.indices.length;const h=u/2,d=t.prevItem();let f;if(t.removeItem(),e.remove(d),l=d===n,i?(a[0]===r.p0.x&&a[1]===r.p0.y?(t.prevItem(),f=r.p0,o.p0=f,e.remove(r),l=l||r===n):(f=o.p1,r.p1=f,e.remove(o),l=l||o===n),t.removeItem()):(f=this.createPoint_(a[0],a[1],h),r.p1=f,o.p0=f,e.update([Math.min(r.p0.x,r.p1.x),Math.min(r.p0.y,r.p1.y),Math.max(r.p0.x,r.p1.x),Math.max(r.p0.y,r.p1.y)],r),e.update([Math.min(o.p0.x,o.p1.x),Math.min(o.p0.y,o.p1.y),Math.max(o.p0.x,o.p1.x),Math.max(o.p0.y,o.p1.y)],o)),this.indices[c++]=d.p0.i,this.indices[c++]=d.p1.i,this.indices[c++]=f.i,s=!0,l)break}r=t.getPrevItem(),o=t.nextItem()}while(r!==n);return s},lt.prototype.isSimple_=function(t,e){const i=t.firstItem();let n=i;do{if(this.getIntersections_(n,e).length)return!1;n=t.nextItem()}while(n!==i);return!0},lt.prototype.isClockwise_=function(t){const e=2*t.getLength(),i=new Array(e),n=t.firstItem();let r=n,o=0;do{i[o++]=r.p0.x,i[o++]=r.p0.y,r=t.nextItem()}while(r!==n);return Object(D.a)(i,0,e,2)},lt.prototype.splitPolygon_=function(t,e){const i=t.firstItem();let n=i;do{const i=this.getIntersections_(n,e);if(i.length){const r=i[0],o=this.vertices.length/2,s=this.calculateIntersection_(n.p0,n.p1,r.p0,r.p1),a=this.createPoint_(s[0],s[1],o),l=new st,u=new at.default;this.insertItem_(a,n.p1,l,u),n.p1=a,e.update([Math.min(n.p0.x,a.x),Math.min(n.p0.y,a.y),Math.max(n.p0.x,a.x),Math.max(n.p0.y,a.y)],n);let c=t.nextItem();for(;c!==r;)this.insertItem_(c.p0,c.p1,l,u),e.remove(c),t.removeItem(),c=t.getCurrItem();this.insertItem_(r.p0,a,l,u),r.p0=a,e.update([Math.min(r.p1.x,a.x),Math.min(r.p1.y,a.y),Math.max(r.p1.x,a.x),Math.max(r.p1.y,a.y)],r),this.classifyPoints_(t,e,!1),this.triangulate_(t,e),this.classifyPoints_(l,u,!1),this.triangulate_(l,u);break}n=t.nextItem()}while(n!==i)},lt.prototype.createPoint_=function(t,e,i){let n=this.vertices.length;return this.vertices[n++]=t,this.vertices[n++]=e,{x:t,y:e,i:i,reflex:void 0}},lt.prototype.insertItem_=function(t,e,i,n){const r={p0:t,p1:e};return i.insertItem(r),n&&n.insert([Math.min(t.x,e.x),Math.min(t.y,e.y),Math.max(t.x,e.x),Math.max(t.y,e.y)],r),r},lt.prototype.removeItem_=function(t,e,i,n){i.getCurrItem()===e&&(i.removeItem(),t.p1=e.p1,n.remove(e),n.update([Math.min(t.p0.x,t.p1.x),Math.min(t.p0.y,t.p1.y),Math.max(t.p0.x,t.p1.x),Math.max(t.p0.y,t.p1.y)],t))},lt.prototype.getPointsInTriangle_=function(t,e,i,n,r){const o=[],s=n.getInExtent([Math.min(t.x,e.x,i.x),Math.min(t.y,e.y,i.y),Math.max(t.x,e.x,i.x),Math.max(t.y,e.y,i.y)]);for(let n=0,a=s.length;n<a;++n)for(const a in s[n]){const l=s[n][a];"object"!=typeof l||r&&!l.reflex||l.x===t.x&&l.y===t.y||l.x===e.x&&l.y===e.y||l.x===i.x&&l.y===i.y||-1!==o.indexOf(l)||!Object(tt.b)([t.x,t.y,e.x,e.y,i.x,i.y],0,6,2,l.x,l.y)||o.push(l)}return o},lt.prototype.getIntersections_=function(t,e,i){const n=t.p0,r=t.p1,o=e.getInExtent([Math.min(n.x,r.x),Math.min(n.y,r.y),Math.max(n.x,r.x),Math.max(n.y,r.y)]),s=[];for(let e=0,a=o.length;e<a;++e){const a=o[e];t!==a&&(i||a.p0!==r||a.p1!==n)&&this.calculateIntersection_(n,r,a.p0,a.p1,i)&&s.push(a)}return s},lt.prototype.calculateIntersection_=function(t,e,i,n,r){const o=(n.y-i.y)*(e.x-t.x)-(n.x-i.x)*(e.y-t.y);if(0!==o){const s=((n.x-i.x)*(t.y-i.y)-(n.y-i.y)*(t.x-i.x))/o,a=((e.x-t.x)*(t.y-i.y)-(e.y-t.y)*(t.x-i.x))/o;if(!r&&s>T&&s<1-T&&a>T&&a<1-T||r&&s>=0&&s<=1&&a>=0&&a<=1)return[t.x+s*(e.x-t.x),t.y+s*(e.y-t.y)]}},lt.prototype.diagonalIsInside_=function(t,e,i,n,r){if(void 0===e.reflex||void 0===n.reflex)return!1;const o=(i.x-n.x)*(e.y-n.y)>(i.y-n.y)*(e.x-n.x),s=(r.x-n.x)*(e.y-n.y)<(r.y-n.y)*(e.x-n.x),a=(t.x-e.x)*(n.y-e.y)>(t.y-e.y)*(n.x-e.x),l=(i.x-e.x)*(n.y-e.y)<(i.y-e.y)*(n.x-e.x),u=n.reflex?s||o:s&&o,c=e.reflex?l||a:l&&a;return u&&c},lt.prototype.drawMultiPolygon=function(t,e){const i=t.getEndss(),n=t.getStride(),r=this.indices.length,o=this.lineStringReplay.getCurrentIndex(),s=t.getFlatCoordinates();let a,l,u,h,d=0;for(a=0,l=i.length;a<l;++a){const t=i[a];if(t.length>0){const e=Object(c.d)(s,d,t[0],n,-this.origin[0],-this.origin[1]);if(e.length){const i=[];let r;for(u=1,h=t.length;u<h;++u)t[u]!==t[u-1]&&(r=Object(c.d)(s,t[u-1],t[u],n,-this.origin[0],-this.origin[1]),i.push(r));this.lineStringReplay.drawPolygonCoordinates(e,i,n),this.drawCoordinates_(e,i,n)}}d=t[t.length-1]}this.indices.length>r&&(this.startIndices.push(r),this.startIndicesFeature.push(e),this.state_.changed&&(this.styleIndices_.push(r),this.state_.changed=!1)),this.lineStringReplay.getCurrentIndex()>o&&this.lineStringReplay.setPolygonStyle(e,o)},lt.prototype.drawPolygon=function(t,e){const i=t.getEnds(),n=t.getStride();if(i.length>0){const r=t.getFlatCoordinates().map(Number),o=Object(c.d)(r,0,i[0],n,-this.origin[0],-this.origin[1]);if(o.length){const t=[];let s,a,l;for(s=1,a=i.length;s<a;++s)i[s]!==i[s-1]&&(l=Object(c.d)(r,i[s-1],i[s],n,-this.origin[0],-this.origin[1]),t.push(l));this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e),this.state_.changed&&(this.styleIndices_.push(this.indices.length),this.state_.changed=!1),this.lineStringReplay.setPolygonStyle(e),this.lineStringReplay.drawPolygonCoordinates(o,t,n),this.drawCoordinates_(o,t,n)}}},lt.prototype.finish=function(t){this.verticesBuffer=new P.a(this.vertices),this.indicesBuffer=new P.a(this.indices),this.startIndices.push(this.indices.length),this.lineStringReplay.finish(t),0===this.styleIndices_.length&&this.styles_.length>0&&(this.styles_=[]),this.vertices=null,this.indices=null},lt.prototype.getDeleteResourcesFunction=function(t){const e=this.verticesBuffer,i=this.indicesBuffer,n=this.lineStringReplay.getDeleteResourcesFunction(t);return function(){t.deleteBuffer(e),t.deleteBuffer(i),n()}},lt.prototype.setUpProgram=function(t,e,i,n){const r=e.getProgram(et,it);let o;return this.defaultLocations_?o=this.defaultLocations_:(o=new nt(t,r),this.defaultLocations_=o),e.useProgram(r),t.enableVertexAttribArray(o.a_position),t.vertexAttribPointer(o.a_position,2,h.l,!1,8,0),o},lt.prototype.shutDownProgram=function(t,e){t.disableVertexAttribArray(e.a_position)},lt.prototype.drawReplay=function(t,e,i,n){const r=t.getParameter(t.DEPTH_FUNC),o=t.getParameter(t.DEPTH_WRITEMASK);if(n||(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.NOTEQUAL)),Object(s.isEmpty)(i)){let i,n,r,o;for(r=this.startIndices[this.startIndices.length-1],i=this.styleIndices_.length-1;i>=0;--i)n=this.styleIndices_[i],o=this.styles_[i],this.setFillStyle_(t,o),this.drawElements(t,e,n,r),r=n}else this.drawReplaySkipping_(t,e,i);n||(t.disable(t.DEPTH_TEST),t.clear(t.DEPTH_BUFFER_BIT),t.depthMask(o),t.depthFunc(r))},lt.prototype.drawHitDetectionReplayOneByOne=function(t,e,i,r,s){let a,l,u,c,h,d,f,p;for(p=this.startIndices.length-2,u=this.startIndices[p+1],a=this.styleIndices_.length-1;a>=0;--a)for(c=this.styles_[a],this.setFillStyle_(t,c),h=this.styleIndices_[a];p>=0&&this.startIndices[p]>=h;){if(l=this.startIndices[p],d=this.startIndicesFeature[p],void 0===i[f=Object(n.getUid)(d).toString()]&&d.getGeometry()&&(void 0===s||Object(o.intersects)(s,d.getGeometry().getExtent()))){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawElements(t,e,l,u);const i=r(d);if(i)return i}p--,u=l}},lt.prototype.drawReplaySkipping_=function(t,e,i){let r,o,s,a,l,u,c,h,d;for(h=this.startIndices.length-2,s=o=this.startIndices[h+1],r=this.styleIndices_.length-1;r>=0;--r){for(a=this.styles_[r],this.setFillStyle_(t,a),l=this.styleIndices_[r];h>=0&&this.startIndices[h]>=l;)d=this.startIndices[h],u=this.startIndicesFeature[h],i[c=Object(n.getUid)(u).toString()]&&(o!==s&&(this.drawElements(t,e,o,s),t.clear(t.DEPTH_BUFFER_BIT)),s=d),h--,o=d;o!==s&&(this.drawElements(t,e,o,s),t.clear(t.DEPTH_BUFFER_BIT)),o=s=l}},lt.prototype.setFillStyle_=function(t,e){t.uniform4fv(this.defaultLocations_.u_color,e)},lt.prototype.setFillStrokeStyle=function(t,e){let i=t?t.getColor():[0,0,0,0];if(i=i instanceof CanvasGradient||i instanceof CanvasPattern?O:Object(u.asArray)(i).map(function(t,e){return 3!=e?t/255:t})||O,this.state_.fillColor&&Object(r.b)(i,this.state_.fillColor)||(this.state_.fillColor=i,this.state_.changed=!0,this.styles_.push(i)),e)this.lineStringReplay.setFillStrokeStyle(null,e);else{const t=new rt.default({color:[0,0,0,0],lineWidth:0});this.lineStringReplay.setFillStrokeStyle(null,t)}};var ut=lt,ct=i(84),ht=i(26),dt=i(5),ft=i(47),pt=i(362);const gt=function(t,e){F.call(this,t,e),this.images_=[],this.textures_=[],this.measureCanvas_=Object(ht.a)(0,0).canvas,this.state_={strokeColor:null,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:0,miterLimit:void 0,fillColor:null,font:void 0,scale:void 0},this.text_="",this.textAlign_=void 0,this.textBaseline_=void 0,this.offsetX_=void 0,this.offsetY_=void 0,this.atlases_={},this.currAtlas_=void 0,this.scale=1,this.opacity=1};Object(n.inherits)(gt,F),gt.prototype.drawText=function(t,e){if(this.text_){let i=null;const r=0;let o=2,s=2;switch(t.getType()){case dt.default.POINT:case dt.default.MULTI_POINT:o=(i=t.getFlatCoordinates()).length,s=t.getStride();break;case dt.default.CIRCLE:i=t.getCenter();break;case dt.default.LINE_STRING:i=t.getFlatMidpoint();break;case dt.default.MULTI_LINE_STRING:o=(i=t.getFlatMidpoints()).length;break;case dt.default.POLYGON:i=t.getFlatInteriorPoint();break;case dt.default.MULTI_POLYGON:o=(i=t.getFlatInteriorPoints()).length}this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e);const a=this.currAtlas_,l=this.text_.split("\n"),u=this.getTextSize_(l);let c,h,d,f,p,g,y,m;const _=Math.round(u[0]*this.textAlign_-this.offsetX_),v=Math.round(u[1]*this.textBaseline_-this.offsetY_),b=this.state_.lineWidth/2*this.state_.scale;for(c=0,h=l.length;c<h;++c)for(p=0,g=a.height*c,y=l[c].split(""),d=0,f=y.length;d<f;++d){if(m=a.atlas.getInfo(y[d])){const t=m.image;if(this.anchorX=_-p,this.anchorY=v-g,this.originX=0===d?m.offsetX-b:m.offsetX,this.originY=m.offsetY,this.height=a.height,this.width=0===d||d===y.length-1?a.width[y[d]]+b:a.width[y[d]],this.imageHeight=t.height,this.imageWidth=t.width,0===this.images_.length)this.images_.push(t);else{const e=this.images_[this.images_.length-1];Object(n.getUid)(e)!=Object(n.getUid)(t)&&(this.groupIndices.push(this.indices.length),this.images_.push(t))}this.drawText_(i,r,o,s)}p+=this.width}}},gt.prototype.getTextSize_=function(t){const e=this,i=this.currAtlas_,n=t.length*i.height;return[t.map(function(t){let n=0;for(let r=0,o=t.length;r<o;++r){const o=t[r];i.width[o]||e.addCharToAtlas_(o),n+=i.width[o]?i.width[o]:0}return n}).reduce(function(t,e){return Math.max(t,e)}),n]},gt.prototype.drawText_=function(t,e,i,n){for(let r=e,o=i;r<o;r+=n)this.drawCoordinates(t,e,i,n)},gt.prototype.addCharToAtlas_=function(t){if(1===t.length){const e=this.currAtlas_,i=this.state_,n=this.measureCanvas_.getContext("2d");n.font=i.font;const r=Math.ceil(n.measureText(t).width*i.scale);e.atlas.add(t,r,e.height,function(e,n,r){e.font=i.font,e.fillStyle=i.fillColor,e.strokeStyle=i.strokeColor,e.lineWidth=i.lineWidth,e.lineCap=i.lineCap,e.lineJoin=i.lineJoin,e.miterLimit=i.miterLimit,e.textAlign="left",e.textBaseline="top",ft.CANVAS_LINE_DASH&&i.lineDash&&(e.setLineDash(i.lineDash),e.lineDashOffset=i.lineDashOffset),1!==i.scale&&e.setTransform(i.scale,0,0,i.scale,0,0),i.strokeColor&&e.strokeText(t,n,r),i.fillColor&&e.fillText(t,n,r)})&&(e.width[t]=r)}},gt.prototype.finish=function(t){const e=t.getGL();this.groupIndices.push(this.indices.length),this.hitDetectionGroupIndices=this.groupIndices,this.verticesBuffer=new P.a(this.vertices),this.indicesBuffer=new P.a(this.indices);this.createTextures(this.textures_,this.images_,{},e),this.state_={strokeColor:null,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:0,miterLimit:void 0,fillColor:null,font:void 0,scale:void 0},this.text_="",this.textAlign_=void 0,this.textBaseline_=void 0,this.offsetX_=void 0,this.offsetY_=void 0,this.images_=null,this.atlases_={},this.currAtlas_=void 0,F.prototype.finish.call(this,t)},gt.prototype.setTextStyle=function(t){const e=this.state_,i=t.getFill(),n=t.getStroke();if(t&&t.getText()&&(i||n)){if(i){const t=i.getColor();e.fillColor=Object(ct.asColorLike)(t||O)}else e.fillColor=null;if(n){const t=n.getColor();e.strokeColor=Object(ct.asColorLike)(t||x),e.lineWidth=n.getWidth()||1,e.lineCap=n.getLineCap()||"round",e.lineDashOffset=n.getLineDashOffset()||0,e.lineJoin=n.getLineJoin()||"round",e.miterLimit=n.getMiterLimit()||10;const i=n.getLineDash();e.lineDash=i?i.slice():C}else e.strokeColor=null,e.lineWidth=0;e.font=t.getFont()||"10px sans-serif",e.scale=t.getScale()||1,this.text_=t.getText();const r=a.b[t.getTextAlign()],o=a.b[t.getTextBaseline()];this.textAlign_=void 0===r?.5:r,this.textBaseline_=void 0===o?.5:o,this.offsetX_=t.getOffsetX()||0,this.offsetY_=t.getOffsetY()||0,this.rotateWithView=!!t.getRotateWithView(),this.rotation=t.getRotation()||0,this.currAtlas_=this.getAtlas_(e)}else this.text_=""},gt.prototype.getAtlas_=function(t){let e=[];for(const i in t)(t[i]||0===t[i])&&(Array.isArray(t[i])?e=e.concat(t[i]):e.push(t[i]));const i=this.calculateHash_(e);if(!this.atlases_[i]){const e=this.measureCanvas_.getContext("2d");e.font=t.font;const n=Math.ceil((1.5*e.measureText("M").width+t.lineWidth/2)*t.scale);this.atlases_[i]={atlas:new pt.default({space:t.lineWidth+1}),width:{},height:n}}return this.atlases_[i]},gt.prototype.calculateHash_=function(t){let e="";for(let i=0,n=t.length;i<n;++i)e+=t[i];return e},gt.prototype.getTextures=function(t){return this.textures_},gt.prototype.getHitDetectionTextures=function(){return this.textures_};const yt=[1,1],mt={Circle:w,Image:N,LineString:$,Polygon:ut,Text:gt},_t=function(t,e,i){l.a.call(this),this.maxExtent_=e,this.tolerance_=t,this.renderBuffer_=i,this.replaysByZIndex_={}};Object(n.inherits)(_t,l.a),_t.prototype.addDeclutter=function(t,e){},_t.prototype.getDeleteResourcesFunction=function(t){const e=[];let i;for(i in this.replaysByZIndex_){const n=this.replaysByZIndex_[i];for(const i in n)e.push(n[i].getDeleteResourcesFunction(t))}return function(){const t=e.length;let i;for(let n=0;n<t;n++)i=e[n].apply(this,arguments);return i}},_t.prototype.finish=function(t){let e;for(e in this.replaysByZIndex_){const i=this.replaysByZIndex_[e];for(const e in i)i[e].finish(t)}},_t.prototype.getReplay=function(t,e){const i=void 0!==t?t.toString():"0";let n=this.replaysByZIndex_[i];void 0===n&&(n={},this.replaysByZIndex_[i]=n);let r=n[e];if(void 0===r){r=new(0,mt[e])(this.tolerance_,this.maxExtent_),n[e]=r}return r},_t.prototype.isEmpty=function(){return Object(s.isEmpty)(this.replaysByZIndex_)},_t.prototype.replay=function(t,e,i,n,o,s,l,u){const c=Object.keys(this.replaysByZIndex_).map(Number);let h,d,f,p,g,y;for(c.sort(r.i),h=0,d=c.length;h<d;++h)for(g=this.replaysByZIndex_[c[h].toString()],f=0,p=a.a.length;f<p;++f)void 0!==(y=g[a.a[f]])&&y.replay(t,e,i,n,o,s,l,u,void 0,!1)},_t.prototype.replayHitDetection_=function(t,e,i,n,r,o,s,l,u,c,h){const d=Object.keys(this.replaysByZIndex_).map(Number);let f,p,g,y,m,_;for(d.sort(function(t,e){return e-t}),f=0,p=d.length;f<p;++f)for(y=this.replaysByZIndex_[d[f].toString()],g=a.a.length-1;g>=0;--g)if(void 0!==(m=y[a.a[g]])&&(_=m.replay(t,e,i,n,r,o,s,l,u,c,h)))return _},_t.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,r,s,a,l,u,c){const h=e.getGL();let d;return h.bindFramebuffer(h.FRAMEBUFFER,e.getHitDetectionFramebuffer()),void 0!==this.renderBuffer_&&(d=Object(o.buffer)(Object(o.createOrUpdateFromCoordinate)(t),n*this.renderBuffer_)),this.replayHitDetection_(e,t,n,r,yt,a,l,u,function(t){const e=new Uint8Array(4);if(h.readPixels(0,0,1,1,h.RGBA,h.UNSIGNED_BYTE,e),e[3]>0){const e=c(t);if(e)return e}},!0,d)},_t.prototype.hasFeatureAtCoordinate=function(t,e,i,n,r,o,s,a,l){const u=e.getGL();return u.bindFramebuffer(u.FRAMEBUFFER,e.getHitDetectionFramebuffer()),void 0!==this.replayHitDetection_(e,t,n,r,yt,s,a,l,function(t){const e=new Uint8Array(4);return u.readPixels(0,0,1,1,u.RGBA,u.UNSIGNED_BYTE,e),e[3]>0},!1)};e.a=_t},function(t,e,i){var n=i(165);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShapeParameters=void 0;var n=s(i(8)),r=s(i(20)),o=i(6);function s(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(){(0,n.default)(this,t),this.refOriginalPosition=[0,0],this.refDataID=null,this.isHoverByRefDataID=!1,this.refDataHoverGroup=null,this.dataInfo=null,this.clickable=!0,this.hoverable=!0,this.style=null,this.highlightStyle={},this.CLASS_NAME="Zondy.Feature.ShapeParameters"}return(0,r.default)(t,[{key:"destroy",value:function(){this.refOriginalPosition=null,this.refDataID=null,this.isHoverByRefDataID=null,this.refDataHoverGroup=null,this.dataInfo=null,this.clickable=null,this.hoverable=null,this.style=null,this.highlightStyle=null}}]),t}();e.ShapeParameters=a,o.Zondy.Feature.ShapeParameters=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ServiceBase=void 0;var n=a(i(8)),r=a(i(20)),o=i(6),s=i(21);function a(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(e){(0,n.default)(this,t),(0,s.extend)(this,e),this.baseUrl=e&&e.baseUrl?e.baseUrl:null,this.ip=e&&e.ip?e.ip:"localhost",this.port=e&&e.port?e.port:"6163",this.partUrl=e&&e.partUrl?e.partUrl:null}return(0,r.default)(t,[{key:"getFullUrl",value:function(){var t=this,e=null;if(o.Zondy.Util.isArray(t.ip))for(var i=0;i<t.ip.length;i++){e=new Array;var n=null;n=(0,s.isArray)(t.port)?void 0!==t.port[i]?t.port[i]:"6163":void 0!==t.port?t.port:"6163";var r=null;r=(0,s.isArray)(t.partUrl)?void 0!==t.partUrl[i]?t.partUrl[i]:null:void 0!==t.partUrl?t.partUrl:null,e.push(encodeURI(("http://"+t.ip[i]+":"+n+"/"+t.baseUrl+"/"+r).trim()))}else e=encodeURI(("http://"+t.ip+":"+t.port+"/"+t.baseUrl+"/"+t.partUrl).trim());return e}}]),t}();e.ServiceBase=l,o.Zondy.Service.ServiceBase=l},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(54),o=i(60);const s=function(t){const e=t||{};o.default.call(this,e),this.type=r.a.IMAGE};Object(n.inherits)(s,o.default),s.prototype.getSource,e.default=s},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(54),o=i(60),s=i(143),a=i(11);const l=function(t){const e=t||{},i=Object(a.assign)({},e);delete i.preload,delete i.useInterimTilesOnError,o.default.call(this,i),this.setPreload(void 0!==e.preload?e.preload:0),this.setUseInterimTilesOnError(void 0===e.useInterimTilesOnError||e.useInterimTilesOnError),this.type=r.a.TILE};Object(n.inherits)(l,o.default),l.prototype.getPreload=function(){return this.get(s.a.PRELOAD)},l.prototype.getSource,l.prototype.setPreload=function(t){this.set(s.a.PRELOAD,t)},l.prototype.getUseInterimTilesOnError=function(){return this.get(s.a.USE_INTERIM_TILES_ON_ERROR)},l.prototype.setUseInterimTilesOnError=function(t){this.set(s.a.USE_INTERIM_TILES_ON_ERROR,t)},e.default=l},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(56),o=i(15),s=i(26),a=i(4),l=i(10);const u=function(t,e,i,n,o,s){r.default.call(this,t,e,s),this.crossOrigin_=n,this.src_=i,this.image_=new Image,null!==n&&(this.image_.crossOrigin=n),this.imageListenerKeys_=null,this.tileLoadFunction_=o};function c(){const t=Object(s.a)(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}Object(n.inherits)(u,r.default),u.prototype.disposeInternal=function(){this.state==o.a.LOADING&&(this.unlistenImage_(),this.image_=c()),this.interimTile&&this.interimTile.dispose(),this.state=o.a.ABORT,this.changed(),r.default.prototype.disposeInternal.call(this)},u.prototype.getImage=function(){return this.image_},u.prototype.getKey=function(){return this.src_},u.prototype.handleImageError_=function(){this.state=o.a.ERROR,this.unlistenImage_(),this.image_=c(),this.changed()},u.prototype.handleImageLoad_=function(){this.image_.naturalWidth&&this.image_.naturalHeight?this.state=o.a.LOADED:this.state=o.a.EMPTY,this.unlistenImage_(),this.changed()},u.prototype.load=function(){this.state==o.a.ERROR&&(this.state=o.a.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==o.a.IDLE&&(this.state=o.a.LOADING,this.changed(),this.imageListenerKeys_=[Object(a.listenOnce)(this.image_,l.default.ERROR,this.handleImageError_,this),Object(a.listenOnce)(this.image_,l.default.LOAD,this.handleImageLoad_,this)],this.tileLoadFunction_(this,this.src_))},u.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(a.unlistenByKey),this.imageListenerKeys_=null},e.default=u},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(42),o=i(52),s=i(170),a=i(265),l=i(32),u=i(132),c=i(138),h=i(89),d=i(25),f=i(121),p=i(202),g=i(200),y=i(34),m=i(23),_=i(26),v=i(4),b=i(29),S=i(10),O=i(2),C=i(24),x=i(47),T=i(272),E=i(49),P=i(157),j=i(14);const w=function(t){d.default.call(this);const e=function(t){let e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);const i={},n=t.layers instanceof T.default?t.layers:new T.default({layers:t.layers});let o,s,a;i[h.a.LAYERGROUP]=n,i[h.a.TARGET]=t.target,i[h.a.VIEW]=void 0!==t.view?t.view:new g.default,void 0!==t.controls&&(Array.isArray(t.controls)?o=new r.default(t.controls.slice()):(Object(m.a)(t.controls instanceof r.default,47),o=t.controls));void 0!==t.interactions&&(Array.isArray(t.interactions)?s=new r.default(t.interactions.slice()):(Object(m.a)(t.interactions instanceof r.default,48),s=t.interactions));void 0!==t.overlays?Array.isArray(t.overlays)?a=new r.default(t.overlays.slice()):(Object(m.a)(t.overlays instanceof r.default,49),a=t.overlays):a=new r.default;return{controls:o,interactions:s,keyboardEventTarget:e,overlays:a,values:i}}(t);this.maxTilesLoading_=void 0!==t.maxTilesLoading?t.maxTilesLoading:16,this.loadTilesWhileAnimating_=void 0!==t.loadTilesWhileAnimating&&t.loadTilesWhileAnimating,this.loadTilesWhileInteracting_=void 0!==t.loadTilesWhileInteracting&&t.loadTilesWhileInteracting,this.pixelRatio_=void 0!==t.pixelRatio?t.pixelRatio:x.DEVICE_PIXEL_RATIO,this.animationDelayKey_,this.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_.call(this,Date.now())}.bind(this),this.coordinateToPixelTransform_=Object(j.c)(),this.pixelToCoordinateTransform_=Object(j.c)(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("DIV"),this.viewport_.className="ol-viewport"+(x.TOUCH?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.viewport_.style.msTouchAction="none",this.viewport_.style.touchAction="none",this.overlayContainer_=document.createElement("DIV"),this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("DIV"),this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent";const i=[S.default.CLICK,S.default.DBLCLICK,S.default.MOUSEDOWN,S.default.TOUCHSTART,S.default.MSPOINTERDOWN,l.default.POINTERDOWN,S.default.MOUSEWHEEL,S.default.WHEEL];for(let t=0,e=i.length;t<e;++t)Object(v.listen)(this.overlayContainerStopEvent_,i[t],b.stopPropagation);this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=new a.a(this,t.moveTolerance);for(const t in l.default)Object(v.listen)(this.mapBrowserEventHandler_,l.default[t],this.handleMapBrowserEvent,this);this.keyboardEventTarget_=e.keyboardEventTarget,this.keyHandlerKeys_=null,Object(v.listen)(this.viewport_,S.default.CONTEXTMENU,this.handleBrowserEvent,this),Object(v.listen)(this.viewport_,S.default.WHEEL,this.handleBrowserEvent,this),Object(v.listen)(this.viewport_,S.default.MOUSEWHEEL,this.handleBrowserEvent,this),this.controls=e.controls||new r.default,this.interactions=e.interactions||new r.default,this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=this.createRenderer(),this.handleResize_,this.focus_=null,this.postRenderFunctions_=[],this.tileQueue_=new p.a(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.skippedFeatureUids_={},Object(v.listen)(this,Object(d.getChangeEventType)(h.a.LAYERGROUP),this.handleLayerGroupChanged_,this),Object(v.listen)(this,Object(d.getChangeEventType)(h.a.VIEW),this.handleViewChanged_,this),Object(v.listen)(this,Object(d.getChangeEventType)(h.a.SIZE),this.handleSizeChanged_,this),Object(v.listen)(this,Object(d.getChangeEventType)(h.a.TARGET),this.handleTargetChanged_,this),this.setProperties(e.values),this.controls.forEach(function(t){t.setMap(this)}.bind(this)),Object(v.listen)(this.controls,o.default.ADD,function(t){t.element.setMap(this)},this),Object(v.listen)(this.controls,o.default.REMOVE,function(t){t.element.setMap(null)},this),this.interactions.forEach(function(t){t.setMap(this)}.bind(this)),Object(v.listen)(this.interactions,o.default.ADD,function(t){t.element.setMap(this)},this),Object(v.listen)(this.interactions,o.default.REMOVE,function(t){t.element.setMap(null)},this),this.overlays_.forEach(this.addOverlayInternal_.bind(this)),Object(v.listen)(this.overlays_,o.default.ADD,function(t){this.addOverlayInternal_(t.element)},this),Object(v.listen)(this.overlays_,o.default.REMOVE,function(t){const e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)},this)};Object(n.inherits)(w,d.default),w.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},w.prototype.addControl=function(t){this.getControls().push(t)},w.prototype.addInteraction=function(t){this.getInteractions().push(t)},w.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},w.prototype.addOverlay=function(t){this.getOverlays().push(t)},w.prototype.addOverlayInternal_=function(t){const e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)},w.prototype.disposeInternal=function(){this.mapBrowserEventHandler_.dispose(),Object(v.unlisten)(this.viewport_,S.default.CONTEXTMENU,this.handleBrowserEvent,this),Object(v.unlisten)(this.viewport_,S.default.WHEEL,this.handleBrowserEvent,this),Object(v.unlisten)(this.viewport_,S.default.MOUSEWHEEL,this.handleBrowserEvent,this),void 0!==this.handleResize_&&(removeEventListener(S.default.RESIZE,this.handleResize_,!1),this.handleResize_=void 0),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0),this.setTarget(null),d.default.prototype.disposeInternal.call(this)},w.prototype.forEachFeatureAtPixel=function(t,e,i){if(!this.frameState_)return;const n=this.getCoordinateFromPixel(t),r=void 0!==(i=void 0!==i?i:{}).hitTolerance?i.hitTolerance*this.frameState_.pixelRatio:0,o=void 0!==i.layerFilter?i.layerFilter:C.b;return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,r,e,null,o,null)},w.prototype.getFeaturesAtPixel=function(t,e){let i=null;return this.forEachFeatureAtPixel(t,function(t){i||(i=[]),i.push(t)},e),i},w.prototype.forEachLayerAtPixel=function(t,e,i){if(!this.frameState_)return;const n=i||{},r=void 0!==n.hitTolerance?i.hitTolerance*this.frameState_.pixelRatio:0,o=n.layerFilter||C.b;return this.renderer_.forEachLayerAtPixel(t,this.frameState_,r,e,null,o,null)},w.prototype.hasFeatureAtPixel=function(t,e){if(!this.frameState_)return!1;const i=this.getCoordinateFromPixel(t),n=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:C.b,r=void 0!==e.hitTolerance?e.hitTolerance*this.frameState_.pixelRatio:0;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,r,n,null)},w.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},w.prototype.getEventPixel=function(t){const e=this.viewport_.getBoundingClientRect(),i=t.changedTouches?t.changedTouches[0]:t;return[i.clientX-e.left,i.clientY-e.top]},w.prototype.getTarget=function(){return this.get(h.a.TARGET)},w.prototype.getTargetElement=function(){const t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},w.prototype.getCoordinateFromPixel=function(t){const e=this.frameState_;return e?Object(j.a)(e.pixelToCoordinateTransform,t.slice()):null},w.prototype.getControls=function(){return this.controls},w.prototype.getOverlays=function(){return this.overlays_},w.prototype.getOverlayById=function(t){const e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null},w.prototype.getInteractions=function(){return this.interactions},w.prototype.getLayerGroup=function(){return this.get(h.a.LAYERGROUP)},w.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},w.prototype.getPixelFromCoordinate=function(t){const e=this.frameState_;return e?Object(j.a)(e.coordinateToPixelTransform,t.slice(0,2)):null},w.prototype.getRenderer=function(){return this.renderer_},w.prototype.getSize=function(){return this.get(h.a.SIZE)},w.prototype.getView=function(){return this.get(h.a.VIEW)},w.prototype.getViewport=function(){return this.viewport_},w.prototype.getOverlayContainer=function(){return this.overlayContainer_},w.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},w.prototype.getTilePriority=function(t,e,i,n){const r=this.frameState_;if(!(r&&e in r.wantedTiles))return P.a;if(!r.wantedTiles[e][t.getKey()])return P.a;const o=i[0]-r.focus[0],s=i[1]-r.focus[1];return 65536*Math.log(n)+Math.sqrt(o*o+s*s)/n},w.prototype.handleBrowserEvent=function(t,e){const i=e||t.type,n=new s.default(i,this,t);this.handleMapBrowserEvent(n)},w.prototype.handleMapBrowserEvent=function(t){if(!this.frameState_)return;this.focus_=t.coordinate,t.frameState=this.frameState_;const e=this.getInteractions().getArray();if(!1!==this.dispatchEvent(t))for(let i=e.length-1;i>=0;i--){const n=e[i];if(n.getActive()&&!n.handleEvent(t))break}},w.prototype.handlePostRender=function(){const t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){let i=this.maxTilesLoading_,n=i;if(t){const e=t.viewHints;e[y.default.ANIMATING]&&(i=this.loadTilesWhileAnimating_?8:0,n=2),e[y.default.INTERACTING]&&(i=this.loadTilesWhileInteracting_?8:0,n=2)}e.getTilesLoading()<i&&(e.reprioritize(),e.loadMoreTiles(i,n))}const i=this.postRenderFunctions_;for(let e=0,n=i.length;e<n;++e)i[e](this,t);i.length=0},w.prototype.handleSizeChanged_=function(){this.render()},w.prototype.handleTargetChanged_=function(){let t;if(this.getTarget()&&(t=this.getTargetElement()),this.keyHandlerKeys_){for(let t=0,e=this.keyHandlerKeys_.length;t<e;++t)Object(v.unlistenByKey)(this.keyHandlerKeys_[t]);this.keyHandlerKeys_=null}if(t){t.appendChild(this.viewport_);const e=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.keyHandlerKeys_=[Object(v.listen)(e,S.default.KEYDOWN,this.handleBrowserEvent,this),Object(v.listen)(e,S.default.KEYPRESS,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),addEventListener(S.default.RESIZE,this.handleResize_,!1))}else this.renderer_.removeLayerRenderers(),Object(_.e)(this.viewport_),void 0!==this.handleResize_&&(removeEventListener(S.default.RESIZE,this.handleResize_,!1),this.handleResize_=void 0);this.updateSize()},w.prototype.handleTileChange_=function(){this.render()},w.prototype.handleViewPropertyChanged_=function(){this.render()},w.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(Object(v.unlistenByKey)(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Object(v.unlistenByKey)(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.viewport_.setAttribute("data-view",Object(n.getUid)(t)),this.viewPropertyListenerKey_=Object(v.listen)(t,f.a.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Object(v.listen)(t,S.default.CHANGE,this.handleViewPropertyChanged_,this)),this.render()},w.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(v.unlistenByKey),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.layerGroupPropertyListenerKeys_=[Object(v.listen)(t,f.a.PROPERTYCHANGE,this.render,this),Object(v.listen)(t,S.default.CHANGE,this.render,this)]),this.render()},w.prototype.isRendered=function(){return!!this.frameState_},w.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},w.prototype.render=function(){void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},w.prototype.removeControl=function(t){return this.getControls().remove(t)},w.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},w.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},w.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},w.prototype.renderFrame_=function(t){let e;const i=this.getSize(),r=this.getView(),o=Object(O.createEmpty)(),s=this.frameState_;let a=null;if(void 0!==i&&Object(E.hasArea)(i)&&r&&r.isDef()){const s=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),l=this.getLayerGroup().getLayerStatesArray(),u={};for(let t=0,e=l.length;t<e;++t)u[Object(n.getUid)(l[t].layer)]=l[t];e=r.getState();let c=this.focus_;if(!c){c=e.center;const t=e.resolution/this.pixelRatio_;c[0]=Math.round(c[0]/t)*t,c[1]=Math.round(c[1]/t)*t}a={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,extent:o,focus:c,index:this.frameIndex_++,layerStates:u,layerStatesArray:l,pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:i,skippedFeatureUids:this.skippedFeatureUids_,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:e,viewHints:s,wantedTiles:{}}}if(a&&(a.extent=Object(O.getForViewAndSize)(e.center,e.resolution,e.rotation,a.size,o)),this.frameState_=a,this.renderer_.renderFrame(a),a){if(a.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,a.postRenderFunctions),s){(!this.previousExtent_||!Object(O.isEmpty)(this.previousExtent_)&&!Object(O.equals)(a.extent,this.previousExtent_))&&(this.dispatchEvent(new u.a(c.a.MOVESTART,this,s)),this.previousExtent_=Object(O.createOrUpdateEmpty)(this.previousExtent_))}this.previousExtent_&&!a.viewHints[y.default.ANIMATING]&&!a.viewHints[y.default.INTERACTING]&&!Object(O.equals)(a.extent,this.previousExtent_)&&(this.dispatchEvent(new u.a(c.a.MOVEEND,this,a)),Object(O.clone)(a.extent,this.previousExtent_))}this.dispatchEvent(new u.a(c.a.POSTRENDER,this,a)),setTimeout(this.handlePostRender.bind(this),0)},w.prototype.setLayerGroup=function(t){this.set(h.a.LAYERGROUP,t)},w.prototype.setSize=function(t){this.set(h.a.SIZE,t)},w.prototype.setTarget=function(t){this.set(h.a.TARGET,t)},w.prototype.setView=function(t){this.set(h.a.VIEW,t)},w.prototype.skipFeature=function(t){const e=Object(n.getUid)(t).toString();this.skippedFeatureUids_[e]=!0,this.render()},w.prototype.updateSize=function(){const t=this.getTargetElement();if(t){const e=getComputedStyle(t);this.setSize([t.offsetWidth-parseFloat(e.borderLeftWidth)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderRightWidth),t.offsetHeight-parseFloat(e.borderTopWidth)-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom)-parseFloat(e.borderBottomWidth)])}else this.setSize(void 0)},w.prototype.unskipFeature=function(t){const e=Object(n.getUid)(t).toString();delete this.skippedFeatureUids_[e],this.render()},e.default=w},function(t,e,i){"use strict";i.r(e),i.d(e,"createEmptyTexture",function(){return d}),i.d(e,"createTexture",function(){return f});var n=i(1),r=i(7),o=i(117),s=i(12),a=i(4),l=i(11),u=i(214);const c=function(t,e){this.canvas_=t,this.gl_=e,this.bufferCache_={},this.shaderCache_={},this.programCache_={},this.currentProgram_=null,this.hitDetectionFramebuffer_=null,this.hitDetectionTexture_=null,this.hitDetectionRenderbuffer_=null,this.hasOESElementIndexUint=Object(s.f)(r.k,"OES_element_index_uint"),this.hasOESElementIndexUint&&e.getExtension("OES_element_index_uint"),Object(a.listen)(this.canvas_,u.a.LOST,this.handleWebGLContextLost,this),Object(a.listen)(this.canvas_,u.a.RESTORED,this.handleWebGLContextRestored,this)};function h(t,e,i){const n=t.createTexture();return t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),void 0!==e&&t.texParameteri(r.A,r.D,e),void 0!==i&&t.texParameteri(r.A,r.E,i),n}function d(t,e,i,n,r){const o=h(t,n,r);return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,i,0,t.RGBA,t.UNSIGNED_BYTE,null),o}function f(t,e,i,n){const r=h(t,i,n);return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),r}Object(n.inherits)(c,o.a),c.prototype.bindBuffer=function(t,e){const i=this.getGL(),o=e.getArray(),s=String(Object(n.getUid)(e));if(s in this.bufferCache_){const e=this.bufferCache_[s];i.bindBuffer(t,e.buffer)}else{const n=i.createBuffer();let a;i.bindBuffer(t,n),t==r.a?a=new Float32Array(o):t==r.j&&(a=this.hasOESElementIndexUint?new Uint32Array(o):new Uint16Array(o)),i.bufferData(t,a,e.getUsage()),this.bufferCache_[s]={buf:e,buffer:n}}},c.prototype.deleteBuffer=function(t){const e=this.getGL(),i=String(Object(n.getUid)(t)),r=this.bufferCache_[i];e.isContextLost()||e.deleteBuffer(r.buffer),delete this.bufferCache_[i]},c.prototype.disposeInternal=function(){Object(a.unlistenAll)(this.canvas_);const t=this.getGL();if(!t.isContextLost()){for(const e in this.bufferCache_)t.deleteBuffer(this.bufferCache_[e].buffer);for(const e in this.programCache_)t.deleteProgram(this.programCache_[e]);for(const e in this.shaderCache_)t.deleteShader(this.shaderCache_[e]);t.deleteFramebuffer(this.hitDetectionFramebuffer_),t.deleteRenderbuffer(this.hitDetectionRenderbuffer_),t.deleteTexture(this.hitDetectionTexture_)}},c.prototype.getCanvas=function(){return this.canvas_},c.prototype.getGL=function(){return this.gl_},c.prototype.getHitDetectionFramebuffer=function(){return this.hitDetectionFramebuffer_||this.initHitDetectionFramebuffer_(),this.hitDetectionFramebuffer_},c.prototype.getShader=function(t){const e=String(Object(n.getUid)(t));if(e in this.shaderCache_)return this.shaderCache_[e];{const i=this.getGL(),n=i.createShader(t.getType());return i.shaderSource(n,t.getSource()),i.compileShader(n),this.shaderCache_[e]=n,n}},c.prototype.getProgram=function(t,e){const i=Object(n.getUid)(t)+"/"+Object(n.getUid)(e);if(i in this.programCache_)return this.programCache_[i];{const n=this.getGL(),r=n.createProgram();return n.attachShader(r,this.getShader(t)),n.attachShader(r,this.getShader(e)),n.linkProgram(r),this.programCache_[i]=r,r}},c.prototype.handleWebGLContextLost=function(){Object(l.clear)(this.bufferCache_),Object(l.clear)(this.shaderCache_),Object(l.clear)(this.programCache_),this.currentProgram_=null,this.hitDetectionFramebuffer_=null,this.hitDetectionTexture_=null,this.hitDetectionRenderbuffer_=null},c.prototype.handleWebGLContextRestored=function(){},c.prototype.initHitDetectionFramebuffer_=function(){const t=this.gl_,e=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,e);const i=d(t,1,1),n=t.createRenderbuffer();t.bindRenderbuffer(t.RENDERBUFFER,n),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,1,1),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i,0),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,n),t.bindTexture(t.TEXTURE_2D,null),t.bindRenderbuffer(t.RENDERBUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null),this.hitDetectionFramebuffer_=e,this.hitDetectionTexture_=i,this.hitDetectionRenderbuffer_=n},c.prototype.useProgram=function(t){if(t==this.currentProgram_)return!1;return this.getGL().useProgram(t),this.currentProgram_=t,!0},e.default=c},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(2),o=i(19),s=i(5),a=i(48),l=i(173),u=i(97),c=i(81),h=i(82),d=i(118);const f=function(t,e){a.default.call(this),this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.setCoordinates(t,e)};Object(n.inherits)(f,a.default),f.prototype.clone=function(){const t=new f(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice()),t},f.prototype.closestPointXY=function(t,e,i,n){return n<Object(r.closestSquaredDistanceXY)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(u.e)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(u.d)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,i,n))},f.prototype.getArea=function(){return Object(l.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},f.prototype.getCoordinates=function(){return Object(h.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},f.prototype.getSimplifiedGeometryInternal=function(t){const e=[];e.length=Object(d.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0);const i=new f(null);return i.setFlatCoordinates(o.default.XY,e),i},f.prototype.getType=function(){return s.default.LINEAR_RING},f.prototype.intersectsExtent=function(t){},f.prototype.setCoordinates=function(t,e){t?(this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(c.b)(this.flatCoordinates,0,t,this.stride),this.changed()):this.setFlatCoordinates(o.default.XY,null)},f.prototype.setFlatCoordinates=function(t,e){this.setFlatCoordinatesInternal(t,e),this.changed()},e.default=f},function(t,e,i){"use strict";i.d(e,"a",function(){return n}),i.d(e,"b",function(){return r});const n=42,r=256},function(t,e,i){"use strict";i.d(e,"a",function(){return o}),i.d(e,"b",function(){return s}),i.d(e,"c",function(){return a});var n=i(12),r=i(18);function o(t,e,i,o,s,a){let l=NaN,u=NaN;const c=(i-e)/o;if(1===c)l=t[e],u=t[e+1];else if(2==c)l=(1-s)*t[e]+s*t[e+o],u=(1-s)*t[e+1]+s*t[e+o+1];else if(0!==c){let a=t[e],c=t[e+1],h=0;const d=[0];for(let n=e+o;n<i;n+=o){const e=t[n],i=t[n+1];h+=Math.sqrt((e-a)*(e-a)+(i-c)*(i-c)),d.push(h),a=e,c=i}const f=s*h,p=Object(n.a)(d,f);if(p<0){const i=(f-d[-p-2])/(d[-p-1]-d[-p-2]),n=e+(-p-2)*o;l=Object(r.c)(t[n],t[n+o],i),u=Object(r.c)(t[n+1],t[n+o+1],i)}else l=t[e+p*o],u=t[e+p*o+1]}return a?(a[0]=l,a[1]=u,a):[l,u]}function s(t,e,i,n,o,s){if(i==e)return null;let a;if(o<t[e+n-1])return s?((a=t.slice(e,e+n))[n-1]=o,a):null;if(t[i-1]<o)return s?((a=t.slice(i-n,i))[n-1]=o,a):null;if(o==t[e+n-1])return t.slice(e,e+n);let l=e/n,u=i/n;for(;l<u;){const e=l+u>>1;o<t[(e+1)*n-1]?u=e:l=e+1}const c=t[l*n-1];if(o==c)return t.slice((l-1)*n,(l-1)*n+n);const h=(o-c)/(t[(l+1)*n-1]-c);a=[];for(let e=0;e<n-1;++e)a.push(Object(r.c)(t[(l-1)*n+e],t[l*n+e],h));return a.push(o),a}function a(t,e,i,n,r,o,a){if(a)return s(t,e,i[i.length-1],n,r,o);let l;if(r<t[n-1])return o?((l=t.slice(0,n))[n-1]=r,l):null;if(t[t.length-1]<r)return o?((l=t.slice(t.length-n))[n-1]=r,l):null;for(let o=0,a=i.length;o<a;++o){const a=i[o];if(e!=a){if(r<t[e+n-1])return null;if(r<=t[a-1])return s(t,e,a,n,r,!1);e=a}}return null}},function(t,e,i){"use strict";i.d(e,"a",function(){return s});var n=i(23),r=i(11);const o=function(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}},s=1/0;o.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,Object(r.clear)(this.queuedElements_)},o.prototype.dequeue=function(){const t=this.elements_,e=this.priorities_,i=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));const n=this.keyFunction_(i);return delete this.queuedElements_[n],i},o.prototype.enqueue=function(t){Object(n.a)(!(this.keyFunction_(t)in this.queuedElements_),31);const e=this.priorityFunction_(t);return e!=s&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},o.prototype.getCount=function(){return this.elements_.length},o.prototype.getLeftChildIndex_=function(t){return 2*t+1},o.prototype.getRightChildIndex_=function(t){return 2*t+2},o.prototype.getParentIndex_=function(t){return t-1>>1},o.prototype.heapify_=function(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},o.prototype.isEmpty=function(){return 0===this.elements_.length},o.prototype.isKeyQueued=function(t){return t in this.queuedElements_},o.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},o.prototype.siftUp_=function(t){const e=this.elements_,i=this.priorities_,n=e.length,r=e[t],o=i[t],s=t;for(;t<n>>1;){const r=this.getLeftChildIndex_(t),o=this.getRightChildIndex_(t),s=o<n&&i[o]<i[r]?o:r;e[t]=e[s],i[t]=i[s],t=s}e[t]=r,i[t]=o,this.siftDown_(s,t)},o.prototype.siftDown_=function(t,e){const i=this.elements_,n=this.priorities_,r=i[e],o=n[e];for(;e>t;){const t=this.getParentIndex_(e);if(!(n[t]>o))break;i[e]=i[t],n[e]=n[t],e=t}i[e]=r,n[e]=o},o.prototype.reprioritize=function(){const t=this.priorityFunction_,e=this.elements_,i=this.priorities_;let n=0;const r=e.length;let o,a,l;for(a=0;a<r;++a)(l=t(o=e[a]))==s?delete this.queuedElements_[this.keyFunction_(o)]:(i[n]=l,e[n++]=o);e.length=n,i.length=n,this.heapify_()},e.b=o},function(t,e,i){"use strict";var n=i(1),r=i(33),o=i(103);const s=function(){r.default.call(this)};function a(t){if("string"==typeof t){const e=JSON.parse(t);return e||null}return null!==t?t:null}Object(n.inherits)(s,r.default),s.prototype.getType=function(){return o.a.JSON},s.prototype.readFeature=function(t,e){return this.readFeatureFromObject(a(t),this.getReadOptions(t,e))},s.prototype.readFeatures=function(t,e){return this.readFeaturesFromObject(a(t),this.getReadOptions(t,e))},s.prototype.readFeatureFromObject=function(t,e){},s.prototype.readFeaturesFromObject=function(t,e){},s.prototype.readGeometry=function(t,e){return this.readGeometryFromObject(a(t),this.getReadOptions(t,e))},s.prototype.readGeometryFromObject=function(t,e){},s.prototype.readProjection=function(t){return this.readProjectionFromObject(a(t))},s.prototype.readProjectionFromObject=function(t){},s.prototype.writeFeature=function(t,e){return JSON.stringify(this.writeFeatureObject(t,e))},s.prototype.writeFeatureObject=function(t,e){},s.prototype.writeFeatures=function(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))},s.prototype.writeFeaturesObject=function(t,e){},s.prototype.writeGeometry=function(t,e){return JSON.stringify(this.writeGeometryObject(t,e))},s.prototype.writeGeometryObject=function(t,e){},e.a=s},function(t,e,i){"use strict";var n=i(1),r=i(33),o=i(103);const s=function(){r.default.call(this)};function a(t){return"string"==typeof t?t:""}Object(n.inherits)(s,r.default),s.prototype.getType=function(){return o.a.TEXT},s.prototype.readFeature=function(t,e){return this.readFeatureFromText(a(t),this.adaptOptions(e))},s.prototype.readFeatureFromText=function(t,e){},s.prototype.readFeatures=function(t,e){return this.readFeaturesFromText(a(t),this.adaptOptions(e))},s.prototype.readFeaturesFromText=function(t,e){},s.prototype.readGeometry=function(t,e){return this.readGeometryFromText(a(t),this.adaptOptions(e))},s.prototype.readGeometryFromText=function(t,e){},s.prototype.readProjection=function(t){return this.readProjectionFromText(a(t))},s.prototype.readProjectionFromText=function(t){return this.dataProjection},s.prototype.writeFeature=function(t,e){return this.writeFeatureText(t,this.adaptOptions(e))},s.prototype.writeFeatureText=function(t,e){},s.prototype.writeFeatures=function(t,e){return this.writeFeaturesText(t,this.adaptOptions(e))},s.prototype.writeFeaturesText=function(t,e){},s.prototype.writeGeometry=function(t,e){return this.writeGeometryText(t,this.adaptOptions(e))},s.prototype.writeGeometryText=function(t,e){},e.a=s},function(t,e,i){"use strict";var n=i(1),r=i(98);const o=function(t,e,i,n){r.a.call(this,t),this.geometryName=e||"the_geom",this.geometry=i,this.srsName=n};Object(n.inherits)(o,r.a),e.a=o},function(t,e,i){"use strict";i.d(e,"a",function(){return r});const n="http://www.w3.org/1999/xlink";function r(t){return t.getAttributeNS(n,"href")}},function(t,e,i){"use strict";var n=i(0);const r=function(){};r.prototype.read=function(t){if(Object(n.isDocument)(t))return this.readFromDocument(t);if(Object(n.isNode)(t))return this.readFromNode(t);if("string"==typeof t){const e=Object(n.parse)(t);return this.readFromDocument(e)}return null},r.prototype.readFromDocument=function(t){},r.prototype.readFromNode=function(t){},e.a=r},function(t,e,i){"use strict";function n(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function r(t,e){return t[0]=e[0],t[1]=e[1],t[4]=e[2],t[5]=e[3],t[12]=e[4],t[13]=e[5],t}i.d(e,"a",function(){return n}),i.d(e,"b",function(){return r})},function(t,e,i){var n=i(146),r=i(364),o=i(294),s=Object.defineProperty;e.f=i(166)?Object.defineProperty:function(t,e,i){if(n(t),e=o(e,!0),n(i),r)try{return s(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,i){t.exports=!i(217)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AnalysisBase=void 0;var n=f(i(75)),r=f(i(13)),o=f(i(8)),s=f(i(20)),a=f(i(16)),l=f(i(17)),u=i(6),c=i(21),h=i(148),d=i(67);function f(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function e(t){(0,o.default)(this,e);var i=t||{};i.baseUrl="igs/rest/mrfws";var n=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,i));return n.flowID=void 0!==i.flowID?i.flowID:null,n}return(0,l.default)(e,t),(0,s.default)(e,[{key:"execute",value:function(t,e,i){var r={};if((0,c.copyExcluce)(r,this,["port","ip","baseUrl","partUrl","flowID"]),e||(e="get"),"get"==e.toLowerCase()&&(this.partUrl="execute/"+this.flowID+"?isAsy=false&f=json",null!=r)){var o=(0,c.getWFParameterString)(r);null==o&&""==o||(this.partUrl+="&paraValues="+o)}if("post"==e.toLowerCase()){this.partUrl="execute/"+this.flowID+"?isAsy=false&f=json";var s=new Array;if(null!=r)for(var a in r)if(null!=r[a]){var l={};l.Key=a,l.Value=r[a].toString(),s.push(l)}r=s}var u=this.getFullUrl(),h=new d.IgsServiceBase(u,{eventListeners:{scope:this,processCompleted:t,processFailed:i}});"post"==e.toLowerCase()?h.processAsync({method:"POST",data:(0,n.default)(r),headers:{"Content-Type":"text/plain;charset=UTF-8"}}):h.processAsync()}}]),e}(h.ServiceBase);e.AnalysisBase=p,u.Zondy.Service.AnalysisBase=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CThemeInfo=void 0;var n,r=i(8),o=(n=r)&&n.__esModule?n:{default:n},s=i(6),a=i(21);i(264),i(446),i(447);var l=function t(e){(0,o.default)(this,t);var i=void 0!==e?e:{};(0,a.extend)(this,i),this.Caption=void 0!==i.Caption?i.Caption:null,this.IsVisible=void 0===i.IsVisible||i.IsVisible,this.MaxScale=void 0!==i.MaxScale?parseFloat(i.MaxScale):0,this.MinScale=void 0!==i.MinScale?parseFloat(i.MinScale):0,this.RegInfo=void 0!==i.RegInfo?i.RegInfo:null,this.LinInfo=void 0!==i.LinInfo?i.LinInfo:null,this.PntInfo=void 0!==i.PntInfo?i.PntInfo:null};e.CThemeInfo=l,s.Zondy.Object.Theme.CThemeInfo=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Graph=void 0;var n=f(i(13)),r=f(i(8)),o=f(i(20)),s=f(i(16)),a=f(i(46)),l=f(i(17)),u=i(6),c=i(195),h=i(108),d=i(196);function f(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function e(t,i,o,a,l,u){(0,r.default)(this,e);var c=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,i,o,a,l,u));if(c.shapeFactory=new h.ShapeFactory,c.shapeParameters=null,c.RelativeCoordinate=!1,c.setting=null,c.origonPoint=null,c.chartBox=null,c.chartBounds=null,c.width=null,c.height=null,c.XOffset=0,c.YOffset=0,c.DVBParameter=null,c.dataViewBox=null,c.DVBCodomain=null,c.DVBCenterPoint=null,c.DVBUnitValue=null,c.DVBOrigonPoint=null,c.DVBWidth=null,c.DVBHeight=null,c.origonPointOffset=null,c.fields=o||[],c.dataValues=null,l)c.lonlat=l;else if(u&&u.calGravity)c.lonlat=c.getCenterOfGravityPoint(t);else{var d=t.bound;c.lonlat=[(d.xmin+d.xmax)/2,(d.ymin+d.ymax)/2]}return a&&a.width&&a.height&&a.codomain&&(c.setting=a),c.CLASS_NAME="Zondy.Feature.Theme.Graph",c}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.shapeFactory=null,this.shapeParameters=null,this.width=null,this.height=null,this.origonPoint=null,this.chartBox=null,this.dataViewBox=null,this.chartBounds=null,this.DVBParameter=null,this.DVBOrigonPoint=null,this.DVBCenterPoint=null,this.DVBWidth=null,this.DVBHeight=null,this.DVBCodomain=null,this.DVBUnitValue=null,this.origonPointOffset=null,this.XOffset=null,this.YOffset=null,this.fields=null,this.dataValues=null,this.setting=null,(0,a.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"destroy",this).call(this)}},{key:"initBaseParameter",value:function(){if(!this.setting)return!1;var t=this.setting;if(!(t.width&&t.height&&t.codomain))return!1;var e=void 0===t.decimalNumber||isNaN(t.decimalNumber)?-1:t.decimalNumber,i=c.Theme.getDataValues(this.data,this.fields,e);this.dataValues=i||[],this.width=parseFloat(t.width),this.height=parseFloat(t.height),this.DVBCodomain=t.codomain,this.XOffset=t.XOffset?t.XOffset:0,this.YOffset=t.YOffset?t.YOffset:0,this.origonPoint=[],this.chartBox=[],this.dataViewBox=[],this.DVBParameter=t.dataViewBoxParameter?t.dataViewBoxParameter:[0,0,0,0],this.DVBOrigonPoint=[],this.DVBCenterPoint=[],this.origonPointOffset=[],this.resetLocation();var n=this.width,r=this.height,o=this.location;this.origonPoint=[o[0]-n/2,o[1]-r/2];var s=this.origonPoint;this.chartBox=[s[0],s[1]+r,s[0]+n,s[1]];var a=this.chartBox,l=this.DVBParameter;this.dataViewBox=[a[0]+l[0],a[1]-l[1],a[2]-l[2],a[3]+l[3]];var u=this.dataViewBox;return!(u[0]>=u[2]||u[1]<=u[3])&&(this.DVBOrigonPoint=[u[0],u[3]],this.DVBWidth=Math.abs(u[2]-u[0]),this.DVBHeight=Math.abs(u[1]-u[3]),this.DVBCenterPoint=[this.DVBOrigonPoint[0]+this.DVBWidth/2,this.DVBOrigonPoint[1]+this.DVBHeight/2],this.origonPointOffset=[this.DVBOrigonPoint[0]-s[0],this.DVBOrigonPoint[1]-s[1]],!0)}},{key:"resetLocation",value:function(t){t&&(this.lonlat=t);var e=this.getLocalXY(this.lonlat);e[0]+=this.XOffset,e[1]+=this.YOffset,this.location=e;var i=this.width,n=this.height,r=this.location;return this.chartBounds=new d.Rectangle(r[0]-i/2,r[1]-n/2,r[0]+i/2,r[1]+n/2),this.resetLinearGradient(),r}},{key:"resetLinearGradient",value:function(){}},{key:"shapesConvertToRelativeCoordinate",value:function(){for(var t=this.shapes,e=this.location,i=0,n=t.length;i<n;i++){t[i].refOriginalPosition=e;var r=t[i].style;for(var o in r)switch(o){case"pointList":for(var s=r[o],a=0,l=s.length;a<l;a++)s[a][0]-=e[0],s[a][1]-=e[1];break;case"x":r[o]-=e[0];break;case"y":r[o]-=e[1]}}this.RelativeCoordinate=!0}},{key:"assembleShapes",value:function(){}},{key:"getLocalXY",value:function(t){return this.layer.getLocalXY(t)}},{key:"getCenterOfGravityPoint",value:function(t){var e=[],i=0,n=0,r=0;if(t.ftype==u.Zondy.Enum.FeatureType.Reg)for(var o=t.fGeom.RegGeom,s=0;s<o.length;s++){var a=o[s];if(null!=a&&null!=a.Rings)for(var l=a.Rings,c=0;c<l.length;c++){var h=l[c];if(null!=h&&null!=h.Arcs)for(var d=h.Arcs,f=0;f<d.length;f++){var p=d[f];if(null!=p&&null!=p.Dots)for(var g=p.Dots,y=0;y<g.length;y++)e.push(g[y])}}}for(c=1;c<=e.length;c++){var m=e[c%e.length].x,_=e[c%e.length].y,v=e[c-1].x,b=e[c-1].y,S=(m*b-_*v)/2;i+=S,n+=S*(m+v)/3,r+=S*(_+b)/3}return[n/=i,r/=i]}}]),e}(c.Theme);c.Theme.getDataValues=function(t,e,i){if(!t.attributes)return!1;for(var n=[],r=t.attributes,o=0;o<e.length;o++)for(var s in r)if(s===e[o])try{!isNaN(i)&&i>=0?n.push(parseFloat(r[s].toString()).toFixed(i)):n.push(parseFloat(r[s].toString()))}catch(t){throw new Error("not a number")}return n.length===e.length&&n},e.Graph=p,u.Zondy.Theme.Graph=p},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(132);const o=function(t,e,i,n,o){r.a.call(this,t,e,o),this.originalEvent=i,this.pixel=e.getEventPixel(i),this.coordinate=e.getCoordinateFromPixel(this.pixel),this.dragging=void 0!==n&&n};Object(n.inherits)(o,r.a),o.prototype.preventDefault=function(){r.a.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},o.prototype.stopPropagation=function(){r.a.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()},e.default=o},function(t,e,i){"use strict";var n=i(1),r=i(122),o=i(30);const s=function(t,e,i,n,s){this.loader_=void 0!==s?s:null;const a=void 0!==s?o.a.IDLE:o.a.LOADED;r.a.call(this,t,e,i,a),this.canvas_=n,this.error_=null};Object(n.inherits)(s,r.a),s.prototype.getError=function(){return this.error_},s.prototype.handleLoad_=function(t){t?(this.error_=t,this.state=o.a.ERROR):this.state=o.a.LOADED,this.changed()},s.prototype.load=function(){this.state==o.a.IDLE&&(this.state=o.a.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))},s.prototype.getImage=function(){return this.canvas_},e.a=s},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(23),o=i(61),s=i(10);const a=function(t){o.a.call(this),this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null};Object(n.inherits)(a,o.a),a.prototype.canExpireCache=function(){return this.getCount()>this.highWaterMark},a.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null,this.dispatchEvent(s.default.CLEAR)},a.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},a.prototype.forEach=function(t,e){let i=this.oldest_;for(;i;)t.call(e,i.value_,i.key_,this),i=i.newer},a.prototype.get=function(t){const e=this.entries_[t];return Object(r.a)(void 0!==e,15),e===this.newest_?e.value_:(e===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(e.newer.older=e.older,e.older.newer=e.newer),e.newer=null,e.older=this.newest_,this.newest_.newer=e,this.newest_=e,e.value_)},a.prototype.remove=function(t){const e=this.entries_[t];return Object(r.a)(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_},a.prototype.getCount=function(){return this.count_},a.prototype.getKeys=function(){const t=new Array(this.count_);let e,i=0;for(e=this.newest_;e;e=e.older)t[i++]=e.key_;return t},a.prototype.getValues=function(){const t=new Array(this.count_);let e,i=0;for(e=this.newest_;e;e=e.older)t[i++]=e.value_;return t},a.prototype.peekLast=function(){return this.oldest_.value_},a.prototype.peekLastKey=function(){return this.oldest_.key_},a.prototype.peekFirstKey=function(){return this.newest_.key_},a.prototype.pop=function(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},a.prototype.replace=function(t,e){this.get(t),this.entries_[t].value_=e},a.prototype.set=function(t,e){Object(r.a)(!(t in this.entries_),16);const i={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[t]=i,++this.count_},a.prototype.setSize=function(t){this.highWaterMark=t},a.prototype.prune=function(){for(;this.canExpireCache();)this.pop()},e.default=a},function(t,e,i){"use strict";function n(t,e,i,n){let r=0,o=t[i-n],s=t[i-n+1];for(;e<i;e+=n){const i=t[e],n=t[e+1];r+=s*i-o*n,o=i,s=n}return r/2}function r(t,e,i,r){let o=0;for(let s=0,a=i.length;s<a;++s){const a=i[s];o+=n(t,e,a,r),e=a}return o}function o(t,e,i,n){let o=0;for(let s=0,a=i.length;s<a;++s){const a=i[s];o+=r(t,e,a,n),e=a[a.length-1]}return o}i.d(e,"a",function(){return n}),i.d(e,"b",function(){return r}),i.d(e,"c",function(){return o})},function(t,e,i){"use strict";i.d(e,"a",function(){return s}),i.d(e,"b",function(){return a}),i.d(e,"c",function(){return l}),i.d(e,"d",function(){return u});var n=i(2),r=i(102),o=i(269);function s(t,e,i,r,s){const a=Object(n.extendFlatCoordinates)(Object(n.createEmpty)(),t,e,i,r);return!!Object(n.intersects)(s,a)&&(!!Object(n.containsExtent)(s,a)||(a[0]>=s[0]&&a[2]<=s[2]||(a[1]>=s[1]&&a[3]<=s[3]||Object(o.a)(t,e,i,r,function(t,e){return Object(n.intersectsSegment)(s,t,e)}))))}function a(t,e,i,n,r){for(let o=0,a=i.length;o<a;++o){if(s(t,e,i[o],n,r))return!0;e=i[o]}return!1}function l(t,e,i,n,o){if(!function(t,e,i,n,o){return!!(s(t,e,i,n,o)||Object(r.b)(t,e,i,n,o[0],o[1])||Object(r.b)(t,e,i,n,o[0],o[3])||Object(r.b)(t,e,i,n,o[2],o[1])||Object(r.b)(t,e,i,n,o[2],o[3]))}(t,e,i[0],n,o))return!1;if(1===i.length)return!0;for(let e=1,s=i.length;e<s;++e)if(Object(r.a)(t,i[e-1],i[e],n,o))return!1;return!0}function u(t,e,i,n,r){for(let o=0,s=i.length;o<s;++o){const s=i[o];if(l(t,e,s,n,r))return!0;e=s[s.length-1]}return!1}},function(t,e,i){"use strict";var n=i(1),r=i(29);const o=function(t,e,i,n,o){r.default.call(this,t),this.vectorContext=e,this.frameState=i,this.context=n,this.glContext=o};Object(n.inherits)(o,r.default),e.a=o},function(t,e,i){"use strict";i.d(e,"a",function(){return s}),i.d(e,"b",function(){return a});var n=i(1),r=i(124);const o=function(t){const e={mousedown:this.mousedown,mousemove:this.mousemove,mouseup:this.mouseup,mouseover:this.mouseover,mouseout:this.mouseout};r.a.call(this,t,e),this.pointerMap=t.pointerMap,this.lastTouches=[]};Object(n.inherits)(o,r.a);const s=1,a="mouse";function l(t,e){const i=e.cloneEvent(t,t),n=i.preventDefault;return i.preventDefault=function(){t.preventDefault(),n()},i.pointerId=s,i.isPrimary=!0,i.pointerType=a,i}o.prototype.isEventSimulatedFromTouch_=function(t){const e=this.lastTouches,i=t.clientX,n=t.clientY;for(let t,r=0,o=e.length;r<o&&(t=e[r]);r++){const e=Math.abs(i-t[0]),r=Math.abs(n-t[1]);if(e<=25&&r<=25)return!0}return!1},o.prototype.mousedown=function(t){if(!this.isEventSimulatedFromTouch_(t)){s.toString()in this.pointerMap&&this.cancel(t);const e=l(t,this.dispatcher);this.pointerMap[s.toString()]=t,this.dispatcher.down(e,t)}},o.prototype.mousemove=function(t){if(!this.isEventSimulatedFromTouch_(t)){const e=l(t,this.dispatcher);this.dispatcher.move(e,t)}},o.prototype.mouseup=function(t){if(!this.isEventSimulatedFromTouch_(t)){const e=this.pointerMap[s.toString()];if(e&&e.button===t.button){const e=l(t,this.dispatcher);this.dispatcher.up(e,t),this.cleanupMouse()}}},o.prototype.mouseover=function(t){if(!this.isEventSimulatedFromTouch_(t)){const e=l(t,this.dispatcher);this.dispatcher.enterOver(e,t)}},o.prototype.mouseout=function(t){if(!this.isEventSimulatedFromTouch_(t)){const e=l(t,this.dispatcher);this.dispatcher.leaveOut(e,t)}},o.prototype.cancel=function(t){const e=l(t,this.dispatcher);this.dispatcher.cancel(e,t),this.cleanupMouse()},o.prototype.cleanupMouse=function(){delete this.pointerMap[s.toString()]},e.c=o},function(t,e,i){"use strict";var n=i(1),r=i(27),o=i(26),s=i(2),a=i(24),l=i(178),u=i(14);const c=function(t){l.a.call(this,t),this.coordinateToCanvasPixelTransform=Object(u.c)(),this.hitCanvasContext_=null};Object(n.inherits)(c,l.a),c.prototype.composeFrame=function(t,e,i){this.preCompose(i,t);const n=this.getImage();if(n){const r=e.extent,o=void 0!==r&&!Object(s.containsExtent)(r,t.extent)&&Object(s.intersects)(r,t.extent);o&&this.clip(i,t,r);const a=this.getImageTransform(),l=i.globalAlpha;i.globalAlpha=e.opacity;const u=a[4],c=a[5],h=n.width*a[0],d=n.height*a[3];i.drawImage(n,0,0,+n.width,+n.height,Math.round(u),Math.round(c),Math.round(h),Math.round(d)),i.globalAlpha=l,o&&i.restore()}this.postCompose(i,t,e)},c.prototype.getImage=function(){},c.prototype.getImageTransform=function(){},c.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,r){const o=this.getLayer(),s=o.getSource(),a=e.viewState.resolution,l=e.viewState.rotation,u=e.skippedFeatureUids;return s.forEachFeatureAtCoordinate(t,a,l,i,u,function(t){return n.call(r,t,o)})},c.prototype.forEachLayerAtCoordinate=function(t,e,i,n,s){if(this.getImage()){if(this.getLayer().getSource().forEachFeatureAtCoordinate!==a.c)return l.a.prototype.forEachLayerAtCoordinate.apply(this,arguments);{const i=Object(u.a)(this.coordinateToCanvasPixelTransform,t.slice());Object(r.scale)(i,e.viewState.resolution/this.renderedResolution),this.hitCanvasContext_||(this.hitCanvasContext_=Object(o.a)(1,1)),this.hitCanvasContext_.clearRect(0,0,1,1),this.hitCanvasContext_.drawImage(this.getImage(),i[0],i[1],1,1,0,0,1,1);const a=this.hitCanvasContext_.getImageData(0,0,1,1).data;return a[3]>0?n.call(s,this.getLayer(),a):void 0}}},e.a=c},function(t,e,i){"use strict";var n=i(1),r=i(2),o=i(24),s=i(175),a=i(68),l=i(22),u=i(185),c=i(211),h=i(14);const d=function(t){c.a.call(this,t),this.renderedResolution,this.transform_=Object(h.c)()};Object(n.inherits)(d,c.a),d.prototype.clip=function(t,e,i){const n=e.pixelRatio,o=e.size[0]*n,s=e.size[1]*n,a=e.viewState.rotation,u=Object(r.getTopLeft)(i),c=Object(r.getTopRight)(i),d=Object(r.getBottomRight)(i),f=Object(r.getBottomLeft)(i);Object(h.a)(e.coordinateToPixelTransform,u),Object(h.a)(e.coordinateToPixelTransform,c),Object(h.a)(e.coordinateToPixelTransform,d),Object(h.a)(e.coordinateToPixelTransform,f),t.save(),Object(l.rotateAtOffset)(t,-a,o/2,s/2),t.beginPath(),t.moveTo(u[0]*n,u[1]*n),t.lineTo(c[0]*n,c[1]*n),t.lineTo(d[0]*n,d[1]*n),t.lineTo(f[0]*n,f[1]*n),t.clip(),Object(l.rotateAtOffset)(t,a,o/2,s/2)},d.prototype.dispatchComposeEvent_=function(t,e,i,n){const r=this.getLayer();if(r.hasListener(t)){const o=i.size[0]*i.pixelRatio,a=i.size[1]*i.pixelRatio,c=i.viewState.rotation;Object(l.rotateAtOffset)(e,-c,o/2,a/2);const h=void 0!==n?n:this.getTransform(i,0),d=new u.default(e,i.pixelRatio,i.extent,h,i.viewState.rotation),f=new s.a(t,d,i,e,null);r.dispatchEvent(f),Object(l.rotateAtOffset)(e,c,o/2,a/2)}},d.prototype.forEachLayerAtCoordinate=function(t,e,i,n,r){return this.forEachFeatureAtCoordinate(t,e,i,o.b,this)?n.call(r,this.getLayer(),null):void 0},d.prototype.postCompose=function(t,e,i,n){this.dispatchComposeEvent_(a.a.POSTCOMPOSE,t,e,n)},d.prototype.preCompose=function(t,e,i){this.dispatchComposeEvent_(a.a.PRECOMPOSE,t,e,i)},d.prototype.dispatchRenderEvent=function(t,e,i){this.dispatchComposeEvent_(a.a.RENDER,t,e,i)},d.prototype.getTransform=function(t,e){const i=t.viewState,n=t.pixelRatio,r=n*t.size[0]/2,o=n*t.size[1]/2,s=n/i.resolution,a=-s,l=-i.rotation,u=-i.center[0]+e,c=-i.center[1];return Object(h.b)(this.transform_,r,o,s,a,l,u,c)},d.prototype.composeFrame=function(t,e,i){},d.prototype.prepareFrame=function(t,e){},e.a=d},function(t,e,i){"use strict";i.d(e,"a",function(){return n});const n="1.3.0"},function(t,e,i){var n=i(164),r=i(247);t.exports=i(166)?function(t,e,i){return n.f(t,e,r(1,i))}:function(t,e,i){return t[e]=i,t}},function(t,e,i){var n=i(513),r=i(295);t.exports=function(t){return n(r(t))}},function(t,e){var i={}.hasOwnProperty;t.exports=function(t,e){return i.call(t,e)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tangram=void 0;var n=a(i(8)),r=a(i(20)),o=i(6),s=i(21);function a(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(e){(0,n.default)(this,t);var i=e||{};(0,s.extend)(this,i)}return(0,r.default)(t,[{key:"setByOL",value:function(t){return null}},{key:"toString",value:function(){return""}},{key:"getGeometryType",value:function(){}},{key:"Trim",value:function(t,e){var i;return i=t.replace(/(^\s+)|(\s+$)/g,""),"g"==e.toLowerCase()&&(i=i.replace(/\s/g,"")),i}}]),t}();e.Tangram=l,o.Zondy.Object.Tangram=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FeatureSet=void 0;var n=i(6),r=i(21),o=(i(259),i(407)),s=function(t){var e=void 0!==t?t:{};(0,r.extend)(this,e),this.TotalCount=0,this.AttStruct=void 0!==e.AttStruct&&null!=e.AttStruct?e.AttStruct:null,this.SFEleArray=void 0!==e.SFEleArray&&null!=e.SFEleArray?e.SFEleArray:new Array};s.prototype.clear=function(){this.AttStruct=null,this.SFEleArray=new Array},s.prototype.addFeature=function(t){t instanceof Array?this.SFEleArray.concat(t):this.SFEleArray.push(t)},s.prototype.getFeaturesLength=function(){return this.SFEleArray instanceof Array?this.SFEleArray.length:0},s.prototype.getFeatureByIndex=function(t){if(t>=this.getFeaturesLength())return null;var e=this.SFEleArray[t];return e instanceof o.Feature?e:new o.Feature(this.SFEleArray[t])},s.prototype.getAttType=function(t){var e;return null==this.AttStruct?null:null==(e="number"==typeof t?t:this.getAttIndexByAttName(t))?null:this.AttStruct.FldType[e]},s.prototype.getAttIndexByAttName=function(t){if(null==this.AttStruct)return null;if(null==this.AttStruct.FldName)return null;for(var e=this.AttStruct.FldName.length,i=0;i<e;i++)if(this.AttStruct.FldName[i]==t)return i;return null},s.prototype.getAttNameByIndex=function(t){return null==this.AttStruct?null:null==this.AttStruct.FldName?null:this.AttStruct.FldName.length<=t?null:this.AttStruct.FldName[t]},e.FeatureSet=s,n.Zondy.Object.FeatureSet=s},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(12),o=i(84),s=i(2),a=i(5),l=i(48),u=i(55),c=i(47),h=i(111),d=i(22),f=i(14);const p=function(t,e,i,n,r){h.default.call(this),this.context_=t,this.pixelRatio_=e,this.extent_=i,this.transform_=n,this.viewRotation_=r,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=0,this.imageSnapToPixel_=!1,this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=0,this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Object(f.c)()};Object(n.inherits)(p,h.default),p.prototype.drawImages_=function(t,e,i,n){if(!this.image_)return;const r=Object(u.c)(t,e,i,2,this.transform_,this.pixelCoordinates_),o=this.context_,s=this.tmpLocalTransform_,a=o.globalAlpha;1!=this.imageOpacity_&&(o.globalAlpha=a*this.imageOpacity_);let l=this.imageRotation_;this.imageRotateWithView_&&(l+=this.viewRotation_);for(let t=0,e=r.length;t<e;t+=2){let e=r[t]-this.imageAnchorX_,i=r[t+1]-this.imageAnchorY_;if(this.imageSnapToPixel_&&(e=Math.round(e),i=Math.round(i)),0!==l||1!=this.imageScale_){const t=e+this.imageAnchorX_,n=i+this.imageAnchorY_;Object(f.b)(s,t,n,this.imageScale_,this.imageScale_,l,-t,-n),o.setTransform.apply(o,s)}o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,e,i,this.imageWidth_,this.imageHeight_)}0===l&&1==this.imageScale_||o.setTransform(1,0,0,1,0,0),1!=this.imageOpacity_&&(o.globalAlpha=a)},p.prototype.drawText_=function(t,e,i,n){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const r=Object(u.c)(t,e,i,n,this.transform_,this.pixelCoordinates_),o=this.context_;let s=this.textRotation_;for(this.textRotateWithView_&&(s+=this.viewRotation_);e<i;e+=n){const t=r[e]+this.textOffsetX_,i=r[e+1]+this.textOffsetY_;if(0!==s||1!=this.textScale_){const e=Object(f.b)(this.tmpLocalTransform_,t,i,this.textScale_,this.textScale_,s,-t,-i);o.setTransform.apply(o,e)}this.textStrokeState_&&o.strokeText(this.text_,t,i),this.textFillState_&&o.fillText(this.text_,t,i)}0===s&&1==this.textScale_||o.setTransform(1,0,0,1,0,0)},p.prototype.moveToLineTo_=function(t,e,i,n,r){const o=this.context_,s=Object(u.c)(t,e,i,n,this.transform_,this.pixelCoordinates_);o.moveTo(s[0],s[1]);let a=s.length;r&&(a-=2);for(let t=2;t<a;t+=2)o.lineTo(s[t],s[t+1]);return r&&o.closePath(),i},p.prototype.drawRings_=function(t,e,i,n){for(let r=0,o=i.length;r<o;++r)e=this.moveToLineTo_(t,e,i[r],n,!0);return e},p.prototype.drawCircle=function(t){if(Object(s.intersects)(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=Object(l.transformGeom2D)(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],n=e[3]-e[1],r=Math.sqrt(i*i+n*n),o=this.context_;o.beginPath(),o.arc(e[0],e[1],r,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},p.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},p.prototype.drawGeometry=function(t){switch(t.getType()){case a.default.POINT:this.drawPoint(t);break;case a.default.LINE_STRING:this.drawLineString(t);break;case a.default.POLYGON:this.drawPolygon(t);break;case a.default.MULTI_POINT:this.drawMultiPoint(t);break;case a.default.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case a.default.MULTI_POLYGON:this.drawMultiPolygon(t);break;case a.default.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case a.default.CIRCLE:this.drawCircle(t)}},p.prototype.drawFeature=function(t,e){const i=e.getGeometryFunction()(t);i&&Object(s.intersects)(this.extent_,i.getExtent())&&(this.setStyle(e),this.drawGeometry(i))},p.prototype.drawGeometryCollection=function(t){const e=t.getGeometriesArray();for(let t=0,i=e.length;t<i;++t)this.drawGeometry(e[t])},p.prototype.drawPoint=function(t){const e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},p.prototype.drawMultiPoint=function(t){const e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},p.prototype.drawLineString=function(t){if(Object(s.intersects)(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){const e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}},p.prototype.drawMultiLineString=function(t){const e=t.getExtent();if(Object(s.intersects)(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getFlatCoordinates();let n=0;const r=t.getEnds(),o=t.getStride();e.beginPath();for(let t=0,e=r.length;t<e;++t)n=this.moveToLineTo_(i,n,r[t],o,!1);e.stroke()}if(""!==this.text_){const e=t.getFlatMidpoints();this.drawText_(e,0,e.length,2)}}},p.prototype.drawPolygon=function(t){if(Object(s.intersects)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}},p.prototype.drawMultiPolygon=function(t){if(Object(s.intersects)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getOrientedFlatCoordinates();let n=0;const r=t.getEndss(),o=t.getStride();e.beginPath();for(let t=0,e=r.length;t<e;++t){const e=r[t];n=this.drawRings_(i,n,e,o)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}},p.prototype.setContextFillState_=function(t){const e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},p.prototype.setContextStrokeState_=function(t){const e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=e.lineCap=t.lineCap),c.CANVAS_LINE_DASH&&(Object(r.b)(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset=t.lineDashOffset)),i.lineJoin!=t.lineJoin&&(i.lineJoin=e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,c.CANVAS_LINE_DASH&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},p.prototype.setContextTextState_=function(t){const e=this.context_,i=this.contextTextState_,n=t.textAlign?t.textAlign:d.defaultTextAlign;i?(i.font!=t.font&&(i.font=e.font=t.font),i.textAlign!=n&&(i.textAlign=e.textAlign=n),i.textBaseline!=t.textBaseline&&(i.textBaseline=e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=n,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:n,textBaseline:t.textBaseline})},p.prototype.setFillStrokeStyle=function(t,e){if(t){const e=t.getColor();this.fillState_={fillStyle:Object(o.asColorLike)(e||d.defaultFillStyle)}}else this.fillState_=null;if(e){const t=e.getColor(),i=e.getLineCap(),n=e.getLineDash(),r=e.getLineDashOffset(),s=e.getLineJoin(),a=e.getWidth(),l=e.getMiterLimit();this.strokeState_={lineCap:void 0!==i?i:d.defaultLineCap,lineDash:n||d.defaultLineDash,lineDashOffset:r||d.defaultLineDashOffset,lineJoin:void 0!==s?s:d.defaultLineJoin,lineWidth:this.pixelRatio_*(void 0!==a?a:d.defaultLineWidth),miterLimit:void 0!==l?l:d.defaultMiterLimit,strokeStyle:Object(o.asColorLike)(t||d.defaultStrokeStyle)}}else this.strokeState_=null},p.prototype.setImageStyle=function(t){if(t){const e=t.getAnchor(),i=t.getImage(1),n=t.getOrigin(),r=t.getSize();this.imageAnchorX_=e[0],this.imageAnchorY_=e[1],this.imageHeight_=r[1],this.image_=i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=n[0],this.imageOriginY_=n[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScale()*this.pixelRatio_,this.imageSnapToPixel_=t.getSnapToPixel(),this.imageWidth_=r[0]}else this.image_=null},p.prototype.setTextStyle=function(t){if(t){const e=t.getFill();if(e){const t=e.getColor();this.textFillState_={fillStyle:Object(o.asColorLike)(t||d.defaultFillStyle)}}else this.textFillState_=null;const i=t.getStroke();if(i){const t=i.getColor(),e=i.getLineCap(),n=i.getLineDash(),r=i.getLineDashOffset(),s=i.getLineJoin(),a=i.getWidth(),l=i.getMiterLimit();this.textStrokeState_={lineCap:void 0!==e?e:d.defaultLineCap,lineDash:n||d.defaultLineDash,lineDashOffset:r||d.defaultLineDashOffset,lineJoin:void 0!==s?s:d.defaultLineJoin,lineWidth:void 0!==a?a:d.defaultLineWidth,miterLimit:void 0!==l?l:d.defaultMiterLimit,strokeStyle:Object(o.asColorLike)(t||d.defaultStrokeStyle)}}else this.textStrokeState_=null;const n=t.getFont(),r=t.getOffsetX(),s=t.getOffsetY(),a=t.getRotateWithView(),l=t.getRotation(),u=t.getScale(),c=t.getText(),h=t.getTextAlign(),f=t.getTextBaseline();this.textState_={font:void 0!==n?n:d.defaultFont,textAlign:void 0!==h?h:d.defaultTextAlign,textBaseline:void 0!==f?f:d.defaultTextBaseline},this.text_=void 0!==c?c:"",this.textOffsetX_=void 0!==r?this.pixelRatio_*r:0,this.textOffsetY_=void 0!==s?this.pixelRatio_*s:0,this.textRotateWithView_=void 0!==a&&a,this.textRotation_=void 0!==l?l:0,this.textScale_=this.pixelRatio_*(void 0!==u?u:1)}else this.text_=""},e.default=p},function(t,e,i){"use strict";i.r(e);const n=function(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.snapToPixel_=t.snapToPixel};n.prototype.getOpacity=function(){return this.opacity_},n.prototype.getRotateWithView=function(){return this.rotateWithView_},n.prototype.getRotation=function(){return this.rotation_},n.prototype.getScale=function(){return this.scale_},n.prototype.getSnapToPixel=function(){return this.snapToPixel_},n.prototype.getAnchor=function(){},n.prototype.getImage=function(t){},n.prototype.getHitDetectionImage=function(t){},n.prototype.getImageState=function(){},n.prototype.getImageSize=function(){},n.prototype.getHitDetectionImageSize=function(){},n.prototype.getOrigin=function(){},n.prototype.getSize=function(){},n.prototype.setOpacity=function(t){this.opacity_=t},n.prototype.setRotateWithView=function(t){this.rotateWithView_=t},n.prototype.setRotation=function(t){this.rotation_=t},n.prototype.setScale=function(t){this.scale_=t},n.prototype.setSnapToPixel=function(t){this.snapToPixel_=t},n.prototype.listenImageChange=function(t,e){},n.prototype.load=function(){},n.prototype.unlistenImageChange=function(t,e){},e.default=n},function(t,e,i){"use strict";i.d(e,"a",function(){return o}),i.d(e,"b",function(){return s});var n=i(12),r=i(102);function o(t,e,i,o,s,a,l){let u,c,h,d,f,p,g;const y=s[a+1],m=[];for(let n=0,r=i.length;n<r;++n){const r=i[n];for(d=t[r-o],p=t[r-o+1],u=e;u<r;u+=o)f=t[u],g=t[u+1],(y<=p&&g<=y||p<=y&&y<=g)&&(h=(y-p)/(g-p)*(f-d)+d,m.push(h)),d=f,p=g}let _=NaN,v=-1/0;for(m.sort(n.i),d=m[0],u=1,c=m.length;u<c;++u){f=m[u];const n=Math.abs(f-d);n>v&&(h=(d+f)/2,Object(r.c)(t,e,i,o,h,y)&&(_=h,v=n)),d=f}return isNaN(_)&&(_=s[a]),l?(l.push(_,y,v),l):[_,y,v]}function s(t,e,i,n,r){let s=[];for(let a=0,l=i.length;a<l;++a){const l=i[a];s=o(t,e,l,n,r,2*a,s),e=l[l.length-1]}return s}},function(t,e,i){"use strict";i.r(e);var n=i(96),r=i(271);const o=function(t){const e=t||{};this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.text_=e.text,this.textAlign_=e.textAlign,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new n.default({color:"#333"}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:r.a.POINT,this.overflow_=!!e.overflow,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding};o.prototype.clone=function(){return new o({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:this.getScale(),text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0})},o.prototype.getOverflow=function(){return this.overflow_},o.prototype.getFont=function(){return this.font_},o.prototype.getMaxAngle=function(){return this.maxAngle_},o.prototype.getPlacement=function(){return this.placement_},o.prototype.getOffsetX=function(){return this.offsetX_},o.prototype.getOffsetY=function(){return this.offsetY_},o.prototype.getFill=function(){return this.fill_},o.prototype.getRotateWithView=function(){return this.rotateWithView_},o.prototype.getRotation=function(){return this.rotation_},o.prototype.getScale=function(){return this.scale_},o.prototype.getStroke=function(){return this.stroke_},o.prototype.getText=function(){return this.text_},o.prototype.getTextAlign=function(){return this.textAlign_},o.prototype.getTextBaseline=function(){return this.textBaseline_},o.prototype.getBackgroundFill=function(){return this.backgroundFill_},o.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},o.prototype.getPadding=function(){return this.padding_},o.prototype.setOverflow=function(t){this.overflow_=t},o.prototype.setFont=function(t){this.font_=t},o.prototype.setMaxAngle=function(t){this.maxAngle_=t},o.prototype.setOffsetX=function(t){this.offsetX_=t},o.prototype.setOffsetY=function(t){this.offsetY_=t},o.prototype.setPlacement=function(t){this.placement_=t},o.prototype.setFill=function(t){this.fill_=t},o.prototype.setRotation=function(t){this.rotation_=t},o.prototype.setScale=function(t){this.scale_=t},o.prototype.setStroke=function(t){this.stroke_=t},o.prototype.setText=function(t){this.text_=t},o.prototype.setTextAlign=function(t){this.textAlign_=t},o.prototype.setTextBaseline=function(t){this.textBaseline_=t},o.prototype.setBackgroundFill=function(t){this.backgroundFill_=t},o.prototype.setBackgroundStroke=function(t){this.backgroundStroke_=t},o.prototype.setPadding=function(t){this.padding_=t},e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(25),o=i(66),s=i(18),a=i(11);const l=function(t){r.default.call(this);const e=Object(a.assign)({},t);e[o.a.OPACITY]=void 0!==t.opacity?t.opacity:1,e[o.a.VISIBLE]=void 0===t.visible||t.visible,e[o.a.Z_INDEX]=void 0!==t.zIndex?t.zIndex:0,e[o.a.MAX_RESOLUTION]=void 0!==t.maxResolution?t.maxResolution:1/0,e[o.a.MIN_RESOLUTION]=void 0!==t.minResolution?t.minResolution:0,this.setProperties(e),this.state_={layer:this,managed:!0},this.type};Object(n.inherits)(l,r.default),l.prototype.getType=function(){return this.type},l.prototype.getLayerState=function(){return this.state_.opacity=Object(s.a)(this.getOpacity(),0,1),this.state_.sourceState=this.getSourceState(),this.state_.visible=this.getVisible(),this.state_.extent=this.getExtent(),this.state_.zIndex=this.getZIndex(),this.state_.maxResolution=this.getMaxResolution(),this.state_.minResolution=Math.max(this.getMinResolution(),0),this.state_},l.prototype.getLayersArray=function(t){},l.prototype.getLayerStatesArray=function(t){},l.prototype.getExtent=function(){return this.get(o.a.EXTENT)},l.prototype.getMaxResolution=function(){return this.get(o.a.MAX_RESOLUTION)},l.prototype.getMinResolution=function(){return this.get(o.a.MIN_RESOLUTION)},l.prototype.getOpacity=function(){return this.get(o.a.OPACITY)},l.prototype.getSourceState=function(){},l.prototype.getVisible=function(){return this.get(o.a.VISIBLE)},l.prototype.getZIndex=function(){return this.get(o.a.Z_INDEX)},l.prototype.setExtent=function(t){this.set(o.a.EXTENT,t)},l.prototype.setMaxResolution=function(t){this.set(o.a.MAX_RESOLUTION,t)},l.prototype.setMinResolution=function(t){this.set(o.a.MIN_RESOLUTION,t)},l.prototype.setOpacity=function(t){this.set(o.a.OPACITY,t)},l.prototype.setVisible=function(t){this.set(o.a.VISIBLE,t)},l.prototype.setZIndex=function(t){this.set(o.a.Z_INDEX,t)},e.default=l},function(t,e,i){"use strict";e.a={ACTIVE:"active"}},function(t,e,i){"use strict";i.d(e,"a",function(){return r});var n=i(1);function r(t,e,i,r){const o=document.createElement("script"),s="olc_"+Object(n.getUid)(e);function a(){delete window[s],o.parentNode.removeChild(o)}o.async=!0,o.src=t+(-1==t.indexOf("?")?"?":"&")+(r||"callback")+"="+s;const l=setTimeout(function(){a(),i&&i()},1e4);window[s]=function(t){clearTimeout(l),a(),e(t)},document.getElementsByTagName("head")[0].appendChild(o)}},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(30),o=i(23),s=i(63),a=i(4),l=i(10),u=i(92),c=i(26),h=i(61),d=i(209);const f=function(t,e,i,n,o,s){h.a.call(this),this.hitDetectionImage_=null,this.image_=t||new Image,null!==n&&(this.image_.crossOrigin=n),this.canvas_=s?document.createElement("CANVAS"):null,this.color_=s,this.imageListenerKeys_=null,this.imageState_=o,this.size_=i,this.src_=e,this.tainting_=!1,this.imageState_==r.a.LOADED&&this.determineTainting_()};Object(n.inherits)(f,h.a),f.prototype.determineTainting_=function(){const t=Object(c.a)(1,1);try{t.drawImage(this.image_,0,0),t.getImageData(0,0,1,1)}catch(t){this.tainting_=!0}},f.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(l.default.CHANGE)},f.prototype.handleImageError_=function(){this.imageState_=r.a.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},f.prototype.handleImageLoad_=function(){this.imageState_=r.a.LOADED,this.size_&&(this.image_.width=this.size_[0],this.image_.height=this.size_[1]),this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.determineTainting_(),this.replaceColor_(),this.dispatchChangeEvent_()},f.prototype.getImage=function(t){return this.canvas_?this.canvas_:this.image_},f.prototype.getImageState=function(){return this.imageState_},f.prototype.getHitDetectionImage=function(t){if(!this.hitDetectionImage_)if(this.tainting_){const t=this.size_[0],e=this.size_[1],i=Object(c.a)(t,e);i.fillRect(0,0,t,e),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},f.prototype.getSize=function(){return this.size_},f.prototype.getSrc=function(){return this.src_},f.prototype.load=function(){if(this.imageState_==r.a.IDLE){this.imageState_=r.a.LOADING,this.imageListenerKeys_=[Object(a.listenOnce)(this.image_,l.default.ERROR,this.handleImageError_,this),Object(a.listenOnce)(this.image_,l.default.LOAD,this.handleImageLoad_,this)];try{this.image_.src=this.src_}catch(t){this.handleImageError_()}}},f.prototype.replaceColor_=function(){if(this.tainting_||null===this.color_)return;this.canvas_.width=this.image_.width,this.canvas_.height=this.image_.height;const t=this.canvas_.getContext("2d");t.drawImage(this.image_,0,0);const e=t.getImageData(0,0,this.image_.width,this.image_.height),i=e.data,n=this.color_[0]/255,r=this.color_[1]/255,o=this.color_[2]/255;for(let t=0,e=i.length;t<e;t+=4)i[t]*=n,i[t+1]*=r,i[t+2]*=o;t.putImageData(e,0,0)},f.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(a.unlistenByKey),this.imageListenerKeys_=null};var p=i(70),g=i(186);const y=function(t){const e=t||{};this.anchor_=void 0!==e.anchor?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==e.anchorOrigin?e.anchorOrigin:p.a.TOP_LEFT,this.anchorXUnits_=void 0!==e.anchorXUnits?e.anchorXUnits:u.a.FRACTION,this.anchorYUnits_=void 0!==e.anchorYUnits?e.anchorYUnits:u.a.FRACTION,this.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null;const i=void 0!==e.img?e.img:null,a=void 0!==e.imgSize?e.imgSize:null;let l=e.src;Object(o.a)(!(void 0!==l&&i),4),Object(o.a)(!i||i&&a,5),void 0!==l&&0!==l.length||!i||(l=i.src||Object(n.getUid)(i).toString()),Object(o.a)(void 0!==l&&l.length>0,6);const c=void 0!==e.src?r.a.IDLE:r.a.LOADED;this.color_=void 0!==e.color?Object(s.asArray)(e.color):null,this.iconImage_=function(t,e,i,n,r,o){let s=d.shared.get(e,n,o);return s||(s=new f(t,e,i,n,r,o),d.shared.set(e,n,o,s)),s}(i,l,a,this.crossOrigin_,c,this.color_),this.offset_=void 0!==e.offset?e.offset:[0,0],this.offsetOrigin_=void 0!==e.offsetOrigin?e.offsetOrigin:p.a.TOP_LEFT,this.origin_=null,this.size_=void 0!==e.size?e.size:null;const h=void 0!==e.opacity?e.opacity:1,y=void 0!==e.rotateWithView&&e.rotateWithView,m=void 0!==e.rotation?e.rotation:0,_=void 0!==e.scale?e.scale:1,v=void 0===e.snapToPixel||e.snapToPixel;g.default.call(this,{opacity:h,rotation:m,scale:_,snapToPixel:v,rotateWithView:y})};Object(n.inherits)(y,g.default),y.prototype.clone=function(){return new y({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:this.getScale(),snapToPixel:this.getSnapToPixel(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},y.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;let t=this.anchor_;const e=this.getSize();if(this.anchorXUnits_==u.a.FRACTION||this.anchorYUnits_==u.a.FRACTION){if(!e)return null;t=this.anchor_.slice(),this.anchorXUnits_==u.a.FRACTION&&(t[0]*=e[0]),this.anchorYUnits_==u.a.FRACTION&&(t[1]*=e[1])}if(this.anchorOrigin_!=p.a.TOP_LEFT){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),this.anchorOrigin_!=p.a.TOP_RIGHT&&this.anchorOrigin_!=p.a.BOTTOM_RIGHT||(t[0]=-t[0]+e[0]),this.anchorOrigin_!=p.a.BOTTOM_LEFT&&this.anchorOrigin_!=p.a.BOTTOM_RIGHT||(t[1]=-t[1]+e[1])}return this.normalizedAnchor_=t,this.normalizedAnchor_},y.prototype.getColor=function(){return this.color_},y.prototype.getImage=function(t){return this.iconImage_.getImage(t)},y.prototype.getImageSize=function(){return this.iconImage_.getSize()},y.prototype.getHitDetectionImageSize=function(){return this.getImageSize()},y.prototype.getImageState=function(){return this.iconImage_.getImageState()},y.prototype.getHitDetectionImage=function(t){return this.iconImage_.getHitDetectionImage(t)},y.prototype.getOrigin=function(){if(this.origin_)return this.origin_;let t=this.offset_;if(this.offsetOrigin_!=p.a.TOP_LEFT){const e=this.getSize(),i=this.iconImage_.getSize();if(!e||!i)return null;t=t.slice(),this.offsetOrigin_!=p.a.TOP_RIGHT&&this.offsetOrigin_!=p.a.BOTTOM_RIGHT||(t[0]=i[0]-e[0]-t[0]),this.offsetOrigin_!=p.a.BOTTOM_LEFT&&this.offsetOrigin_!=p.a.BOTTOM_RIGHT||(t[1]=i[1]-e[1]-t[1])}return this.origin_=t,this.origin_},y.prototype.getSrc=function(){return this.iconImage_.getSrc()},y.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},y.prototype.listenImageChange=function(t,e){return Object(a.listen)(this.iconImage_,l.default.CHANGE,t,e)},y.prototype.load=function(){this.iconImage_.load()},y.prototype.unlistenImageChange=function(t,e){Object(a.unlisten)(this.iconImage_,l.default.CHANGE,t,e)};e.default=y},function(t,e,i){"use strict";e.a={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Util=void 0;var n=a(i(136)),r=a(i(8)),o=a(i(20)),s=i(6);function a(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(){(0,r.default)(this,t),this.BUILTIN_OBJECT={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1},this._ctx=null,this._canvas=null,this._pixelCtx=null,this._width=null,this._height=null,this._offsetX=0,this._offsetY=0,this.CLASS_NAME="Zondy.LevelRenderer.Tool.Util"}return(0,o.default)(t,[{key:"clone",value:function(t){var e=this.BUILTIN_OBJECT;if("object"==(void 0===t?"undefined":(0,n.default)(t))&&null!==t){var i=t;if(t instanceof Array){i=[];for(var r=0,o=t.length;r<o;r++)i[r]=this.clone(t[r])}else if(!e[Object.prototype.toString.call(t)])for(var s in i={},t)t.hasOwnProperty(s)&&(i[s]=this.clone(t[s]));return i}return t}},{key:"mergeItem",value:function(t,e,i,r){var o=this.BUILTIN_OBJECT;e.hasOwnProperty(i)&&("object"!=(0,n.default)(t[i])||o[Object.prototype.toString.call(t[i])]?!r&&i in t||(t[i]=e[i]):this.merge(t[i],e[i],r))}},{key:"merge",value:function(t,e,i){for(var n in e)this.mergeItem(t,e,n,i);return t}},{key:"getContext",value:function(){return this._ctx||(this._ctx=document.createElement("canvas").getContext("2d")),this._ctx}},{key:"getPixelContext",value:function(){return this._pixelCtx||(this._canvas=document.createElement("canvas"),this._width=this._canvas.width,this._height=this._canvas.height,this._pixelCtx=this._canvas.getContext("2d")),this._pixelCtx}},{key:"adjustCanvasSize",value:function(t,e){var i,n=this._canvas,r=this._pixelCtx,o=this._width,s=this._height,a=this._offsetX,l=this._offsetY;t+a>o&&(o=t+a+100,n.width=o,i=!0),e+l>s&&(s=e+l+100,n.height=s,i=!0),t<-a&&(o+=a=100*Math.ceil(-t/100),n.width=o,i=!0),e<-l&&(s+=l=100*Math.ceil(-e/100),n.height=s,i=!0),i&&r.translate(a,l)}},{key:"getPixelOffset",value:function(){return{x:this._offsetX,y:this._offsetY}}},{key:"indexOf",value:function(t,e){if(t.indexOf)return t.indexOf(e);for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1}},{key:"inherits",value:function(t,e){var i=t.prototype;function n(){}for(var r in n.prototype=e.prototype,t.prototype=new n,i)t.prototype[r]=i[r];t.constructor=t}}]),t}();e.Util=l,s.Zondy.LevelRenderer.Tool.Util=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Theme=void 0;var n=a(i(8)),r=a(i(20)),o=i(6),s=i(21);function a(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(e,i){(0,n.default)(this,t),e&&i&&i.map&&i.renderer&&(this.id=(0,s.newGuid)(),this.lonlat=[],this.location=[],this.data=e,this.shapes=[],this.layer=i,this.CLASS_NAME="Zondy.Feature.Theme")}return(0,r.default)(t,[{key:"destroy",value:function(){this.data=null,this.id=null,this.lonlat=null,this.location=null,this.shapes=null,this.layer=null}}]),t}();e.Theme=l,o.Zondy.Theme=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Rectangle=void 0;var n=l(i(13)),r=l(i(8)),o=l(i(20)),s=l(i(16)),a=l(i(17));function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t,i,o,a,l){(0,r.default)(this,e);var u=l||{},c=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,u));return c.xmin=t,c.xmax=o,c.ymin=i,c.ymax=a,c}return(0,a.default)(e,t),(0,o.default)(e,[{key:"setByOL",value:function(t){void 0!==t&&null!=t&&(this.xmin=t[0],this.ymin=t[1],this.xmax=t[2],this.ymax=t[3])}},{key:"toString",value:function(){return this.xmin+","+this.ymin+","+this.xmax+","+this.ymax}},{key:"getGeometryType",value:function(){return"rect"}},{key:"convertToBound",value:function(){return[this.xmin,this.ymin,this.xmax,this.ymax]}},{key:"intersectsBounds",value:function(t,e){"boolean"==typeof e&&(e={inclusive:e}),null==(e=e||{}).inclusive&&(e.inclusive=!0);var i=!1,n=this.xmin===t.xmax||this.xmax===t.xmin||this.ymax===t.ymin||this.ymin===t.ymax;if(e.inclusive||!n){var r=t.ymin>=this.ymin&&t.ymin<=this.ymax||this.ymin>=t.ymin&&this.ymin<=t.ymax,o=t.ymax>=this.ymin&&t.ymax<=this.ymax||this.ymax>t.ymin&&this.ymax<t.ymax,s=t.xmin>=this.xmin&&t.xmin<=this.xmax||this.xmin>=t.xmin&&this.xmin<=t.xmax,a=t.xmax>=this.xmin&&t.xmax<=this.xmax||this.xmax>=t.xmin&&this.xmax<=t.xmax;i=(r||o)&&(s||a)}return i}}]),e}(i(183).Tangram);e.Rectangle=u,Zondy.Object.Rectangle=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GeometryAnalysisBase=void 0;var n=l(i(13)),r=l(i(8)),o=l(i(16)),s=l(i(17)),a=i(6);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t){(0,r.default)(this,e);var i=t||{};return i.baseUrl="igs/rest/mrgs",(0,o.default)(this,(e.__proto__||(0,n.default)(e)).call(this,i))}return(0,s.default)(e,t),e}(i(148).ServiceBase);e.GeometryAnalysisBase=u,a.Zondy.Service.GeometryAnalysisBase=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapServiceBase=void 0;var n=l(i(13)),r=l(i(8)),o=l(i(16)),s=l(i(17)),a=i(6);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t){(0,r.default)(this,e);var i=t||{};return i.baseUrl="igs/rest/mrms",(0,o.default)(this,(e.__proto__||(0,n.default)(e)).call(this,i))}return(0,s.default)(e,t),e}(i(148).ServiceBase);e.MapServiceBase=u,a.Zondy.Service.MapServiceBase=u},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(32),o=i(35);const s=function(t){const e=t||{};this.delta_=e.delta?e.delta:1,o.default.call(this,{handleEvent:a}),this.duration_=void 0!==e.duration?e.duration:250};function a(t){let e=!1;const i=t.originalEvent;if(t.type==r.default.DBLCLICK){const n=t.map,r=t.coordinate,s=i.shiftKey?-this.delta_:this.delta_,a=n.getView();Object(o.zoomByDelta)(a,s,r,this.duration_),t.preventDefault(),e=!0}return!e}Object(n.inherits)(s,o.default),e.default=s},function(t,e,i){"use strict";i.r(e);var n=i(155),r=i(1),o=i(24),s=i(18);function a(t){return t}var l=i(25),u=i(12);var c=i(125),h=i(34),d=i(65),f=i(23),p=i(27),g=i(59),y=i(2),m=i(5),_=i(36),v=i(48),b=i(11),S=i(9),O=i(51);i.d(e,"createCenterConstraint",function(){return T}),i.d(e,"createResolutionConstraint",function(){return E}),i.d(e,"createRotationConstraint",function(){return P}),i.d(e,"isNoopAnimation",function(){return j});const C=0,x=function(t){l.default.call(this);const e=Object(b.assign)({},t);this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.updateAnimations_=this.updateAnimations_.bind(this),this.projection_=Object(S.createProjection)(e.projection,"EPSG:3857"),this.applyOptions_(e)};function T(t){return void 0!==t.extent?(e=t.extent,function(t){return t?[Object(s.a)(t[0],e[0],e[2]),Object(s.a)(t[1],e[1],e[3])]:void 0}):a;var e}function E(t){let e,i,r;let o=void 0!==t.minZoom?t.minZoom:C,a=void 0!==t.maxZoom?t.maxZoom:28;const l=void 0!==t.zoomFactor?t.zoomFactor:2;if(void 0!==t.resolutions){const n=t.resolutions;i=n[o],r=void 0!==n[a]?n[a]:n[n.length-1],n=n,e=function(t,e,i){if(void 0!==t){let r=Object(u.h)(n,t,i);r=Object(s.a)(r+e,0,n.length-1);const o=Math.floor(r);if(r!=o&&o<n.length-1){const t=n[o]/n[o+1];return n[o]/Math.pow(t,r-o)}return n[o]}}}else{const s=Object(S.createProjection)(t.projection,"EPSG:3857"),u=s.getExtent(),c=(u?Math.max(Object(y.getWidth)(u),Object(y.getHeight)(u)):360*S.METERS_PER_UNIT[O.default.DEGREES]/s.getMetersPerUnit())/n.b/Math.pow(2,C),h=c/Math.pow(2,28-C);void 0!==(i=t.maxResolution)?o=0:i=c/Math.pow(l,o),void 0===(r=t.minResolution)&&(r=void 0!==t.maxZoom?void 0!==t.maxResolution?i/Math.pow(l,a):c/Math.pow(l,a):h),a=o+Math.floor(Math.log(i/r)/Math.log(l)),r=i/Math.pow(l,a-o),e=function(t,e,i){return function(n,r,o){if(void 0!==n){const s=-o/2+.5,a=Math.floor(Math.log(e/n)/Math.log(t)+s);let l=Math.max(a+r,0);return void 0!==i&&(l=Math.min(l,i)),e/Math.pow(t,l)}}}(l,i,a-o)}var c;return{constraint:e,maxResolution:i,minResolution:r,minZoom:o,zoomFactor:l}}function P(t){if(void 0===t.enableRotation||t.enableRotation){const e=t.constrainRotation;return void 0===e||!0===e?Object(c.b)():!1===e?c.d:"number"==typeof e?Object(c.a)(e):c.d}return c.c}function j(t){return!(t.sourceCenter&&t.targetCenter&&!Object(p.equals)(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}Object(r.inherits)(x,l.default),x.prototype.applyOptions_=function(t){const e={};e[d.default.CENTER]=void 0!==t.center?t.center:null;const i=E(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.minZoom_=i.minZoom;const n=T(t),r=i.constraint,o=P(t);this.constraints_={center:n,resolution:r,rotation:o},void 0!==t.resolution?e[d.default.RESOLUTION]=t.resolution:void 0!==t.zoom&&(e[d.default.RESOLUTION]=this.constrainResolution(this.maxResolution_,t.zoom-this.minZoom_),this.resolutions_&&(e[d.default.RESOLUTION]=Object(s.a)(Number(this.getResolution()||e[d.default.RESOLUTION]),this.minResolution_,this.maxResolution_))),e[d.default.ROTATION]=void 0!==t.rotation?t.rotation:0,this.setProperties(e),this.options_=t},x.prototype.getUpdatedOptions_=function(t){const e=Object(b.assign)({},this.options_);return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenter(),e.rotation=this.getRotation(),Object(b.assign)({},e,t)},x.prototype.animate=function(t){let e,i=arguments.length;if(i>1&&"function"==typeof arguments[i-1]&&(e=arguments[i-1],--i),!this.isDef()){const t=arguments[i-1];return t.center&&this.setCenter(t.center),void 0!==t.zoom&&this.setZoom(t.zoom),void 0!==t.rotation&&this.setRotation(t.rotation),void(e&&setTimeout(function(){e(!0)},0))}let n=Date.now(),r=this.getCenter().slice(),o=this.getResolution(),a=this.getRotation();const l=[];for(let t=0;t<i;++t){const i=arguments[t],u={start:n,complete:!1,anchor:i.anchor,duration:void 0!==i.duration?i.duration:1e3,easing:i.easing||g.inAndOut};if(i.center&&(u.sourceCenter=r,u.targetCenter=i.center,r=u.targetCenter),void 0!==i.zoom?(u.sourceResolution=o,u.targetResolution=this.constrainResolution(this.maxResolution_,i.zoom-this.minZoom_,0),o=u.targetResolution):i.resolution&&(u.sourceResolution=o,u.targetResolution=i.resolution,o=u.targetResolution),void 0!==i.rotation){u.sourceRotation=a;const t=Object(s.d)(i.rotation-a+Math.PI,2*Math.PI)-Math.PI;u.targetRotation=a+t,a=u.targetRotation}u.callback=e,j(u)?u.complete=!0:n+=u.duration,l.push(u)}this.animations_.push(l),this.setHint(h.default.ANIMATING,1),this.updateAnimations_()},x.prototype.getAnimating=function(){return this.hints_[h.default.ANIMATING]>0},x.prototype.getInteracting=function(){return this.hints_[h.default.INTERACTING]>0},x.prototype.cancelAnimations=function(){this.setHint(h.default.ANIMATING,-this.hints_[h.default.ANIMATING]);for(let t=0,e=this.animations_.length;t<e;++t){const e=this.animations_[t];e[0].callback&&e[0].callback(!1)}this.animations_.length=0},x.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let e=!1;for(let i=this.animations_.length-1;i>=0;--i){const n=this.animations_[i];let r=!0;for(let i=0,o=n.length;i<o;++i){const o=n[i];if(o.complete)continue;const a=t-o.start;let l=o.duration>0?a/o.duration:1;l>=1?(o.complete=!0,l=1):r=!1;const u=o.easing(l);if(o.sourceCenter){const t=o.sourceCenter[0],e=o.sourceCenter[1],i=t+u*(o.targetCenter[0]-t),n=e+u*(o.targetCenter[1]-e);this.set(d.default.CENTER,[i,n])}if(o.sourceResolution&&o.targetResolution){const t=1===u?o.targetResolution:o.sourceResolution+u*(o.targetResolution-o.sourceResolution);o.anchor&&this.set(d.default.CENTER,this.calculateCenterZoom(t,o.anchor)),this.set(d.default.RESOLUTION,t)}if(void 0!==o.sourceRotation&&void 0!==o.targetRotation){const t=1===u?Object(s.d)(o.targetRotation+Math.PI,2*Math.PI)-Math.PI:o.sourceRotation+u*(o.targetRotation-o.sourceRotation);o.anchor&&this.set(d.default.CENTER,this.calculateCenterRotate(t,o.anchor)),this.set(d.default.ROTATION,t)}if(e=!0,!o.complete)break}if(r){this.animations_[i]=null,this.setHint(h.default.ANIMATING,-1);const t=n[0].callback;t&&setTimeout(function(){t(!0)},0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_))},x.prototype.calculateCenterRotate=function(t,e){let i;const n=this.getCenter();return void 0!==n&&(i=[n[0]-e[0],n[1]-e[1]],Object(p.rotate)(i,t-this.getRotation()),Object(p.add)(i,e)),i},x.prototype.calculateCenterZoom=function(t,e){let i;const n=this.getCenter(),r=this.getResolution();if(void 0!==n&&void 0!==r){i=[e[0]-t*(e[0]-n[0])/r,e[1]-t*(e[1]-n[1])/r]}return i},x.prototype.getSizeFromViewport_=function(){const t=[100,100],e='.ol-viewport[data-view="'+Object(r.getUid)(this)+'"]',i=document.querySelector(e);if(i){const e=getComputedStyle(i);t[0]=parseInt(e.width,10),t[1]=parseInt(e.height,10)}return t},x.prototype.constrainCenter=function(t){return this.constraints_.center(t)},x.prototype.constrainResolution=function(t,e,i){const n=e||0,r=i||0;return this.constraints_.resolution(t,n,r)},x.prototype.constrainRotation=function(t,e){const i=e||0;return this.constraints_.rotation(t,i)},x.prototype.getCenter=function(){return this.get(d.default.CENTER)},x.prototype.getConstraints=function(){return this.constraints_},x.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},x.prototype.calculateExtent=function(t){const e=t||this.getSizeFromViewport_(),i=this.getCenter();Object(f.a)(i,1);const n=this.getResolution();Object(f.a)(void 0!==n,2);const r=this.getRotation();return Object(f.a)(void 0!==r,3),Object(y.getForViewAndSize)(i,n,r,e)},x.prototype.getMaxResolution=function(){return this.maxResolution_},x.prototype.getMinResolution=function(){return this.minResolution_},x.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},x.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},x.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},x.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},x.prototype.getProjection=function(){return this.projection_},x.prototype.getResolution=function(){return this.get(d.default.RESOLUTION)},x.prototype.getResolutions=function(){return this.resolutions_},x.prototype.getResolutionForExtent=function(t,e){const i=e||this.getSizeFromViewport_(),n=Object(y.getWidth)(t)/i[0],r=Object(y.getHeight)(t)/i[1];return Math.max(n,r)},x.prototype.getResolutionForValueFunction=function(t){const e=t||2,i=this.maxResolution_,n=this.minResolution_,r=Math.log(i/n)/Math.log(e);return function(t){return i/Math.pow(e,t*r)}},x.prototype.getRotation=function(){return this.get(d.default.ROTATION)},x.prototype.getValueForResolutionFunction=function(t){const e=t||2,i=this.maxResolution_,n=this.minResolution_,r=Math.log(i/n)/Math.log(e);return function(t){return Math.log(i/t)/Math.log(e)/r}},x.prototype.getState=function(){const t=this.getCenter(),e=this.getProjection(),i=this.getResolution(),n=this.getRotation();return{center:t.slice(),projection:void 0!==e?e:null,resolution:i,rotation:n,zoom:this.getZoom()}},x.prototype.getZoom=function(){let t;const e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t},x.prototype.getZoomForResolution=function(t){let e,i,n=this.minZoom_||0;if(this.resolutions_){const r=Object(u.h)(this.resolutions_,t,1);n=r,e=this.resolutions_[r],i=r==this.resolutions_.length-1?2:e/this.resolutions_[r+1]}else e=this.maxResolution_,i=this.zoomFactor_;return n+Math.log(e/t)/Math.log(i)},x.prototype.getResolutionForZoom=function(t){return this.constrainResolution(this.maxResolution_,t-this.minZoom_,0)},x.prototype.fit=function(t,e){const i=e||{};let n,r=i.size;r||(r=this.getSizeFromViewport_()),t instanceof v.default?t.getType()===m.default.CIRCLE?(t=t.getExtent(),(n=Object(_.fromExtent)(t)).rotate(this.getRotation(),Object(y.getCenter)(t))):n=t:(Object(f.a)(Array.isArray(t),24),Object(f.a)(!Object(y.isEmpty)(t),25),n=Object(_.fromExtent)(t));const s=void 0!==i.padding?i.padding:[0,0,0,0],a=void 0===i.constrainResolution||i.constrainResolution,l=void 0!==i.nearest&&i.nearest;let u;u=void 0!==i.minResolution?i.minResolution:void 0!==i.maxZoom?this.constrainResolution(this.maxResolution_,i.maxZoom-this.minZoom_,0):0;const c=n.getFlatCoordinates(),h=this.getRotation(),d=Math.cos(-h);let p=Math.sin(-h),g=1/0,b=1/0,S=-1/0,O=-1/0;const C=n.getStride();for(let t=0,e=c.length;t<e;t+=C){const e=c[t]*d-c[t+1]*p,i=c[t]*p+c[t+1]*d;g=Math.min(g,e),b=Math.min(b,i),S=Math.max(S,e),O=Math.max(O,i)}let x=this.getResolutionForExtent([g,b,S,O],[r[0]-s[1]-s[3],r[1]-s[0]-s[2]]);if(x=isNaN(x)?u:Math.max(x,u),a){let t=this.constrainResolution(x,0,0);!l&&t<x&&(t=this.constrainResolution(t,-1,0)),x=t}p=-p;let T=(g+S)/2,E=(b+O)/2;const P=[(T+=(s[1]-s[3])/2*x)*d-(E+=(s[0]-s[2])/2*x)*p,E*d+T*p],j=i.callback?i.callback:o.c;void 0!==i.duration?this.animate({resolution:x,center:P,duration:i.duration,easing:i.easing},j):(this.setResolution(x),this.setCenter(P),setTimeout(j.bind(void 0,!0),0))},x.prototype.centerOn=function(t,e,i){const n=this.getRotation(),r=Math.cos(-n);let o=Math.sin(-n),s=t[0]*r-t[1]*o,a=t[1]*r+t[0]*o;const l=this.getResolution(),u=(s+=(e[0]/2-i[0])*l)*r-(a+=(i[1]-e[1]/2)*l)*(o=-o),c=a*r+s*o;this.setCenter([u,c])},x.prototype.isDef=function(){return!!this.getCenter()&&void 0!==this.getResolution()},x.prototype.rotate=function(t,e){if(void 0!==e){const i=this.calculateCenterRotate(t,e);this.setCenter(i)}this.setRotation(t)},x.prototype.setCenter=function(t){this.set(d.default.CENTER,t),this.getAnimating()&&this.cancelAnimations()},x.prototype.setHint=function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]},x.prototype.setResolution=function(t){this.set(d.default.RESOLUTION,t),this.getAnimating()&&this.cancelAnimations()},x.prototype.setRotation=function(t){this.set(d.default.ROTATION,t),this.getAnimating()&&this.cancelAnimations()},x.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))};e.default=x},function(t,e,i){"use strict";var n=i(1);const r=function(t){const e=n.VERSION.split("-")[0];this.message="Assertion failed. See https://openlayers.org/en/"+e+"/doc/errors/#"+t+" for details.",this.code=t,this.name="AssertionError"};Object(n.inherits)(r,Error),e.a=r},function(t,e,i){"use strict";var n=i(1),r=i(15),o=i(4),s=i(10),a=i(157);const l=function(t,e){a.b.call(this,function(e){return t.apply(null,e)},function(t){return t[0].getKey()}),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}};Object(n.inherits)(l,a.b),l.prototype.enqueue=function(t){const e=a.b.prototype.enqueue.call(this,t);if(e){const e=t[0];Object(o.listen)(e,s.default.CHANGE,this.handleTileChange,this)}return e},l.prototype.getTilesLoading=function(){return this.tilesLoading_},l.prototype.handleTileChange=function(t){const e=t.target,i=e.getState();if(i===r.a.LOADED||i===r.a.ERROR||i===r.a.EMPTY||i===r.a.ABORT){Object(o.unlisten)(e,s.default.CHANGE,this.handleTileChange,this);const t=e.getKey();t in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[t],--this.tilesLoading_),this.tileChangeCallback_()}},l.prototype.loadMoreTiles=function(t,e){let i,n,o,s=0,a=!1;for(;this.tilesLoading_<t&&s<e&&this.getCount()>0;)o=(n=this.dequeue()[0]).getKey(),(i=n.getState())===r.a.ABORT?a=!0:i!==r.a.IDLE||o in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++s,n.load());0===s&&a&&this.tileChangeCallback_()},e.a=l},function(t,e,i){"use strict";var n=i(1),r=i(172),o=i(50);const s=function(t){r.default.call(this,t)};Object(n.inherits)(s,r.default),s.prototype.expireCache=function(t){for(;this.canExpireCache();){const e=this.peekLast(),i=e.tileCoord[0].toString();if(i in t&&t[i].contains(e.tileCoord))break;this.pop().dispose()}},s.prototype.pruneExceptNewestZ=function(){if(0===this.getCount())return;const t=this.peekFirstKey(),e=Object(o.b)(t)[0];this.forEach(function(t){t.tileCoord[0]!==e&&(this.remove(Object(o.c)(t.tileCoord)),t.dispose())},this)},e.a=s},function(t,e,i){"use strict";i.r(e);var n=i(29),r=i(1),o=i(37),s=i(24),a=i(28),l=i(117),u=i(36);const c=function(t){this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null};Object(r.inherits)(c,l.a),c.prototype.disposeInternal=function(){this.setMap(null)},c.prototype.render_=function(){const t=this.startPixel_,e=this.endPixel_,i=this.element_.style;i.left=Math.min(t[0],e[0])+"px",i.top=Math.min(t[1],e[1])+"px",i.width=Math.abs(e[0]-t[0])+"px",i.height=Math.abs(e[1]-t[1])+"px"},c.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left=t.top=t.width=t.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},c.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},c.prototype.createOrUpdateGeometry=function(){const t=this.startPixel_,e=this.endPixel_,i=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixel,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new u.default([i])},c.prototype.getGeometry=function(){return this.geometry_};var h=c;const d={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend"},f=function(t,e,i){n.default.call(this,t),this.coordinate=e,this.mapBrowserEvent=i};Object(r.inherits)(f,n.default);const p=function(t){a.default.call(this,{handleDownEvent:_,handleDragEvent:y,handleUpEvent:m});const e=t||{};this.box_=new h(e.className||"ol-dragbox"),this.minArea_=void 0!==e.minArea?e.minArea:64,this.startPixel_=null,this.condition_=e.condition?e.condition:o.always,this.boxEndCondition_=e.boxEndCondition?e.boxEndCondition:g};function g(t,e,i){const n=i[0]-e[0],r=i[1]-e[1];return n*n+r*r>=this.minArea_}function y(t){Object(o.mouseOnly)(t)&&(this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new f(d.BOXDRAG,t.coordinate,t)))}function m(t){return!Object(o.mouseOnly)(t)||(this.box_.setMap(null),this.boxEndCondition_(t,this.startPixel_,t.pixel)&&(this.onBoxEnd(t),this.dispatchEvent(new f(d.BOXEND,t.coordinate,t))),!1)}function _(t){return!!Object(o.mouseOnly)(t)&&(!(!Object(o.mouseActionButton)(t)||!this.condition_(t))&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new f(d.BOXSTART,t.coordinate,t)),!0))}Object(r.inherits)(p,a.default),p.prototype.getGeometry=function(){return this.box_.getGeometry()},p.prototype.onBoxEnd=s.c;e.default=p},function(t,e,i){"use strict";i.r(e),i.d(e,"DEFAULT_RADIUS",function(){return o}),i.d(e,"getDistance",function(){return s}),i.d(e,"getLength",function(){return l}),i.d(e,"getArea",function(){return c}),i.d(e,"offset",function(){return h});var n=i(18),r=i(5);
/**
 * @license
 * Latitude/longitude spherical geodesy formulae taken from
 * http://www.movable-type.co.uk/scripts/latlong.html
 * Licensed under CC-BY-3.0.
 */
const o=6371008.8;function s(t,e,i){const r=i||o,s=Object(n.j)(t[1]),a=Object(n.j)(e[1]),l=(a-s)/2,u=Object(n.j)(e[0]-t[0])/2,c=Math.sin(l)*Math.sin(l)+Math.sin(u)*Math.sin(u)*Math.cos(s)*Math.cos(a);return 2*r*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))}function a(t,e){let i=0;for(let n=0,r=t.length;n<r-1;++n)i+=s(t[n],t[n+1],e);return i}function l(t,e){const i=e||{},n=i.radius||o,s=i.projection||"EPSG:3857",u=t.getType();u!==r.default.GEOMETRY_COLLECTION&&(t=t.clone().transform(s,"EPSG:4326"));let c,h,d,f,p,g,y=0;switch(u){case r.default.POINT:case r.default.MULTI_POINT:break;case r.default.LINE_STRING:case r.default.LINEAR_RING:y=a(c=t.getCoordinates(),n);break;case r.default.MULTI_LINE_STRING:case r.default.POLYGON:for(d=0,f=(c=t.getCoordinates()).length;d<f;++d)y+=a(c[d],n);break;case r.default.MULTI_POLYGON:for(d=0,f=(c=t.getCoordinates()).length;d<f;++d)for(p=0,g=(h=c[d]).length;p<g;++p)y+=a(h[p],n);break;case r.default.GEOMETRY_COLLECTION:{const i=t.getGeometries();for(d=0,f=i.length;d<f;++d)y+=l(i[d],e);break}default:throw new Error("Unsupported geometry type: "+u)}return y}function u(t,e){let i=0;const r=t.length;let o=t[r-1][0],s=t[r-1][1];for(let e=0;e<r;e++){const r=t[e][0],a=t[e][1];i+=Object(n.j)(r-o)*(2+Math.sin(Object(n.j)(s))+Math.sin(Object(n.j)(a))),o=r,s=a}return i*e*e/2}function c(t,e){const i=e||{},n=i.radius||o,s=i.projection||"EPSG:3857",a=t.getType();a!==r.default.GEOMETRY_COLLECTION&&(t=t.clone().transform(s,"EPSG:4326"));let l,h,d,f,p,g,y=0;switch(a){case r.default.POINT:case r.default.MULTI_POINT:case r.default.LINE_STRING:case r.default.MULTI_LINE_STRING:case r.default.LINEAR_RING:break;case r.default.POLYGON:for(l=t.getCoordinates(),y=Math.abs(u(l[0],n)),d=1,f=l.length;d<f;++d)y-=Math.abs(u(l[d],n));break;case r.default.MULTI_POLYGON:for(d=0,f=(l=t.getCoordinates()).length;d<f;++d)for(h=l[d],y+=Math.abs(u(h[0],n)),p=1,g=h.length;p<g;++p)y-=Math.abs(u(h[p],n));break;case r.default.GEOMETRY_COLLECTION:{const i=t.getGeometries();for(d=0,f=i.length;d<f;++d)y+=c(i[d],e);break}default:throw new Error("Unsupported geometry type: "+a)}return y}function h(t,e,i,r){const s=r||o,a=Object(n.j)(t[1]),l=Object(n.j)(t[0]),u=e/s,c=Math.asin(Math.sin(a)*Math.cos(u)+Math.cos(a)*Math.sin(u)*Math.cos(i)),h=l+Math.atan2(Math.sin(i)*Math.sin(u)*Math.cos(a),Math.cos(u)-Math.sin(a)*Math.sin(c));return[Object(n.i)(h),Object(n.i)(c)]}},function(t,e,i){"use strict";t.exports=r,t.exports.default=r;var n=i(467);function r(t,e){if(!(this instanceof r))return new r(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function o(t,e,i){if(!i)return e.indexOf(t);for(var n=0;n<e.length;n++)if(i(t,e[n]))return n;return-1}function s(t,e){a(t,0,t.children.length,e,t)}function a(t,e,i,n,r){r||(r=g(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o,s=e;s<i;s++)o=t.children[s],l(r,t.leaf?n(o):o);return r}function l(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function u(t,e){return t.minX-e.minX}function c(t,e){return t.minY-e.minY}function h(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function d(t){return t.maxX-t.minX+(t.maxY-t.minY)}function f(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function p(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function g(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function y(t,e,i,r,o){for(var s,a=[e,i];a.length;)(i=a.pop())-(e=a.pop())<=r||(s=e+Math.ceil((i-e)/r/2)*r,n(t,s,e,i,o),a.push(e,s,s,i))}r.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],n=this.toBBox;if(!p(t,e))return i;for(var r,o,s,a,l=[];e;){for(r=0,o=e.children.length;r<o;r++)s=e.children[r],p(t,a=e.leaf?n(s):s)&&(e.leaf?i.push(s):f(t,a)?this._all(s,i):l.push(s));e=l.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!p(t,e))return!1;for(var n,r,o,s,a=[];e;){for(n=0,r=e.children.length;n<r;n++)if(o=e.children[n],p(t,s=e.leaf?i(o):o)){if(e.leaf||f(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=g([]),this},remove:function(t,e){if(!t)return this;for(var i,n,r,s,a=this.data,l=this.toBBox(t),u=[],c=[];a||u.length;){if(a||(a=u.pop(),n=u[u.length-1],i=c.pop(),s=!0),a.leaf&&-1!==(r=o(t,a.children,e)))return a.children.splice(r,1),u.push(a),this._condense(u),this;s||a.leaf||!f(a,l)?n?(i++,a=n.children[i],s=!1):a=null:(u.push(a),c.push(i),i=0,n=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:u,compareMinY:c,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,n){var r,o=i-e+1,a=this._maxEntries;if(o<=a)return s(r=g(t.slice(e,i+1)),this.toBBox),r;n||(n=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,n-1))),(r=g([])).leaf=!1,r.height=n;var l,u,c,h,d=Math.ceil(o/a),f=d*Math.ceil(Math.sqrt(a));for(y(t,e,i,f,this.compareMinX),l=e;l<=i;l+=f)for(y(t,l,c=Math.min(l+f-1,i),d,this.compareMinY),u=l;u<=c;u+=d)h=Math.min(u+d-1,c),r.children.push(this._build(t,u,h,n-1));return s(r,this.toBBox),r},_chooseSubtree:function(t,e,i,n){for(var r,o,s,a,l,u,c,d,f,p;n.push(e),!e.leaf&&n.length-1!==i;){for(c=d=1/0,r=0,o=e.children.length;r<o;r++)l=h(s=e.children[r]),f=t,p=s,(u=(Math.max(p.maxX,f.maxX)-Math.min(p.minX,f.minX))*(Math.max(p.maxY,f.maxY)-Math.min(p.minY,f.minY))-l)<d?(d=u,c=l<c?l:c,a=s):u===d&&l<c&&(c=l,a=s);e=a||e.children[0]}return e},_insert:function(t,e,i){var n=this.toBBox,r=i?t:n(t),o=[],s=this._chooseSubtree(r,this.data,e,o);for(s.children.push(t),l(s,r);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(r,o,e)},_split:function(t,e){var i=t[e],n=i.children.length,r=this._minEntries;this._chooseSplitAxis(i,r,n);var o=this._chooseSplitIndex(i,r,n),a=g(i.children.splice(o,i.children.length-o));a.height=i.height,a.leaf=i.leaf,s(i,this.toBBox),s(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(i,a)},_splitRoot:function(t,e){this.data=g([t,e]),this.data.height=t.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var n,r,o,s,l,u,c,d,f,p,g,y,m,_;for(u=c=1/0,n=e;n<=i-e;n++)r=a(t,0,n,this.toBBox),o=a(t,n,i,this.toBBox),f=r,p=o,void 0,void 0,void 0,void 0,g=Math.max(f.minX,p.minX),y=Math.max(f.minY,p.minY),m=Math.min(f.maxX,p.maxX),_=Math.min(f.maxY,p.maxY),s=Math.max(0,m-g)*Math.max(0,_-y),l=h(r)+h(o),s<u?(u=s,d=n,c=l<c?l:c):s===u&&l<c&&(c=l,d=n);return d},_chooseSplitAxis:function(t,e,i){var n=t.leaf?this.compareMinX:u,r=t.leaf?this.compareMinY:c;this._allDistMargin(t,e,i,n)<this._allDistMargin(t,e,i,r)&&t.children.sort(n)},_allDistMargin:function(t,e,i,n){t.children.sort(n);var r,o,s=this.toBBox,u=a(t,0,e,s),c=a(t,i-e,i,s),h=d(u)+d(c);for(r=e;r<i-e;r++)o=t.children[r],l(u,t.leaf?s(o):o),h+=d(u);for(r=i-e-1;r>=e;r--)o=t.children[r],l(c,t.leaf?s(o):o),h+=d(c);return h},_adjustParentBBoxes:function(t,e,i){for(var n=i;n>=0;n--)l(e[n],t)},_condense:function(t){for(var e,i=t.length-1;i>=0;i--)0===t[i].children.length?i>0?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():s(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},function(t,e,i){"use strict";i.r(e);var n=i(72),r=i(1),o=i(171),s=i(54),a=i(34),l=i(12),u=i(2),c=i(275),h=i(11),d=i(208),f=i(177),p=i(14);const g=function(t){if(f.a.call(this,t),this.image_=null,this.imageTransform_=Object(p.c)(),this.skippedFeatures_=[],this.vectorRenderer_=null,t.getType()===s.a.VECTOR)for(let e=0,i=d.layerRendererConstructors.length;e<i;++e){const i=d.layerRendererConstructors[e];if(i!==g&&i.handles(t)){this.vectorRenderer_=new i(t);break}}};Object(r.inherits)(g,f.a),g.handles=function(t){return t.getType()===s.a.IMAGE||t.getType()===s.a.VECTOR&&t.getRenderMode()===c.a.IMAGE},g.create=function(t,e){return new g(e)},g.prototype.disposeInternal=function(){this.vectorRenderer_&&this.vectorRenderer_.dispose(),f.a.prototype.disposeInternal.call(this)},g.prototype.getImage=function(){return this.image_?this.image_.getImage():null},g.prototype.getImageTransform=function(){return this.imageTransform_},g.prototype.prepareFrame=function(t,e){const i=t.pixelRatio,r=t.size,s=t.viewState,c=s.center,d=s.resolution;let f;const g=this.getLayer().getSource(),y=t.viewHints,m=this.vectorRenderer_;let _=t.extent;if(m||void 0===e.extent||(_=Object(u.getIntersection)(_,e.extent)),!y[a.default.ANIMATING]&&!y[a.default.INTERACTING]&&!Object(u.isEmpty)(_)){let r=s.projection;if(!n.a){const t=g.getProjection();t&&(r=t)}let a=this.skippedFeatures_;if(m){const n=m.context,r=Object(h.assign)({},t,{size:[Object(u.getWidth)(_)/d,Object(u.getHeight)(_)/d],viewState:Object(h.assign)({},t.viewState,{rotation:0})}),s=Object.keys(r.skippedFeatureUids).sort();f=new o.a(_,d,i,n.canvas,function(t){!m.prepareFrame(r,e)||!m.replayGroupChanged&&Object(l.b)(a,s)||(n.canvas.width=r.size[0]*i,n.canvas.height=r.size[1]*i,m.compose(n,r,e),a=s,t())})}else f=g.getImage(_,d,i,r);f&&this.loadImage(f)&&(this.image_=f,this.skippedFeatures_=a)}if(this.image_){const t=(f=this.image_).getExtent(),e=f.getResolution(),n=f.getPixelRatio(),o=i*e/(d*n),s=Object(p.b)(this.imageTransform_,i*r[0]/2,i*r[1]/2,o,o,0,n*(t[0]-c[0])/e,n*(c[1]-t[3])/e);Object(p.b)(this.coordinateToCanvasPixelTransform,i*r[0]/2-s[4],i*r[1]/2-s[5],i/d,-i/d,0,-c[0],-c[1]),this.renderedResolution=e*i/n}return!!this.image_},g.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,r){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(t,e,i,n,r):f.a.prototype.forEachFeatureAtCoordinate.call(this,t,e,i,n,r)},e.default=g},function(t,e,i){"use strict";i.r(e),i.d(e,"layerRendererConstructors",function(){return g});var n=i(14),r=i(1),o=i(12),s=i(40),a=i(26),l=i(60),u=i(175),c=i(68),h=i(22),d=i(185),f=i(142),p=i(44);const g=[],y=function(t){f.a.call(this,t);const e=t.getViewport();this.context_=Object(a.a)(),this.canvas_=this.context_.canvas,this.canvas_.style.width="100%",this.canvas_.style.height="100%",this.canvas_.style.display="block",this.canvas_.className=s.e,e.insertBefore(this.canvas_,e.childNodes[0]||null),this.renderedVisible_=!0,this.transform_=Object(n.c)()};Object(r.inherits)(y,f.a),y.prototype.dispatchComposeEvent_=function(t,e){const i=this.getMap(),n=this.context_;if(i.hasListener(t)){const r=e.extent,o=e.pixelRatio,s=e.viewState.rotation,a=this.getTransform(e),l=new d.default(n,o,r,a,s),c=new u.a(t,l,e,n,null);i.dispatchEvent(c)}},y.prototype.getTransform=function(t){const e=t.viewState,i=this.canvas_.width/2,r=this.canvas_.height/2,o=t.pixelRatio/e.resolution,s=-o,a=-e.rotation,l=-e.center[0],u=-e.center[1];return Object(n.b)(this.transform_,i,r,o,s,a,l,u)},y.prototype.renderFrame=function(t){if(!t)return void(this.renderedVisible_&&(this.canvas_.style.display="none",this.renderedVisible_=!1));const e=this.context_,i=t.pixelRatio,n=Math.round(t.size[0]*i),r=Math.round(t.size[1]*i);this.canvas_.width!=n||this.canvas_.height!=r?(this.canvas_.width=n,this.canvas_.height=r):e.clearRect(0,0,n,r);const s=t.viewState.rotation;this.calculateMatrices2D(t),this.dispatchComposeEvent_(c.a.PRECOMPOSE,t);const a=t.layerStatesArray;Object(o.l)(a,f.b),s&&(e.save(),Object(h.rotateAtOffset)(e,s,n/2,r/2));const u=t.viewState.resolution;let d,g,y,m,_;for(d=0,g=a.length;d<g;++d)y=(_=a[d]).layer,m=this.getLayerRenderer(y),Object(l.visibleAtResolution)(_,u)&&_.sourceState==p.a.READY&&m.prepareFrame(t,_)&&m.composeFrame(t,_,e);s&&e.restore(),this.dispatchComposeEvent_(c.a.POSTCOMPOSE,t),this.renderedVisible_||(this.canvas_.style.display="",this.renderedVisible_=!0),this.scheduleRemoveUnusedLayerRenderers(t),this.scheduleExpireIconCache(t)},y.prototype.forEachLayerAtPixel=function(t,e,i,r,o,s,a){let u;const c=e.viewState.resolution,h=e.layerStatesArray,d=h.length,f=Object(n.a)(e.pixelToCoordinateTransform,t.slice());let p;for(p=d-1;p>=0;--p){const t=h[p],n=t.layer;if(Object(l.visibleAtResolution)(t,c)&&s.call(a,n)){if(u=this.getLayerRenderer(n).forEachLayerAtCoordinate(f,e,i,r,o))return u}}},y.prototype.registerLayerRenderers=function(t){f.a.prototype.registerLayerRenderers.call(this,t);for(let e=0,i=t.length;e<i;++e){const i=t[e];Object(o.f)(g,i)||g.push(i)}},e.default=y},function(t,e,i){"use strict";i.r(e),i.d(e,"shared",function(){return s});var n=i(63);const r=function(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32};function o(t,e,i){return e+":"+t+":"+(i?Object(n.asString)(i):"null")}r.prototype.clear=function(){this.cache_={},this.cacheSize_=0},r.prototype.expire=function(){if(this.cacheSize_>this.maxCacheSize_){let t=0;for(const e in this.cache_){const i=this.cache_[e];0!=(3&t++)||i.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}},r.prototype.get=function(t,e,i){const n=o(t,e,i);return n in this.cache_?this.cache_[n]:null},r.prototype.set=function(t,e,i,n){const r=o(t,e,i);this.cache_[r]=n,++this.cacheSize_},r.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()},e.default=r;const s=new r},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(2),o=i(33),s=i(43),a=i(3),l=i(77),u=i(11),c=i(9),h=i(0);const d=s.GMLNS+" http://schemas.opengis.net/gml/2.1.2/feature.xsd",f=function(t){const e=t||{};s.default.call(this,e),this.FEATURE_COLLECTION_PARSERS[s.GMLNS].featureMember=Object(h.makeArrayPusher)(s.default.prototype.readFeaturesInternal),this.schemaLocation=e.schemaLocation?e.schemaLocation:d};Object(n.inherits)(f,s.default),f.prototype.readFlatCoordinates_=function(t,e){const i=Object(h.getAllTextContent)(t,!1).replace(/^\s*|\s*$/g,""),n=e[0].srsName;let r="enu";if(n){const t=Object(c.get)(n);t&&(r=t.getAxisOrientation())}const o=i.trim().split(/\s+/),s=[];for(let t=0,e=o.length;t<e;t++){const e=o[t].split(/,+/),i=parseFloat(e[0]),n=parseFloat(e[1]),a=3===e.length?parseFloat(e[2]):0;"en"===r.substr(0,2)?s.push(i,n,a):s.push(n,i,a)}return s},f.prototype.readBox_=function(t,e){const i=Object(h.pushParseAndPop)([null],this.BOX_PARSERS_,t,e,this);return Object(r.createOrUpdate)(i[1][0],i[1][1],i[1][3],i[1][4])},f.prototype.innerBoundaryIsParser_=function(t,e){const i=Object(h.pushParseAndPop)(void 0,this.RING_PARSERS,t,e,this);if(i){e[e.length-1].push(i)}},f.prototype.outerBoundaryIsParser_=function(t,e){const i=Object(h.pushParseAndPop)(void 0,this.RING_PARSERS,t,e,this);if(i){e[e.length-1][0]=i}},f.prototype.GEOMETRY_NODE_FACTORY_=function(t,e,i){const n=e[e.length-1],r=n.multiSurface,o=n.surface,s=n.multiCurve;let a;return Array.isArray(t)?a="Envelope":"MultiPolygon"===(a=t.getType())&&!0===r?a="MultiSurface":"Polygon"===a&&!0===o?a="Surface":"MultiLineString"===a&&!0===s&&(a="MultiCurve"),Object(h.createElementNS)("http://www.opengis.net/gml",a)},f.prototype.writeFeatureElement=function(t,e,i){const n=e.getId();n&&t.setAttribute("fid",n);const r=i[i.length-1],o=r.featureNS,s=e.getGeometryName();r.serializers||(r.serializers={},r.serializers[o]={});const c=e.getProperties(),d=[],f=[];for(const t in c){const e=c[t];null!==e&&(d.push(t),f.push(e),t==s||e instanceof l.default?t in r.serializers[o]||(r.serializers[o][t]=Object(h.makeChildAppender)(this.writeGeometryElement,this)):t in r.serializers[o]||(r.serializers[o][t]=Object(h.makeChildAppender)(a.n)))}const p=Object(u.assign)({},r);p.node=t,Object(h.pushSerializeAndPop)(p,r.serializers,Object(h.makeSimpleNodeFactory)(void 0,o),f,i,d)},f.prototype.writeCurveOrLineString_=function(t,e,i){const n=i[i.length-1].srsName;if("LineStringSegment"!==t.nodeName&&n&&t.setAttribute("srsName",n),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){const n=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(n),this.writeCoordinates_(n,e,i)}else if("Curve"===t.nodeName){const n=Object(h.createElementNS)(t.namespaceURI,"segments");t.appendChild(n),this.writeCurveSegments_(n,e,i)}},f.prototype.writeLineStringOrCurveMember_=function(t,e,i){const n=this.GEOMETRY_NODE_FACTORY_(e,i);n&&(t.appendChild(n),this.writeCurveOrLineString_(n,e,i))},f.prototype.writeMultiCurveOrLineString_=function(t,e,i){const n=i[i.length-1],r=n.hasZ,o=n.srsName,s=n.curve;o&&t.setAttribute("srsName",o);const a=e.getLineStrings();Object(h.pushSerializeAndPop)({node:t,hasZ:r,srsName:o,curve:s},this.LINESTRINGORCURVEMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,a,i,void 0,this)},f.prototype.writeGeometryElement=function(t,e,i){const n=i[i.length-1],r=Object(u.assign)({},n);let s;r.node=t,s=Array.isArray(e)?n.dataProjection?Object(c.transformExtent)(e,n.featureProjection,n.dataProjection):e:Object(o.transformWithOptions)(e,!0,n),Object(h.pushSerializeAndPop)(r,this.GEOMETRY_SERIALIZERS_,this.GEOMETRY_NODE_FACTORY_,[s],i,void 0,this)},f.prototype.createCoordinatesNode_=function(t){const e=Object(h.createElementNS)(t,"coordinates");return e.setAttribute("decimal","."),e.setAttribute("cs",","),e.setAttribute("ts"," "),e},f.prototype.writeCoordinates_=function(t,e,i){const n=i[i.length-1],r=n.hasZ,o=n.srsName,s=e.getCoordinates(),l=s.length,u=new Array(l);for(let t=0;t<l;++t){const e=s[t];u[t]=this.getCoords_(e,o,r)}Object(a.n)(t,u.join(" "))},f.prototype.writeCurveSegments_=function(t,e,i){const n=Object(h.createElementNS)(t.namespaceURI,"LineStringSegment");t.appendChild(n),this.writeCurveOrLineString_(n,e,i)},f.prototype.writeSurfaceOrPolygon_=function(t,e,i){const n=i[i.length-1],r=n.hasZ,o=n.srsName;if("PolygonPatch"!==t.nodeName&&o&&t.setAttribute("srsName",o),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){const n=e.getLinearRings();Object(h.pushSerializeAndPop)({node:t,hasZ:r,srsName:o},this.RING_SERIALIZERS_,this.RING_NODE_FACTORY_,n,i,void 0,this)}else if("Surface"===t.nodeName){const n=Object(h.createElementNS)(t.namespaceURI,"patches");t.appendChild(n),this.writeSurfacePatches_(n,e,i)}},f.prototype.RING_NODE_FACTORY_=function(t,e,i){const n=e[e.length-1],r=n.node,o=n.exteriorWritten;return void 0===o&&(n.exteriorWritten=!0),Object(h.createElementNS)(r.namespaceURI,void 0!==o?"innerBoundaryIs":"outerBoundaryIs")},f.prototype.writeSurfacePatches_=function(t,e,i){const n=Object(h.createElementNS)(t.namespaceURI,"PolygonPatch");t.appendChild(n),this.writeSurfaceOrPolygon_(n,e,i)},f.prototype.writeRing_=function(t,e,i){const n=Object(h.createElementNS)(t.namespaceURI,"LinearRing");t.appendChild(n),this.writeLinearRing_(n,e,i)},f.prototype.getCoords_=function(t,e,i){let n="enu";e&&(n=Object(c.get)(e).getAxisOrientation());let r="en"===n.substr(0,2)?t[0]+","+t[1]:t[1]+","+t[0];if(i){r+=","+(t[2]||0)}return r},f.prototype.writePoint_=function(t,e,i){const n=i[i.length-1],r=n.hasZ,o=n.srsName;o&&t.setAttribute("srsName",o);const s=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(s);const l=e.getCoordinates(),u=this.getCoords_(l,o,r);Object(a.n)(s,u)},f.prototype.writeMultiPoint_=function(t,e,i){const n=i[i.length-1],r=n.hasZ,o=n.srsName;o&&t.setAttribute("srsName",o);const s=e.getPoints();Object(h.pushSerializeAndPop)({node:t,hasZ:r,srsName:o},this.POINTMEMBER_SERIALIZERS_,Object(h.makeSimpleNodeFactory)("pointMember"),s,i,void 0,this)},f.prototype.writePointMember_=function(t,e,i){const n=Object(h.createElementNS)(t.namespaceURI,"Point");t.appendChild(n),this.writePoint_(n,e,i)},f.prototype.writeLinearRing_=function(t,e,i){const n=i[i.length-1].srsName;n&&t.setAttribute("srsName",n);const r=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(r),this.writeCoordinates_(r,e,i)},f.prototype.writeMultiSurfaceOrPolygon_=function(t,e,i){const n=i[i.length-1],r=n.hasZ,o=n.srsName,s=n.surface;o&&t.setAttribute("srsName",o);const a=e.getPolygons();Object(h.pushSerializeAndPop)({node:t,hasZ:r,srsName:o,surface:s},this.SURFACEORPOLYGONMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,a,i,void 0,this)},f.prototype.writeSurfaceOrPolygonMember_=function(t,e,i){const n=this.GEOMETRY_NODE_FACTORY_(e,i);n&&(t.appendChild(n),this.writeSurfaceOrPolygon_(n,e,i))},f.prototype.writeEnvelope=function(t,e,i){const n=i[i.length-1].srsName;n&&t.setAttribute("srsName",n);const r=[e[0]+" "+e[1],e[2]+" "+e[3]];Object(h.pushSerializeAndPop)({node:t},this.ENVELOPE_SERIALIZERS_,h.OBJECT_PROPERTY_NODE_FACTORY,r,i,["lowerCorner","upperCorner"],this)};const p={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};f.prototype.MULTIGEOMETRY_MEMBER_NODE_FACTORY_=function(t,e,i){const n=e[e.length-1].node;return Object(h.createElementNS)("http://www.opengis.net/gml",p[n.nodeName])},f.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS_={"http://www.opengis.net/gml":{coordinates:Object(h.makeReplacer)(f.prototype.readFlatCoordinates_)}},f.prototype.FLAT_LINEAR_RINGS_PARSERS_={"http://www.opengis.net/gml":{innerBoundaryIs:f.prototype.innerBoundaryIsParser_,outerBoundaryIs:f.prototype.outerBoundaryIsParser_}},f.prototype.BOX_PARSERS_={"http://www.opengis.net/gml":{coordinates:Object(h.makeArrayPusher)(f.prototype.readFlatCoordinates_)}},f.prototype.GEOMETRY_PARSERS_={"http://www.opengis.net/gml":{Point:Object(h.makeReplacer)(s.default.prototype.readPoint),MultiPoint:Object(h.makeReplacer)(s.default.prototype.readMultiPoint),LineString:Object(h.makeReplacer)(s.default.prototype.readLineString),MultiLineString:Object(h.makeReplacer)(s.default.prototype.readMultiLineString),LinearRing:Object(h.makeReplacer)(s.default.prototype.readLinearRing),Polygon:Object(h.makeReplacer)(s.default.prototype.readPolygon),MultiPolygon:Object(h.makeReplacer)(s.default.prototype.readMultiPolygon),Box:Object(h.makeReplacer)(f.prototype.readBox_)}},f.prototype.GEOMETRY_SERIALIZERS_={"http://www.opengis.net/gml":{Curve:Object(h.makeChildAppender)(f.prototype.writeCurveOrLineString_),MultiCurve:Object(h.makeChildAppender)(f.prototype.writeMultiCurveOrLineString_),Point:Object(h.makeChildAppender)(f.prototype.writePoint_),MultiPoint:Object(h.makeChildAppender)(f.prototype.writeMultiPoint_),LineString:Object(h.makeChildAppender)(f.prototype.writeCurveOrLineString_),MultiLineString:Object(h.makeChildAppender)(f.prototype.writeMultiCurveOrLineString_),LinearRing:Object(h.makeChildAppender)(f.prototype.writeLinearRing_),Polygon:Object(h.makeChildAppender)(f.prototype.writeSurfaceOrPolygon_),MultiPolygon:Object(h.makeChildAppender)(f.prototype.writeMultiSurfaceOrPolygon_),Surface:Object(h.makeChildAppender)(f.prototype.writeSurfaceOrPolygon_),MultiSurface:Object(h.makeChildAppender)(f.prototype.writeMultiSurfaceOrPolygon_),Envelope:Object(h.makeChildAppender)(f.prototype.writeEnvelope)}},f.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{lineStringMember:Object(h.makeChildAppender)(f.prototype.writeLineStringOrCurveMember_),curveMember:Object(h.makeChildAppender)(f.prototype.writeLineStringOrCurveMember_)}},f.prototype.RING_SERIALIZERS_={"http://www.opengis.net/gml":{outerBoundaryIs:Object(h.makeChildAppender)(f.prototype.writeRing_),innerBoundaryIs:Object(h.makeChildAppender)(f.prototype.writeRing_)}},f.prototype.POINTMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{pointMember:Object(h.makeChildAppender)(f.prototype.writePointMember_)}},f.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{surfaceMember:Object(h.makeChildAppender)(f.prototype.writeSurfaceOrPolygonMember_),polygonMember:Object(h.makeChildAppender)(f.prototype.writeSurfaceOrPolygonMember_)}},f.prototype.ENVELOPE_SERIALIZERS_={"http://www.opengis.net/gml":{lowerCorner:Object(h.makeChildAppender)(a.n),upperCorner:Object(h.makeChildAppender)(a.n)}},e.default=f},function(t,e,i){"use strict";var n=i(1),r=i(30),o=i(137),s=i(15),a=i(4),l=i(10),u=i(24),c=i(44);const h=function(t){o.default.call(this),this.layer_=t};Object(n.inherits)(h,o.default),h.prototype.forEachFeatureAtCoordinate=u.c,h.prototype.hasFeatureAtCoordinate=u.a,h.prototype.createLoadedTileFinder=function(t,e,i){return function(n,r){return t.forEachLoadedTile(e,n,r,function(t){i[n]||(i[n]={}),i[n][t.tileCoord.toString()]=t})}},h.prototype.getLayer=function(){return this.layer_},h.prototype.handleImageChange_=function(t){t.target.getState()===r.a.LOADED&&this.renderIfReadyAndVisible()},h.prototype.loadImage=function(t){let e=t.getState();return e!=r.a.LOADED&&e!=r.a.ERROR&&Object(a.listen)(t,l.default.CHANGE,this.handleImageChange_,this),e==r.a.IDLE&&(t.load(),e=t.getState()),e==r.a.LOADED},h.prototype.renderIfReadyAndVisible=function(){const t=this.getLayer();t.getVisible()&&t.getSourceState()==c.a.READY&&this.changed()},h.prototype.scheduleExpireCache=function(t,e){if(e.canExpireCache()){const i=function(t,e,i){const r=Object(n.getUid)(t).toString();r in i.usedTiles&&t.expireCache(i.viewState.projection,i.usedTiles[r])}.bind(null,e);t.postRenderFunctions.push(i)}},h.prototype.updateUsedTiles=function(t,e,i,r){const o=Object(n.getUid)(e).toString(),s=i.toString();o in t?s in t[o]?t[o][s].extend(r):t[o][s]=r:(t[o]={},t[o][s]=r)},h.prototype.manageTilePyramid=function(t,e,i,r,o,a,l,u,c,h){const d=Object(n.getUid)(e).toString();d in t.wantedTiles||(t.wantedTiles[d]={});const f=t.wantedTiles[d],p=t.tileQueue;let g,y,m,_,v,b;for(b=i.getMinZoom();b<=l;++b)for(y=i.getTileRangeForExtentAndZ(a,b,y),m=i.getResolution(b),_=y.minX;_<=y.maxX;++_)for(v=y.minY;v<=y.maxY;++v)l-b<=u?((g=e.getTile(b,_,v,r,o)).getState()==s.a.IDLE&&(f[g.getKey()]=!0,p.isKeyQueued(g.getKey())||p.enqueue([g,d,i.getTileCoordCenter(g.tileCoord),m])),void 0!==c&&c.call(h,g)):e.useTile(b,_,v,o)},e.a=h},function(t,e,i){"use strict";const n=function(){};n.prototype.getReplay=function(t,e){},n.prototype.isEmpty=function(){},e.a=n},function(t,e,i){"use strict";var n=i(24);const r=function(t){this.source_=t};r.prototype.getType=function(){},r.prototype.getSource=function(){return this.source_},r.prototype.isAnimated=n.a,e.a=r},function(t,e,i){"use strict";e.a={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"}},function(t,e,i){"use strict";var n=i(1),r=i(23),o=i(98);const s=function(t,e){o.a.call(this,t),this.conditions=Array.prototype.slice.call(arguments,1),Object(r.a)(this.conditions.length>=2,57)};Object(n.inherits)(s,o.a),e.a=s},function(t,e,i){var n=i(246);t.exports=function(t,e,i){if(n(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,r){return t.call(e,i,n,r)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){var i={}.toString;t.exports=function(t){return i.call(t).slice(8,-1)}},function(t,e){t.exports={}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Eventful=void 0;var n=s(i(8)),r=s(i(20)),o=i(6);function s(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(){(0,n.default)(this,t),this._handlers={},this.CLASS_NAME="Zondy.LevelRenderer.Eventful"}return(0,r.default)(t,[{key:"destroy",value:function(){this._handlers=null}},{key:"one",value:function(t,e,i){var n=this._handlers;return e&&t?(n[t]||(n[t]=[]),n[t].push({h:e,one:!0,ctx:i||this}),this):this}},{key:"bind",value:function(t,e,i){var n=this._handlers;return e&&t?(n[t]||(n[t]=[]),n[t].push({h:e,one:!1,ctx:i||this}),this):this}},{key:"unbind",value:function(t,e){var i=this._handlers;if(!t)return this._handlers={},this;if(e){if(i[t]){for(var n=[],r=0,o=i[t].length;r<o;r++)i[t][r].h!=e&&n.push(i[t][r]);i[t]=n}i[t]&&0===i[t].length&&delete i[t]}else delete i[t];return this}},{key:"dispatch",value:function(t){if(this._handlers[t]){var e=arguments,i=e.length;i>3&&(e=Array.prototype.slice.call(e,1));for(var n=this._handlers[t],r=n.length,o=0;o<r;){switch(i){case 1:n[o].h.call(n[o].ctx);break;case 2:n[o].h.call(n[o].ctx,e[1]);break;case 3:n[o].h.call(n[o].ctx,e[1],e[2]);break;default:n[o].h.apply(n[o].ctx,e)}n[o].one?(n.splice(o,1),r--):o++}}return this}},{key:"dispatchWithContext",value:function(t){if(this._handlers[t]){var e=arguments,i=e.length;i>4&&(e=Array.prototype.slice.call(e,1,e.length-1));for(var n=e[e.length-1],r=this._handlers[t],o=r.length,s=0;s<o;){switch(i){case 1:r[s].h.call(n);break;case 2:r[s].h.call(n,e[1]);break;case 3:r[s].h.call(n,e[1],e[2]);break;default:r[s].h.apply(n,e)}r[s].one?(r.splice(s,1),o--):s++}}return this}}]),t}();e.Eventful=a,o.Zondy.LevelRenderer.Eventful=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ThemeVector=void 0;var n=g(i(13)),r=g(i(8)),o=g(i(20)),s=g(i(16)),a=g(i(46)),l=g(i(17)),u=i(6),c=i(21),h=(i(315),i(195)),d=i(314),f=i(313),p=i(257);function g(t){return t&&t.__esModule?t:{default:t}}var y=function(t){function e(t,i,o,a,l){(0,r.default)(this,e);var u=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,i));if(!t.fGeom)return(0,s.default)(u);u.dataBounds=t.bound,u.nodesClipPixel=2,u.isHoverAble=!0,u.isMultiHover=!0,u.isClickAble=!0,u.highlightStyle=null,u.shapeOptions={},u.style=o||{},u.CLASS_NAME="Zondy.Feature.Theme.Vector",u.style=o||{},a&&(0,c.copyAttributesWithClip)(u,a,["shapeOptions","dataBounds"]),l&&(0,c.copyAttributesWithClip)(u.shapeOptions,l);t.fGeom;switch(u.lonlat=[(u.dataBounds.xmin+u.dataBounds.xmax)/2,(u.dataBounds.ymin+u.dataBounds.ymax)/2],u.location=u.getLocalXY(u.lonlat),t.ftype){case 0:break;case 1:u.pointsToTF(t.fGeom.PntGeom);break;case 2:u.linesToTF(t.fGeom.LinGeom);break;case 3:u.regsToTF(t.fGeom.RegGeom)}return u}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.style=null,this.dataBounds=null,this.nodesClipPixel=null,this.isHoverAble=null,this.isMultiHover=null,this.isClickAble=null,this.highlightStyle=null,this.shapeOptions=null,(0,a.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"destroy",this).call(this)}},{key:"pointsToTF",value:function(t){if(!(null==t||t.length<=0)){t.components;for(var e=[],i=[],n=this.location,r=[],o=this.nodesClipPixel,s=0;s<t.length;s++){var a=t[s];if(i=[],e=this.getLocalXY([a.Dot.x,a.Dot.y]),i[0]=e[0]-n[0],i[1]=e[1]-n[1],r.length>0){var l=r[r.length-1];if(Math.abs(l[0]-i[0])<=o&&Math.abs(l[1]-i[1])<=o)continue}r.push(i);var u=new Object;u.r=6,(u=(0,c.copyAttributesWithClip)(u,this.style)).x=i[0],u.y=i[1];var h=new f.SmicPoint({style:u,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(h.highlightStyle=this.highlightStyle),h.refOriginalPosition=n,h.refDataID=this.data.FID,h.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&(0,c.copyAttributesWithClip)(h,this.shapeOptions),this.shapes.push(h)}}}},{key:"linesToTF",value:function(t){if(!(null==t||t.length<=0))for(var e=0;e<t.length;e++)this.lineToTF(t[e])}},{key:"lineToTF",value:function(t){var e=[];if(null!=t.line&&null!=t.Line.Arcs&&t.Line.Arcs.length>0)for(var i=t.Line.Arcs,n=0;n<i.length;n++)for(var r=i[n].Dots,o=0;o<r.length;o++)e.push([r[o].x,r[o].y]);if(!(e.length<=0)){var s=[],a=[],l=this.location,u=[],h=this.nodesClipPixel;for(n=0;n<e.length;n++){var f=e[n];if(a=[],s=this.getLocalXY(f),a[0]=s[0]-l[0],a[1]=s[1]-l[1],u.length>0){var p=u[u.length-1];if(Math.abs(p[0]-a[0])<=h&&Math.abs(p[1]-a[1])<=h)continue}u.push(a)}if(u.length<2)return null;var g=new Object;(g=(0,c.copyAttributesWithClip)(g,this.style,["pointList"])).pointList=u;var y=new d.SmicBrokenLine({style:g,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(y.highlightStyle=this.highlightStyle),y.refOriginalPosition=this.location,y.refDataID=this.data.FID,y.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&(0,c.copyAttributesWithClip)(y,this.shapeOptions),this.shapes.push(y)}}},{key:"regsToTF",value:function(t){if(!(null==t||t.length<=0))for(var e=0;e<t.length;e++)this.regToTF(t[e])}},{key:"regToTF",value:function(t){var e=t.Rings;if(!(null==e||e.length<=0)){for(var i=[],n=[],r=this.location,o=[],s=[],a=[],l=this.nodesClipPixel,u=0;u<e.length;u++){if(0===u){if(o=[],null!=e[u]&&null!=e[u].Arcs&&e[u].Arcs.length>0)for(var h=e[u].Arcs,d=0;d<h.length;d++)for(var f=h[d].Dots,g=0;g<f.length;g++){if(n=[],i=this.getLocalXY([f[g].x,f[g].y]),n[0]=i[0]-r[0],n[1]=i[1]-r[1],o.length>0){var y=o[o.length-1];if(Math.abs(y[0]-n[0])<=l&&Math.abs(y[1]-n[1])<=l)continue}o.push(n)}}else if(s=[],null!=e[u]&&null!=e[u].Arcs&&e[u].Arcs.length>0)for(h=e[u].Arcs,d=0;d<h.length;d++)for(f=h[d].Dots,g=0;g<f.length;g++){if(n=[],i=this.getLocalXY([f[g].x,f[g].y]),n[0]=i[0]-r[0],n[1]=i[1]-r[1],s.length>0){var m=s[s.length-1];if(Math.abs(m[0]-n[0])<=l&&Math.abs(m[1]-n[1])<=l)continue}s.push(n)}s.length<2||a.push(s)}if(!(o.length<2)){var _={};(_=(0,c.copyAttributesWithClip)(_,this.style,["pointList"])).pointList=o;var v=new p.SmicPolygon({style:_,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(v.highlightStyle=this.highlightStyle),v.refOriginalPosition=this.location,v.refDataID=this.data.FID,v.isHoverByRefDataID=this.isMultiHover,a.length>0&&(v.holePolygonPointLists=a),this.shapeOptions&&(0,c.copyAttributesWithClip)(v,this.shapeOptions),this.shapes.push(v)}}}},{key:"updateAndAddShapes",value:function(){var t=this.getLocalXY(this.lonlat);this.location=t;for(var e=this.layer.renderer,i=0,n=this.shapes.length;i<n;i++){var r=this.shapes[i];r.refOriginalPosition=t,e.addShape(r)}}},{key:"getShapesCount",value:function(){return this.shapes.length}},{key:"getLocalXY",value:function(t){return this.layer.getLocalXY(t)}}]),e}(h.Theme);e.ThemeVector=y,u.Zondy.Theme.ThemeVector=y},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CatalogService=void 0;var n=l(i(13)),r=l(i(8)),o=l(i(16)),s=l(i(17)),a=i(6);i(21);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t){(0,r.default)(this,e);var i=t||{};return i.baseUrl="igs/rest/mrcs",(0,o.default)(this,(e.__proto__||(0,n.default)(e)).call(this,i))}return(0,s.default)(e,t),e}(i(148).ServiceBase);e.CatalogService=u,a.Zondy.Catalog.CatalogService=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryServiceBase=void 0;var n=g(i(75)),r=g(i(13)),o=g(i(8)),s=g(i(20)),a=g(i(16)),l=g(i(17)),u=i(6),c=i(21),h=i(148),d=i(184),f=i(261),p=i(67);function g(t){return t&&t.__esModule?t:{default:t}}var y=function(t){function e(t){(0,o.default)(this,e);var i=t||{};i.baseUrl="igs/rest/mrfs";var n=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,i));return n.resultCallBack=void 0!==i.resultCallBack?i.resultCallBack:null,n.queryParam=void 0!==i.queryParam?i.queryParam:null,n.requestType=void 0!==i.requestType?i.requestType:"GET",n}return(0,l.default)(e,t),(0,s.default)(e,[{key:"processResult",value:function(t){var e=new d.FeatureSet;(0,c.copyExcluce)(e,t.result,"succeed"),this.resultCallBack(e)}},{key:"processGeoJsonResult",value:function(t){var e={};(0,c.copyExcluce)(e,t.result,"succeed"),this.resultCallBack(e)}},{key:"restQuery",value:function(t,e,i,r,o,s){this.resultCallBack=i;var a=new p.IgsServiceBase(t,{eventListeners:{scope:this,processCompleted:"geojson"!=s?this.processResult:this.processGeoJsonResult,processFailed:o}});"GET"==r?a.processAsync():a.processAsync({method:"POST",data:(0,n.default)(e),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"query",value:function(t,e,i){if(null!=this.queryParam){var n="";if(this.queryParam instanceof f.QueryParameter){n=this.getFullUrl();var r="",o=null;"GET"==(r=i||(this.requestType?this.requestType:"GET")).toUpperCase()?n+="?"+this.queryParam.getParameterURL():o=this.queryParam.getParameterObject(),this.restQuery(n,o,t,r,e,this.queryParam.resultFormat.toLowerCase())}}}}]),e}(h.ServiceBase);e.QueryServiceBase=y,u.Zondy.Service.QueryServiceBase=y},function(t,e,i){"use strict";i.r(e);const n=function(t,e,i){this.decay_=t,this.minVelocity_=e,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0};n.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},n.prototype.update=function(t,e){this.points_.push(t,e,Date.now())},n.prototype.end=function(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;let i=e-3;for(;i>0&&this.points_[i+2]>t;)i-=3;const n=this.points_[e+2]-this.points_[i+2];if(n<1e3/60)return!1;const r=this.points_[e]-this.points_[i],o=this.points_[e+1]-this.points_[i+1];return this.angle_=Math.atan2(o,r),this.initialVelocity_=Math.sqrt(r*r+o*o)/n,this.initialVelocity_>this.minVelocity_},n.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},n.prototype.getAngle=function(){return this.angle_},e.default=n},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(152),o=i(266),s=i(239),a=i(11),l=i(207),u=i(208),c=i(114),h=i(337),d=i(338);const f=function(t){(t=Object(a.assign)({},t)).controls||(t.controls=Object(o.a)()),t.interactions||(t.interactions=Object(s.defaults)()),r.default.call(this,t)};Object(n.inherits)(f,r.default),f.prototype.createRenderer=function(){const t=new u.default(this);return t.registerLayerRenderers([l.default,c.default,h.default,d.default]),t},e.default=f},function(t,e,i){"use strict";i.r(e),i.d(e,"render",function(){return d});var n=i(1),r=i(12),o=i(45),s=i(40),a=i(26),l=i(4),u=i(10),c=i(60);const h=function(t){const e=t||{};this.ulElement_=document.createElement("UL"),this.collapsed_=void 0===e.collapsed||e.collapsed,this.collapsible_=void 0===e.collapsible||e.collapsible,this.collapsible_||(this.collapsed_=!1);const i=void 0!==e.className?e.className:"ol-attribution",n=void 0!==e.tipLabel?e.tipLabel:"Attributions",r=void 0!==e.collapseLabel?e.collapseLabel:"»";"string"==typeof r?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=r):this.collapseLabel_=r;const a=void 0!==e.label?e.label:"i";"string"==typeof a?(this.label_=document.createElement("span"),this.label_.textContent=a):this.label_=a;const c=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,h=document.createElement("button");h.setAttribute("type","button"),h.title=n,h.appendChild(c),Object(l.listen)(h,u.default.CLICK,this.handleClick_,this);const f=i+" "+s.e+" "+s.b+(this.collapsed_&&this.collapsible_?" "+s.a:"")+(this.collapsible_?"":" ol-uncollapsible"),p=document.createElement("div");p.className=f,p.appendChild(this.ulElement_),p.appendChild(h),o.default.call(this,{element:p,render:e.render||d,target:e.target}),this.renderedAttributions_=[],this.renderedVisible_=!0};function d(t){this.updateElement_(t.frameState)}Object(n.inherits)(h,o.default),h.prototype.getSourceAttributions_=function(t){const e={},i=[],n=t.layerStatesArray,r=t.viewState.resolution;for(let o=0,s=n.length;o<s;++o){const s=n[o];if(!Object(c.visibleAtResolution)(s,r))continue;const a=s.layer.getSource();if(!a)continue;const l=a.getAttributions();if(!l)continue;const u=l(t);if(u)if(Array.isArray(u))for(let t=0,n=u.length;t<n;++t)u[t]in e||(i.push(u[t]),e[u[t]]=!0);else u in e||(i.push(u),e[u]=!0)}return i},h.prototype.updateElement_=function(t){if(!t)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const e=this.getSourceAttributions_(t),i=e.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!Object(r.b)(e,this.renderedAttributions_)){Object(a.d)(this.ulElement_);for(let t=0,i=e.length;t<i;++t){const i=document.createElement("LI");i.innerHTML=e[t],this.ulElement_.appendChild(i)}this.renderedAttributions_=e}},h.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_()},h.prototype.handleToggle_=function(){this.element.classList.toggle(s.a),this.collapsed_?Object(a.f)(this.collapseLabel_,this.label_):Object(a.f)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_},h.prototype.getCollapsible=function(){return this.collapsible_},h.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())},h.prototype.setCollapsed=function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},h.prototype.getCollapsed=function(){return this.collapsed_},e.default=h},function(t,e,i){"use strict";i.r(e),i.d(e,"render",function(){return c});var n=i(45),r=i(40),o=i(59),s=i(4),a=i(10),l=i(1);const u=function(t){const e=t||{},i=void 0!==e.className?e.className:"ol-rotate",o=void 0!==e.label?e.label:"⇧";this.label_=null,"string"==typeof o?(this.label_=document.createElement("span"),this.label_.className="ol-compass",this.label_.textContent=o):(this.label_=o,this.label_.classList.add("ol-compass"));const l=e.tipLabel?e.tipLabel:"Reset rotation",h=document.createElement("button");h.className=i+"-reset",h.setAttribute("type","button"),h.title=l,h.appendChild(this.label_),Object(s.listen)(h,a.default.CLICK,u.prototype.handleClick_,this);const d=i+" "+r.e+" "+r.b,f=document.createElement("div");f.className=d,f.appendChild(h),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,n.default.call(this,{element:f,render:e.render||c,target:e.target}),this.duration_=void 0!==e.duration?e.duration:250,this.autoHide_=void 0===e.autoHide||e.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(r.c)};function c(t){const e=t.frameState;if(!e)return;const i=e.viewState.rotation;if(i!=this.rotation_){const t="rotate("+i+"rad)";if(this.autoHide_){const t=this.element.classList.contains(r.c);t||0!==i?t&&0!==i&&this.element.classList.remove(r.c):this.element.classList.add(r.c)}this.label_.style.msTransform=t,this.label_.style.webkitTransform=t,this.label_.style.transform=t}this.rotation_=i}Object(l.inherits)(u,n.default),u.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},u.prototype.resetNorth_=function(){const t=this.getMap().getView();t&&void 0!==t.getRotation()&&(this.duration_>0?t.animate({rotation:0,duration:this.duration_,easing:o.easeOut}):t.setRotation(0))},e.default=u},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(4),o=i(10),s=i(45),a=i(40),l=i(59);const u=function(t){const e=t||{},i=void 0!==e.className?e.className:"ol-zoom",n=void 0!==e.delta?e.delta:1,l=void 0!==e.zoomInLabel?e.zoomInLabel:"+",c=void 0!==e.zoomOutLabel?e.zoomOutLabel:"−",h=void 0!==e.zoomInTipLabel?e.zoomInTipLabel:"Zoom in",d=void 0!==e.zoomOutTipLabel?e.zoomOutTipLabel:"Zoom out",f=document.createElement("button");f.className=i+"-in",f.setAttribute("type","button"),f.title=h,f.appendChild("string"==typeof l?document.createTextNode(l):l),Object(r.listen)(f,o.default.CLICK,u.prototype.handleClick_.bind(this,n));const p=document.createElement("button");p.className=i+"-out",p.setAttribute("type","button"),p.title=d,p.appendChild("string"==typeof c?document.createTextNode(c):c),Object(r.listen)(p,o.default.CLICK,u.prototype.handleClick_.bind(this,-n));const g=i+" "+a.e+" "+a.b,y=document.createElement("div");y.className=g,y.appendChild(f),y.appendChild(p),s.default.call(this,{element:y,target:e.target}),this.duration_=void 0!==e.duration?e.duration:250};Object(n.inherits)(u,s.default),u.prototype.handleClick_=function(t,e){e.preventDefault(),this.zoomByDelta_(t)},u.prototype.zoomByDelta_=function(t){const e=this.getMap().getView();if(!e)return;const i=e.getResolution();if(i){const n=e.constrainResolution(i,t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({resolution:n,duration:this.duration_,easing:l.easeOut})):e.setResolution(n)}},e.default=u},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(34),o=i(27),s=i(59),a=i(37),l=i(24),u=i(28);const c=function(t){u.default.call(this,{handleDownEvent:f,handleDragEvent:h,handleUpEvent:d});const e=t||{};this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.condition_=e.condition?e.condition:a.noModifierKeys,this.noKinetic_=!1};function h(t){const e=this.targetPointers,i=Object(u.centroid)(e);if(e.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const e=this.lastCentroid[0]-i[0],n=i[1]-this.lastCentroid[1],r=t.map.getView();let s=[e,n];Object(o.scale)(s,r.getResolution()),Object(o.rotate)(s,r.getRotation()),Object(o.add)(s,r.getCenter()),s=r.constrainCenter(s),r.setCenter(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=e.length}function d(t){const e=t.map,i=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const t=this.kinetic_.getDistance(),n=this.kinetic_.getAngle(),r=i.getCenter(),o=e.getPixelFromCoordinate(r),a=e.getCoordinateFromPixel([o[0]-t*Math.cos(n),o[1]-t*Math.sin(n)]);i.animate({center:i.constrainCenter(a),duration:500,easing:s.easeOut})}return i.setHint(r.default.INTERACTING,-1),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}function f(t){if(this.targetPointers.length>0&&this.condition_(t)){const e=t.map.getView();return this.lastCentroid=null,this.handlingDownUpSequence||e.setHint(r.default.INTERACTING,1),e.getAnimating()&&e.setCenter(t.frameState.viewState.center),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}Object(n.inherits)(c,u.default),c.prototype.shouldStopEvent=l.a,e.default=c},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(125),o=i(34),s=i(37),a=i(24),l=i(35),u=i(28);const c=function(t){const e=t||{};u.default.call(this,{handleDownEvent:f,handleDragEvent:h,handleUpEvent:d}),this.condition_=e.condition?e.condition:s.altShiftKeysOnly,this.lastAngle_=void 0,this.duration_=void 0!==e.duration?e.duration:250};function h(t){if(!Object(s.mouseOnly)(t))return;const e=t.map,i=e.getView();if(i.getConstraints().rotation===r.c)return;const n=e.getSize(),o=t.pixel,a=Math.atan2(n[1]/2-o[1],o[0]-n[0]/2);if(void 0!==this.lastAngle_){const t=a-this.lastAngle_,e=i.getRotation();Object(l.rotateWithoutConstraints)(i,e-t)}this.lastAngle_=a}function d(t){if(!Object(s.mouseOnly)(t))return!0;const e=t.map.getView();e.setHint(o.default.INTERACTING,-1);const i=e.getRotation();return Object(l.rotate)(e,i,void 0,this.duration_),!1}function f(t){if(!Object(s.mouseOnly)(t))return!1;if(Object(s.mouseActionButton)(t)&&this.condition_(t)){return t.map.getView().setHint(o.default.INTERACTING,1),this.lastAngle_=void 0,!0}return!1}Object(n.inherits)(c,u.default),c.prototype.shouldStopEvent=a.a,e.default=c},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(59),o=i(37),s=i(2),a=i(204);const l=function(t){const e=t||{},i=e.condition?e.condition:o.shiftKeyOnly;this.duration_=void 0!==e.duration?e.duration:200,this.out_=void 0!==e.out&&e.out,a.default.call(this,{condition:i,className:e.className||"ol-dragzoom"})};Object(n.inherits)(l,a.default),l.prototype.onBoxEnd=function(){const t=this.getMap(),e=t.getView(),i=t.getSize();let n=this.getGeometry().getExtent();if(this.out_){const r=e.calculateExtent(i),o=Object(s.createOrUpdateFromCoordinates)([t.getPixelFromCoordinate(Object(s.getBottomLeft)(n)),t.getPixelFromCoordinate(Object(s.getTopRight)(n))]),a=e.getResolutionForExtent(o,i);Object(s.scaleFromCenter)(r,1/a),n=r}const o=e.constrainResolution(e.getResolutionForExtent(n,i));let a=Object(s.getCenter)(n);a=e.constrainCenter(a),e.animate({resolution:o,center:a,duration:this.duration_,easing:r.easeOut})},e.default=l},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(10),o=i(37),s=i(35);const a=function(t){s.default.call(this,{handleEvent:l});const e=t||{};this.condition_=e.condition?e.condition:o.targetNotEditable,this.delta_=e.delta?e.delta:1,this.duration_=void 0!==e.duration?e.duration:100};function l(t){let e=!1;if(t.type==r.default.KEYDOWN||t.type==r.default.KEYPRESS){const i=t.originalEvent.charCode;if(this.condition_(t)&&(i=="+".charCodeAt(0)||i=="-".charCodeAt(0))){const n=t.map,r=i=="+".charCodeAt(0)?this.delta_:-this.delta_,o=n.getView();Object(s.zoomByDelta)(o,r,void 0,this.duration_),t.preventDefault(),e=!0}}return!e}Object(n.inherits)(a,s.default),e.default=a},function(t,e,i){"use strict";i.r(e),i.d(e,"Mode",function(){return h});var n=i(1),r=i(34),o=i(37),s=i(59),a=i(10),l=i(47),u=i(35),c=i(18);const h={TRACKPAD:"trackpad",WHEEL:"wheel"},d=function(t){u.default.call(this,{handleEvent:f});const e=t||{};this.delta_=0,this.duration_=void 0!==e.duration?e.duration:250,this.timeout_=void 0!==e.timeout?e.timeout:80,this.useAnchor_=void 0===e.useAnchor||e.useAnchor,this.constrainResolution_=e.constrainResolution||!1,this.condition_=e.condition?e.condition:o.always,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_=void 0,this.trackpadDeltaPerZoom_=300,this.trackpadZoomBuffer_=1.5};function f(t){if(!this.condition_(t))return!0;const e=t.type;if(e!==a.default.WHEEL&&e!==a.default.MOUSEWHEEL)return!0;t.preventDefault();const i=t.map,n=t.originalEvent;let o;if(this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==a.default.WHEEL?(o=n.deltaY,l.FIREFOX&&n.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(o/=l.DEVICE_PIXEL_RATIO),n.deltaMode===WheelEvent.DOM_DELTA_LINE&&(o*=40)):t.type==a.default.MOUSEWHEEL&&(o=-n.wheelDeltaY,l.SAFARI&&(o/=3)),0===o)return!1;const u=Date.now();if(void 0===this.startTime_&&(this.startTime_=u),(!this.mode_||u-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(o)<4?h.TRACKPAD:h.WHEEL),this.mode_===h.TRACKPAD){const t=i.getView();this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):t.setHint(r.default.INTERACTING,1),this.trackpadTimeoutId_=setTimeout(this.decrementInteractingHint_.bind(this),this.trackpadEventGap_);let e=t.getResolution()*Math.pow(2,o/this.trackpadDeltaPerZoom_);const n=t.getMinResolution(),a=t.getMaxResolution();let l=0;if(e<n?(e=Math.max(e,n/this.trackpadZoomBuffer_),l=1):e>a&&(e=Math.min(e,a*this.trackpadZoomBuffer_),l=-1),this.lastAnchor_){const i=t.calculateCenterZoom(e,this.lastAnchor_);t.setCenter(t.constrainCenter(i))}return t.setResolution(e),0===l&&this.constrainResolution_&&t.animate({resolution:t.constrainResolution(e,o>0?-1:1),easing:s.easeOut,anchor:this.lastAnchor_,duration:this.duration_}),l>0?t.animate({resolution:n,easing:s.easeOut,anchor:this.lastAnchor_,duration:500}):l<0&&t.animate({resolution:a,easing:s.easeOut,anchor:this.lastAnchor_,duration:500}),this.startTime_=u,!1}this.delta_+=o;const c=Math.max(this.timeout_-(u-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),c),!1}Object(n.inherits)(d,u.default),d.prototype.decrementInteractingHint_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().setHint(r.default.INTERACTING,-1)},d.prototype.handleWheelZoom_=function(t){const e=t.getView();e.getAnimating()&&e.cancelAnimations();const i=Object(c.a)(this.delta_,-1,1);Object(u.zoomByDelta)(e,-i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.delta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},d.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},e.default=d},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(34),o=i(24),s=i(35),a=i(28),l=i(125);const u=function(t){a.default.call(this,{handleDownEvent:d,handleDragEvent:c,handleUpEvent:h});const e=t||{};this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==e.threshold?e.threshold:.3,this.duration_=void 0!==e.duration?e.duration:250};function c(t){let e=0;const i=this.targetPointers[0],n=this.targetPointers[1],r=Math.atan2(n.clientY-i.clientY,n.clientX-i.clientX);if(void 0!==this.lastAngle_){const t=r-this.lastAngle_;this.rotationDelta_+=t,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=t}this.lastAngle_=r;const o=t.map,u=o.getView();if(u.getConstraints().rotation===l.c)return;const c=o.getViewport().getBoundingClientRect(),h=Object(a.centroid)(this.targetPointers);if(h[0]-=c.left,h[1]-=c.top,this.anchor_=o.getCoordinateFromPixel(h),this.rotating_){const t=u.getRotation();o.render(),Object(s.rotateWithoutConstraints)(u,t+e,this.anchor_)}}function h(t){if(this.targetPointers.length<2){const e=t.map.getView();if(e.setHint(r.default.INTERACTING,-1),this.rotating_){const t=e.getRotation();Object(s.rotate)(e,t,this.anchor_,this.duration_)}return!1}return!0}function d(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().setHint(r.default.INTERACTING,1),!0}return!1}Object(n.inherits)(u,a.default),u.prototype.shouldStopEvent=o.a,e.default=u},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(34),o=i(24),s=i(35),a=i(28);const l=function(t){a.default.call(this,{handleDownEvent:h,handleDragEvent:u,handleUpEvent:c});const e=t||{};this.constrainResolution_=e.constrainResolution||!1,this.anchor_=null,this.duration_=void 0!==e.duration?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1};function u(t){let e=1;const i=this.targetPointers[0],n=this.targetPointers[1],r=i.clientX-n.clientX,o=i.clientY-n.clientY,l=Math.sqrt(r*r+o*o);void 0!==this.lastDistance_&&(e=this.lastDistance_/l),this.lastDistance_=l;const u=t.map,c=u.getView(),h=c.getResolution(),d=c.getMaxResolution(),f=c.getMinResolution();let p=h*e;p>d?(e=d/h,p=d):p<f&&(e=f/h,p=f),1!=e&&(this.lastScaleDelta_=e);const g=u.getViewport().getBoundingClientRect(),y=Object(a.centroid)(this.targetPointers);y[0]-=g.left,y[1]-=g.top,this.anchor_=u.getCoordinateFromPixel(y),u.render(),Object(s.zoomWithoutConstraints)(c,p,this.anchor_)}function c(t){if(this.targetPointers.length<2){const e=t.map.getView();e.setHint(r.default.INTERACTING,-1);const i=e.getResolution();if(this.constrainResolution_||i<e.getMinResolution()||i>e.getMaxResolution()){const t=this.lastScaleDelta_-1;Object(s.zoom)(e,i,this.anchor_,this.duration_,t)}return!1}return!0}function h(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().setHint(r.default.INTERACTING,1),!0}return!1}Object(n.inherits)(l,a.default),l.prototype.shouldStopEvent=o.a,e.default=l},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(138),o=i(25),s=i(94),a=i(40),l=i(26),u=i(4),c=i(2);const h="element",d="map",f="offset",p="position",g="positioning",y=function(t){o.default.call(this),this.options=t,this.id=t.id,this.insertFirst=void 0===t.insertFirst||t.insertFirst,this.stopEvent=void 0===t.stopEvent||t.stopEvent,this.element=document.createElement("DIV"),this.element.className=void 0!==t.className?t.className:"ol-overlay-container "+a.d,this.element.style.position="absolute",this.autoPan=void 0!==t.autoPan&&t.autoPan,this.autoPanAnimation=t.autoPanAnimation||{},this.autoPanMargin=void 0!==t.autoPanMargin?t.autoPanMargin:20,this.rendered={bottom_:"",left_:"",right_:"",top_:"",visible:!0},this.mapPostrenderListenerKey=null,Object(u.listen)(this,Object(o.getChangeEventType)(h),this.handleElementChanged,this),Object(u.listen)(this,Object(o.getChangeEventType)(d),this.handleMapChanged,this),Object(u.listen)(this,Object(o.getChangeEventType)(f),this.handleOffsetChanged,this),Object(u.listen)(this,Object(o.getChangeEventType)(p),this.handlePositionChanged,this),Object(u.listen)(this,Object(o.getChangeEventType)(g),this.handlePositioningChanged,this),void 0!==t.element&&this.setElement(t.element),this.setOffset(void 0!==t.offset?t.offset:[0,0]),this.setPositioning(void 0!==t.positioning?t.positioning:s.a.TOP_LEFT),void 0!==t.position&&this.setPosition(t.position)};Object(n.inherits)(y,o.default),y.prototype.getElement=function(){return this.get(h)},y.prototype.getId=function(){return this.id},y.prototype.getMap=function(){return this.get(d)},y.prototype.getOffset=function(){return this.get(f)},y.prototype.getPosition=function(){return this.get(p)},y.prototype.getPositioning=function(){return this.get(g)},y.prototype.handleElementChanged=function(){Object(l.d)(this.element);const t=this.getElement();t&&this.element.appendChild(t)},y.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(Object(l.e)(this.element),Object(u.unlistenByKey)(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const t=this.getMap();if(t){this.mapPostrenderListenerKey=Object(u.listen)(t,r.a.POSTRENDER,this.render,this),this.updatePixelPosition();const e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element)}},y.prototype.render=function(){this.updatePixelPosition()},y.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},y.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.get(p)&&this.autoPan&&this.panIntoView()},y.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},y.prototype.setElement=function(t){this.set(h,t)},y.prototype.setMap=function(t){this.set(d,t)},y.prototype.setOffset=function(t){this.set(f,t)},y.prototype.setPosition=function(t){this.set(p,t)},y.prototype.panIntoView=function(){const t=this.getMap();if(!t||!t.getTargetElement())return;const e=this.getRect(t.getTargetElement(),t.getSize()),i=this.getElement(),n=this.getRect(i,[Object(l.c)(i),Object(l.b)(i)]),r=this.autoPanMargin;if(!Object(c.containsExtent)(e,n)){const i=n[0]-e[0],o=e[2]-n[2],s=n[1]-e[1],a=e[3]-n[3],l=[0,0];if(i<0?l[0]=i-r:o<0&&(l[0]=Math.abs(o)+r),s<0?l[1]=s-r:a<0&&(l[1]=Math.abs(a)+r),0!==l[0]||0!==l[1]){const e=t.getView().getCenter(),i=t.getPixelFromCoordinate(e),n=[i[0]+l[0],i[1]+l[1]];t.getView().animate({center:t.getCoordinateFromPixel(n),duration:this.autoPanAnimation.duration,easing:this.autoPanAnimation.easing})}}},y.prototype.getRect=function(t,e){const i=t.getBoundingClientRect(),n=i.left+window.pageXOffset,r=i.top+window.pageYOffset;return[n,r,n+e[0],r+e[1]]},y.prototype.setPositioning=function(t){this.set(g,t)},y.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},y.prototype.updatePixelPosition=function(){const t=this.getMap(),e=this.getPosition();if(!t||!t.isRendered()||!e)return void this.setVisible(!1);const i=t.getPixelFromCoordinate(e),n=t.getSize();this.updateRenderedPosition(i,n)},y.prototype.updateRenderedPosition=function(t,e){const i=this.element.style,n=this.getOffset(),r=this.getPositioning();this.setVisible(!0);let o=n[0],a=n[1];if(r==s.a.BOTTOM_RIGHT||r==s.a.CENTER_RIGHT||r==s.a.TOP_RIGHT){""!==this.rendered.left_&&(this.rendered.left_=i.left="");const n=Math.round(e[0]-t[0]-o)+"px";this.rendered.right_!=n&&(this.rendered.right_=i.right=n)}else{""!==this.rendered.right_&&(this.rendered.right_=i.right=""),r!=s.a.BOTTOM_CENTER&&r!=s.a.CENTER_CENTER&&r!=s.a.TOP_CENTER||(o-=this.element.offsetWidth/2);const e=Math.round(t[0]+o)+"px";this.rendered.left_!=e&&(this.rendered.left_=i.left=e)}if(r==s.a.BOTTOM_LEFT||r==s.a.BOTTOM_CENTER||r==s.a.BOTTOM_RIGHT){""!==this.rendered.top_&&(this.rendered.top_=i.top="");const n=Math.round(e[1]-t[1]-a)+"px";this.rendered.bottom_!=n&&(this.rendered.bottom_=i.bottom=n)}else{""!==this.rendered.bottom_&&(this.rendered.bottom_=i.bottom=""),r!=s.a.CENTER_LEFT&&r!=s.a.CENTER_CENTER&&r!=s.a.CENTER_RIGHT||(a-=this.element.offsetHeight/2);const e=Math.round(t[1]+a)+"px";this.rendered.top_!=e&&(this.rendered.top_=i.top=e)}},y.prototype.getOptions=function(){return this.options},e.default=y},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(56),o=i(15);const s=function(t,e,i,n,o,s){r.default.call(this,t,e,s),this.consumers=0,this.extent_=null,this.format_=n,this.features_=null,this.loader_,this.projection_=null,this.replayGroups_={},this.tileLoadFunction_=o,this.url_=i};Object(n.inherits)(s,r.default);const a=[0,0,4096,4096];s.prototype.disposeInternal=function(){this.features_=null,this.replayGroups_={},this.state=o.a.ABORT,this.changed(),r.default.prototype.disposeInternal.call(this)},s.prototype.getExtent=function(){return this.extent_||a},s.prototype.getFormat=function(){return this.format_},s.prototype.getFeatures=function(){return this.features_},s.prototype.getKey=function(){return this.url_},s.prototype.getProjection=function(){return this.projection_},s.prototype.getReplayGroup=function(t,e){return this.replayGroups_[Object(n.getUid)(t)+","+e]},s.prototype.load=function(){this.state==o.a.IDLE&&(this.setState(o.a.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_(null,NaN,null))},s.prototype.onLoad=function(t,e,i){this.setProjection(e),this.setFeatures(t),this.setExtent(i)},s.prototype.onError=function(){this.setState(o.a.ERROR)},s.prototype.setExtent=function(t){this.extent_=t},s.prototype.setFeatures=function(t){this.features_=t,this.setState(o.a.LOADED)},s.prototype.setProjection=function(t){this.projection_=t},s.prototype.setReplayGroup=function(t,e,i){this.replayGroups_[Object(n.getUid)(t)+","+e]=i},s.prototype.setLoader=function(t){this.loader_=t},e.default=s},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(27),o=i(10),s={LEFT:37,UP:38,RIGHT:39,DOWN:40},a=i(37),l=i(35);const u=function(t){l.default.call(this,{handleEvent:c});const e=t||{};this.defaultCondition_=function(t){return Object(a.noModifierKeys)(t)&&Object(a.targetNotEditable)(t)},this.condition_=void 0!==e.condition?e.condition:this.defaultCondition_,this.duration_=void 0!==e.duration?e.duration:100,this.pixelDelta_=void 0!==e.pixelDelta?e.pixelDelta:128};function c(t){let e=!1;if(t.type==o.default.KEYDOWN){const i=t.originalEvent.keyCode;if(this.condition_(t)&&(i==s.DOWN||i==s.LEFT||i==s.RIGHT||i==s.UP)){const n=t.map.getView(),o=n.getResolution()*this.pixelDelta_;let a=0,u=0;i==s.DOWN?u=-o:i==s.LEFT?a=-o:i==s.RIGHT?a=o:u=o;const c=[a,u];Object(r.rotate)(c,n.getRotation()),Object(l.pan)(n,c,this.duration_),t.preventDefault(),e=!0}}return!e}Object(n.inherits)(u,l.default);e.default=u},function(t,e,i){"use strict";i.r(e),i.d(e,"defaults",function(){return T});var n=i(42),r=i(224),o=i(199),s=i(229),a=i(230),l=i(231),u=i(238),c=i(232),h=i(233),d=i(234),f=i(235);i.d(e,"DoubleClickZoom",function(){return o.default});var p=i(279);i.d(e,"DragAndDrop",function(){return p.default});var g=i(204);i.d(e,"DragBox",function(){return g.default}),i.d(e,"DragPan",function(){return s.default}),i.d(e,"DragRotate",function(){return a.default});var y=i(280);i.d(e,"DragRotateAndZoom",function(){return y.default}),i.d(e,"DragZoom",function(){return l.default});var m=i(281);i.d(e,"Draw",function(){return m.default});var _=i(282);i.d(e,"Extent",function(){return _.default});var v=i(35);i.d(e,"Interaction",function(){return v.default}),i.d(e,"KeyboardPan",function(){return u.default}),i.d(e,"KeyboardZoom",function(){return c.default});var b=i(283);i.d(e,"Modify",function(){return b.default}),i.d(e,"MouseWheelZoom",function(){return h.default}),i.d(e,"PinchRotate",function(){return d.default}),i.d(e,"PinchZoom",function(){return f.default});var S=i(28);i.d(e,"Pointer",function(){return S.default});var O=i(284);i.d(e,"Select",function(){return O.default});var C=i(285);i.d(e,"Snap",function(){return C.default});var x=i(286);function T(t){const e=t||{},i=new n.default,p=new r.default(-.005,.05,100);return(void 0===e.altShiftDragRotate||e.altShiftDragRotate)&&i.push(new a.default),(void 0===e.doubleClickZoom||e.doubleClickZoom)&&i.push(new o.default({delta:e.zoomDelta,duration:e.zoomDuration})),(void 0===e.dragPan||e.dragPan)&&i.push(new s.default({kinetic:p})),(void 0===e.pinchRotate||e.pinchRotate)&&i.push(new d.default),(void 0===e.pinchZoom||e.pinchZoom)&&i.push(new f.default({constrainResolution:e.constrainResolution,duration:e.zoomDuration})),(void 0===e.keyboard||e.keyboard)&&(i.push(new u.default),i.push(new c.default({delta:e.zoomDelta,duration:e.zoomDuration}))),(void 0===e.mouseWheelZoom||e.mouseWheelZoom)&&i.push(new h.default({constrainResolution:e.constrainResolution,duration:e.zoomDuration})),(void 0===e.shiftDragZoom||e.shiftDragZoom)&&i.push(new l.default({duration:e.zoomDuration})),i}i.d(e,"Translate",function(){return x.default})},function(t,e,i){"use strict";i.r(e),i.d(e,"loadFeaturesXhr",function(){return o}),i.d(e,"xhr",function(){return s});var n=i(24),r=i(103);function o(t,e,i,n){return function(o,s,a){const l=new XMLHttpRequest;l.open("GET","function"==typeof t?t(o,s,a):t,!0),e.getType()==r.a.ARRAY_BUFFER&&(l.responseType="arraybuffer"),l.onload=function(t){if(!l.status||l.status>=200&&l.status<300){const t=e.getType();let o;t==r.a.JSON||t==r.a.TEXT?o=l.responseText:t==r.a.XML?(o=l.responseXML)||(o=(new DOMParser).parseFromString(l.responseText,"application/xml")):t==r.a.ARRAY_BUFFER&&(o=l.response),o?i.call(this,e.readFeatures(o,{featureProjection:a}),e.readProjection(o),e.getLastExtent()):n.call(this)}else n.call(this)}.bind(this),l.onerror=function(){n.call(this)}.bind(this),l.send()}}function s(t,e){return o(t,e,function(t,e){this.addFeatures(t)},n.c)}},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(2),o=i(5),s=i(31),a=i(111),l=i(145);const u=function(t,e,i,n,r,o,s){a.default.call(this),this.context_=t,this.center_=e,this.extent_=o,this.pixelRatio_=s,this.size_=r,this.rotation_=n,this.resolution_=i,this.imageStyle_=null,this.fillStyle_=null,this.strokeStyle_=null,this.textStyle_=null};Object(n.inherits)(u,a.default),u.prototype.drawText_=function(t,e){const i=this.context_,n=t.getReplay(0,s.a.TEXT);n.setTextStyle(this.textStyle_),n.drawText(e,null),n.finish(i);n.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),n.getDeleteResourcesFunction(i)()},u.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},u.prototype.drawGeometry=function(t){switch(t.getType()){case o.default.POINT:this.drawPoint(t,null);break;case o.default.LINE_STRING:this.drawLineString(t,null);break;case o.default.POLYGON:this.drawPolygon(t,null);break;case o.default.MULTI_POINT:this.drawMultiPoint(t,null);break;case o.default.MULTI_LINE_STRING:this.drawMultiLineString(t,null);break;case o.default.MULTI_POLYGON:this.drawMultiPolygon(t,null);break;case o.default.GEOMETRY_COLLECTION:this.drawGeometryCollection(t,null);break;case o.default.CIRCLE:this.drawCircle(t,null)}},u.prototype.drawFeature=function(t,e){const i=e.getGeometryFunction()(t);i&&Object(r.intersects)(this.extent_,i.getExtent())&&(this.setStyle(e),this.drawGeometry(i))},u.prototype.drawGeometryCollection=function(t,e){const i=t.getGeometriesArray();let n,r;for(n=0,r=i.length;n<r;++n)this.drawGeometry(i[n])},u.prototype.drawPoint=function(t,e){const i=this.context_,n=new l.a(1,this.extent_),r=n.getReplay(0,s.a.IMAGE);r.setImageStyle(this.imageStyle_),r.drawPoint(t,e),r.finish(i);r.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),r.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(n,t)},u.prototype.drawMultiPoint=function(t,e){const i=this.context_,n=new l.a(1,this.extent_),r=n.getReplay(0,s.a.IMAGE);r.setImageStyle(this.imageStyle_),r.drawMultiPoint(t,e),r.finish(i);r.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),r.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(n,t)},u.prototype.drawLineString=function(t,e){const i=this.context_,n=new l.a(1,this.extent_),r=n.getReplay(0,s.a.LINE_STRING);r.setFillStrokeStyle(null,this.strokeStyle_),r.drawLineString(t,e),r.finish(i);r.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),r.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(n,t)},u.prototype.drawMultiLineString=function(t,e){const i=this.context_,n=new l.a(1,this.extent_),r=n.getReplay(0,s.a.LINE_STRING);r.setFillStrokeStyle(null,this.strokeStyle_),r.drawMultiLineString(t,e),r.finish(i);r.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),r.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(n,t)},u.prototype.drawPolygon=function(t,e){const i=this.context_,n=new l.a(1,this.extent_),r=n.getReplay(0,s.a.POLYGON);r.setFillStrokeStyle(this.fillStyle_,this.strokeStyle_),r.drawPolygon(t,e),r.finish(i);r.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),r.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(n,t)},u.prototype.drawMultiPolygon=function(t,e){const i=this.context_,n=new l.a(1,this.extent_),r=n.getReplay(0,s.a.POLYGON);r.setFillStrokeStyle(this.fillStyle_,this.strokeStyle_),r.drawMultiPolygon(t,e),r.finish(i);r.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),r.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(n,t)},u.prototype.drawCircle=function(t,e){const i=this.context_,n=new l.a(1,this.extent_),r=n.getReplay(0,s.a.CIRCLE);r.setFillStrokeStyle(this.fillStyle_,this.strokeStyle_),r.drawCircle(t,e),r.finish(i);r.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),r.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(n,t)},u.prototype.setImageStyle=function(t){this.imageStyle_=t},u.prototype.setFillStrokeStyle=function(t,e){this.fillStyle_=t,this.strokeStyle_=e},u.prototype.setTextStyle=function(t){this.textStyle_=t},e.default=u},function(t,e,i){"use strict";i.d(e,"b",function(){return f});var n=i(1),r=i(56),o=i(15),s=i(26),a=i(4),l=i(2),u=i(10),c=i(240),h=i(24);const d=function(t,e,i,n,s,c,f,p,g,y,m,_,v,b,S){if(r.default.call(this,t,e,{transition:0}),this.context_={},this.loader_,this.replayState_={},this.sourceTiles_=y,this.tileKeys=[],this.extent=null,this.sourceRevision_=i,this.wrappedTileCoord=c,this.loadListenerKeys_=[],this.sourceTileListenerKeys_=[],c){const r=this.extent=g.getTileCoordExtent(c),O=g.getResolution(S),C=p.getZForResolution(O),x=S!=t[0];let T=0;if(p.forEachTileCoord(r,C,function(t){let e=Object(l.getIntersection)(r,p.getTileCoordExtent(t));const i=p.getExtent();if(i&&(e=Object(l.getIntersection)(e,i,e)),Object(l.getWidth)(e)/O>=.5&&Object(l.getHeight)(e)/O>=.5){++T;const e=t.toString();let i=y[e];if(!i&&!x){const r=f(t,m,_);i=y[e]=new v(t,void 0==r?o.a.EMPTY:o.a.IDLE,void 0==r?"":r,n,s),this.sourceTileListenerKeys_.push(Object(a.listen)(i,u.default.CHANGE,b))}!i||x&&i.getState()!=o.a.LOADED||(i.consumers++,this.tileKeys.push(e))}}.bind(this)),x&&T==this.tileKeys.length&&this.finishLoading_(),S<=t[0]&&this.state!=o.a.LOADED)for(;S>g.getMinZoom();){const r=new d(t,e,i,n,s,c,f,p,g,y,m,_,v,h.c,--S);if(r.state==o.a.LOADED){this.interimTile=r;break}}}};function f(t,e){const i=Object(c.loadFeaturesXhr)(e,t.getFormat(),t.onLoad.bind(t),t.onError.bind(t));t.setLoader(i)}Object(n.inherits)(d,r.default),d.prototype.disposeInternal=function(){this.state=o.a.ABORT,this.changed(),this.interimTile&&this.interimTile.dispose();for(let t=0,e=this.tileKeys.length;t<e;++t){const e=this.tileKeys[t],i=this.getTile(e);i.consumers--,0==i.consumers&&(delete this.sourceTiles_[e],i.dispose())}this.tileKeys.length=0,this.sourceTiles_=null,this.loadListenerKeys_.forEach(a.unlistenByKey),this.loadListenerKeys_.length=0,this.sourceTileListenerKeys_.forEach(a.unlistenByKey),this.sourceTileListenerKeys_.length=0,r.default.prototype.disposeInternal.call(this)},d.prototype.getContext=function(t){const e=Object(n.getUid)(t).toString();return e in this.context_||(this.context_[e]=Object(s.a)()),this.context_[e]},d.prototype.getImage=function(t){return-1==this.getReplayState(t).renderedTileRevision?null:this.getContext(t).canvas},d.prototype.getReplayState=function(t){const e=Object(n.getUid)(t).toString();return e in this.replayState_||(this.replayState_[e]={dirty:!1,renderedRenderOrder:null,renderedRevision:-1,renderedTileRevision:-1}),this.replayState_[e]},d.prototype.getKey=function(){return this.tileKeys.join("/")+"-"+this.sourceRevision_},d.prototype.getTile=function(t){return this.sourceTiles_[t]},d.prototype.load=function(){let t=0;const e={};this.state==o.a.IDLE&&this.setState(o.a.LOADING),this.state==o.a.LOADING&&this.tileKeys.forEach(function(i){const r=this.getTile(i);if(r.state==o.a.IDLE&&(r.setLoader(this.loader_),r.load()),r.state==o.a.LOADING){const i=Object(a.listen)(r,u.default.CHANGE,function(i){const s=r.getState();if(s==o.a.LOADED||s==o.a.ERROR){const i=Object(n.getUid)(r);s==o.a.ERROR?e[i]=!0:(--t,delete e[i]),t-Object.keys(e).length==0&&this.finishLoading_()}}.bind(this));this.loadListenerKeys_.push(i),++t}}.bind(this)),t-Object.keys(e).length==0&&setTimeout(this.finishLoading_.bind(this),0)},d.prototype.finishLoading_=function(){let t=this.tileKeys.length,e=0;for(let i=t-1;i>=0;--i){const n=this.getTile(this.tileKeys[i]).getState();n!=o.a.LOADED&&--t,n==o.a.EMPTY&&++e}t==this.tileKeys.length?(this.loadListenerKeys_.forEach(a.unlistenByKey),this.loadListenerKeys_.length=0,this.setState(o.a.LOADED)):this.setState(e==this.tileKeys.length?o.a.EMPTY:o.a.ERROR)},e.a=d},function(t,e,i){"use strict";var n=i(1),r=i(12),o=i(26),s=i(2),a=i(55),l=i(11),u=i(212),c=i(31),h=i(24),d=i(84),f=i(74),p=i(5),g=i(82),y=i(270),m=i(18);function _(t,e,i,n,r,o,s,a){const l=[],u=t[e]>t[i-n],c=r.length;let h,d,f,p=t[e],g=t[e+1],y=t[e+=n],_=t[e+1],v=0,b=Math.sqrt(Math.pow(y-p,2)+Math.pow(_-g,2)),S="",O=0;for(let C=0;C<c;++C){d=u?c-C-1:C;const x=r.charAt(d),T=o(S=u?x+S:S+x)-O;O+=T;const E=s+T/2;for(;e<i-n&&v+b<E;)p=y,g=_,y=t[e+=n],_=t[e+1],v+=b,b=Math.sqrt(Math.pow(y-p,2)+Math.pow(_-g,2));const P=E-v;let j=Math.atan2(_-g,y-p);if(u&&(j+=j>0?-Math.PI:Math.PI),void 0!==f){let t=j-f;if(t+=t>Math.PI?-2*Math.PI:t<-Math.PI?2*Math.PI:0,Math.abs(t)>a)return null}const w=P/b,I=Object(m.c)(p,y,w),L=Object(m.c)(g,_,w);f==j?(u&&(h[0]=I,h[1]=L,h[2]=T/2),h[4]=S):(O=T,h=[I,L,T/2,j,S=x],u?l.unshift(h):l.push(h),f=j),s+=T}return l}var v=i(47),b=i(111),S=i(22);const O={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},C=[O.FILL],x=[O.STROKE],T=[O.BEGIN_PATH],E=[O.CLOSE_PATH];var P=O,j=i(69),w=i(14);const I=function(t,e,i,n,r,o){b.default.call(this),this.declutterTree=o,this.tolerance=t,this.maxExtent=e,this.overlaps=r,this.pixelRatio=n,this.maxLineWidth=0,this.resolution=i,this.alignFill_,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.coordinateCache_={},this.renderedTransform_=Object(w.c)(),this.hitDetectionInstructions=[],this.pixelCoordinates_=null,this.state={},this.viewRotation_=0};Object(n.inherits)(I,b.default);const L=Object(s.createEmpty)(),R=Object(w.c)();I.prototype.replayTextBackground_=function(t,e,i,n,r,o,s){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,n),t.lineTo.apply(t,r),t.lineTo.apply(t,e),o&&(this.alignFill_=o[2],this.fill_(t)),s&&(this.setStrokeStyle_(t,s),t.stroke())},I.prototype.replayImage_=function(t,e,i,n,r,o,a,l,u,c,h,d,f,p,g,y,m,_){const v=m||_;e-=r*=f,i-=o*=f;const b=g+c>n.width?n.width-c:g,O=l+h>n.height?n.height-h:l,C=y[3]+b*f+y[1],x=y[0]+O*f+y[2],T=e-y[3],E=i-y[0];let P,j,I,A;(v||0!==d)&&(P=[T,E],j=[T+C,E],I=[T+C,E+x],A=[T,E+x]);let M=null;if(0!==d){const t=e+r,n=i+o;M=Object(w.b)(R,t,n,1,1,d,-t,-n),Object(s.createOrUpdateEmpty)(L),Object(s.extendCoordinate)(L,Object(w.a)(R,P)),Object(s.extendCoordinate)(L,Object(w.a)(R,j)),Object(s.extendCoordinate)(L,Object(w.a)(R,I)),Object(s.extendCoordinate)(L,Object(w.a)(R,A))}else Object(s.createOrUpdate)(T,E,T+C,E+x,L);const F=t.canvas,k=_?_[2]*f/2:0,N=L[0]-k<=F.width&&L[2]+k>=0&&L[1]-k<=F.height&&L[3]+k>=0;if(p&&(e=Math.round(e),i=Math.round(i)),a){if(!N&&1==a[4])return;Object(s.extend)(a,L);const r=N?[t,M?M.slice(0):null,u,n,c,h,b,O,e,i,f]:null;r&&v&&r.push(m,_,P,j,I,A),a.push(r)}else N&&(v&&this.replayTextBackground_(t,P,j,I,A,m,_),Object(S.drawImage)(t,M,u,n,c,h,b,O,e,i,f))},I.prototype.applyPixelRatio=function(t){const e=this.pixelRatio;return 1==e?t:t.map(function(t){return t*e})},I.prototype.appendFlatCoordinates=function(t,e,i,n,r,o){let a=this.coordinates.length;const l=this.getBufferedMaxExtent();o&&(e+=n);const u=[t[e],t[e+1]],c=[NaN,NaN];let h,d,p,g=!0;for(h=e+n;h<i;h+=n)c[0]=t[h],c[1]=t[h+1],(p=Object(s.coordinateRelationship)(l,c))!==d?(g&&(this.coordinates[a++]=u[0],this.coordinates[a++]=u[1]),this.coordinates[a++]=c[0],this.coordinates[a++]=c[1],g=!1):p===f.a.INTERSECTING?(this.coordinates[a++]=c[0],this.coordinates[a++]=c[1],g=!1):g=!0,u[0]=c[0],u[1]=c[1],d=p;return(r&&g||h===e+n)&&(this.coordinates[a++]=u[0],this.coordinates[a++]=u[1]),a},I.prototype.drawCustomCoordinates_=function(t,e,i,n,r){for(let o=0,s=i.length;o<s;++o){const s=i[o],a=this.appendFlatCoordinates(t,e,s,n,!1,!1);r.push(a),e=s}return e},I.prototype.drawCustom=function(t,e,i){this.beginGeometry(t,e);const n=t.getType(),r=t.getStride(),o=this.coordinates.length;let s,a,l,u,c;if(n==p.default.MULTI_POLYGON){s=(t=t).getOrientedFlatCoordinates(),u=[];const e=t.getEndss();c=0;for(let t=0,i=e.length;t<i;++t){const i=[];c=this.drawCustomCoordinates_(s,c,e[t],r,i),u.push(i)}this.instructions.push([P.CUSTOM,o,u,t,i,g.c])}else n==p.default.POLYGON||n==p.default.MULTI_LINE_STRING?(l=[],s=n==p.default.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),c=this.drawCustomCoordinates_(s,0,t.getEnds(),r,l),this.instructions.push([P.CUSTOM,o,l,t,i,g.b])):n==p.default.LINE_STRING||n==p.default.MULTI_POINT?(s=t.getFlatCoordinates(),a=this.appendFlatCoordinates(s,0,s.length,r,!1,!1),this.instructions.push([P.CUSTOM,o,a,t,i,g.a])):n==p.default.POINT&&(s=t.getFlatCoordinates(),this.coordinates.push(s[0],s[1]),a=this.coordinates.length,this.instructions.push([P.CUSTOM,o,a,t,i]));this.endGeometry(t,e)},I.prototype.beginGeometry=function(t,e){this.beginGeometryInstruction1_=[P.BEGIN_GEOMETRY,e,0],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[P.BEGIN_GEOMETRY,e,0],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},I.prototype.fill_=function(t){if(this.alignFill_){const e=Object(w.a)(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.translate(e[0]%i,e[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.setTransform.apply(t,S.resetTransform)},I.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],v.CANVAS_LINE_DASH&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},I.prototype.renderDeclutter_=function(t,e){if(t&&t.length>5){const i=t[4];if(1==i||i==t.length-5){const i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};if(!this.declutterTree.collides(i)){this.declutterTree.insert(i);for(let e=5,i=t.length;e<i;++e){const i=t[e];i&&(i.length>11&&this.replayTextBackground_(i[0],i[13],i[14],i[15],i[16],i[11],i[12]),S.drawImage.apply(void 0,i))}}t.length=5,Object(s.createOrUpdateEmpty)(t)}}},I.prototype.replay_=function(t,e,i,o,u,c){let h;this.pixelCoordinates_&&Object(r.b)(e,this.renderedTransform_)?h=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),h=Object(a.c)(this.coordinates,0,this.coordinates.length,2,e,this.pixelCoordinates_),Object(w.i)(this.renderedTransform_,e));const d=!Object(l.isEmpty)(i);let f=0;const p=o.length;let g,m,v,b,O,C,x,T,E,I=0,L=0,R=0,A=null,M=null;const F=this.coordinateCache_,k=this.viewRotation_,N={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:k},D=this.instructions!=o||this.overlaps?0:200;let G,B,U;for(;f<p;){const e=o[f];switch(e[0]){case P.BEGIN_GEOMETRY:G=e[1],d&&i[Object(n.getUid)(G).toString()]||!G.getGeometry()?f=e[2]:void 0===c||Object(s.intersects)(c,G.getGeometry().getExtent())?++f:f=e[2]+1;break;case P.BEGIN_PATH:L>D&&(this.fill_(t),L=0),R>D&&(t.stroke(),R=0),L||R||(t.beginPath(),b=O=NaN),++f;break;case P.CIRCLE:const r=h[I=e[1]],o=h[I+1],a=h[I+2]-r,l=h[I+3]-o,p=Math.sqrt(a*a+l*l);t.moveTo(r+p,o),t.arc(r,o,p,0,2*Math.PI,!0),++f;break;case P.CLOSE_PATH:t.closePath(),++f;break;case P.CUSTOM:I=e[1],g=e[2];const w=e[3],V=e[4],Z=6==e.length?e[5]:void 0;N.geometry=w,N.feature=G,f in F||(F[f]=[]);const W=F[f];Z?Z(h,I,g,2,W):(W[0]=h[I],W[1]=h[I+1],W.length=2),V(W,N),++f;break;case P.DRAW_IMAGE:I=e[1],g=e[2],E=e[3],m=e[4],v=e[5],T=u?null:e[6];const H=e[7],z=e[8],Y=e[9],X=e[10],q=e[11];let K=e[12];const J=e[13],Q=e[14],$=e[15];let tt,et,it;for(e.length>16?(tt=e[16],et=e[17],it=e[18]):(tt=S.defaultPadding,et=it=!1),q&&(K+=k);I<g;I+=2)this.replayImage_(t,h[I],h[I+1],E,m,v,T,H,z,Y,X,K,J,Q,$,tt,et?A:null,it?M:null);this.renderDeclutter_(T,G),++f;break;case P.DRAW_CHARS:const nt=e[1],rt=e[2],ot=e[3];T=u?null:e[4];const st=e[5],at=e[6],lt=e[7],ut=e[8],ct=e[9],ht=e[10],dt=e[11],ft=e[12],pt=e[13],gt=e[14],yt=Object(y.a)(h,nt,rt,2),mt=ut(ft);if(st||mt<=yt){const e=this.textStates[pt].textAlign,i=_(h,nt,rt,2,ft,ut,(yt-mt)*j.b[e],lt);if(i){let e,n,r,o,s;if(ht)for(e=0,n=i.length;e<n;++e)r=(s=i[e])[4],o=this.getImage(r,pt,"",ht),m=s[2]+dt,v=ot*o.height+2*(.5-ot)*dt-ct,this.replayImage_(t,s[0],s[1],o,m,v,T,o.height,1,0,0,s[3],gt,!1,o.width,S.defaultPadding,null,null);if(at)for(e=0,n=i.length;e<n;++e)r=(s=i[e])[4],o=this.getImage(r,pt,at,""),m=s[2],v=ot*o.height-ct,this.replayImage_(t,s[0],s[1],o,m,v,T,o.height,1,0,0,s[3],gt,!1,o.width,S.defaultPadding,null,null)}}this.renderDeclutter_(T,G),++f;break;case P.END_GEOMETRY:if(void 0!==u){const t=u(G=e[1]);if(t)return t}++f;break;case P.FILL:D?L++:this.fill_(t),++f;break;case P.MOVE_TO_LINE_TO:for(I=e[1],g=e[2],B=h[I],x=(U=h[I+1])+.5|0,(C=B+.5|0)===b&&x===O||(t.moveTo(B,U),b=C,O=x),I+=2;I<g;I+=2)C=(B=h[I])+.5|0,x=(U=h[I+1])+.5|0,I!=g-2&&C===b&&x===O||(t.lineTo(B,U),b=C,O=x);++f;break;case P.SET_FILL_STYLE:A=e,this.alignFill_=e[2],L&&(this.fill_(t),L=0,R&&(t.stroke(),R=0)),t.fillStyle=e[1],++f;break;case P.SET_STROKE_STYLE:M=e,R&&(t.stroke(),R=0),this.setStrokeStyle_(t,e),++f;break;case P.STROKE:D?R++:t.stroke(),++f;break;default:++f}}L&&this.fill_(t),R&&t.stroke()},I.prototype.replay=function(t,e,i,n){this.viewRotation_=i,this.replay_(t,e,n,this.instructions,void 0,void 0)},I.prototype.replayHitDetection=function(t,e,i,n,r,o){return this.viewRotation_=i,this.replay_(t,e,n,this.hitDetectionInstructions,r,o)},I.prototype.reverseHitDetectionInstructions=function(){const t=this.hitDetectionInstructions;let e;t.reverse();const i=t.length;let n,o,s=-1;for(e=0;e<i;++e)(o=(n=t[e])[0])==P.END_GEOMETRY?s=e:o==P.BEGIN_GEOMETRY&&(n[2]=e,Object(r.k)(this.hitDetectionInstructions,s,e),s=-1)},I.prototype.setFillStrokeStyle=function(t,e){const i=this.state;if(t){const e=t.getColor();i.fillStyle=Object(d.asColorLike)(e||S.defaultFillStyle)}else i.fillStyle=void 0;if(e){const t=e.getColor();i.strokeStyle=Object(d.asColorLike)(t||S.defaultStrokeStyle);const n=e.getLineCap();i.lineCap=void 0!==n?n:S.defaultLineCap;const r=e.getLineDash();i.lineDash=r?r.slice():S.defaultLineDash;const o=e.getLineDashOffset();i.lineDashOffset=o||S.defaultLineDashOffset;const s=e.getLineJoin();i.lineJoin=void 0!==s?s:S.defaultLineJoin;const a=e.getWidth();i.lineWidth=void 0!==a?a:S.defaultLineWidth;const l=e.getMiterLimit();i.miterLimit=void 0!==l?l:S.defaultMiterLimit,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0},I.prototype.createFill=function(t,e){const i=t.fillStyle,n=[P.SET_FILL_STYLE,i];return"string"!=typeof i&&n.push(!0),n},I.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},I.prototype.createStroke=function(t){return[P.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},I.prototype.updateFillStyle=function(t,e,i){const n=t.fillStyle;"string"==typeof n&&t.currentFillStyle==n||(void 0!==n&&this.instructions.push(e.call(this,t,i)),t.currentFillStyle=n)},I.prototype.updateStrokeStyle=function(t,e){const i=t.strokeStyle,n=t.lineCap,o=t.lineDash,s=t.lineDashOffset,a=t.lineJoin,l=t.lineWidth,u=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=n||o!=t.currentLineDash&&!Object(r.b)(t.currentLineDash,o)||t.currentLineDashOffset!=s||t.currentLineJoin!=a||t.currentLineWidth!=l||t.currentMiterLimit!=u)&&(void 0!==i&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=n,t.currentLineDash=o,t.currentLineDashOffset=s,t.currentLineJoin=a,t.currentLineWidth=l,t.currentMiterLimit=u)},I.prototype.endGeometry=function(t,e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const i=[P.END_GEOMETRY,e];this.instructions.push(i),this.hitDetectionInstructions.push(i)},I.prototype.finish=h.c,I.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Object(s.clone)(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;Object(s.buffer)(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_};var A=I;const M=function(t,e,i,n,r,o){A.call(this,t,e,i,n,r,o),this.declutterGroup_=null,this.hitDetectionImage_=null,this.image_=null,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.snapToPixel_=void 0,this.width_=void 0};Object(n.inherits)(M,A),M.prototype.drawCoordinates_=function(t,e,i,n){return this.appendFlatCoordinates(t,e,i,n,!1,!1)},M.prototype.drawPoint=function(t,e){if(!this.image_)return;this.beginGeometry(t,e);const i=t.getFlatCoordinates(),n=t.getStride(),r=this.coordinates.length,o=this.drawCoordinates_(i,0,i.length,n);this.instructions.push([P.DRAW_IMAGE,r,o,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.snapToPixel_,this.width_]),this.hitDetectionInstructions.push([P.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.snapToPixel_,this.width_]),this.endGeometry(t,e)},M.prototype.drawMultiPoint=function(t,e){if(!this.image_)return;this.beginGeometry(t,e);const i=t.getFlatCoordinates(),n=t.getStride(),r=this.coordinates.length,o=this.drawCoordinates_(i,0,i.length,n);this.instructions.push([P.DRAW_IMAGE,r,o,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.snapToPixel_,this.width_]),this.hitDetectionInstructions.push([P.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.snapToPixel_,this.width_]),this.endGeometry(t,e)},M.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.snapToPixel_=void 0,this.width_=void 0},M.prototype.setImageStyle=function(t,e){const i=t.getAnchor(),n=t.getSize(),r=t.getHitDetectionImage(1),o=t.getImage(1),s=t.getOrigin();this.anchorX_=i[0],this.anchorY_=i[1],this.declutterGroup_=e,this.hitDetectionImage_=r,this.image_=o,this.height_=n[1],this.opacity_=t.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScale(),this.snapToPixel_=t.getSnapToPixel(),this.width_=n[0]};var F=M;const k=function(t,e,i,n,r,o){A.call(this,t,e,i,n,r,o)};Object(n.inherits)(k,A),k.prototype.drawFlatCoordinates_=function(t,e,i,n){const r=this.coordinates.length,o=this.appendFlatCoordinates(t,e,i,n,!1,!1),s=[P.MOVE_TO_LINE_TO,r,o];return this.instructions.push(s),this.hitDetectionInstructions.push(s),i},k.prototype.drawLineString=function(t,e){const i=this.state,n=i.strokeStyle,r=i.lineWidth;if(void 0===n||void 0===r)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([P.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],T);const o=t.getFlatCoordinates(),s=t.getStride();this.drawFlatCoordinates_(o,0,o.length,s),this.hitDetectionInstructions.push(x),this.endGeometry(t,e)},k.prototype.drawMultiLineString=function(t,e){const i=this.state,n=i.strokeStyle,r=i.lineWidth;if(void 0===n||void 0===r)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([P.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],T);const o=t.getEnds(),s=t.getFlatCoordinates(),a=t.getStride();let l=0;for(let t=0,e=o.length;t<e;++t)l=this.drawFlatCoordinates_(s,l,o[t],a);this.hitDetectionInstructions.push(x),this.endGeometry(t,e)},k.prototype.finish=function(){const t=this.state;void 0!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(x),this.reverseHitDetectionInstructions(),this.state=null},k.prototype.applyStroke=function(t){void 0!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(x),t.lastStroke=this.coordinates.length),t.lastStroke=0,A.prototype.applyStroke.call(this,t),this.instructions.push(T)};var N=k,D=i(63),G=i(118);const B=function(t,e,i,n,r,o){A.call(this,t,e,i,n,r,o)};Object(n.inherits)(B,A),B.prototype.drawFlatCoordinatess_=function(t,e,i,n){const r=this.state,o=void 0!==r.fillStyle,s=void 0!=r.strokeStyle,a=i.length;this.instructions.push(T),this.hitDetectionInstructions.push(T);for(let r=0;r<a;++r){const o=i[r],a=this.coordinates.length,l=this.appendFlatCoordinates(t,e,o,n,!0,!s),u=[P.MOVE_TO_LINE_TO,a,l];this.instructions.push(u),this.hitDetectionInstructions.push(u),s&&(this.instructions.push(E),this.hitDetectionInstructions.push(E)),e=o}return o&&(this.instructions.push(C),this.hitDetectionInstructions.push(C)),s&&(this.instructions.push(x),this.hitDetectionInstructions.push(x)),e},B.prototype.drawCircle=function(t,e){const i=this.state,n=i.fillStyle,r=i.strokeStyle;if(void 0===n&&void 0===r)return;this.setFillStrokeStyles_(t),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([P.SET_FILL_STYLE,Object(D.asString)(S.defaultFillStyle)]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([P.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const o=t.getFlatCoordinates(),s=t.getStride(),a=this.coordinates.length;this.appendFlatCoordinates(o,0,o.length,s,!1,!1);const l=[P.CIRCLE,a];this.instructions.push(T,l),this.hitDetectionInstructions.push(T,l),this.hitDetectionInstructions.push(C),void 0!==i.fillStyle&&this.instructions.push(C),void 0!==i.strokeStyle&&(this.instructions.push(x),this.hitDetectionInstructions.push(x)),this.endGeometry(t,e)},B.prototype.drawPolygon=function(t,e){const i=this.state,n=i.fillStyle,r=i.strokeStyle;if(void 0===n&&void 0===r)return;this.setFillStrokeStyles_(t),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([P.SET_FILL_STYLE,Object(D.asString)(S.defaultFillStyle)]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([P.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const o=t.getEnds(),s=t.getOrientedFlatCoordinates(),a=t.getStride();this.drawFlatCoordinatess_(s,0,o,a),this.endGeometry(t,e)},B.prototype.drawMultiPolygon=function(t,e){const i=this.state,n=i.fillStyle,r=i.strokeStyle;if(void 0===n&&void 0===r)return;this.setFillStrokeStyles_(t),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([P.SET_FILL_STYLE,Object(D.asString)(S.defaultFillStyle)]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([P.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const o=t.getEndss(),s=t.getOrientedFlatCoordinates(),a=t.getStride();let l=0;for(let t=0,e=o.length;t<e;++t)l=this.drawFlatCoordinatess_(s,l,o[t],a);this.endGeometry(t,e)},B.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(0!==t){const e=this.coordinates;for(let i=0,n=e.length;i<n;++i)e[i]=Object(G.e)(e[i],t)}},B.prototype.setFillStrokeStyles_=function(t){const e=this.state;void 0!==e.fillStyle&&this.updateFillStyle(e,this.createFill,t),void 0!==e.strokeStyle&&this.updateStrokeStyle(e,this.applyStroke)};var U=B;function V(t,e,i,n,r){let o,s,a,l,u,c,h,d,f,p,g=i,y=i,m=0,_=0,v=i;for(s=i;s<n;s+=r){const i=e[s],n=e[s+1];void 0!==u&&(f=i-u,p=n-c,l=Math.sqrt(f*f+p*p),void 0!==h&&(_+=a,(o=Math.acos((h*f+d*p)/(a*l)))>t&&(_>m&&(m=_,g=v,y=s),_=0,v=s-r)),a=l,h=f,d=p),u=i,c=n}return(_+=l)>m?[v,s]:[g,y]}var Z=i(271);const W=function(t,e,i,n,r,o){A.call(this,t,e,i,n,r,o),this.declutterGroup_,this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.widths_={},S.labelCache.prune()};Object(n.inherits)(W,A),W.prototype.drawText=function(t,e){const i=this.textFillState_,n=this.textStrokeState_,r=this.textState_;if(""===this.text_||!r||!i&&!n)return;let o=this.coordinates.length;const a=t.getType();let l,u,c=null,h=2,d=2;if(r.placement===Z.a.LINE){if(!Object(s.intersects)(this.getBufferedMaxExtent(),t.getExtent()))return;let i;if(c=t.getFlatCoordinates(),d=t.getStride(),a==p.default.LINE_STRING)i=[c.length];else if(a==p.default.MULTI_LINE_STRING)i=t.getEnds();else if(a==p.default.POLYGON)i=t.getEnds().slice(0,1);else if(a==p.default.MULTI_POLYGON){const e=t.getEndss();for(i=[],l=0,u=e.length;l<u;++l)i.push(e[l][0])}this.beginGeometry(t,e);const n=r.textAlign;let f,g=0;for(let t=0,e=i.length;t<e;++t){if(void 0==n){const e=V(r.maxAngle,c,g,i[t],d);g=e[0],f=e[1]}else f=i[t];for(l=g;l<f;l+=d)this.coordinates.push(c[l],c[l+1]);h=this.coordinates.length,g=i[t],this.drawChars_(o,h,this.declutterGroup_),o=h}this.endGeometry(t,e)}else{const i=this.getImage(this.text_,this.textKey_,this.fillKey_,this.strokeKey_),n=i.width/this.pixelRatio;switch(a){case p.default.POINT:case p.default.MULTI_POINT:h=(c=t.getFlatCoordinates()).length;break;case p.default.LINE_STRING:c=t.getFlatMidpoint();break;case p.default.CIRCLE:c=t.getCenter();break;case p.default.MULTI_LINE_STRING:h=(c=t.getFlatMidpoints()).length;break;case p.default.POLYGON:if(c=t.getFlatInteriorPoint(),!r.overflow&&c[2]/this.resolution<n)return;d=3;break;case p.default.MULTI_POLYGON:const e=t.getFlatInteriorPoints();for(c=[],l=0,u=e.length;l<u;l+=3)(r.overflow||e[l+2]/this.resolution>=n)&&c.push(e[l],e[l+1]);if(0==(h=c.length))return}h=this.appendFlatCoordinates(c,0,h,d,!1,!1),(r.backgroundFill||r.backgroundStroke)&&(this.setFillStrokeStyle(r.backgroundFill,r.backgroundStroke),r.backgroundFill&&(this.updateFillStyle(this.state,this.createFill,t),this.hitDetectionInstructions.push(this.createFill(this.state,t))),r.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e),this.drawTextImage_(i,o,h),this.endGeometry(t,e)}},W.prototype.getImage=function(t,e,i,n){let r;const s=n+e+t+i+this.pixelRatio;if(!S.labelCache.containsKey(s)){const a=n?this.strokeStates[n]||this.textStrokeState_:null,l=i?this.fillStates[i]||this.textFillState_:null,u=this.textStates[e]||this.textState_,c=this.pixelRatio,h=u.scale*c,d=j.b[u.textAlign||S.defaultTextAlign],f=n&&a.lineWidth?a.lineWidth:0,p=t.split("\n"),g=p.length,y=[],m=function(t,e,i){const n=e.length;let r=0;for(let o=0;o<n;++o){const n=Object(S.measureTextWidth)(t,e[o]);r=Math.max(r,n),i.push(n)}return r}(u.font,p,y),_=Object(S.measureTextHeight)(u.font),b=_*g,O=m+f,C=Object(o.a)(Math.ceil(O*h),Math.ceil((b+f)*h));r=C.canvas,S.labelCache.set(s,r),1!=h&&C.scale(h,h),C.font=u.font,n&&(C.strokeStyle=a.strokeStyle,C.lineWidth=f,C.lineCap=a.lineCap,C.lineJoin=a.lineJoin,C.miterLimit=a.miterLimit,v.CANVAS_LINE_DASH&&a.lineDash.length&&(C.setLineDash(a.lineDash),C.lineDashOffset=a.lineDashOffset)),i&&(C.fillStyle=l.fillStyle),C.textBaseline="middle",C.textAlign="center";const x=.5-d,T=d*r.width/h+x*f;let E;if(n)for(E=0;E<g;++E)C.strokeText(p[E],T+x*y[E],.5*(f+_)+E*_);if(i)for(E=0;E<g;++E)C.fillText(p[E],T+x*y[E],.5*(f+_)+E*_)}return S.labelCache.get(s)},W.prototype.drawTextImage_=function(t,e,i){const n=this.textState_,r=this.textStrokeState_,o=this.pixelRatio,s=j.b[n.textAlign||S.defaultTextAlign],a=j.b[n.textBaseline],l=r&&r.lineWidth?r.lineWidth:0,u=s*t.width/o+2*(.5-s)*l,c=a*t.height/o+2*(.5-a)*l;this.instructions.push([P.DRAW_IMAGE,e,i,t,(u-this.textOffsetX_)*o,(c-this.textOffsetY_)*o,this.declutterGroup_,t.height,1,0,0,this.textRotateWithView_,this.textRotation_,1,!0,t.width,n.padding==S.defaultPadding?S.defaultPadding:n.padding.map(function(t){return t*o}),!!n.backgroundFill,!!n.backgroundStroke]),this.hitDetectionInstructions.push([P.DRAW_IMAGE,e,i,t,(u-this.textOffsetX_)*o,(c-this.textOffsetY_)*o,this.declutterGroup_,t.height,1,0,0,this.textRotateWithView_,this.textRotation_,1/o,!0,t.width,n.padding,!!n.backgroundFill,!!n.backgroundStroke])},W.prototype.drawChars_=function(t,e,i){const n=this.textStrokeState_,r=this.textState_,o=this.textFillState_,s=this.strokeKey_;n&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:n.strokeStyle,lineCap:n.lineCap,lineDashOffset:n.lineDashOffset,lineWidth:n.lineWidth,lineJoin:n.lineJoin,miterLimit:n.miterLimit,lineDash:n.lineDash}));const a=this.textKey_;this.textKey_ in this.textStates||(this.textStates[this.textKey_]={font:r.font,textAlign:r.textAlign||S.defaultTextAlign,scale:r.scale});const l=this.fillKey_;o&&(l in this.fillStates||(this.fillStates[l]={fillStyle:o.fillStyle}));const u=this.pixelRatio,c=j.b[r.textBaseline],h=this.textOffsetY_*u,d=this.text_,f=r.font,p=r.scale,g=n?n.lineWidth*p/2:0;let y=this.widths_[f];y||(this.widths_[f]=y={}),this.instructions.push([P.DRAW_CHARS,t,e,c,i,r.overflow,l,r.maxAngle,function(t){let e=y[t];return e||(e=y[t]=Object(S.measureTextWidth)(f,t)),e*p*u},h,s,g*u,d,a,1]),this.hitDetectionInstructions.push([P.DRAW_CHARS,t,e,c,i,r.overflow,l,r.maxAngle,function(t){let e=y[t];return e||(e=y[t]=Object(S.measureTextWidth)(f,t)),e*p},h,s,g,d,a,1/u])},W.prototype.setTextStyle=function(t,e){let i,r,o;if(t){this.declutterGroup_=e;const s=t.getFill();s?((r=this.textFillState_)||(r=this.textFillState_={}),r.fillStyle=Object(d.asColorLike)(s.getColor()||S.defaultFillStyle)):r=this.textFillState_=null;const a=t.getStroke();if(a){(o=this.textStrokeState_)||(o=this.textStrokeState_={});const t=a.getLineDash(),e=a.getLineDashOffset(),i=a.getWidth(),n=a.getMiterLimit();o.lineCap=a.getLineCap()||S.defaultLineCap,o.lineDash=t?t.slice():S.defaultLineDash,o.lineDashOffset=void 0===e?S.defaultLineDashOffset:e,o.lineJoin=a.getLineJoin()||S.defaultLineJoin,o.lineWidth=void 0===i?S.defaultLineWidth:i,o.miterLimit=void 0===n?S.defaultMiterLimit:n,o.strokeStyle=Object(d.asColorLike)(a.getColor()||S.defaultStrokeStyle)}else o=this.textStrokeState_=null;i=this.textState_;const l=t.getFont()||S.defaultFont;Object(S.checkFont)(l);const u=t.getScale();i.overflow=t.getOverflow(),i.font=l,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.textBaseline=t.getTextBaseline()||S.defaultTextBaseline,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||S.defaultPadding,i.scale=void 0===u?1:u;const c=t.getOffsetX(),h=t.getOffsetY(),f=t.getRotateWithView(),p=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===c?0:c,this.textOffsetY_=void 0===h?0:h,this.textRotateWithView_=void 0!==f&&f,this.textRotation_=void 0===p?0:p,this.strokeKey_=o?("string"==typeof o.strokeStyle?o.strokeStyle:Object(n.getUid)(o.strokeStyle))+o.lineCap+o.lineDashOffset+"|"+o.lineWidth+o.lineJoin+o.miterLimit+"["+o.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?"),this.fillKey_=r?"string"==typeof r.fillStyle?r.fillStyle:"|"+Object(n.getUid)(r.fillStyle):""}else this.text_=""};var H=W;i.d(e,"b",function(){return K});const z={Circle:U,Default:A,Image:F,LineString:N,Polygon:U,Text:H},Y=function(t,e,i,n,r,s,a){u.a.call(this),this.declutterTree_=s,this.declutterGroup_=null,this.tolerance_=t,this.maxExtent_=e,this.overlaps_=r,this.pixelRatio_=n,this.resolution_=i,this.renderBuffer_=a,this.replaysByZIndex_={},this.hitDetectionContext_=Object(o.a)(1,1),this.hitDetectionTransform_=Object(w.c)()};Object(n.inherits)(Y,u.a);const X={0:[[!0]]};function q(t,e,i){let n;const r=Math.floor(t.length/2);if(e>=r)for(n=r;n<e;n++)t[n][i]=!0;else if(e<r)for(n=e+1;n<r;n++)t[n][i]=!0}function K(t,e,i){const n=Object.keys(t).map(Number).sort(r.i),o={};for(let r=0,s=n.length;r<s;++r){const s=t[n[r].toString()];for(let t=0,n=s.length;t<n;){const n=s[t++],r=s[t++];n.replay(e,r,i,o)}}}Y.prototype.addDeclutter=function(t){let e=null;return this.declutterTree_&&(t?(e=this.declutterGroup_)[4]++:(e=this.declutterGroup_=Object(s.createEmpty)()).push(1)),e},Y.prototype.clip=function(t,e){const i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()},Y.prototype.hasReplays=function(t){for(const e in this.replaysByZIndex_){const i=this.replaysByZIndex_[e];for(let e=0,n=t.length;e<n;++e)if(t[e]in i)return!0}return!1},Y.prototype.finish=function(){for(const t in this.replaysByZIndex_){const e=this.replaysByZIndex_[t];for(const t in e)e[t].finish()}},Y.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,o,a,l){const u=2*(n=Math.round(n))+1,h=Object(w.b)(this.hitDetectionTransform_,n+.5,n+.5,1/e,-1/e,-i,-t[0],-t[1]),d=this.hitDetectionContext_;let f;d.canvas.width!==u||d.canvas.height!==u?(d.canvas.width=u,d.canvas.height=u):d.clearRect(0,0,u,u),void 0!==this.renderBuffer_&&(f=Object(s.createEmpty)(),Object(s.extendCoordinate)(f,t),Object(s.buffer)(f,e*(this.renderBuffer_+n),f));const p=function(t){if(void 0!==X[t])return X[t];const e=2*t+1,i=new Array(e);for(let t=0;t<e;t++)i[t]=new Array(e);let n=t,r=0,o=0;for(;n>=r;)q(i,t+n,t+r),q(i,t+r,t+n),q(i,t-r,t+n),q(i,t-n,t+r),q(i,t-n,t-r),q(i,t-r,t-n),q(i,t+r,t-n),q(i,t+n,t-r),2*((o+=1+2*++r)-n)+1>0&&(o+=1-2*(n-=1));return X[t]=i,i}(n);let g,y;function m(t){const e=d.getImageData(0,0,u,u).data;for(let i=0;i<u;i++)for(let n=0;n<u;n++)if(p[i][n]&&e[4*(n*u+i)+3]>0){let e;return(!g||y!=c.a.IMAGE&&y!=c.a.TEXT||-1!==g.indexOf(t))&&(e=a(t)),e||void d.clearRect(0,0,u,u)}}this.declutterTree_&&(g=this.declutterTree_.all().map(function(t){return t.value}));const _=Object.keys(this.replaysByZIndex_).map(Number);let v,b,S,O,C;for(_.sort(r.i),v=_.length-1;v>=0;--v){const t=_[v].toString();for(S=this.replaysByZIndex_[t],b=j.a.length-1;b>=0;--b)if(void 0!==(O=S[y=j.a[b]]))if(!l||y!=c.a.IMAGE&&y!=c.a.TEXT){if(C=O.replayHitDetection(d,h,i,o,m,f))return C}else{const e=l[t];e?e.push(O,h.slice(0)):l[t]=[O,h.slice(0)]}}},Y.prototype.getClipCoords=function(t){const e=this.maxExtent_,i=e[0],n=e[1],r=e[2],o=e[3],s=[i,n,i,o,r,o,r,n];return Object(a.c)(s,0,8,2,t,s),s},Y.prototype.getReplay=function(t,e){const i=void 0!==t?t.toString():"0";let n=this.replaysByZIndex_[i];void 0===n&&(n={},this.replaysByZIndex_[i]=n);let r=n[e];if(void 0===r){r=new(0,z[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_,this.overlaps_,this.declutterTree_),n[e]=r}return r},Y.prototype.getReplays=function(){return this.replaysByZIndex_},Y.prototype.isEmpty=function(){return Object(l.isEmpty)(this.replaysByZIndex_)},Y.prototype.replay=function(t,e,i,n,o,s){const a=Object.keys(this.replaysByZIndex_).map(Number);a.sort(r.i),t.save(),this.clip(t,e);const l=o||j.a;let u,h,d,f,p,g;for(u=0,h=a.length;u<h;++u){const r=a[u].toString();for(p=this.replaysByZIndex_[r],d=0,f=l.length;d<f;++d){const o=l[d];if(void 0!==(g=p[o]))if(!s||o!=c.a.IMAGE&&o!=c.a.TEXT)g.replay(t,e,i,n);else{const t=s[r];t?t.push(g,e.slice(0)):s[r]=[g,e.slice(0)]}}}t.restore()};e.a=Y},function(t,e,i){"use strict";var n=i(1),r=i(4),o=i(61),s=i(47),a=i(93),l=i(176),u=i(124);const c=function(t){const e={MSPointerDown:this.msPointerDown,MSPointerMove:this.msPointerMove,MSPointerUp:this.msPointerUp,MSPointerOut:this.msPointerOut,MSPointerOver:this.msPointerOver,MSPointerCancel:this.msPointerCancel,MSGotPointerCapture:this.msGotPointerCapture,MSLostPointerCapture:this.msLostPointerCapture};u.a.call(this,t,e),this.pointerMap=t.pointerMap};Object(n.inherits)(c,u.a);const h=["","unavailable","touch","pen","mouse"];c.prototype.prepareEvent_=function(t){let e=t;return"number"==typeof t.pointerType&&((e=this.dispatcher.cloneEvent(t,t)).pointerType=h[t.pointerType]),e},c.prototype.cleanup=function(t){delete this.pointerMap[t.toString()]},c.prototype.msPointerDown=function(t){this.pointerMap[t.pointerId.toString()]=t;const e=this.prepareEvent_(t);this.dispatcher.down(e,t)},c.prototype.msPointerMove=function(t){const e=this.prepareEvent_(t);this.dispatcher.move(e,t)},c.prototype.msPointerUp=function(t){const e=this.prepareEvent_(t);this.dispatcher.up(e,t),this.cleanup(t.pointerId)},c.prototype.msPointerOut=function(t){const e=this.prepareEvent_(t);this.dispatcher.leaveOut(e,t)},c.prototype.msPointerOver=function(t){const e=this.prepareEvent_(t);this.dispatcher.enterOver(e,t)},c.prototype.msPointerCancel=function(t){const e=this.prepareEvent_(t);this.dispatcher.cancel(e,t),this.cleanup(t.pointerId)},c.prototype.msLostPointerCapture=function(t){const e=this.dispatcher.makeEvent("lostpointercapture",t,t);this.dispatcher.dispatchEvent(e)},c.prototype.msGotPointerCapture=function(t){const e=this.dispatcher.makeEvent("gotpointercapture",t,t);this.dispatcher.dispatchEvent(e)};var d=c;const f=function(t){const e={pointerdown:this.pointerDown,pointermove:this.pointerMove,pointerup:this.pointerUp,pointerout:this.pointerOut,pointerover:this.pointerOver,pointercancel:this.pointerCancel,gotpointercapture:this.gotPointerCapture,lostpointercapture:this.lostPointerCapture};u.a.call(this,t,e)};Object(n.inherits)(f,u.a),f.prototype.pointerDown=function(t){this.dispatcher.fireNativeEvent(t)},f.prototype.pointerMove=function(t){this.dispatcher.fireNativeEvent(t)},f.prototype.pointerUp=function(t){this.dispatcher.fireNativeEvent(t)},f.prototype.pointerOut=function(t){this.dispatcher.fireNativeEvent(t)},f.prototype.pointerOver=function(t){this.dispatcher.fireNativeEvent(t)},f.prototype.pointerCancel=function(t){this.dispatcher.fireNativeEvent(t)},f.prototype.lostPointerCapture=function(t){this.dispatcher.fireNativeEvent(t)},f.prototype.gotPointerCapture=function(t){this.dispatcher.fireNativeEvent(t)};var p=f,g=i(29);const y=function(t,e,i){g.default.call(this,t),this.originalEvent=e;const n=i||{};this.buttons=this.getButtons_(n),this.pressure=this.getPressure_(n,this.buttons),this.bubbles="bubbles"in n&&n.bubbles,this.cancelable="cancelable"in n&&n.cancelable,this.view="view"in n?n.view:null,this.detail="detail"in n?n.detail:null,this.screenX="screenX"in n?n.screenX:0,this.screenY="screenY"in n?n.screenY:0,this.clientX="clientX"in n?n.clientX:0,this.clientY="clientY"in n?n.clientY:0,this.ctrlKey="ctrlKey"in n&&n.ctrlKey,this.altKey="altKey"in n&&n.altKey,this.shiftKey="shiftKey"in n&&n.shiftKey,this.metaKey="metaKey"in n&&n.metaKey,this.button="button"in n?n.button:0,this.relatedTarget="relatedTarget"in n?n.relatedTarget:null,this.pointerId="pointerId"in n?n.pointerId:0,this.width="width"in n?n.width:0,this.height="height"in n?n.height:0,this.tiltX="tiltX"in n?n.tiltX:0,this.tiltY="tiltY"in n?n.tiltY:0,this.pointerType="pointerType"in n?n.pointerType:"",this.hwTimestamp="hwTimestamp"in n?n.hwTimestamp:0,this.isPrimary="isPrimary"in n&&n.isPrimary,e.preventDefault&&(this.preventDefault=function(){e.preventDefault()})};Object(n.inherits)(y,g.default);let m=!1;y.prototype.getButtons_=function(t){let e;if(t.buttons||m)e=t.buttons;else switch(t.which){case 1:e=1;break;case 2:e=4;break;case 3:e=2;break;default:e=0}return e},y.prototype.getPressure_=function(t,e){let i=0;return i=t.pressure?t.pressure:e?.5:0},function(){try{const t=new MouseEvent("click",{buttons:1});m=1===t.buttons}catch(t){}}();var _=y,v=i(12);const b=function(t,e){const i={touchstart:this.touchstart,touchmove:this.touchmove,touchend:this.touchend,touchcancel:this.touchcancel};u.a.call(this,t,i),this.pointerMap=t.pointerMap,this.mouseSource=e,this.firstTouchId_=void 0,this.clickCount_=0,this.resetId_=void 0,this.dedupTimeout_=2500};Object(n.inherits)(b,u.a);b.prototype.isPrimaryTouch_=function(t){return this.firstTouchId_===t.identifier},b.prototype.setPrimaryTouch_=function(t){const e=Object.keys(this.pointerMap).length;(0===e||1===e&&l.a.toString()in this.pointerMap)&&(this.firstTouchId_=t.identifier,this.cancelResetClickCount_())},b.prototype.removePrimaryPointer_=function(t){t.isPrimary&&(this.firstTouchId_=void 0,this.resetClickCount_())},b.prototype.resetClickCount_=function(){this.resetId_=setTimeout(this.resetClickCountHandler_.bind(this),200)},b.prototype.resetClickCountHandler_=function(){this.clickCount_=0,this.resetId_=void 0},b.prototype.cancelResetClickCount_=function(){void 0!==this.resetId_&&clearTimeout(this.resetId_)},b.prototype.touchToPointer_=function(t,e){const i=this.dispatcher.cloneEvent(t,e);return i.pointerId=e.identifier+2,i.bubbles=!0,i.cancelable=!0,i.detail=this.clickCount_,i.button=0,i.buttons=1,i.width=e.webkitRadiusX||e.radiusX||0,i.height=e.webkitRadiusY||e.radiusY||0,i.pressure=e.webkitForce||e.force||.5,i.isPrimary=this.isPrimaryTouch_(e),i.pointerType="touch",i.clientX=e.clientX,i.clientY=e.clientY,i.screenX=e.screenX,i.screenY=e.screenY,i},b.prototype.processTouches_=function(t,e){const i=Array.prototype.slice.call(t.changedTouches),n=i.length;function r(){t.preventDefault()}for(let o=0;o<n;++o){const n=this.touchToPointer_(t,i[o]);n.preventDefault=r,e.call(this,t,n)}},b.prototype.findTouch_=function(t,e){const i=t.length;for(let n=0;n<i;n++){if(t[n].identifier===e)return!0}return!1},b.prototype.vacuumTouches_=function(t){const e=t.touches,i=Object.keys(this.pointerMap),n=i.length;if(n>=e.length){const r=[];for(let t=0;t<n;++t){const n=i[t],o=this.pointerMap[n];n==l.a||this.findTouch_(e,n-2)||r.push(o.out)}for(let e=0;e<r.length;++e)this.cancelOut_(t,r[e])}},b.prototype.touchstart=function(t){this.vacuumTouches_(t),this.setPrimaryTouch_(t.changedTouches[0]),this.dedupSynthMouse_(t),this.clickCount_++,this.processTouches_(t,this.overDown_)},b.prototype.overDown_=function(t,e){this.pointerMap[e.pointerId]={target:e.target,out:e,outTarget:e.target},this.dispatcher.over(e,t),this.dispatcher.enter(e,t),this.dispatcher.down(e,t)},b.prototype.touchmove=function(t){t.preventDefault(),this.processTouches_(t,this.moveOverOut_)},b.prototype.moveOverOut_=function(t,e){const i=e,n=this.pointerMap[i.pointerId];if(!n)return;const r=n.out,o=n.outTarget;this.dispatcher.move(i,t),r&&o!==i.target&&(r.relatedTarget=i.target,i.relatedTarget=o,r.target=o,i.target?(this.dispatcher.leaveOut(r,t),this.dispatcher.enterOver(i,t)):(i.target=o,i.relatedTarget=null,this.cancelOut_(t,i))),n.out=i,n.outTarget=i.target},b.prototype.touchend=function(t){this.dedupSynthMouse_(t),this.processTouches_(t,this.upOut_)},b.prototype.upOut_=function(t,e){this.dispatcher.up(e,t),this.dispatcher.out(e,t),this.dispatcher.leave(e,t),this.cleanUpPointer_(e)},b.prototype.touchcancel=function(t){this.processTouches_(t,this.cancelOut_)},b.prototype.cancelOut_=function(t,e){this.dispatcher.cancel(e,t),this.dispatcher.out(e,t),this.dispatcher.leave(e,t),this.cleanUpPointer_(e)},b.prototype.cleanUpPointer_=function(t){delete this.pointerMap[t.pointerId],this.removePrimaryPointer_(t)},b.prototype.dedupSynthMouse_=function(t){const e=this.mouseSource.lastTouches,i=t.changedTouches[0];if(this.isPrimaryTouch_(i)){const t=[i.clientX,i.clientY];e.push(t),setTimeout(function(){Object(v.j)(e,t)},this.dedupTimeout_)}};var S=b;const O=function(t){o.a.call(this),this.element_=t,this.pointerMap={},this.eventMap_={},this.eventSourceList_=[],this.registerSources()};Object(n.inherits)(O,o.a);const C=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",!1],["type",""],["target",null],["currentTarget",null],["which",0]];O.prototype.registerSources=function(){if(s.POINTER)this.registerSource("native",new p(this));else if(s.MSPOINTER)this.registerSource("ms",new d(this));else{const t=new l.c(this);this.registerSource("mouse",t),s.TOUCH&&this.registerSource("touch",new S(this,t))}this.register_()},O.prototype.registerSource=function(t,e){const i=e,n=i.getEvents();n&&(n.forEach(function(t){const e=i.getHandlerForEvent(t);e&&(this.eventMap_[t]=e.bind(i))}.bind(this)),this.eventSourceList_.push(i))},O.prototype.register_=function(){const t=this.eventSourceList_.length;for(let e=0;e<t;e++){const t=this.eventSourceList_[e];this.addEvents_(t.getEvents())}},O.prototype.unregister_=function(){const t=this.eventSourceList_.length;for(let e=0;e<t;e++){const t=this.eventSourceList_[e];this.removeEvents_(t.getEvents())}},O.prototype.eventHandler_=function(t){const e=t.type,i=this.eventMap_[e];i&&i(t)},O.prototype.addEvents_=function(t){t.forEach(function(t){Object(r.listen)(this.element_,t,this.eventHandler_,this)}.bind(this))},O.prototype.removeEvents_=function(t){t.forEach(function(t){Object(r.unlisten)(this.element_,t,this.eventHandler_,this)}.bind(this))},O.prototype.cloneEvent=function(t,e){const i={};for(let n=0,r=C.length;n<r;n++){const r=C[n][0];i[r]=t[r]||e[r]||C[n][1]}return i},O.prototype.down=function(t,e){this.fireEvent(a.a.POINTERDOWN,t,e)},O.prototype.move=function(t,e){this.fireEvent(a.a.POINTERMOVE,t,e)},O.prototype.up=function(t,e){this.fireEvent(a.a.POINTERUP,t,e)},O.prototype.enter=function(t,e){t.bubbles=!1,this.fireEvent(a.a.POINTERENTER,t,e)},O.prototype.leave=function(t,e){t.bubbles=!1,this.fireEvent(a.a.POINTERLEAVE,t,e)},O.prototype.over=function(t,e){t.bubbles=!0,this.fireEvent(a.a.POINTEROVER,t,e)},O.prototype.out=function(t,e){t.bubbles=!0,this.fireEvent(a.a.POINTEROUT,t,e)},O.prototype.cancel=function(t,e){this.fireEvent(a.a.POINTERCANCEL,t,e)},O.prototype.leaveOut=function(t,e){this.out(t,e),this.contains_(t.target,t.relatedTarget)||this.leave(t,e)},O.prototype.enterOver=function(t,e){this.over(t,e),this.contains_(t.target,t.relatedTarget)||this.enter(t,e)},O.prototype.contains_=function(t,e){return!(!t||!e)&&t.contains(e)},O.prototype.makeEvent=function(t,e,i){return new _(t,i,e)},O.prototype.fireEvent=function(t,e,i){const n=this.makeEvent(t,e,i);this.dispatchEvent(n)},O.prototype.fireNativeEvent=function(t){const e=this.makeEvent(t.type,t,t);this.dispatchEvent(e)},O.prototype.wrapMouseEvent=function(t,e){return this.makeEvent(t,l.c.prepareEvent(e,this),e)},O.prototype.disposeInternal=function(){this.unregister_(),o.a.prototype.disposeInternal.call(this)};e.a=O},function(t,e,i){"use strict";i.r(e),i.d(e,"render",function(){return S});var n=i(1),r=i(42),o=i(225),s=i(138),a=i(89),l=i(25),u=i(121),c=i(236),h=i(94),d=i(65),f=i(45),p=i(27),g=i(40),y=i(26),m=i(4),_=i(10),v=i(2);const b=function(t){const e=t||{};this.collapsed_=void 0===e.collapsed||e.collapsed,this.collapsible_=void 0===e.collapsible||e.collapsible,this.collapsible_||(this.collapsed_=!1);const i=void 0!==e.className?e.className:"ol-overviewmap",n=void 0!==e.tipLabel?e.tipLabel:"Overview map",s=void 0!==e.collapseLabel?e.collapseLabel:"«";"string"==typeof s?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s):this.collapseLabel_=s;const a=void 0!==e.label?e.label:"»";"string"==typeof a?(this.label_=document.createElement("span"),this.label_.textContent=a):this.label_=a;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,u=document.createElement("button");u.setAttribute("type","button"),u.title=n,u.appendChild(l),Object(m.listen)(u,_.default.CLICK,this.handleClick_,this),this.ovmapDiv_=document.createElement("DIV"),this.ovmapDiv_.className="ol-overviewmap-map",this.ovmap_=new o.default({controls:new r.default,interactions:new r.default,view:e.view});const d=this.ovmap_;e.layers&&e.layers.forEach(function(t){d.addLayer(t)}.bind(this));const p=document.createElement("DIV");p.className="ol-overviewmap-box",p.style.boxSizing="border-box",this.boxOverlay_=new c.default({position:[0,0],positioning:h.a.BOTTOM_LEFT,element:p}),this.ovmap_.addOverlay(this.boxOverlay_);const y=i+" "+g.e+" "+g.b+(this.collapsed_&&this.collapsible_?" "+g.a:"")+(this.collapsible_?"":" ol-uncollapsible"),v=document.createElement("div");v.className=y,v.appendChild(this.ovmapDiv_),v.appendChild(u),f.default.call(this,{element:v,render:e.render||S,target:e.target});const b=this,O=this.boxOverlay_,C=this.boxOverlay_.getElement(),x=function(t){const e=d.getEventCoordinate({clientX:(i=t).clientX-C.offsetWidth/2,clientY:i.clientY+C.offsetHeight/2});var i;O.setPosition(e)},T=function(t){const e=d.getEventCoordinate(t);b.getMap().getView().setCenter(e),window.removeEventListener("mousemove",x),window.removeEventListener("mouseup",T)};C.addEventListener("mousedown",function(){window.addEventListener("mousemove",x),window.addEventListener("mouseup",T)})};function S(t){this.validateExtent_(),this.updateBox_()}Object(n.inherits)(b,f.default),b.prototype.setMap=function(t){const e=this.getMap();if(t!==e){if(e){const t=e.getView();t&&this.unbindView_(t),this.ovmap_.setTarget(null)}if(f.default.prototype.setMap.call(this,t),t){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(Object(m.listen)(t,u.a.PROPERTYCHANGE,this.handleMapPropertyChange_,this)),0===this.ovmap_.getLayers().getLength()&&this.ovmap_.setLayerGroup(t.getLayerGroup());const e=t.getView();e&&(this.bindView_(e),e.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_()))}}},b.prototype.handleMapPropertyChange_=function(t){if(t.key===a.a.VIEW){const e=t.oldValue;e&&this.unbindView_(e);const i=this.getMap().getView();this.bindView_(i)}},b.prototype.bindView_=function(t){Object(m.listen)(t,Object(l.getChangeEventType)(d.default.ROTATION),this.handleRotationChanged_,this)},b.prototype.unbindView_=function(t){Object(m.unlisten)(t,Object(l.getChangeEventType)(d.default.ROTATION),this.handleRotationChanged_,this)},b.prototype.handleRotationChanged_=function(){this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())},b.prototype.validateExtent_=function(){const t=this.getMap(),e=this.ovmap_;if(!t.isRendered()||!e.isRendered())return;const i=t.getSize(),n=t.getView().calculateExtent(i),r=e.getSize(),o=e.getView().calculateExtent(r),s=e.getPixelFromCoordinate(Object(v.getTopLeft)(n)),a=e.getPixelFromCoordinate(Object(v.getBottomRight)(n)),l=Math.abs(s[0]-a[0]),u=Math.abs(s[1]-a[1]),c=r[0],h=r[1];l<.1*c||u<.1*h||l>.75*c||u>.75*h?this.resetExtent_():Object(v.containsExtent)(o,n)||this.recenter_()},b.prototype.resetExtent_=function(){const t=this.getMap(),e=this.ovmap_,i=t.getSize(),n=t.getView().calculateExtent(i),r=e.getView(),o=Math.log(7.5)/Math.LN2,s=1/(.1*Math.pow(2,o/2));Object(v.scaleFromCenter)(n,s),r.fit(n)},b.prototype.recenter_=function(){const t=this.getMap(),e=this.ovmap_,i=t.getView();e.getView().setCenter(i.getCenter())},b.prototype.updateBox_=function(){const t=this.getMap(),e=this.ovmap_;if(!t.isRendered()||!e.isRendered())return;const i=t.getSize(),n=t.getView(),r=e.getView(),o=n.getRotation(),s=this.boxOverlay_,a=this.boxOverlay_.getElement(),l=n.calculateExtent(i),u=r.getResolution(),c=Object(v.getBottomLeft)(l),h=Object(v.getTopRight)(l),d=this.calculateCoordinateRotate_(o,c);s.setPosition(d),a&&(a.style.width=Math.abs((c[0]-h[0])/u)+"px",a.style.height=Math.abs((h[1]-c[1])/u)+"px")},b.prototype.calculateCoordinateRotate_=function(t,e){let i;const n=this.getMap().getView().getCenter();return n&&(i=[e[0]-n[0],e[1]-n[1]],Object(p.rotate)(i,t),Object(p.add)(i,n)),i},b.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_()},b.prototype.handleToggle_=function(){this.element.classList.toggle(g.a),this.collapsed_?Object(y.f)(this.collapseLabel_,this.label_):Object(y.f)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;const t=this.ovmap_;this.collapsed_||t.isRendered()||(t.updateSize(),this.resetExtent_(),Object(m.listenOnce)(t,s.a.POSTRENDER,function(t){this.updateBox_()},this))},b.prototype.getCollapsible=function(){return this.collapsible_},b.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())},b.prototype.setCollapsed=function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},b.prototype.getCollapsed=function(){return this.collapsed_},b.prototype.getOverviewMap=function(){return this.ovmap_},e.default=b},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var i=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++i+n).toString(36))}},function(t,e,i){var n=i(164).f,r=i(182),o=i(106)("toStringTag");t.exports=function(t,e,i){t&&!r(t=i?t:t.prototype,o)&&n(t,o,{configurable:!0,value:e})}},function(t,e){t.exports=!0},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Transformable=void 0;var n=a(i(8)),r=a(i(20)),o=i(6),s=i(116);function a(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(){var e;(0,n.default)(this,t),this.position=[0,0],this.rotation=[0,0,0],this.scale=[1,1,0,0],this.needLocalTransform=!1,this.needTransform=!1,this.CLASS_NAME="Zondy.LevelRenderer.Transformable",this.lookAt=(e=s.SUtil.Util_vector.create(),function(t){this.transform||(this.transform=s.SUtil.Util_matrix.create());var i=this.transform;function n(t){return t>-5e-5&&t<5e-5}s.SUtil.Util_vector.sub(e,t,this.position),n(e[0])&&n(e[1])||(s.SUtil.Util_vector.normalize(e,e),i[2]=e[0]*this.scale[1],i[3]=e[1]*this.scale[1],i[0]=e[1]*this.scale[0],i[1]=-e[0]*this.scale[0],i[4]=this.position[0],i[5]=this.position[1],this.decomposeTransform())})}return(0,r.default)(t,[{key:"destroy",value:function(){this.position=null,this.rotation=null,this.scale=null,this.needLocalTransform=null,this.needTransform=null}},{key:"updateNeedTransform",value:function(){function t(t){return t>5e-5||t<-5e-5}this.needLocalTransform=t(this.rotation[0])||t(this.position[0])||t(this.position[1])||t(this.scale[0]-1)||t(this.scale[1]-1)}},{key:"updateTransform",value:function(){if(this.updateNeedTransform(),this.parent?this.needTransform=this.needLocalTransform||this.parent.needTransform:this.needTransform=this.needLocalTransform,this.needTransform){var t=[0,0],e=this.transform||s.SUtil.Util_matrix.create();if(s.SUtil.Util_matrix.identity(e),this.needLocalTransform){if(r(this.scale[0])||r(this.scale[1])){t[0]=-this.scale[2]||0,t[1]=-this.scale[3]||0;var i=r(t[0])||r(t[1]);i&&s.SUtil.Util_matrix.translate(e,e,t),s.SUtil.Util_matrix.scale(e,e,this.scale),i&&(t[0]=-t[0],t[1]=-t[1],s.SUtil.Util_matrix.translate(e,e,t))}if(this.rotation instanceof Array){if(0!==this.rotation[0]){t[0]=-this.rotation[1]||0,t[1]=-this.rotation[2]||0;var n=r(t[0])||r(t[1]);n&&s.SUtil.Util_matrix.translate(e,e,t),s.SUtil.Util_matrix.rotate(e,e,this.rotation[0]),n&&(t[0]=-t[0],t[1]=-t[1],s.SUtil.Util_matrix.translate(e,e,t))}}else 0!==this.rotation&&s.SUtil.Util_matrix.rotate(e,e,this.rotation);(r(this.position[0])||r(this.position[1]))&&s.SUtil.Util_matrix.translate(e,e,this.position)}this.transform=e,this.parent&&this.parent.needTransform&&(this.needLocalTransform?s.SUtil.Util_matrix.mul(this.transform,this.parent.transform,this.transform):s.SUtil.Util_matrix.copy(this.transform,this.parent.transform))}function r(t){return t>5e-5||t<-5e-5}}},{key:"setTransform",value:function(t){if(this.needTransform){var e=this.transform;t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}}},{key:"decomposeTransform",value:function(){if(this.transform){var t=this.transform,e=t[0]*t[0]+t[1]*t[1],i=this.position,n=this.scale,r=this.rotation;s(e-1)&&(e=Math.sqrt(e));var o=t[2]*t[2]+t[3]*t[3];s(o-1)&&(o=Math.sqrt(o)),i[0]=t[4],i[1]=t[5],n[0]=e,n[1]=o,n[2]=n[3]=0,r[0]=Math.atan2(-t[1]/o,t[0]/e),r[1]=r[2]=0}function s(t){return t>5e-5||t<-5e-5}}}]),t}();e.Transformable=l,o.Zondy.LevelRenderer.Transformable=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Curve=void 0;var n=a(i(8)),r=a(i(20)),o=i(6),s=i(253);function a(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(){(0,n.default)(this,t),this.vector=new s.Vector,this.EPSILON=1e-4,this.THREE_SQRT=Math.sqrt(3),this.ONE_THIRD=1/3,this.CLASS_NAME="Zondy.LevelRenderer.Tool.Curve"}return(0,r.default)(t,[{key:"isAroundZero",value:function(t){return t>-this.EPSILON&&t<this.EPSILON}},{key:"isNotAroundZero",value:function(t){return t>this.EPSILON||t<-this.EPSILON}},{key:"cubicAt",value:function(t,e,i,n,r){var o=1-r;return o*o*(o*t+3*r*e)+r*r*(r*n+3*o*i)}},{key:"cubicDerivativeAt",value:function(t,e,i,n,r){var o=1-r;return 3*(((e-t)*o+2*(i-e)*r)*o+(n-i)*r*r)}},{key:"cubicRootAt",value:function(t,e,i,n,r,o){var s=n+3*(e-i)-t,a=3*(i-2*e+t),l=3*(e-t),u=t-r,c=a*a-3*s*l,h=a*l-9*s*u,d=l*l-3*a*u,f=0;if(this.isAroundZero(c)&&this.isAroundZero(h))if(this.isAroundZero(a))o[0]=0;else{var p=-l/a;p>=0&&p<=1&&(o[f++]=p)}else{var g=h*h-4*c*d;if(this.isAroundZero(g)){var y=h/c,m=-a/s+y,_=-y/2;m>=0&&m<=1&&(o[f++]=m),_>=0&&_<=1&&(o[f++]=_)}else if(g>0){var v=Math.sqrt(g),b=c*a+1.5*s*(-h+v),S=c*a+1.5*s*(-h-v),O=(-a-((b=b<0?-Math.pow(-b,this.ONE_THIRD):Math.pow(b,this.ONE_THIRD))+(S=S<0?-Math.pow(-S,this.ONE_THIRD):Math.pow(S,this.ONE_THIRD))))/(3*s);O>=0&&O<=1&&(o[f++]=O)}else{var C=(2*c*a-3*s*h)/(2*Math.sqrt(c*c*c)),x=Math.acos(C)/3,T=Math.sqrt(c),E=Math.cos(x),P=(-a-2*T*E)/(3*s),j=(-a+T*(E+this.THREE_SQRT*Math.sin(x)))/(3*s),w=(-a+T*(E-this.THREE_SQRT*Math.sin(x)))/(3*s);P>=0&&P<=1&&(o[f++]=P),j>=0&&j<=1&&(o[f++]=j),w>=0&&w<=1&&(o[f++]=w)}}return f}},{key:"cubicExtrema",value:function(t,e,i,n,r){var o=6*i-12*e+6*t,s=9*e+3*n-3*t-9*i,a=3*e-3*t,l=0;if(this.isAroundZero(s)){if(this.isNotAroundZero(o)){var u=-a/o;u>=0&&u<=1&&(r[l++]=u)}}else{var c=o*o-4*s*a;if(this.isAroundZero(c))r[0]=-o/(2*s);else if(c>0){var h=Math.sqrt(c),d=(-o+h)/(2*s),f=(-o-h)/(2*s);d>=0&&d<=1&&(r[l++]=d),f>=0&&f<=1&&(r[l++]=f)}}return l}},{key:"cubicSubdivide",value:function(t,e,i,n,r,o){var s=(e-t)*r+t,a=(i-e)*r+e,l=(n-i)*r+i,u=(a-s)*r+s,c=(l-a)*r+a,h=(c-u)*r+u;o[0]=t,o[1]=s,o[2]=u,o[3]=h,o[4]=h,o[5]=c,o[6]=l,o[7]=n}},{key:"cubicProjectPoint",value:function(t,e,i,n,r,o,s,a,l,u,c){var h,d=this.vector.create(),f=this.vector.create(),p=this.vector.create(),g=.005,y=1/0;d[0]=l,d[1]=u;for(var m=0;m<1;m+=.05){f[0]=this.cubicAt(t,i,r,s,m),f[1]=this.cubicAt(e,n,o,a,m);var _=this.vector.distSquare(d,f);_<y&&(h=m,y=_)}y=1/0;for(var v=0;v<32&&!(g<this.EPSILON);v++){var b=h-g,S=h+g;f[0]=this.cubicAt(t,i,r,s,b),f[1]=this.cubicAt(e,n,o,a,b);var O=this.vector.distSquare(f,d);if(b>=0&&O<y)h=b,y=O;else{p[0]=this.cubicAt(t,i,r,s,S),p[1]=this.cubicAt(e,n,o,a,S);var C=this.vector.distSquare(p,d);S<=1&&C<y?(h=S,y=C):g*=.5}}return c&&(c[0]=this.cubicAt(t,i,r,s,h),c[1]=this.cubicAt(e,n,o,a,h)),Math.sqrt(y)}},{key:"quadraticAt",value:function(t,e,i,n){var r=1-n;return r*(r*t+2*n*e)+n*n*i}},{key:"quadraticDerivativeAt",value:function(t,e,i,n){return 2*((1-n)*(e-t)+n*(i-e))}},{key:"quadraticRootAt",value:function(t,e,i,n,r){var o=t-2*e+i,s=2*(e-t),a=t-n,l=0;if(this.isAroundZero(o)){if(this.isNotAroundZero(s)){var u=-a/s;u>=0&&u<=1&&(r[l++]=u)}}else{var c=s*s-4*o*a;if(this.isAroundZero(c)){var h=-s/(2*o);h>=0&&h<=1&&(r[l++]=h)}else if(c>0){var d=Math.sqrt(c),f=(-s+d)/(2*o),p=(-s-d)/(2*o);f>=0&&f<=1&&(r[l++]=f),p>=0&&p<=1&&(r[l++]=p)}}return l}},{key:"quadraticExtremum",value:function(t,e,i){var n=t+i-2*e;return 0===n?.5:(t-e)/n}},{key:"quadraticProjectPoint",value:function(t,e,i,n,r,o,s,a,l){var u,c=this.vector.create(),h=this.vector.create(),d=this.vector.create(),f=.005,p=1/0;c[0]=s,c[1]=a;for(var g=0;g<1;g+=.05){h[0]=this.quadraticAt(t,i,r,g),h[1]=this.quadraticAt(e,n,o,g);var y=this.vector.distSquare(c,h);y<p&&(u=g,p=y)}p=1/0;for(var m=0;m<32&&!(f<this.EPSILON);m++){var _=u-f,v=u+f;h[0]=this.quadraticAt(t,i,r,_),h[1]=this.quadraticAt(e,n,o,_);var b=this.vector.distSquare(h,c);if(_>=0&&b<p)u=_,p=b;else{d[0]=this.quadraticAt(t,i,r,v),d[1]=this.quadraticAt(e,n,o,v);var S=this.vector.distSquare(d,c);v<=1&&S<p?(u=v,p=S):f*=.5}}return l&&(l[0]=this.quadraticAt(t,i,r,u),l[1]=this.quadraticAt(e,n,o,u)),Math.sqrt(p)}}]),t}();e.Curve=l,o.Zondy.LevelRenderer.Tool.Curve=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Vector=void 0;var n=s(i(8)),r=s(i(20)),o=i(6);function s(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(){(0,n.default)(this,t),this.ArrayCtor="undefined"==typeof Float32Array?Array:Float32Array,this.CLASS_NAME="Zondy.LevelRenderer.Tool.Vector"}return(0,r.default)(t,[{key:"create",value:function(t,e){var i=new(0,this.ArrayCtor)(2);return i[0]=t||0,i[1]=e||0,i}},{key:"copy",value:function(t,e){return t[0]=e[0],t[1]=e[1],t}},{key:"set",value:function(t,e,i){return t[0]=e,t[1]=i,t}},{key:"add",value:function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t}},{key:"scaleAndAdd",value:function(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t}},{key:"sub",value:function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t}},{key:"len",value:function(t){return Math.sqrt(this.lenSquare(t))}},{key:"lenSquare",value:function(t){return t[0]*t[0]+t[1]*t[1]}},{key:"mul",value:function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t}},{key:"div",value:function(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t}},{key:"dot",value:function(t,e){return t[0]*e[0]+t[1]*e[1]}},{key:"scale",value:function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t}},{key:"normalize",value:function(t,e){var i=this.len(e);return 0===i?(t[0]=0,t[1]=0):(t[0]=e[0]/i,t[1]=e[1]/i),t}},{key:"distance",value:function(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}},{key:"distanceSquare",value:function(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}},{key:"negate",value:function(t,e){return t[0]=-e[0],t[1]=-e[1],t}},{key:"lerp",value:function(t,e,i,n){return t[0]=e[0]+n*(i[0]-e[0]),t[1]=e[1]+n*(i[1]-e[1]),t}},{key:"applyTransform",value:function(t,e,i){var n=e[0],r=e[1];return t[0]=i[0]*n+i[2]*r+i[4],t[1]=i[1]*n+i[3]*r+i[5],t}},{key:"min",value:function(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t}},{key:"max",value:function(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t}},{key:"length",value:function(t){return this.len(t)}},{key:"lengthSquare",value:function(t){return this.lenSquare(t)}},{key:"dist",value:function(t,e){return this.distance(t,e)}},{key:"distSquare",value:function(t,e){return this.distanceSquare(t,e)}}]),t}();e.Vector=a,o.Zondy.LevelRenderer.Tool.Vector=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Point=void 0;var n=c(i(13)),r=c(i(8)),o=c(i(20)),s=c(i(16)),a=c(i(46)),l=c(i(17)),u=i(6);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t,i){(0,r.default)(this,e);var o=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,i));return o.x=isNaN(t)?0:t,o.y=isNaN(i)?0:i,o.r=6,o.CLASS_NAME="Zondy.Feature.ShapeParameters.Point",o}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,(0,a.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"destroy",this).call(this)}}]),e}(i(147).ShapeParameters);e.Point=h,u.Zondy.Feature.ShapeParameters.Point=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Polygon=void 0;var n=c(i(13)),r=c(i(8)),o=c(i(20)),s=c(i(16)),a=c(i(46)),l=c(i(17)),u=i(6);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){(0,r.default)(this,e);var i=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t));return i.pointList=t,i.holePolygonPointLists=null,i.CLASS_NAME="Zondy.Feature.ShapeParameters.Polygon",i}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.pointList=null,this.holePolygonPointLists=null,(0,a.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"destroy",this).call(this)}}]),e}(i(147).ShapeParameters);e.Polygon=h,u.Zondy.Feature.ShapeParameters.Polygon=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Sector=void 0;var n=c(i(13)),r=c(i(8)),o=c(i(20)),s=c(i(16)),a=c(i(46)),l=c(i(17)),u=i(6);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t,i,o,a,l,u,c){(0,r.default)(this,e);var h=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,i,o,a,l,u,c));return h.x=isNaN(t)?0:t,h.y=isNaN(i)?0:i,h.r=isNaN(o)?0:o,h.startAngle=isNaN(a)?0:a,h.endAngle=isNaN(l)?0:l,h.r0=isNaN(u)?0:u,h.clockWise=c,h.CLASS_NAME="Zondy.Feature.ShapeParameters.Sector",h}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,this.startAngle=null,this.endAngle=null,this.r0=null,this.clockWise=null,(0,a.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"destroy",this).call(this)}}]),e}(i(147).ShapeParameters);e.Sector=h,u.Zondy.Feature.ShapeParameters.Sector=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicPolygon=void 0;var n=f(i(13)),r=f(i(8)),o=f(i(20)),s=f(i(16)),a=f(i(46)),l=f(i(17)),u=i(6),c=i(21),h=i(107),d=i(116);function f(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function e(t){(0,r.default)(this,e);var i=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t));return i.type="smicpolygon",i.holePolygonPointLists=null,i.refOriginalPosition&&2===i.refOriginalPosition.length||(i.refOriginalPosition=[0,0]),i.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicPolygon",i}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.type=null,this.holePolygonPointLists=null,(0,a.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"destroy",this).call(this)}},{key:"brush",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var i=this.style;e&&(i=this.getHighlightStyle(i,this.highlightStyle||{})),t.save(),this.setContext(t,i),this.setTransform(t);var n=!1;"fill"!=i.brushType&&"both"!=i.brushType&&void 0!==i.brushType||(t.beginPath(),"dashed"==i.lineType||"dotted"==i.lineType||"dot"==i.lineType||"dash"==i.lineType||"dashot"==i.lineType||"longdash"==i.lineType||"longdashdot"==i.lineType?this.buildPath(t,{lineType:"solid",lineWidth:i.lineWidth,pointList:i.pointList}):(this.buildPath(t,i),n=!0),t.closePath(),this.setCtxGlobalAlpha(t,"fill",i),t.fill(),this.setCtxGlobalAlpha(t,"reset",i)),i.lineWidth>0&&("stroke"==i.brushType||"both"==i.brushType)&&(n||(t.beginPath(),this.buildPath(t,i)),this.setCtxGlobalAlpha(t,"stroke",i),t.stroke(),this.setCtxGlobalAlpha(t,"reset",i)),this.drawText(t,i,this.style);var r=(0,c.cloneObject)(i);if(r.pointList&&this.holePolygonPointLists&&this.holePolygonPointLists.length>0)for(var o=this.holePolygonPointLists,s=o.length,a=0;a<s;a++){var l=o[a];r.pointList=l,t.globalCompositeOperation="destination-out",n=!1,"fill"!=r.brushType&&"both"!=r.brushType&&void 0!==r.brushType||(t.beginPath(),"dashed"==r.lineType||"dotted"==r.lineType||"dot"==r.lineType||"dash"==r.lineType||"dashot"==r.lineType||"longdash"==r.lineType||"longdashdot"==r.lineType?this.buildPath(t,{lineType:"solid",lineWidth:r.lineWidth,pointList:r.pointList}):(this.buildPath(t,r),n=!0),t.closePath(),this.setCtxGlobalAlpha(t,"fill",r),t.fill(),this.setCtxGlobalAlpha(t,"reset",r)),r.lineWidth>0&&("stroke"==r.brushType||"both"==r.brushType)?(n||(t.beginPath(),this.buildPath(t,r)),t.globalCompositeOperation="source-over",this.setCtxGlobalAlpha(t,"stroke",r),t.stroke(),this.setCtxGlobalAlpha(t,"reset",r)):t.globalCompositeOperation="source-over"}t.restore()}},{key:"buildPath",value:function(t,e){e.showShadow&&(t.shadowBlur=e.shadowBlur,t.shadowColor=e.shadowColor,t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY),this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var i=this.refOriginalPosition,n=e.pointList;if(!(n.length<2))if(e.smooth&&"spline"!==e.smooth){var r,o,s,a=d.SUtil.SUtil_smoothBezier(n,e.smooth,!0,e.smoothConstraint,i);t.moveTo(n[0][0]+i[0],n[0][1]+i[1]);for(var l=n.length,u=0;u<l;u++)r=a[2*u],o=a[2*u+1],s=[n[(u+1)%l][0]+i[0],n[(u+1)%l][1]+i[1]],t.bezierCurveTo(r[0],r[1],o[0],o[1],s[0],s[1])}else if("spline"===e.smooth&&(n=d.SUtil.SUtil_smoothSpline(n,!0,null,i)),e.lineType&&"solid"!=e.lineType){if("dashed"===e.lineType||"dotted"===e.lineType||"dot"===e.lineType||"dash"===e.lineType||"longdash"===e.lineType){var c=e._dashLength||(e.lineWidth||1)*("dashed"==e.lineType?5:1);e._dashLength=c;var h=e.lineWidth||1,f=h,p=h;"dashed"===e.lineType&&(f*=5,p*=5,e.lineCap&&"butt"!==e.lineCap&&(f-=h,p+=h)),"dotted"===e.lineType&&e.lineCap&&"butt"!==e.lineCap&&(f=1,p+=h),"dot"===e.lineType&&(p*=4,e.lineCap&&"butt"!==e.lineCap&&(f=1,p+=h)),"dash"===e.lineType&&(f*=4,p*=4,e.lineCap&&"butt"!==e.lineCap&&(f-=h,p+=h)),"longdash"===e.lineType&&(f*=8,p*=4,e.lineCap&&"butt"!==e.lineCap&&(f-=h,p+=h)),t.moveTo(n[0][0]+i[0],n[0][1]+i[1]);for(var g=1;g<n.length;g++)d.SUtil.SUtil_dashedLineTo(t,n[g-1][0]+i[0],n[g-1][1]+i[1],n[g][0]+i[0],n[g][1]+i[1],h,[f,p]);d.SUtil.SUtil_dashedLineTo(t,n[n.length-1][0]+i[0],n[n.length-1][1]+i[1],n[0][0]+i[0],n[0][1]+i[1],h,[f,p])}else if("dashot"===e.lineType||"longdashdot"===e.lineType){var y=e._dashLength||(e.lineWidth||1)*("dashed"==e.lineType?5:1);e._dashLength=y;var m=e.lineWidth||1,_=m,v=m,b=m,S=m;"dashot"===e.lineType&&(_*=4,v*=4,S*=4,e.lineCap&&"butt"!==e.lineCap&&(_-=m,v+=m,b=1,S+=m)),"longdashdot"===e.lineType&&(_*=8,v*=4,S*=4,e.lineCap&&"butt"!==e.lineCap&&(_-=m,v+=m,b=1,S+=m)),t.moveTo(n[0][0]+i[0],n[0][1]+i[1]);for(var O=1;O<n.length;O++)d.SUtil.SUtil_dashedLineTo(t,n[O-1][0]+i[0],n[O-1][1]+i[1],n[O][0]+i[0],n[O][1]+i[1],m,[_,v,b,S]);d.SUtil.SUtil_dashedLineTo(t,n[n.length-1][0]+i[0],n[n.length-1][1]+i[1],n[0][0]+i[0],n[0][1]+i[1],m,[_,v,b,S])}}else{t.moveTo(n[0][0]+i[0],n[0][1]+i[1]);for(var C=1;C<n.length;C++)t.lineTo(n[C][0]+i[0],n[C][1]+i[1]);t.lineTo(n[0][0]+i[0],n[0][1]+i[1])}}},{key:"getRect",value:function(t,e){var i;if(e?i=e:(this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]),i=this.refOriginalPosition),t.__rect)return t.__rect;for(var n,r=Number.MAX_VALUE,o=Number.MIN_VALUE,s=Number.MAX_VALUE,a=Number.MIN_VALUE,l=t.pointList,u=0,c=l.length;u<c;u++)l[u][0]+i[0]<r&&(r=l[u][0]+i[0]),l[u][0]+i[0]>o&&(o=l[u][0]+i[0]),l[u][1]+i[1]<s&&(s=l[u][1]+i[1]),l[u][1]+i[1]>a&&(a=l[u][1]+i[1]);return n="stroke"==t.brushType||"fill"==t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(r-n/2),y:Math.round(s-n/2),width:o-r+n,height:a-s+n},t.__rect}}]),e}(h.Shape);e.SmicPolygon=p,u.Zondy.LevelRenderer.SmicPolygon=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FeatureGraphicBase=void 0;var n=a(i(8)),r=a(i(20)),o=i(6),s=i(21);function a(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(e){(0,n.default)(this,t);var i=void 0!==e?e:{};(0,s.extend)(this,i),this.GID=void 0!==i.GID&&null!=i.GID?i.GID:0}return(0,r.default)(t,[{key:"setGID",value:function(t){void 0!==t&&null!=t&&(this.GID=t)}}]),t}();e.FeatureGraphicBase=l,o.Zondy.Object.FeatureGraphicBase=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CAttStruct=void 0;var n=i(6),r=i(21),o=function(t){var e=void 0!==t?t:{};(0,r.extend)(this,e),this.FldNumber=void 0!==e.FldNumber?e.FldNumber:0,this.FldName=void 0!==e.FldName?e.FldName:null,this.FldType=void 0!==e.FldType?e.FldType:null};e.CAttStruct=o,n.Zondy.Object.CAttStruct=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CLineInfo=void 0;var n=i(6),r=i(21),o=function(t){var e=void 0!==t?t:{};(0,r.extend)(this,e),this.Color=void 0!==e.Color&&null!=e.Color?e.Color:1,this.LinStyleID=void 0!==e.LinStyleID&&null!=e.LinStyleID?e.LinStyleID:1,this.LinStyleID2=void 0!==e.LinStyleID2&&null!=e.LinStyleID2?e.LinStyleID2:0,this.LinWidth=void 0!==e.LinWidth&&null!=e.LinWidth?e.LinWidth:1,this.Xscale=void 0!==e.Xscale&&null!=e.Xscale?e.Xscale:1,this.Yscale=void 0!==e.Yscale&&null!=e.Yscale?e.Yscale:1};e.CLineInfo=o,n.Zondy.Object.CLineInfo=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryParameter=void 0;var n=c(i(13)),r=c(i(8)),o=c(i(20)),s=c(i(16)),a=c(i(17)),l=i(6),u=i(21);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){(0,r.default)(this,e);var i=t||{};return(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,i))}return(0,a.default)(e,t),(0,o.default)(e,[{key:"getParameterURL",value:function(){var t="";return t="page="+this.pageIndex.toString(),t+="&pageCount="+this.recordNumber.toString(),t+="&f="+this.resultFormat,null!=this.geometry&&(t+="&geometry="+this.geometry.toString(),t+="&geometryType="+this.geometry.getGeometryType()),null!=this.struct&&(t+="&structs="+(0,u.toJSON)(this.struct)),null!=this.where&&(t+="&where="+this.where),null!=this.rule&&(t+="&rule="+(0,u.toJSON)(this.rule)),null!=this.objectIds&&(t+="&objectIds="+this.objectIds),null!=this.orderField&&(t+="&orderField="+this.orderField),null!=this.isAsc&&(t+="&isAsc="+this.isAsc),t}},{key:"getParameterObject",value:function(){var t={};return t.f=this.resultFormat,null!=this.struct&&(t.structs=this.struct.toJSON()),null!=this.objectIds?(t.objectIds=this.objectIds,t):(t.page=this.pageIndex.toString(),t.pageCount=this.recordNumber.toString(),null!=this.geometry&&(t.geometry=this.geometry.toString(),t.geometryType=this.geometry.getGeometryType()),null!=this.where&&(t.where=this.where),null!=this.rule&&(t.rule=this.rule.toJSON()),null!=this.orderField&&(t.orderField=this.orderField),null!=this.isAsc&&(t.isAsc=this.isAsc),t)}}]),e}(i(436).QueryParameterBase);e.QueryParameter=h,l.Zondy.Service.QueryParameter=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ClipBase=void 0;var n=l(i(13)),r=l(i(8)),o=l(i(16)),s=l(i(17)),a=i(6);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t){(0,r.default)(this,e);var i=t||{},s=(0,o.default)(this,(e.__proto__||(0,n.default)(e)).call(this,i));return s.desInfo=void 0!==i.desInfo?i.desInfo:null,s.attOptType=void 0!==i.attOptType?i.attOptType:1,s.infoOptType=void 0!==i.infoOptType?i.infoOptType:1,s.overType=void 0!==i.overType?i.overType:3,s.tolerance=void 0!==i.tolerance?i.tolerance:1e-4,s.isCleanNode=void 0!==i.isCleanNode&&i.isCleanNode,s.isLabelPnt=void 0!==i.isLabelPnt&&i.isLabelPnt,s.isValidReg=void 0!==i.isValidReg&&i.isValidReg,s}return(0,s.default)(e,t),e}(i(167).AnalysisBase);e.ClipBase=u,a.Zondy.Service.ClipBase=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CProjectParam=void 0;var n=i(6),r=i(21),o=function(t){var e=t||{};(0,r.extend)(this,e),this.ProjAngleUnit=void 0!==e.ProjAngleUnit?e.ProjAngleUnit:0,this.ProjLat=void 0!==e.ProjLat?e.ProjLat:0,this.ProjLat1=void 0!==e.ProjLat1?e.ProjLat1:0,this.ProjLat2=void 0!==e.ProjLat2?e.ProjLat2:0,this.ProjLon=void 0!==e.ProjLon?e.ProjLon:0,this.ProjRate=void 0!==e.ProjRate?e.ProjRate:0,this.ProjType=void 0!==e.ProjType?e.ProjType:0,this.ProjTypeID=void 0!==e.ProjTypeID?e.ProjTypeID:0,this.ProjUnit=void 0!==e.ProjUnit?e.ProjUnit:0,this.ProjZoneNO=void 0!==e.ProjZoneNO?e.ProjZoneNO:0,this.ProjZoneType=void 0!==e.ProjZoneType?e.ProjZoneType:0,this.SphereID=void 0!==e.SphereID?e.SphereID:0};e.CProjectParam=o,n.Zondy.Service.CProjectParam=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CPntInfo=void 0;var n=i(6),r=i(21),o=function(t){var e=void 0!==t?t:{};(0,r.extend)(this,e),this.LibID=void 0!==e.LibID?e.LibID:0,this.Ovprnt=void 0!==e.Ovprnt&&e.Ovprnt,this.Angle=void 0!==e.Angle?e.Angle:0,this.BackClr=void 0!==e.BackClr?e.BackClr:0,this.BackExp=void 0!==e.BackExp?e.BackExp:0,this.FillFlg=void 0!==e.FillFlg?e.FillFlg:0,this.Height=void 0!==e.Height?e.Height:0,this.Width=void 0!==e.Width?e.Width:0,this.OutClr=void 0!==e.OutClr?e.OutClr:[0,0,0],this.SymID=void 0!==e.SymID?e.SymID:0,this.OutPenW=void 0!==e.OutPenW?e.OutPenW:[.05,.05,.05]};e.CPntInfo=o,n.Zondy.Object.Theme.CPntInfo=o},function(t,e,i){"use strict";var n=i(1),r=i(47),o=i(32),s=i(78),a=i(4),l=i(61),u=i(93),c=i(244);const h=function(t,e){l.a.call(this),this.map_=t,this.clickTimeoutId_=0,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=e?e*r.DEVICE_PIXEL_RATIO:r.DEVICE_PIXEL_RATIO,this.down_=null;const i=this.map_.getViewport();this.activePointers_=0,this.trackedTouches_={},this.pointerEventHandler_=new c.a(i),this.documentPointerEventHandler_=null,this.pointerdownListenerKey_=Object(a.listen)(this.pointerEventHandler_,u.a.POINTERDOWN,this.handlePointerDown_,this),this.relayedListenerKey_=Object(a.listen)(this.pointerEventHandler_,u.a.POINTERMOVE,this.relayEvent_,this)};Object(n.inherits)(h,l.a),h.prototype.emulateClick_=function(t){let e=new s.default(o.default.CLICK,this.map_,t);this.dispatchEvent(e),0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=0,e=new s.default(o.default.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=0;const e=new s.default(o.default.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}.bind(this),250)},h.prototype.updateActivePointers_=function(t){const e=t;e.type==o.default.POINTERUP||e.type==o.default.POINTERCANCEL?delete this.trackedTouches_[e.pointerId]:e.type==o.default.POINTERDOWN&&(this.trackedTouches_[e.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},h.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);const e=new s.default(o.default.POINTERUP,this.map_,t);this.dispatchEvent(e),e.propagationStopped||this.dragging_||!this.isMouseActionButton_(t)||this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(a.unlistenByKey),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null,this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null)},h.prototype.isMouseActionButton_=function(t){return 0===t.button},h.prototype.handlePointerDown_=function(t){this.updateActivePointers_(t);const e=new s.default(o.default.POINTERDOWN,this.map_,t);this.dispatchEvent(e),this.down_=t,0===this.dragListenerKeys_.length&&(this.documentPointerEventHandler_=new c.a(document),this.dragListenerKeys_.push(Object(a.listen)(this.documentPointerEventHandler_,o.default.POINTERMOVE,this.handlePointerMove_,this),Object(a.listen)(this.documentPointerEventHandler_,o.default.POINTERUP,this.handlePointerUp_,this),Object(a.listen)(this.pointerEventHandler_,o.default.POINTERCANCEL,this.handlePointerUp_,this)))},h.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;const e=new s.default(o.default.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(e)}t.preventDefault()},h.prototype.relayEvent_=function(t){const e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new s.default(t.type,this.map_,t,e))},h.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},h.prototype.disposeInternal=function(){this.relayedListenerKey_&&(Object(a.unlistenByKey)(this.relayedListenerKey_),this.relayedListenerKey_=null),this.pointerdownListenerKey_&&(Object(a.unlistenByKey)(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(a.unlistenByKey),this.dragListenerKeys_.length=0,this.documentPointerEventHandler_&&(this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null),this.pointerEventHandler_&&(this.pointerEventHandler_.dispose(),this.pointerEventHandler_=null),l.a.prototype.disposeInternal.call(this)},e.a=h},function(t,e,i){"use strict";i.d(e,"a",function(){return a});var n=i(42),r=i(226),o=i(227),s=i(228);function a(t){const e=t||{},i=new n.default;return(void 0===e.zoom||e.zoom)&&i.push(new s.default(e.zoomOptions)),(void 0===e.rotate||e.rotate)&&i.push(new o.default(e.rotateOptions)),(void 0===e.attribution||e.attribution)&&i.push(new r.default(e.attributionOptions)),i}},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(268);const o=function(t){const e=t||{};r.default.call(this,{points:1/0,fill:e.fill,radius:e.radius,snapToPixel:e.snapToPixel,stroke:e.stroke,atlasManager:e.atlasManager})};Object(n.inherits)(o,r.default),o.prototype.clone=function(){const t=new o({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),snapToPixel:this.getSnapToPixel(),atlasManager:this.atlasManager_});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},o.prototype.setRadius=function(t){this.radius_=t,this.render_(this.atlasManager_)},e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(84),o=i(26),s=i(47),a=i(30),l=i(22),u=i(186);const c=function(t){this.checksums_=null,this.canvas_=null,this.hitDetectionCanvas_=null,this.fill_=void 0!==t.fill?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=void 0!==t.radius?t.radius:t.radius1,this.radius2_=t.radius2,this.angle_=void 0!==t.angle?t.angle:0,this.stroke_=void 0!==t.stroke?t.stroke:null,this.anchor_=null,this.size_=null,this.imageSize_=null,this.hitDetectionImageSize_=null,this.atlasManager_=t.atlasManager,this.render_(this.atlasManager_);const e=void 0===t.snapToPixel||t.snapToPixel,i=void 0!==t.rotateWithView&&t.rotateWithView;u.default.call(this,{opacity:1,rotateWithView:i,rotation:void 0!==t.rotation?t.rotation:0,scale:1,snapToPixel:e})};Object(n.inherits)(c,u.default),c.prototype.clone=function(){const t=new c({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),snapToPixel:this.getSnapToPixel(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),atlasManager:this.atlasManager_});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},c.prototype.getAnchor=function(){return this.anchor_},c.prototype.getAngle=function(){return this.angle_},c.prototype.getFill=function(){return this.fill_},c.prototype.getHitDetectionImage=function(t){return this.hitDetectionCanvas_},c.prototype.getImage=function(t){return this.canvas_},c.prototype.getImageSize=function(){return this.imageSize_},c.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_},c.prototype.getImageState=function(){return a.a.LOADED},c.prototype.getOrigin=function(){return this.origin_},c.prototype.getPoints=function(){return this.points_},c.prototype.getRadius=function(){return this.radius_},c.prototype.getRadius2=function(){return this.radius2_},c.prototype.getSize=function(){return this.size_},c.prototype.getStroke=function(){return this.stroke_},c.prototype.listenImageChange=function(t,e){},c.prototype.load=function(){},c.prototype.unlistenImageChange=function(t,e){},c.prototype.render_=function(t){let e,i,n="",a="",u=0,c=null,h=0,d=0;this.stroke_&&(null===(i=this.stroke_.getColor())&&(i=l.defaultStrokeStyle),i=Object(r.asColorLike)(i),void 0===(d=this.stroke_.getWidth())&&(d=l.defaultLineWidth),c=this.stroke_.getLineDash(),h=this.stroke_.getLineDashOffset(),s.CANVAS_LINE_DASH||(c=null,h=0),void 0===(a=this.stroke_.getLineJoin())&&(a=l.defaultLineJoin),void 0===(n=this.stroke_.getLineCap())&&(n=l.defaultLineCap),void 0===(u=this.stroke_.getMiterLimit())&&(u=l.defaultMiterLimit));let f=2*(this.radius_+d)+1;const p={strokeStyle:i,strokeWidth:d,size:f,lineCap:n,lineDash:c,lineDashOffset:h,lineJoin:a,miterLimit:u};if(void 0===t){const t=Object(o.a)(f,f);this.canvas_=t.canvas,e=f=this.canvas_.width,this.draw_(p,t,0,0),this.createHitDetectionCanvas_(p)}else{f=Math.round(f);const i=!this.fill_;let n;i&&(n=this.drawHitDetectionCanvas_.bind(this,p));const r=this.getChecksum(),o=t.add(r,f,f,this.draw_.bind(this,p),n);this.canvas_=o.image,this.origin_=[o.offsetX,o.offsetY],e=o.image.width,i?(this.hitDetectionCanvas_=o.hitImage,this.hitDetectionImageSize_=[o.hitImage.width,o.hitImage.height]):(this.hitDetectionCanvas_=this.canvas_,this.hitDetectionImageSize_=[e,e])}this.anchor_=[f/2,f/2],this.size_=[f,f],this.imageSize_=[e,e]},c.prototype.draw_=function(t,e,i,n){let o,s,a;e.setTransform(1,0,0,1,0,0),e.translate(i,n),e.beginPath();let u=this.points_;if(u===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{const i=void 0!==this.radius2_?this.radius2_:this.radius_;for(i!==this.radius_&&(u*=2),o=0;o<=u;o++)s=2*o*Math.PI/u-Math.PI/2+this.angle_,a=o%2==0?this.radius_:i,e.lineTo(t.size/2+a*Math.cos(s),t.size/2+a*Math.sin(s))}if(this.fill_){let t=this.fill_.getColor();null===t&&(t=l.defaultFillStyle),e.fillStyle=Object(r.asColorLike)(t),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke()),e.closePath()},c.prototype.createHitDetectionCanvas_=function(t){if(this.hitDetectionImageSize_=[t.size,t.size],this.fill_)return void(this.hitDetectionCanvas_=this.canvas_);const e=Object(o.a)(t.size,t.size);this.hitDetectionCanvas_=e.canvas,this.drawHitDetectionCanvas_(t,e,0,0)},c.prototype.drawHitDetectionCanvas_=function(t,e,i,n){e.setTransform(1,0,0,1,0,0),e.translate(i,n),e.beginPath();let r=this.points_;if(r===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{const i=void 0!==this.radius2_?this.radius2_:this.radius_;let n,o,s;for(i!==this.radius_&&(r*=2),n=0;n<=r;n++)s=2*n*Math.PI/r-Math.PI/2+this.angle_,o=n%2==0?this.radius_:i,e.lineTo(t.size/2+o*Math.cos(s),t.size/2+o*Math.sin(s))}e.fillStyle=l.defaultFillStyle,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.stroke()),e.closePath()},c.prototype.getChecksum=function(){const t=this.stroke_?this.stroke_.getChecksum():"-",e=this.fill_?this.fill_.getChecksum():"-";if(!this.checksums_||t!=this.checksums_[1]||e!=this.checksums_[2]||this.radius_!=this.checksums_[3]||this.radius2_!=this.checksums_[4]||this.angle_!=this.checksums_[5]||this.points_!=this.checksums_[6]){const i="r"+t+e+(void 0!==this.radius_?this.radius_.toString():"-")+(void 0!==this.radius2_?this.radius2_.toString():"-")+(void 0!==this.angle_?this.angle_.toString():"-")+(void 0!==this.points_?this.points_.toString():"-");this.checksums_=[i,t,e,this.radius_,this.radius2_,this.angle_,this.points_]}return this.checksums_[0]},e.default=c},function(t,e,i){"use strict";function n(t,e,i,n,r,o){const s=[t[e],t[e+1]],a=[];let l;for(;e+n<i;e+=n){if(a[0]=t[e+n],a[1]=t[e+n+1],l=r.call(o,s,a))return l;s[0]=a[0],s[1]=a[1]}return!1}i.d(e,"a",function(){return n})},function(t,e,i){"use strict";function n(t,e,i,n){let r=t[e],o=t[e+1],s=0;for(let a=e+n;a<i;a+=n){const e=t[a],i=t[a+1];s+=Math.sqrt((e-r)*(e-r)+(i-o)*(i-o)),r=e,o=i}return s}i.d(e,"a",function(){return n})},function(t,e,i){"use strict";e.a={POINT:"point",LINE:"line"}},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(42),o=i(52),s=i(25),a=i(121),l=i(23),u=i(4),c=i(10),h=i(2),d=i(189),f=i(11),p=i(44);const g="layers",y=function(t){const e=t||{},i=Object(f.assign)({},e);delete i.layers;let n=e.layers;d.default.call(this,i),this.layersListenerKeys_=[],this.listenerKeys_={},Object(u.listen)(this,Object(s.getChangeEventType)(g),this.handleLayersChanged_,this),n?Array.isArray(n)?n=new r.default(n.slice(),{unique:!0}):(Object(l.a)(n instanceof r.default,43),n=n):n=new r.default(void 0,{unique:!0}),this.setLayers(n)};Object(n.inherits)(y,d.default),y.prototype.handleLayerChange_=function(){this.changed()},y.prototype.handleLayersChanged_=function(t){this.layersListenerKeys_.forEach(u.unlistenByKey),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(Object(u.listen)(e,o.default.ADD,this.handleLayersAdd_,this),Object(u.listen)(e,o.default.REMOVE,this.handleLayersRemove_,this));for(const t in this.listenerKeys_)this.listenerKeys_[t].forEach(u.unlistenByKey);Object(f.clear)(this.listenerKeys_);const i=e.getArray();for(let t=0,e=i.length;t<e;t++){const e=i[t];this.listenerKeys_[Object(n.getUid)(e).toString()]=[Object(u.listen)(e,a.a.PROPERTYCHANGE,this.handleLayerChange_,this),Object(u.listen)(e,c.default.CHANGE,this.handleLayerChange_,this)]}this.changed()},y.prototype.handleLayersAdd_=function(t){const e=t.element,i=Object(n.getUid)(e).toString();this.listenerKeys_[i]=[Object(u.listen)(e,a.a.PROPERTYCHANGE,this.handleLayerChange_,this),Object(u.listen)(e,c.default.CHANGE,this.handleLayerChange_,this)],this.changed()},y.prototype.handleLayersRemove_=function(t){const e=t.element,i=Object(n.getUid)(e).toString();this.listenerKeys_[i].forEach(u.unlistenByKey),delete this.listenerKeys_[i],this.changed()},y.prototype.getLayers=function(){return this.get(g)},y.prototype.setLayers=function(t){this.set(g,t)},y.prototype.getLayersArray=function(t){const e=void 0!==t?t:[];return this.getLayers().forEach(function(t){t.getLayersArray(e)}),e},y.prototype.getLayerStatesArray=function(t){const e=void 0!==t?t:[],i=e.length;this.getLayers().forEach(function(t){t.getLayerStatesArray(e)});const n=this.getLayerState();for(let t=i,r=e.length;t<r;t++){const i=e[t];i.opacity*=n.opacity,i.visible=i.visible&&n.visible,i.maxResolution=Math.min(i.maxResolution,n.maxResolution),i.minResolution=Math.max(i.minResolution,n.minResolution),void 0!==n.extent&&(void 0!==i.extent?i.extent=Object(h.getIntersection)(i.extent,n.extent):i.extent=n.extent)}return e},y.prototype.getSourceState=function(){return p.a.READY},e.default=y},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(2),o=i(19),s=i(5),a=i(48),l=i(81);const u=function(t,e,i){a.default.call(this);const n=e||0;this.setCenterAndRadius(t,n,i)};Object(n.inherits)(u,a.default),u.prototype.clone=function(){const t=new u(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice()),t},u.prototype.closestPointXY=function(t,e,i,n){const r=this.flatCoordinates,o=t-r[0],s=e-r[1],a=o*o+s*s;if(a<n){if(0===a)for(let t=0;t<this.stride;++t)i[t]=r[t];else{const t=this.getRadius()/Math.sqrt(a);i[0]=r[0]+t*o,i[1]=r[1]+t*s;for(let t=2;t<this.stride;++t)i[t]=r[t]}return i.length=this.stride,a}return n},u.prototype.containsXY=function(t,e){const i=this.flatCoordinates,n=t-i[0],r=e-i[1];return n*n+r*r<=this.getRadiusSquared_()},u.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},u.prototype.computeExtent=function(t){const e=this.flatCoordinates,i=e[this.stride]-e[0];return Object(r.createOrUpdate)(e[0]-i,e[1]-i,e[0]+i,e[1]+i,t)},u.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},u.prototype.getRadiusSquared_=function(){const t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},u.prototype.getType=function(){return s.default.CIRCLE},u.prototype.intersectsExtent=function(t){const e=this.getExtent();if(Object(r.intersects)(t,e)){const e=this.getCenter();return t[0]<=e[0]&&t[2]>=e[0]||(t[1]<=e[1]&&t[3]>=e[1]||Object(r.forEachCorner)(t,this.intersectsCoordinate,this))}return!1},u.prototype.setCenter=function(t){const e=this.stride,i=this.flatCoordinates[e]-this.flatCoordinates[0],n=t.slice();n[e]=n[0]+i;for(let i=1;i<e;++i)n[e+i]=t[i];this.setFlatCoordinates(this.layout,n)},u.prototype.setCenterAndRadius=function(t,e,i){if(t){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]);const n=this.flatCoordinates;let r=Object(l.a)(n,0,t,this.stride);n[r++]=n[0]+e;for(let t=1,e=this.stride;t<e;++t)n[r++]=n[t];n.length=r,this.changed()}else this.setFlatCoordinates(o.default.XY,null)},u.prototype.getCoordinates=function(){},u.prototype.setCoordinates=function(t,e){},u.prototype.setFlatCoordinates=function(t,e){this.setFlatCoordinatesInternal(t,e),this.changed()},u.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},u.prototype.transform,e.default=u},function(t,e,i){"use strict";i.d(e,"a",function(){return r});var n=i(2);function r(t,e,i,r){const o=[];let s=Object(n.createEmpty)();for(let a=0,l=i.length;a<l;++a){const l=i[a];s=Object(n.createOrUpdateFromFlatCoordinates)(t,e,l[0],r),o.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=l[l.length-1]}return o}},function(t,e,i){"use strict";e.a={IMAGE:"image",VECTOR:"vector"}},function(t,e,i){"use strict";i.r(e);var n=i(24),r=i(12),o=i(2),s=i(5),a=i(274),l=i(187),u=i(156),c=i(9),h=i(55),d=i(14);const f=function(t,e,i,n,r){this.extent_,this.id_=r,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i,this.properties_=n},p=Object(d.c)();f.prototype.get=function(t){return this.properties_[t]},f.prototype.getEnds=f.prototype.getEndss=function(){return this.ends_},f.prototype.getExtent=function(){return this.extent_||(this.extent_=this.type_===s.default.POINT?Object(o.createOrUpdateFromCoordinate)(this.flatCoordinates_):Object(o.createOrUpdateFromFlatCoordinates)(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_},f.prototype.getFlatInteriorPoint=function(){if(!this.flatInteriorPoints_){const t=Object(o.getCenter)(this.getExtent());this.flatInteriorPoints_=Object(l.a)(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_},f.prototype.getFlatInteriorPoints=function(){if(!this.flatInteriorPoints_){const t=Object(a.a)(this.flatCoordinates_,0,this.ends_,2);this.flatInteriorPoints_=Object(l.b)(this.flatCoordinates_,0,this.ends_,2,t)}return this.flatInteriorPoints_},f.prototype.getFlatMidpoint=function(){return this.flatMidpoints_||(this.flatMidpoints_=Object(u.a)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_},f.prototype.getFlatMidpoints=function(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const t=this.flatCoordinates_;let e=0;const i=this.ends_;for(let n=0,o=i.length;n<o;++n){const o=i[n],s=Object(u.a)(t,e,o,2,.5);Object(r.c)(this.flatMidpoints_,s),e=o}}return this.flatMidpoints_},f.prototype.getId=function(){return this.id_},f.prototype.getOrientedFlatCoordinates=function(){return this.flatCoordinates_},f.prototype.getFlatCoordinates=f.prototype.getOrientedFlatCoordinates,f.prototype.getGeometry=function(){return this},f.prototype.getProperties=function(){return this.properties_},f.prototype.getSimplifiedGeometry=f.prototype.getGeometry,f.prototype.getStride=function(){return 2},f.prototype.getStyleFunction=n.c,f.prototype.getType=function(){return this.type_},f.prototype.transform=function(t,e){const i=(t=Object(c.get)(t)).getExtent(),n=t.getWorldExtent(),r=Object(o.getHeight)(n)/Object(o.getHeight)(i);Object(d.b)(p,n[0],n[3],r,-r,0,0,0),Object(h.c)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,p,this.flatCoordinates_)},e.default=f},function(t,e,i){"use strict";var n=i(2),r=i(18),o=i(9);const s=function(t,e,i,r,s){this.sourceProj_=t,this.targetProj_=e;let a={};const l=Object(o.getTransform)(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){const e=t[0]+"/"+t[1];return a[e]||(a[e]=l(t)),a[e]},this.maxSourceExtent_=r,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&Object(n.getWidth)(r)==Object(n.getWidth)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Object(n.getWidth)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Object(n.getWidth)(this.targetProj_.getExtent()):null;const u=Object(n.getTopLeft)(i),c=Object(n.getTopRight)(i),h=Object(n.getBottomRight)(i),d=Object(n.getBottomLeft)(i),f=this.transformInv_(u),p=this.transformInv_(c),g=this.transformInv_(h),y=this.transformInv_(d);if(this.addQuad_(u,c,h,d,f,p,g,y,10),this.wrapsXInSource_){let t=1/0;this.triangles_.forEach(function(e,i,n){t=Math.min(t,e.source[0][0],e.source[1][0],e.source[2][0])}),this.triangles_.forEach(function(e){if(Math.max(e.source[0][0],e.source[1][0],e.source[2][0])-t>this.sourceWorldWidth_/2){const i=[[e.source[0][0],e.source[0][1]],[e.source[1][0],e.source[1][1]],[e.source[2][0],e.source[2][1]]];i[0][0]-t>this.sourceWorldWidth_/2&&(i[0][0]-=this.sourceWorldWidth_),i[1][0]-t>this.sourceWorldWidth_/2&&(i[1][0]-=this.sourceWorldWidth_),i[2][0]-t>this.sourceWorldWidth_/2&&(i[2][0]-=this.sourceWorldWidth_);const n=Math.min(i[0][0],i[1][0],i[2][0]);Math.max(i[0][0],i[1][0],i[2][0])-n<this.sourceWorldWidth_/2&&(e.source=i)}}.bind(this))}a={}};s.prototype.addTriangle_=function(t,e,i,n,r,o){this.triangles_.push({source:[n,r,o],target:[t,e,i]})},s.prototype.addQuad_=function(t,e,i,o,s,a,l,u,c){const h=Object(n.boundingExtent)([s,a,l,u]),d=this.sourceWorldWidth_?Object(n.getWidth)(h)/this.sourceWorldWidth_:null,f=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&d>.5&&d<1;let g=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const r=Object(n.boundingExtent)([t,e,i,o]);g|=Object(n.getWidth)(r)/this.targetWorldWidth_>.25}!p&&this.sourceProj_.isGlobal()&&d&&(g|=d>.25)}if(g||!this.maxSourceExtent_||Object(n.intersects)(h,this.maxSourceExtent_)){if(!(g||isFinite(s[0])&&isFinite(s[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(l[0])&&isFinite(l[1])&&isFinite(u[0])&&isFinite(u[1]))){if(!(c>0))return;g=!0}if(c>0){if(!g){const e=[(t[0]+i[0])/2,(t[1]+i[1])/2],n=this.transformInv_(e);let o;if(p){o=(Object(r.d)(s[0],f)+Object(r.d)(l[0],f))/2-Object(r.d)(n[0],f)}else o=(s[0]+l[0])/2-n[0];const a=(s[1]+l[1])/2-n[1];g=o*o+a*a>this.errorThresholdSquared_}if(g){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){const n=[(e[0]+i[0])/2,(e[1]+i[1])/2],r=this.transformInv_(n),h=[(o[0]+t[0])/2,(o[1]+t[1])/2],d=this.transformInv_(h);this.addQuad_(t,e,n,h,s,a,r,d,c-1),this.addQuad_(h,n,i,o,d,r,l,u,c-1)}else{const n=[(t[0]+e[0])/2,(t[1]+e[1])/2],r=this.transformInv_(n),h=[(i[0]+o[0])/2,(i[1]+o[1])/2],d=this.transformInv_(h);this.addQuad_(t,n,h,o,s,r,d,u,c-1),this.addQuad_(n,e,i,h,r,a,l,d,c-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}this.addTriangle_(t,i,o,s,l,u),this.addTriangle_(t,e,i,s,a,l)}},s.prototype.calculateSourceExtent=function(){const t=Object(n.createEmpty)();return this.triangles_.forEach(function(e,i,r){const o=e.source;Object(n.extendCoordinate)(t,o[0]),Object(n.extendCoordinate)(t,o[1]),Object(n.extendCoordinate)(t,o[2])}),t},s.prototype.getTriangles=function(){return this.triangles_},e.a=s},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(215);const o=function(t){const e=["And"].concat(Array.prototype.slice.call(arguments));r.a.apply(this,e)};Object(n.inherits)(o,r.a);var s=o,a=i(343),l=i(344),u=i(345),c=i(346),h=i(347),d=i(348),f=i(349),p=i(350),g=i(351),y=i(352),m=i(353),_=i(354),v=i(355),b=i(356),S=i(357),O=i(358);function C(t){const e=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(s,e))}function x(t){const e=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(S.default,e))}function T(t){return new v.default(t)}function E(t,e,i){return new a.default(t,e,i)}function P(t,e,i){return new l.default(t,e,i)}function j(t,e,i){return new f.default(t,e,i)}function w(t,e,i){return new O.default(t,e,i)}function I(t,e,i){return new c.default(t,e,i)}function L(t,e,i){return new b.default(t,e,i)}function R(t,e){return new m.default(t,e)}function A(t,e){return new _.default(t,e)}function M(t,e){return new h.default(t,e)}function F(t,e){return new d.default(t,e)}function k(t){return new y.default(t)}function N(t,e,i){return new p.default(t,e,i)}function D(t,e,i,n,r,o){return new g.default(t,e,i,n,r,o)}function G(t,e,i){return new u.default(t,e,i)}i.d(e,"and",function(){return C}),i.d(e,"or",function(){return x}),i.d(e,"not",function(){return T}),i.d(e,"bbox",function(){return E}),i.d(e,"contains",function(){return P}),i.d(e,"intersects",function(){return j}),i.d(e,"within",function(){return w}),i.d(e,"equalTo",function(){return I}),i.d(e,"notEqualTo",function(){return L}),i.d(e,"lessThan",function(){return R}),i.d(e,"lessThanOrEqualTo",function(){return A}),i.d(e,"greaterThan",function(){return M}),i.d(e,"greaterThanOrEqualTo",function(){return F}),i.d(e,"isNull",function(){return k}),i.d(e,"between",function(){return N}),i.d(e,"like",function(){return D}),i.d(e,"during",function(){return G})},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(24),o=i(4),s=i(29),a=i(10),l=i(35),u=i(9);const c="addfeatures",h=function(t,e,i,n){s.default.call(this,t),this.features=i,this.file=e,this.projection=n};Object(n.inherits)(h,s.default);const d=function(t){const e=t||{};l.default.call(this,{handleEvent:r.b}),this.formatConstructors_=e.formatConstructors?e.formatConstructors:[],this.projection_=e.projection?Object(u.get)(e.projection):null,this.dropListenKeys_=null,this.source_=e.source||null,this.target=e.target?e.target:null};function f(t){const e=t.dataTransfer.files;for(let t=0,i=e.length;t<i;++t){const i=e.item(t),n=new FileReader;n.addEventListener(a.default.LOAD,this.handleResult_.bind(this,i)),n.readAsText(i)}}function p(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"}Object(n.inherits)(d,l.default),d.prototype.handleResult_=function(t,e){const i=e.target.result,n=this.getMap();let r=this.projection_;if(!r){r=n.getView().getProjection()}const o=this.formatConstructors_;let s=[];for(let t=0,e=o.length;t<e;++t){const e=new(0,o[t]);if((s=this.tryReadFeatures_(e,i,{featureProjection:r}))&&s.length>0)break}this.source_&&(this.source_.clear(),this.source_.addFeatures(s)),this.dispatchEvent(new h(c,t,s,r))},d.prototype.registerListeners_=function(){const t=this.getMap();if(t){const e=this.target?this.target:t.getViewport();this.dropListenKeys_=[Object(o.listen)(e,a.default.DROP,f,this),Object(o.listen)(e,a.default.DRAGENTER,p,this),Object(o.listen)(e,a.default.DRAGOVER,p,this),Object(o.listen)(e,a.default.DROP,p,this)]}},d.prototype.setActive=function(t){l.default.prototype.setActive.call(this,t),t?this.registerListeners_():this.unregisterListeners_()},d.prototype.setMap=function(t){this.unregisterListeners_(),l.default.prototype.setMap.call(this,t),this.getActive()&&this.registerListeners_()},d.prototype.tryReadFeatures_=function(t,e,i){try{return t.readFeatures(e,i)}catch(t){return null}},d.prototype.unregisterListeners_=function(){this.dropListenKeys_&&(this.dropListenKeys_.forEach(o.unlistenByKey),this.dropListenKeys_=null)},e.default=d},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(125),o=i(34),s=i(37),a=i(35),l=i(28);const u=function(t){const e=t||{};l.default.call(this,{handleDownEvent:d,handleDragEvent:c,handleUpEvent:h}),this.condition_=e.condition?e.condition:s.shiftKeyOnly,this.lastAngle_=void 0,this.lastMagnitude_=void 0,this.lastScaleDelta_=0,this.duration_=void 0!==e.duration?e.duration:400};function c(t){if(!Object(s.mouseOnly)(t))return;const e=t.map,i=e.getSize(),n=t.pixel,o=n[0]-i[0]/2,l=i[1]/2-n[1],u=Math.atan2(l,o),c=Math.sqrt(o*o+l*l),h=e.getView();if(h.getConstraints().rotation!==r.c&&void 0!==this.lastAngle_){const t=u-this.lastAngle_;Object(a.rotateWithoutConstraints)(h,h.getRotation()-t)}if(this.lastAngle_=u,void 0!==this.lastMagnitude_){const t=this.lastMagnitude_*(h.getResolution()/c);Object(a.zoomWithoutConstraints)(h,t)}void 0!==this.lastMagnitude_&&(this.lastScaleDelta_=this.lastMagnitude_/c),this.lastMagnitude_=c}function h(t){if(!Object(s.mouseOnly)(t))return!0;const e=t.map.getView();e.setHint(o.default.INTERACTING,-1);const i=this.lastScaleDelta_-1;return Object(a.rotate)(e,e.getRotation()),Object(a.zoom)(e,e.getResolution(),void 0,this.duration_,i),this.lastScaleDelta_=0,!1}function d(t){return!!Object(s.mouseOnly)(t)&&(!!this.condition_(t)&&(t.map.getView().setHint(o.default.INTERACTING,1),this.lastAngle_=void 0,this.lastMagnitude_=void 0,!0))}Object(n.inherits)(u,l.default),e.default=u},function(t,e,i){"use strict";i.r(e),i.d(e,"handleEvent",function(){return M}),i.d(e,"createRegularPolygon",function(){return N}),i.d(e,"createBox",function(){return D});var n=i(1),r=i(10),o=i(38),s=i(32),a=i(78),l=i(25),u=i(27),c=i(4),h=i(29),d=i(37),f=i(2),p=i(24),g=i(273),y=i(5),m=i(41),_=i(58),v=i(71),b=i(76),S=i(176),O=i(39),C=i(36),x=i(28),T=i(190),E=i(90),P=i(83),j=i(62);const w={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"},I="drawstart",L="drawend",R=function(t,e){h.default.call(this,t),this.feature=e};Object(n.inherits)(R,h.default);const A=function(t){x.default.call(this,{handleDownEvent:F,handleEvent:M,handleUpEvent:k}),this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.freehand_=!1,this.source_=t.source?t.source:null,this.features_=t.features?t.features:null,this.snapTolerance_=t.snapTolerance?t.snapTolerance:12,this.type_=t.type,this.mode_=function(t){let e;t===y.default.POINT||t===y.default.MULTI_POINT?e=w.POINT:t===y.default.LINE_STRING||t===y.default.MULTI_LINE_STRING?e=w.LINE_STRING:t===y.default.POLYGON||t===y.default.MULTI_POLYGON?e=w.POLYGON:t===y.default.CIRCLE&&(e=w.CIRCLE);return e}(this.type_),this.stopClick_=!!t.stopClick,this.minPoints_=t.minPoints?t.minPoints:this.mode_===w.POLYGON?3:2,this.maxPoints_=t.maxPoints?t.maxPoints:1/0,this.finishCondition_=t.finishCondition?t.finishCondition:p.b;let e=t.geometryFunction;if(!e)if(this.type_===y.default.CIRCLE)e=function(t,e){const i=e||new g.default([NaN,NaN]),n=Object(u.squaredDistance)(t[0],t[1]);return i.setCenterAndRadius(t[0],Math.sqrt(n)),i};else{let t;const i=this.mode_;i===w.POINT?t=O.default:i===w.LINE_STRING?t=m.default:i===w.POLYGON&&(t=C.default),e=function(e,n){let r=n;return r?i===w.POLYGON?e[0].length?r.setCoordinates([e[0].concat([e[0][0]])]):r.setCoordinates([]):r.setCoordinates(e):r=new t(e),r}}this.geometryFunction_=e,this.dragVertexDelay_=void 0!==t.dragVertexDelay?t.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,this.overlay_=new E.default({source:new P.default({useSpatialIndex:!1,wrapX:!!t.wrapX&&t.wrapX}),style:t.style?t.style:function(){const t=Object(j.createEditingStyle)();return function(e,i){return t[e.getGeometry().getType()]}}(),updateWhileInteracting:!0}),this.geometryName_=t.geometryName,this.condition_=t.condition?t.condition:d.noModifierKeys,this.freehandCondition_,t.freehand?this.freehandCondition_=d.always:this.freehandCondition_=t.freehandCondition?t.freehandCondition:d.shiftKeyOnly,Object(c.listen)(this,Object(l.getChangeEventType)(T.a.ACTIVE),this.updateState_,this)};function M(t){t.originalEvent.type===r.default.CONTEXTMENU&&t.preventDefault(),this.freehand_=this.mode_!==w.POINT&&this.freehandCondition_(t);let e=t.type===s.default.POINTERMOVE,i=!0;if(this.lastDragTime_&&t.type===s.default.POINTERDRAG){Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=t.pixel,this.shouldHandle_=!this.freehand_,e=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)}return this.freehand_&&t.type===s.default.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(t),i=!1):this.freehand_&&t.type===s.default.POINTERDOWN?i=!1:e?(i=t.type===s.default.POINTERMOVE)&&this.freehand_?i=this.handlePointerMove_(t):(t.pointerEvent.pointerType==S.b||t.type===s.default.POINTERDRAG&&!this.downTimeout_)&&this.handlePointerMove_(t):t.type===s.default.DBLCLICK&&(i=!1),x.handleEvent.call(this,t)&&i}function F(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t),!0):!!this.condition_(t)&&(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new a.default(s.default.POINTERMOVE,t.map,t.pointerEvent,t.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0)}function k(t){let e=!0;this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t);const i=this.mode_===w.CIRCLE;return this.shouldHandle_?(this.finishCoordinate_?this.freehand_||i?this.finishDrawing():this.atFinish_(t)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t):(this.startDrawing_(t),this.mode_===w.POINT&&this.finishDrawing()),e=!1):this.freehand_&&(this.finishCoordinate_=null,this.abortDrawing_()),!e&&this.stopClick_&&t.stopPropagation(),e}function N(t,e){return function(i,n){const r=i[0],o=i[1],s=Math.sqrt(Object(u.squaredDistance)(r,o)),a=n||Object(C.fromCircle)(new g.default(r),t),l=e||Math.atan((o[1]-r[1])/(o[0]-r[0]));return Object(C.makeRegular)(a,r,s,l),a}}function D(){return function(t,e){const i=Object(f.boundingExtent)(t),n=e||new C.default(null);return n.setCoordinates([[Object(f.getBottomLeft)(i),Object(f.getBottomRight)(i),Object(f.getTopRight)(i),Object(f.getTopLeft)(i),Object(f.getBottomLeft)(i)]]),n}}Object(n.inherits)(A,x.default),A.prototype.setMap=function(t){x.default.prototype.setMap.call(this,t),this.updateState_()},A.prototype.handlePointerMove_=function(t){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const e=this.downPx_,i=t.pixel,n=e[0]-i[0],r=e[1]-i[1],o=n*n+r*r;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return!0}return this.finishCoordinate_?this.modifyDrawing_(t):this.createOrUpdateSketchPoint_(t),!0},A.prototype.atFinish_=function(t){let e=!1;if(this.sketchFeature_){let i=!1,n=[this.finishCoordinate_];if(this.mode_===w.LINE_STRING?i=this.sketchCoords_.length>this.minPoints_:this.mode_===w.POLYGON&&(i=this.sketchCoords_[0].length>this.minPoints_,n=[this.sketchCoords_[0][0],this.sketchCoords_[0][this.sketchCoords_[0].length-2]]),i){const i=t.map;for(let r=0,o=n.length;r<o;r++){const o=n[r],s=i.getPixelFromCoordinate(o),a=t.pixel,l=a[0]-s[0],u=a[1]-s[1],c=this.freehand_?1:this.snapTolerance_;if(e=Math.sqrt(l*l+u*u)<=c){this.finishCoordinate_=o;break}}}}return e},A.prototype.createOrUpdateSketchPoint_=function(t){const e=t.coordinate.slice();if(this.sketchPoint_){this.sketchPoint_.getGeometry().setCoordinates(e)}else this.sketchPoint_=new o.default(new O.default(e)),this.updateSketchFeatures_()},A.prototype.startDrawing_=function(t){const e=t.coordinate;this.finishCoordinate_=e,this.mode_===w.POINT?this.sketchCoords_=e.slice():this.mode_===w.POLYGON?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new o.default(new m.default(this.sketchLineCoords_)));const i=this.geometryFunction_(this.sketchCoords_);this.sketchFeature_=new o.default,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(i),this.updateSketchFeatures_(),this.dispatchEvent(new R(I,this.sketchFeature_))},A.prototype.modifyDrawing_=function(t){let e=t.coordinate;const i=this.sketchFeature_.getGeometry();let n,r,s;if(this.mode_===w.POINT?r=this.sketchCoords_:this.mode_===w.POLYGON?(r=(n=this.sketchCoords_[0])[n.length-1],this.atFinish_(t)&&(e=this.finishCoordinate_.slice())):r=(n=this.sketchCoords_)[n.length-1],r[0]=e[0],r[1]=e[1],this.geometryFunction_(this.sketchCoords_,i),this.sketchPoint_){this.sketchPoint_.getGeometry().setCoordinates(e)}if(i instanceof C.default&&this.mode_!==w.POLYGON){this.sketchLine_||(this.sketchLine_=new o.default(new m.default(null)));const t=i.getLinearRing(0);(s=this.sketchLine_.getGeometry()).setFlatCoordinates(t.getLayout(),t.getFlatCoordinates())}else this.sketchLineCoords_&&(s=this.sketchLine_.getGeometry()).setCoordinates(this.sketchLineCoords_);this.updateSketchFeatures_()},A.prototype.addToDrawing_=function(t){const e=t.coordinate,i=this.sketchFeature_.getGeometry();let n,r;this.mode_===w.LINE_STRING?(this.finishCoordinate_=e.slice(),(r=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?r.pop():n=!0),r.push(e.slice()),this.geometryFunction_(r,i)):this.mode_===w.POLYGON&&((r=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?r.pop():n=!0),r.push(e.slice()),n&&(this.finishCoordinate_=r[0]),this.geometryFunction_(this.sketchCoords_,i)),this.updateSketchFeatures_(),n&&this.finishDrawing()},A.prototype.removeLastPoint=function(){if(!this.sketchFeature_)return;const t=this.sketchFeature_.getGeometry();let e,i;this.mode_===w.LINE_STRING?((e=this.sketchCoords_).splice(-2,1),this.geometryFunction_(e,t),e.length>=2&&(this.finishCoordinate_=e[e.length-2].slice())):this.mode_===w.POLYGON&&((e=this.sketchCoords_[0]).splice(-2,1),(i=this.sketchLine_.getGeometry()).setCoordinates(e),this.geometryFunction_(this.sketchCoords_,t)),0===e.length&&(this.finishCoordinate_=null),this.updateSketchFeatures_()},A.prototype.finishDrawing=function(){const t=this.abortDrawing_();if(!t)return;let e=this.sketchCoords_;const i=t.getGeometry();this.mode_===w.LINE_STRING?(e.pop(),this.geometryFunction_(e,i)):this.mode_===w.POLYGON&&(e[0].pop(),this.geometryFunction_(e,i),e=i.getCoordinates()),this.type_===y.default.MULTI_POINT?t.setGeometry(new v.default([e])):this.type_===y.default.MULTI_LINE_STRING?t.setGeometry(new _.default([e])):this.type_===y.default.MULTI_POLYGON&&t.setGeometry(new b.default([e])),this.dispatchEvent(new R(L,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)},A.prototype.abortDrawing_=function(){this.finishCoordinate_=null;const t=this.sketchFeature_;return t&&(this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0)),t},A.prototype.extend=function(t){const e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();const i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.updateSketchFeatures_(),this.dispatchEvent(new R(I,this.sketchFeature_))},A.prototype.shouldStopEvent=p.a,A.prototype.updateSketchFeatures_=function(){const t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);const e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)},A.prototype.updateState_=function(){const t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing_(),this.overlay_.setMap(e?t:null)},e.default=A},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(38),o=i(32),s=i(78),a=i(27),l=i(29),u=i(2),c=i(5),h=i(39),d=i(36),f=i(28),p=i(90),g=i(83),y=i(62);const m="extentchanged",_=function(t){l.default.call(this,m),this.extent=t};Object(n.inherits)(_,l.default);const v=function(t){const e=t||{};this.extent_=null,this.pointerHandler_=null,this.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,this.snappedToVertex_=!1,this.extentFeature_=null,this.vertexFeature_=null,t||(t={}),f.default.call(this,{handleDownEvent:S,handleDragEvent:O,handleEvent:b,handleUpEvent:C}),this.extentOverlay_=new p.default({source:new g.default({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.boxStyle?t.boxStyle:function(){const t=Object(y.createEditingStyle)();return function(e,i){return t[c.default.POLYGON]}}(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.vertexOverlay_=new p.default({source:new g.default({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.pointerStyle?t.pointerStyle:function(){const t=Object(y.createEditingStyle)();return function(e,i){return t[c.default.POINT]}}(),updateWhileAnimating:!0,updateWhileInteracting:!0}),t.extent&&this.setExtent(t.extent)};function b(t){return!(t instanceof s.default)||(t.type!=o.default.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(t),f.handleEvent.call(this,t),!1)}function S(t){const e=t.pixel,i=t.map,n=this.getExtent();let r=this.snapToVertex_(e,i);const o=function(t){let e=null,i=null;return t[0]==n[0]?e=n[2]:t[0]==n[2]&&(e=n[0]),t[1]==n[1]?i=n[3]:t[1]==n[3]&&(i=n[1]),null!==e&&null!==i?[e,i]:null};if(r&&n){const t=r[0]==n[0]||r[0]==n[2]?r[0]:null,e=r[1]==n[1]||r[1]==n[3]?r[1]:null;null!==t&&null!==e?this.pointerHandler_=x(o(r)):null!==t?this.pointerHandler_=T(o([t,n[1]]),o([t,n[3]])):null!==e&&(this.pointerHandler_=T(o([n[0],e]),o([n[2],e])))}else r=i.getCoordinateFromPixel(e),this.setExtent([r[0],r[1],r[0],r[1]]),this.pointerHandler_=x(r);return!0}function O(t){if(this.pointerHandler_){const e=t.coordinate;this.setExtent(this.pointerHandler_(e)),this.createOrUpdatePointerFeature_(e)}return!0}function C(t){this.pointerHandler_=null;const e=this.getExtent();return e&&0!==Object(u.getArea)(e)||this.setExtent(null),!1}function x(t){return function(e){return Object(u.boundingExtent)([t,e])}}function T(t,e){return t[0]==e[0]?function(i){return Object(u.boundingExtent)([t,[i[0],e[1]]])}:t[1]==e[1]?function(i){return Object(u.boundingExtent)([t,[e[0],i[1]]])}:null}Object(n.inherits)(v,f.default),v.prototype.snapToVertex_=function(t,e){const i=e.getCoordinateFromPixel(t),n=function(t,e){return Object(a.squaredDistanceToSegment)(i,t)-Object(a.squaredDistanceToSegment)(i,e)},r=this.getExtent();if(r){const o=function(t){return[[[t[0],t[1]],[t[0],t[3]]],[[t[0],t[3]],[t[2],t[3]]],[[t[2],t[3]],[t[2],t[1]]],[[t[2],t[1]],[t[0],t[1]]]]}(r);o.sort(n);const s=o[0];let l=Object(a.closestOnSegment)(i,s);const u=e.getPixelFromCoordinate(l);if(Object(a.distance)(t,u)<=this.pixelTolerance_){const t=e.getPixelFromCoordinate(s[0]),i=e.getPixelFromCoordinate(s[1]),n=Object(a.squaredDistance)(u,t),r=Object(a.squaredDistance)(u,i),o=Math.sqrt(Math.min(n,r));return this.snappedToVertex_=o<=this.pixelTolerance_,this.snappedToVertex_&&(l=n>r?s[1]:s[0]),l}}return null},v.prototype.handlePointerMove_=function(t){const e=t.pixel,i=t.map;let n=this.snapToVertex_(e,i);n||(n=i.getCoordinateFromPixel(e)),this.createOrUpdatePointerFeature_(n)},v.prototype.createOrUpdateExtentFeature_=function(t){let e=this.extentFeature_;return e?t?e.setGeometry(Object(d.fromExtent)(t)):e.setGeometry(void 0):(e=t?new r.default(Object(d.fromExtent)(t)):new r.default({}),this.extentFeature_=e,this.extentOverlay_.getSource().addFeature(e)),e},v.prototype.createOrUpdatePointerFeature_=function(t){let e=this.vertexFeature_;if(e){e.getGeometry().setCoordinates(t)}else e=new r.default(new h.default(t)),this.vertexFeature_=e,this.vertexOverlay_.getSource().addFeature(e);return e},v.prototype.setMap=function(t){this.extentOverlay_.setMap(t),this.vertexOverlay_.setMap(t),f.default.prototype.setMap.call(this,t)},v.prototype.getExtent=function(){return this.extent_},v.prototype.setExtent=function(t){this.extent_=t||null,this.createOrUpdateExtentFeature_(t),this.dispatchEvent(new _(this.extent_))},e.default=v},function(t,e,i){"use strict";i.r(e),i.d(e,"ModifyEvent",function(){return T});var n=i(1),r=i(42),o=i(52),s=i(38),a=i(32),l=i(78),u=i(12),c=i(27),h=i(4),d=i(29),f=i(10),p=i(37),g=i(2),y=i(5),m=i(39),_=i(28),v=i(90),b=i(83),S=i(104),O=i(123),C=i(62);const x={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"},T=function(t,e,i){d.default.call(this,t),this.features=e,this.mapBrowserEvent=i};Object(n.inherits)(T,d.default);const E=function(t){let e;if(_.default.call(this,{handleDownEvent:I,handleDragEvent:L,handleEvent:A,handleUpEvent:R}),this.condition_=t.condition?t.condition:p.primaryAction,this.defaultDeleteCondition_=function(t){return Object(p.altKeyOnly)(t)&&Object(p.singleClick)(t)},this.deleteCondition_=t.deleteCondition?t.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=t.insertVertexCondition?t.insertVertexCondition:p.always,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.modified_=!1,this.rBush_=new O.default,this.pixelTolerance_=void 0!==t.pixelTolerance?t.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new v.default({source:new b.default({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.style?t.style:function(){const t=Object(C.createEditingStyle)();return function(e,i){return t[y.default.POINT]}}(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,Circle:this.writeCircleGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_},this.source_=null,t.source?(this.source_=t.source,e=new r.default(this.source_.getFeatures()),Object(h.listen)(this.source_,S.a.ADDFEATURE,this.handleSourceAdd_,this),Object(h.listen)(this.source_,S.a.REMOVEFEATURE,this.handleSourceRemove_,this)):e=t.features,!e)throw new Error("The modify interaction requires features or a source");this.features_=e,this.features_.forEach(this.addFeature_.bind(this)),Object(h.listen)(this.features_,o.default.ADD,this.handleFeatureAdd_,this),Object(h.listen)(this.features_,o.default.REMOVE,this.handleFeatureRemove_,this),this.lastPointerEvent_=null};Object(n.inherits)(E,_.default);const P=0,j=1;function w(t,e){return t.index-e.index}function I(t){if(!this.condition_(t))return!1;this.handlePointerAtPixel_(t.pixel,t.map);const e=t.map.getCoordinateFromPixel(t.pixel);this.dragSegments_.length=0,this.modified_=!1;const i=this.vertexFeature_;if(i){const r=[],o=i.getGeometry().getCoordinates(),s=Object(g.boundingExtent)([o]),a=this.rBush_.getInExtent(s),l={};a.sort(w);for(let i=0,s=a.length;i<s;++i){const s=a[i],u=s.segment;let h=Object(n.getUid)(s.feature);const d=s.depth;if(d&&(h+="-"+d.join("-")),l[h]||(l[h]=new Array(2)),s.geometry.getType()===y.default.CIRCLE&&s.index===j){const t=F(e,s);Object(c.equals)(t,o)&&!l[h][0]&&(this.dragSegments_.push([s,0]),l[h][0]=s)}else if(Object(c.equals)(u[0],o)&&!l[h][0])this.dragSegments_.push([s,0]),l[h][0]=s;else if(Object(c.equals)(u[1],o)&&!l[h][1]){if((s.geometry.getType()===y.default.LINE_STRING||s.geometry.getType()===y.default.MULTI_LINE_STRING)&&l[h][0]&&0===l[h][0].index)continue;this.dragSegments_.push([s,1]),l[h][1]=s}else this.insertVertexCondition_(t)&&Object(n.getUid)(u)in this.vertexSegments_&&!l[h][0]&&!l[h][1]&&r.push([s,o])}r.length&&this.willModifyFeatures_(t);for(let t=r.length-1;t>=0;--t)this.insertVertex_.apply(this,r[t])}return!!this.vertexFeature_}function L(t){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(t);const e=t.coordinate;for(let t=0,i=this.dragSegments_.length;t<i;++t){const i=this.dragSegments_[t],n=i[0],r=n.depth,o=n.geometry;let s;const a=n.segment,l=i[1];for(;e.length<o.getStride();)e.push(a[l][e.length]);switch(o.getType()){case y.default.POINT:s=e,a[0]=a[1]=e;break;case y.default.MULTI_POINT:(s=o.getCoordinates())[n.index]=e,a[0]=a[1]=e;break;case y.default.LINE_STRING:(s=o.getCoordinates())[n.index+l]=e,a[l]=e;break;case y.default.MULTI_LINE_STRING:case y.default.POLYGON:(s=o.getCoordinates())[r[0]][n.index+l]=e,a[l]=e;break;case y.default.MULTI_POLYGON:(s=o.getCoordinates())[r[1]][r[0]][n.index+l]=e,a[l]=e;break;case y.default.CIRCLE:a[0]=a[1]=e,n.index===P?(this.changingFeature_=!0,o.setCenter(e),this.changingFeature_=!1):(this.changingFeature_=!0,o.setRadius(Object(c.distance)(o.getCenter(),e)),this.changingFeature_=!1)}s&&this.setGeometryCoordinates_(o,s)}this.createOrUpdateVertexFeature_(e)}function R(t){for(let t=this.dragSegments_.length-1;t>=0;--t){const e=this.dragSegments_[t][0],i=e.geometry;if(i.getType()===y.default.CIRCLE){const t=i.getCenter(),n=e.featureSegments[0],r=e.featureSegments[1];n.segment[0]=n.segment[1]=t,r.segment[0]=r.segment[1]=t,this.rBush_.update(Object(g.createOrUpdateFromCoordinate)(t),n),this.rBush_.update(i.getExtent(),r)}else this.rBush_.update(Object(g.boundingExtent)(e.segment),e)}return this.modified_&&(this.dispatchEvent(new T(x.MODIFYEND,this.features_,t)),this.modified_=!1),!1}function A(t){if(!(t instanceof l.default))return!0;let e;return this.lastPointerEvent_=t,t.map.getView().getInteracting()||t.type!=a.default.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(t),this.vertexFeature_&&this.deleteCondition_(t)&&(e=!(t.type!=a.default.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),t.type==a.default.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),_.handleEvent.call(this,t)&&!e}function M(t,e){const i=e.geometry;if(i.getType()===y.default.CIRCLE){const n=i;if(e.index===j){const e=Object(c.squaredDistance)(n.getCenter(),t),i=Math.sqrt(e)-n.getRadius();return i*i}}return Object(c.squaredDistanceToSegment)(t,e.segment)}function F(t,e){const i=e.geometry;return i.getType()===y.default.CIRCLE&&e.index===j?i.getClosestPoint(t):Object(c.closestOnSegment)(t,e.segment)}E.prototype.addFeature_=function(t){const e=t.getGeometry();e&&e.getType()in this.SEGMENT_WRITERS_&&this.SEGMENT_WRITERS_[e.getType()].call(this,t,e);const i=this.getMap();i&&i.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,i),Object(h.listen)(t,f.default.CHANGE,this.handleFeatureChange_,this)},E.prototype.willModifyFeatures_=function(t){this.modified_||(this.modified_=!0,this.dispatchEvent(new T(x.MODIFYSTART,this.features_,t)))},E.prototype.removeFeature_=function(t){this.removeFeatureSegmentData_(t),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),Object(h.unlisten)(t,f.default.CHANGE,this.handleFeatureChange_,this)},E.prototype.removeFeatureSegmentData_=function(t){const e=this.rBush_,i=[];e.forEach(function(e){t===e.feature&&i.push(e)});for(let t=i.length-1;t>=0;--t)e.remove(i[t])},E.prototype.setActive=function(t){this.vertexFeature_&&!t&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),_.default.prototype.setActive.call(this,t)},E.prototype.setMap=function(t){this.overlay_.setMap(t),_.default.prototype.setMap.call(this,t)},E.prototype.handleSourceAdd_=function(t){t.feature&&this.features_.push(t.feature)},E.prototype.handleSourceRemove_=function(t){t.feature&&this.features_.remove(t.feature)},E.prototype.handleFeatureAdd_=function(t){this.addFeature_(t.element)},E.prototype.handleFeatureChange_=function(t){if(!this.changingFeature_){const e=t.target;this.removeFeature_(e),this.addFeature_(e)}},E.prototype.handleFeatureRemove_=function(t){const e=t.element;this.removeFeature_(e)},E.prototype.writePointGeometry_=function(t,e){const i=e.getCoordinates(),n={feature:t,geometry:e,segment:[i,i]};this.rBush_.insert(e.getExtent(),n)},E.prototype.writeMultiPointGeometry_=function(t,e){const i=e.getCoordinates();for(let n=0,r=i.length;n<r;++n){const r=i[n],o={feature:t,geometry:e,depth:[n],index:n,segment:[r,r]};this.rBush_.insert(e.getExtent(),o)}},E.prototype.writeLineStringGeometry_=function(t,e){const i=e.getCoordinates();for(let n=0,r=i.length-1;n<r;++n){const r=i.slice(n,n+2),o={feature:t,geometry:e,index:n,segment:r};this.rBush_.insert(Object(g.boundingExtent)(r),o)}},E.prototype.writeMultiLineStringGeometry_=function(t,e){const i=e.getCoordinates();for(let n=0,r=i.length;n<r;++n){const r=i[n];for(let i=0,o=r.length-1;i<o;++i){const o=r.slice(i,i+2),s={feature:t,geometry:e,depth:[n],index:i,segment:o};this.rBush_.insert(Object(g.boundingExtent)(o),s)}}},E.prototype.writePolygonGeometry_=function(t,e){const i=e.getCoordinates();for(let n=0,r=i.length;n<r;++n){const r=i[n];for(let i=0,o=r.length-1;i<o;++i){const o=r.slice(i,i+2),s={feature:t,geometry:e,depth:[n],index:i,segment:o};this.rBush_.insert(Object(g.boundingExtent)(o),s)}}},E.prototype.writeMultiPolygonGeometry_=function(t,e){const i=e.getCoordinates();for(let n=0,r=i.length;n<r;++n){const r=i[n];for(let i=0,o=r.length;i<o;++i){const o=r[i];for(let r=0,s=o.length-1;r<s;++r){const s=o.slice(r,r+2),a={feature:t,geometry:e,depth:[i,n],index:r,segment:s};this.rBush_.insert(Object(g.boundingExtent)(s),a)}}}},E.prototype.writeCircleGeometry_=function(t,e){const i=e.getCenter(),n={feature:t,geometry:e,index:P,segment:[i,i]},r={feature:t,geometry:e,index:j,segment:[i,i]},o=[n,r];n.featureSegments=r.featureSegments=o,this.rBush_.insert(Object(g.createOrUpdateFromCoordinate)(i),n),this.rBush_.insert(e.getExtent(),r)},E.prototype.writeGeometryCollectionGeometry_=function(t,e){const i=e.getGeometriesArray();for(let e=0;e<i.length;++e)this.SEGMENT_WRITERS_[i[e].getType()].call(this,t,i[e])},E.prototype.createOrUpdateVertexFeature_=function(t){let e=this.vertexFeature_;if(e){e.getGeometry().setCoordinates(t)}else e=new s.default(new m.default(t)),this.vertexFeature_=e,this.overlay_.getSource().addFeature(e);return e},E.prototype.handlePointerMove_=function(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel_(t.pixel,t.map)},E.prototype.handlePointerAtPixel_=function(t,e){const i=e.getCoordinateFromPixel(t),r=function(t,e){return M(i,t)-M(i,e)},o=Object(g.buffer)(Object(g.createOrUpdateFromCoordinate)(i),e.getView().getResolution()*this.pixelTolerance_),s=this.rBush_.getInExtent(o);if(s.length>0){s.sort(r);const o=s[0],a=o.segment;let l=F(i,o);const u=e.getPixelFromCoordinate(l);let h=Object(c.distance)(t,u);if(h<=this.pixelTolerance_){const t={};if(o.geometry.getType()===y.default.CIRCLE&&o.index===j)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(l);else{const i=e.getPixelFromCoordinate(a[0]),r=e.getPixelFromCoordinate(a[1]),o=Object(c.squaredDistance)(u,i),d=Object(c.squaredDistance)(u,r);h=Math.sqrt(Math.min(o,d)),this.snappedToVertex_=h<=this.pixelTolerance_,this.snappedToVertex_&&(l=o>d?a[1]:a[0]),this.createOrUpdateVertexFeature_(l);for(let e=1,i=s.length;e<i;++e){const i=s[e].segment;if(!(Object(c.equals)(a[0],i[0])&&Object(c.equals)(a[1],i[1])||Object(c.equals)(a[0],i[1])&&Object(c.equals)(a[1],i[0])))break;t[Object(n.getUid)(i)]=!0}}return t[Object(n.getUid)(a)]=!0,void(this.vertexSegments_=t)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},E.prototype.insertVertex_=function(t,e){const i=t.segment,n=t.feature,r=t.geometry,o=t.depth,s=t.index;let a;for(;e.length<r.getStride();)e.push(0);switch(r.getType()){case y.default.MULTI_LINE_STRING:case y.default.POLYGON:(a=r.getCoordinates())[o[0]].splice(s+1,0,e);break;case y.default.MULTI_POLYGON:(a=r.getCoordinates())[o[1]][o[0]].splice(s+1,0,e);break;case y.default.LINE_STRING:(a=r.getCoordinates()).splice(s+1,0,e);break;default:return}this.setGeometryCoordinates_(r,a);const l=this.rBush_;l.remove(t),this.updateSegmentIndices_(r,s,o,1);const u={segment:[i[0],e],feature:n,geometry:r,depth:o,index:s};l.insert(Object(g.boundingExtent)(u.segment),u),this.dragSegments_.push([u,1]);const c={segment:[e,i[1]],feature:n,geometry:r,depth:o,index:s+1};l.insert(Object(g.boundingExtent)(c.segment),c),this.dragSegments_.push([c,0]),this.ignoreNextSingleClick_=!0},E.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=a.default.POINTERDRAG){const t=this.lastPointerEvent_;return this.willModifyFeatures_(t),this.removeVertex_(),this.dispatchEvent(new T(x.MODIFYEND,this.features_,t)),this.modified_=!1,!0}return!1},E.prototype.removeVertex_=function(){const t=this.dragSegments_,e={};let i,r,o,s,a,l,u,c,h,d,f,p=!1;for(a=t.length-1;a>=0;--a)d=(o=t[a])[0],f=Object(n.getUid)(d.feature),d.depth&&(f+="-"+d.depth.join("-")),f in e||(e[f]={}),0===o[1]?(e[f].right=d,e[f].index=d.index):1==o[1]&&(e[f].left=d,e[f].index=d.index+1);for(f in e){switch(h=e[f].right,u=e[f].left,c=(l=e[f].index)-1,d=void 0!==u?u:h,c<0&&(c=0),i=r=(s=d.geometry).getCoordinates(),p=!1,s.getType()){case y.default.MULTI_LINE_STRING:r[d.depth[0]].length>2&&(r[d.depth[0]].splice(l,1),p=!0);break;case y.default.LINE_STRING:r.length>2&&(r.splice(l,1),p=!0);break;case y.default.MULTI_POLYGON:i=i[d.depth[1]];case y.default.POLYGON:(i=i[d.depth[0]]).length>4&&(l==i.length-1&&(l=0),i.splice(l,1),p=!0,0===l&&(i.pop(),i.push(i[0]),c=i.length-1))}if(p){this.setGeometryCoordinates_(s,r);const e=[];if(void 0!==u&&(this.rBush_.remove(u),e.push(u.segment[0])),void 0!==h&&(this.rBush_.remove(h),e.push(h.segment[1])),void 0!==u&&void 0!==h){const t={depth:d.depth,feature:d.feature,geometry:d.geometry,index:c,segment:e};this.rBush_.insert(Object(g.boundingExtent)(t.segment),t)}this.updateSegmentIndices_(s,l,d.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.length=0}}return p},E.prototype.setGeometryCoordinates_=function(t,e){this.changingFeature_=!0,t.setCoordinates(e),this.changingFeature_=!1},E.prototype.updateSegmentIndices_=function(t,e,i,n){this.rBush_.forEachInExtent(t.getExtent(),function(r){r.geometry===t&&(void 0===i||void 0===r.depth||Object(u.b)(r.depth,i))&&r.index>e&&(r.index+=n)})},e.default=E},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(52),o=i(12),s=i(4),a=i(29),l=i(37),u=i(24),c=i(5),h=i(35),d=i(90),f=i(11),p=i(83),g=i(62);const y={SELECT:"select"},m=function(t,e,i,n){a.default.call(this,t),this.selected=e,this.deselected=i,this.mapBrowserEvent=n};Object(n.inherits)(m,a.default);const _=function(t){h.default.call(this,{handleEvent:v});const e=t||{};this.condition_=e.condition?e.condition:l.singleClick,this.addCondition_=e.addCondition?e.addCondition:l.never,this.removeCondition_=e.removeCondition?e.removeCondition:l.never,this.toggleCondition_=e.toggleCondition?e.toggleCondition:l.shiftKeyOnly,this.multi_=!!e.multi&&e.multi,this.filter_=e.filter?e.filter:u.b,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0;const i=new d.default({source:new p.default({useSpatialIndex:!1,features:e.features,wrapX:e.wrapX}),style:e.style?e.style:function(){const t=Object(g.createEditingStyle)();return Object(o.c)(t[c.default.POLYGON],t[c.default.LINE_STRING]),Object(o.c)(t[c.default.GEOMETRY_COLLECTION],t[c.default.LINE_STRING]),function(e,i){return e.getGeometry()?t[e.getGeometry().getType()]:null}}(),updateWhileAnimating:!0,updateWhileInteracting:!0});let n;if(this.featureOverlay_=i,e.layers)if("function"==typeof e.layers)n=e.layers;else{const t=e.layers;n=function(e){return Object(o.f)(t,e)}}else n=u.b;this.layerFilter_=n,this.featureLayerAssociation_={};const a=this.featureOverlay_.getSource().getFeaturesCollection();Object(s.listen)(a,r.default.ADD,this.addFeature_,this),Object(s.listen)(a,r.default.REMOVE,this.removeFeature_,this)};function v(t){if(!this.condition_(t))return!0;const e=this.addCondition_(t),i=this.removeCondition_(t),n=this.toggleCondition_(t),r=!e&&!i&&!n,s=t.map,a=this.featureOverlay_.getSource().getFeaturesCollection(),u=[],c=[];if(r){Object(f.clear)(this.featureLayerAssociation_),s.forEachFeatureAtPixel(t.pixel,function(t,e){if(this.filter_(t,e))return c.push(t),this.addFeatureLayerAssociation_(t,e),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let t=a.getLength()-1;t>=0;--t){const e=a.item(t),i=c.indexOf(e);i>-1?c.splice(i,1):(a.remove(e),u.push(e))}0!==c.length&&a.extend(c)}else{s.forEachFeatureAtPixel(t.pixel,function(t,r){if(this.filter_(t,r))return!e&&!n||Object(o.f)(a.getArray(),t)?(i||n)&&Object(o.f)(a.getArray(),t)&&(u.push(t),this.removeFeatureLayerAssociation_(t)):(c.push(t),this.addFeatureLayerAssociation_(t,r)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let t=u.length-1;t>=0;--t)a.remove(u[t]);a.extend(c)}return(c.length>0||u.length>0)&&this.dispatchEvent(new m(y.SELECT,c,u,t)),Object(l.pointerMove)(t)}Object(n.inherits)(_,h.default),_.prototype.addFeatureLayerAssociation_=function(t,e){const i=Object(n.getUid)(t);this.featureLayerAssociation_[i]=e},_.prototype.getFeatures=function(){return this.featureOverlay_.getSource().getFeaturesCollection()},_.prototype.getHitTolerance=function(){return this.hitTolerance_},_.prototype.getLayer=function(t){const e=Object(n.getUid)(t);return this.featureLayerAssociation_[e]},_.prototype.setHitTolerance=function(t){this.hitTolerance_=t},_.prototype.setMap=function(t){const e=this.getMap(),i=this.featureOverlay_.getSource().getFeaturesCollection();e&&i.forEach(e.unskipFeature.bind(e)),h.default.prototype.setMap.call(this,t),this.featureOverlay_.setMap(t),t&&i.forEach(t.skipFeature.bind(t))},_.prototype.addFeature_=function(t){const e=this.getMap();e&&e.skipFeature(t.element)},_.prototype.removeFeature_=function(t){const e=this.getMap();e&&e.unskipFeature(t.element)},_.prototype.removeFeatureLayerAssociation_=function(t){const e=Object(n.getUid)(t);delete this.featureLayerAssociation_[e]},e.default=_},function(t,e,i){"use strict";i.r(e),i.d(e,"handleEvent",function(){return v});var n=i(1),r=i(42),o=i(52),s=i(27),a=i(4),l=i(10),u=i(2),c=i(24),h=i(5),d=i(36),f=i(28),p=i(11),g=i(83),y=i(104),m=i(123);const _=function(t){f.default.call(this,{handleEvent:v,handleDownEvent:c.b,handleUpEvent:b});const e=t||{};this.source_=e.source?e.source:null,this.vertex_=void 0===e.vertex||e.vertex,this.edge_=void 0===e.edge||e.edge,this.features_=e.features?e.features:null,this.featuresListenerKeys_=[],this.featureChangeListenerKeys_={},this.indexedFeaturesExtents_={},this.pendingFeatures_={},this.pixelCoordinate_=null,this.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,this.sortByDistance_=function(t,e){const i=Object(s.squaredDistanceToSegment)(this.pixelCoordinate_,t.segment),n=Object(s.squaredDistanceToSegment)(this.pixelCoordinate_,e.segment);return i-n}.bind(this),this.rBush_=new m.default,this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_,Circle:this.writeCircleGeometry_}};function v(t){const e=this.snapTo(t.pixel,t.coordinate,t.map);return e.snapped&&(t.coordinate=e.vertex.slice(0,2),t.pixel=e.vertexPixel),f.handleEvent.call(this,t)}function b(t){const e=Object(p.getValues)(this.pendingFeatures_);return e.length&&(e.forEach(this.updateFeature_.bind(this)),this.pendingFeatures_={}),!1}Object(n.inherits)(_,f.default),_.prototype.addFeature=function(t,e){const i=void 0===e||e,r=Object(n.getUid)(t),o=t.getGeometry();if(o){const e=this.SEGMENT_WRITERS_[o.getType()];e&&(this.indexedFeaturesExtents_[r]=o.getExtent(Object(u.createEmpty)()),e.call(this,t,o))}i&&(this.featureChangeListenerKeys_[r]=Object(a.listen)(t,l.default.CHANGE,this.handleFeatureChange_,this))},_.prototype.forEachFeatureAdd_=function(t){this.addFeature(t)},_.prototype.forEachFeatureRemove_=function(t){this.removeFeature(t)},_.prototype.getFeatures_=function(){let t;return this.features_?t=this.features_:this.source_&&(t=this.source_.getFeatures()),t},_.prototype.handleFeatureAdd_=function(t){let e;t instanceof g.VectorSourceEvent?e=t.feature:t instanceof r.CollectionEvent&&(e=t.element),this.addFeature(e)},_.prototype.handleFeatureRemove_=function(t){let e;t instanceof g.VectorSourceEvent?e=t.feature:t instanceof r.CollectionEvent&&(e=t.element),this.removeFeature(e)},_.prototype.handleFeatureChange_=function(t){const e=t.target;if(this.handlingDownUpSequence){const t=Object(n.getUid)(e);t in this.pendingFeatures_||(this.pendingFeatures_[t]=e)}else this.updateFeature_(e)},_.prototype.removeFeature=function(t,e){const i=void 0===e||e,r=Object(n.getUid)(t),o=this.indexedFeaturesExtents_[r];if(o){const e=this.rBush_,i=[];e.forEachInExtent(o,function(e){t===e.feature&&i.push(e)});for(let t=i.length-1;t>=0;--t)e.remove(i[t])}i&&(Object(a.unlistenByKey)(this.featureChangeListenerKeys_[r]),delete this.featureChangeListenerKeys_[r])},_.prototype.setMap=function(t){const e=this.getMap(),i=this.featuresListenerKeys_,n=this.getFeatures_();e&&(i.forEach(a.unlistenByKey),i.length=0,n.forEach(this.forEachFeatureRemove_.bind(this))),f.default.prototype.setMap.call(this,t),t&&(this.features_?i.push(Object(a.listen)(this.features_,o.default.ADD,this.handleFeatureAdd_,this),Object(a.listen)(this.features_,o.default.REMOVE,this.handleFeatureRemove_,this)):this.source_&&i.push(Object(a.listen)(this.source_,y.a.ADDFEATURE,this.handleFeatureAdd_,this),Object(a.listen)(this.source_,y.a.REMOVEFEATURE,this.handleFeatureRemove_,this)),n.forEach(this.forEachFeatureAdd_.bind(this)))},_.prototype.shouldStopEvent=c.a,_.prototype.snapTo=function(t,e,i){const n=i.getCoordinateFromPixel([t[0]-this.pixelTolerance_,t[1]+this.pixelTolerance_]),r=i.getCoordinateFromPixel([t[0]+this.pixelTolerance_,t[1]-this.pixelTolerance_]),o=Object(u.boundingExtent)([n,r]);let a=this.rBush_.getInExtent(o);this.vertex_&&!this.edge_&&(a=a.filter(function(t){return t.feature.getGeometry().getType()!==h.default.CIRCLE}));let l,c,d,f,p,g=!1,y=!1,m=null,_=null;if(a.length>0){this.pixelCoordinate_=e,a.sort(this.sortByDistance_);const n=a[0].segment,r=a[0].feature.getGeometry().getType()===h.default.CIRCLE;this.vertex_&&!this.edge_?(c=i.getPixelFromCoordinate(n[0]),d=i.getPixelFromCoordinate(n[1]),f=Object(s.squaredDistance)(t,c),p=Object(s.squaredDistance)(t,d),(g=(l=Math.sqrt(Math.min(f,p)))<=this.pixelTolerance_)&&(y=!0,m=f>p?n[1]:n[0],_=i.getPixelFromCoordinate(m))):this.edge_&&(m=r?Object(s.closestOnCircle)(e,a[0].feature.getGeometry()):Object(s.closestOnSegment)(e,n),_=i.getPixelFromCoordinate(m),Object(s.distance)(t,_)<=this.pixelTolerance_&&(y=!0,this.vertex_&&!r&&(c=i.getPixelFromCoordinate(n[0]),d=i.getPixelFromCoordinate(n[1]),f=Object(s.squaredDistance)(_,c),p=Object(s.squaredDistance)(_,d),(g=(l=Math.sqrt(Math.min(f,p)))<=this.pixelTolerance_)&&(m=f>p?n[1]:n[0],_=i.getPixelFromCoordinate(m))))),y&&(_=[Math.round(_[0]),Math.round(_[1])])}return{snapped:y,vertex:m,vertexPixel:_}},_.prototype.updateFeature_=function(t){this.removeFeature(t,!1),this.addFeature(t,!1)},_.prototype.writeCircleGeometry_=function(t,e){const i=Object(d.fromCircle)(e).getCoordinates()[0];for(let e=0,n=i.length-1;e<n;++e){const n=i.slice(e,e+2),r={feature:t,segment:n};this.rBush_.insert(Object(u.boundingExtent)(n),r)}},_.prototype.writeGeometryCollectionGeometry_=function(t,e){const i=e.getGeometriesArray();for(let e=0;e<i.length;++e){const n=this.SEGMENT_WRITERS_[i[e].getType()];n&&n.call(this,t,i[e])}},_.prototype.writeLineStringGeometry_=function(t,e){const i=e.getCoordinates();for(let e=0,n=i.length-1;e<n;++e){const n=i.slice(e,e+2),r={feature:t,segment:n};this.rBush_.insert(Object(u.boundingExtent)(n),r)}},_.prototype.writeMultiLineStringGeometry_=function(t,e){const i=e.getCoordinates();for(let e=0,n=i.length;e<n;++e){const n=i[e];for(let e=0,i=n.length-1;e<i;++e){const i=n.slice(e,e+2),r={feature:t,segment:i};this.rBush_.insert(Object(u.boundingExtent)(i),r)}}},_.prototype.writeMultiPointGeometry_=function(t,e){const i=e.getCoordinates();for(let n=0,r=i.length;n<r;++n){const r=i[n],o={feature:t,segment:[r,r]};this.rBush_.insert(e.getExtent(),o)}},_.prototype.writeMultiPolygonGeometry_=function(t,e){const i=e.getCoordinates();for(let e=0,n=i.length;e<n;++e){const n=i[e];for(let e=0,i=n.length;e<i;++e){const i=n[e];for(let e=0,n=i.length-1;e<n;++e){const n=i.slice(e,e+2),r={feature:t,segment:n};this.rBush_.insert(Object(u.boundingExtent)(n),r)}}}},_.prototype.writePointGeometry_=function(t,e){const i=e.getCoordinates(),n={feature:t,segment:[i,i]};this.rBush_.insert(e.getExtent(),n)},_.prototype.writePolygonGeometry_=function(t,e){const i=e.getCoordinates();for(let e=0,n=i.length;e<n;++e){const n=i[e];for(let e=0,i=n.length-1;e<i;++e){const i=n.slice(e,e+2),r={feature:t,segment:i};this.rBush_.insert(Object(u.boundingExtent)(i),r)}}},e.default=_},function(t,e,i){"use strict";i.r(e),i.d(e,"TranslateEvent",function(){return f});var n=i(1),r=i(42),o=i(25),s=i(4),a=i(29),l=i(24),u=i(12),c=i(28),h=i(190);const d={TRANSLATESTART:"translatestart",TRANSLATING:"translating",TRANSLATEEND:"translateend"},f=function(t,e,i){a.default.call(this,t),this.features=e,this.coordinate=i};Object(n.inherits)(f,a.default);const p=function(t){c.default.call(this,{handleDownEvent:g,handleDragEvent:m,handleMoveEvent:_,handleUpEvent:y});const e=t||{};let i;if(this.lastCoordinate_=null,this.features_=void 0!==e.features?e.features:null,e.layers)if("function"==typeof e.layers)i=e.layers;else{const t=e.layers;i=function(e){return Object(u.f)(t,e)}}else i=l.b;this.layerFilter_=i,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0,this.lastFeature_=null,Object(s.listen)(this,Object(o.getChangeEventType)(h.a.ACTIVE),this.handleActiveChanged_,this)};function g(t){if(this.lastFeature_=this.featuresAtPixel_(t.pixel,t.map),!this.lastCoordinate_&&this.lastFeature_){this.lastCoordinate_=t.coordinate,_.call(this,t);const e=this.features_||new r.default([this.lastFeature_]);return this.dispatchEvent(new f(d.TRANSLATESTART,e,t.coordinate)),!0}return!1}function y(t){if(this.lastCoordinate_){this.lastCoordinate_=null,_.call(this,t);const e=this.features_||new r.default([this.lastFeature_]);return this.dispatchEvent(new f(d.TRANSLATEEND,e,t.coordinate)),!0}return!1}function m(t){if(this.lastCoordinate_){const e=t.coordinate,i=e[0]-this.lastCoordinate_[0],n=e[1]-this.lastCoordinate_[1],o=this.features_||new r.default([this.lastFeature_]);o.forEach(function(t){const e=t.getGeometry();e.translate(i,n),t.setGeometry(e)}),this.lastCoordinate_=e,this.dispatchEvent(new f(d.TRANSLATING,o,e))}}function _(t){const e=t.map.getViewport();this.featuresAtPixel_(t.pixel,t.map)?(e.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),e.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):e.classList.remove("ol-grab","ol-grabbing")}Object(n.inherits)(p,c.default),p.prototype.featuresAtPixel_=function(t,e){return e.forEachFeatureAtPixel(t,function(t){if(!this.features_||Object(u.f)(this.features_.getArray(),t))return t}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})},p.prototype.getHitTolerance=function(){return this.hitTolerance_},p.prototype.setHitTolerance=function(t){this.hitTolerance_=t},p.prototype.setMap=function(t){const e=this.getMap();c.default.prototype.setMap.call(this,t),this.updateState_(e)},p.prototype.handleActiveChanged_=function(){this.updateState_(null)},p.prototype.updateState_=function(t){let e=this.getMap();const i=this.getActive();if((!e||!i)&&(e=e||t)){e.getViewport().classList.remove("ol-grab","ol-grabbing")}},e.default=p},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(152),o=i(339),s=i(239),a=i(11),l=i(340),u=i(341),c=i(361),h=i(342);const d=function(t){(t=Object(a.assign)({},t)).controls||(t.controls=Object(o.defaults)()),t.interactions||(t.interactions=Object(s.defaults)()),r.default.call(this,t)};Object(n.inherits)(d,r.default),d.prototype.createRenderer=function(){const t=new u.default(this);return t.registerLayerRenderers([l.default,c.default,h.default]),t},e.default=d},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(45),o=i(40),s=i(26),a=i(4),l=i(10);const u=function(){let t;return function(){if(!t){const e=document.body;e.webkitRequestFullscreen?t="webkitfullscreenchange":e.mozRequestFullScreen?t="mozfullscreenchange":e.msRequestFullscreen?t="MSFullscreenChange":e.requestFullscreen&&(t="fullscreenchange")}return t}}(),c=function(t){const e=t||{};this.cssClassName_=void 0!==e.className?e.className:"ol-full-screen";const i=void 0!==e.label?e.label:"⤢";this.labelNode_="string"==typeof i?document.createTextNode(i):i;const n=void 0!==e.labelActive?e.labelActive:"×";this.labelActiveNode_="string"==typeof n?document.createTextNode(n):n;const s=e.tipLabel?e.tipLabel:"Toggle full-screen",u=document.createElement("button");u.className=this.cssClassName_+"-"+d(),u.setAttribute("type","button"),u.title=s,u.appendChild(this.labelNode_),Object(a.listen)(u,l.default.CLICK,this.handleClick_,this);const c=this.cssClassName_+" "+o.e+" "+o.b+" "+(h()?"":o.f),f=document.createElement("div");f.className=c,f.appendChild(u),r.default.call(this,{element:f,target:e.target}),this.keys_=void 0!==e.keys&&e.keys,this.source_=e.source};function h(){const t=document.body;return!!(t.webkitRequestFullscreen||t.mozRequestFullScreen&&document.mozFullScreenEnabled||t.msRequestFullscreen&&document.msFullscreenEnabled||t.requestFullscreen&&document.fullscreenEnabled)}function d(){return!!(document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)}function f(t){t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()}Object(n.inherits)(c,r.default),c.prototype.handleClick_=function(t){t.preventDefault(),this.handleFullScreen_()},c.prototype.handleFullScreen_=function(){if(!h())return;const t=this.getMap();var e;if(t)if(d())document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen();else{let e;e=this.source_?"string"==typeof this.source_?document.getElementById(this.source_):this.source_:t.getTargetElement(),this.keys_?(e=e).mozRequestFullScreenWithKeys?e.mozRequestFullScreenWithKeys():e.webkitRequestFullscreen?e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):f(e):f(e)}},c.prototype.handleFullScreenChange_=function(){const t=this.element.firstElementChild,e=this.getMap();d()?(t.className=this.cssClassName_+"-true",Object(s.f)(this.labelActiveNode_,this.labelNode_)):(t.className=this.cssClassName_+"-false",Object(s.f)(this.labelNode_,this.labelActiveNode_)),e&&e.updateSize()},c.prototype.setMap=function(t){r.default.prototype.setMap.call(this,t),t&&this.listenerKeys.push(Object(a.listen)(document,u(),this.handleFullScreenChange_,this))},e.default=c},function(t,e,i){"use strict";i.r(e),i.d(e,"Units",function(){return h}),i.d(e,"render",function(){return p});var n=i(1),r=i(25),o=i(23),s=i(45),a=i(40),l=i(4),u=i(9),c=i(51);const h={DEGREES:"degrees",IMPERIAL:"imperial",NAUTICAL:"nautical",METRIC:"metric",US:"us"},d=[1,2,5],f=function(t){const e=t||{},i=void 0!==e.className?e.className:"ol-scale-line";this.innerElement_=document.createElement("DIV"),this.innerElement_.className=i+"-inner",this.element_=document.createElement("DIV"),this.element_.className=i+" "+a.e,this.element_.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=void 0!==e.minWidth?e.minWidth:64,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",s.default.call(this,{element:this.element_,render:e.render||p,target:e.target}),Object(l.listen)(this,Object(r.getChangeEventType)("units"),this.handleUnitsChanged_,this),this.setUnits(e.units||h.METRIC)};function p(t){const e=t.frameState;this.viewState_=e?e.viewState:null,this.updateElement_()}Object(n.inherits)(f,s.default),f.prototype.getUnits=function(){return this.get("units")},f.prototype.handleUnitsChanged_=function(){this.updateElement_()},f.prototype.setUnits=function(t){this.set("units",t)},f.prototype.updateElement_=function(){const t=this.viewState_;if(!t)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));const e=t.center,i=t.projection,n=this.getUnits(),r=n==h.DEGREES?c.default.DEGREES:c.default.METERS;let s=Object(u.getPointResolution)(i,t.resolution,e,r);i.getUnits()!=c.default.DEGREES&&i.getMetersPerUnit()&&r==c.default.METERS&&(s*=i.getMetersPerUnit());let a=this.minWidth_*s,l="";if(n==h.DEGREES){const t=u.METERS_PER_UNIT[c.default.DEGREES];i.getUnits()==c.default.DEGREES?a*=t:s/=t,a<t/60?(l="″",s*=3600):a<t?(l="′",s*=60):l="°"}else n==h.IMPERIAL?a<.9144?(l="in",s/=.0254):a<1609.344?(l="ft",s/=.3048):(l="mi",s/=1609.344):n==h.NAUTICAL?(s/=1852,l="nm"):n==h.METRIC?a<.001?(l="μm",s*=1e6):a<1?(l="mm",s*=1e3):a<1e3?l="m":(l="km",s/=1e3):n==h.US?a<.9144?(l="in",s*=39.37):a<1609.344?(l="ft",s/=.30480061):(l="mi",s/=1609.3472):Object(o.a)(!1,33);let f,p,g=3*Math.floor(Math.log(this.minWidth_*s)/Math.log(10));for(;;){if(f=d[(g%3+3)%3]*Math.pow(10,Math.floor(g/3)),p=Math.round(f/s),isNaN(p))return this.element_.style.display="none",void(this.renderedVisible_=!1);if(p>=this.minWidth_)break;++g}const y=f+" "+l;this.renderedHTML_!=y&&(this.innerElement_.innerHTML=y,this.renderedHTML_=y),this.renderedWidth_!=p&&(this.innerElement_.style.width=p+"px",this.renderedWidth_=p),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0)},e.default=f},function(t,e,i){"use strict";i.r(e),i.d(e,"render",function(){return m});var n=i(1),r=i(34),o=i(45),s=i(40),a=i(59),l=i(4),u=i(29),c=i(10),h=i(18),d=i(93),f=i(244);const p=0,g=1,y=function(t){const e=t||{};this.currentResolution_=void 0,this.direction_=p,this.dragging_,this.heightLimit_=0,this.widthLimit_=0,this.previousX_,this.previousY_,this.thumbSize_=null,this.sliderInitialized_=!1,this.duration_=void 0!==e.duration?e.duration:200;const i=void 0!==e.className?e.className:"ol-zoomslider",n=document.createElement("button");n.setAttribute("type","button"),n.className=i+"-thumb "+s.e;const r=document.createElement("div");r.className=i+" "+s.e+" "+s.b,r.appendChild(n),this.dragger_=new f.a(r),Object(l.listen)(this.dragger_,d.a.POINTERDOWN,this.handleDraggerStart_,this),Object(l.listen)(this.dragger_,d.a.POINTERMOVE,this.handleDraggerDrag_,this),Object(l.listen)(this.dragger_,d.a.POINTERUP,this.handleDraggerEnd_,this),Object(l.listen)(r,c.default.CLICK,this.handleContainerClick_,this),Object(l.listen)(n,c.default.CLICK,u.stopPropagation),o.default.call(this,{element:r,render:e.render||m})};function m(t){if(!t.frameState)return;this.sliderInitialized_||this.initSlider_();const e=t.frameState.viewState.resolution;e!==this.currentResolution_&&(this.currentResolution_=e,this.setThumbPosition_(e))}Object(n.inherits)(y,o.default),y.prototype.disposeInternal=function(){this.dragger_.dispose(),o.default.prototype.disposeInternal.call(this)},y.prototype.setMap=function(t){o.default.prototype.setMap.call(this,t),t&&t.render()},y.prototype.initSlider_=function(){const t=this.element,e=t.offsetWidth,i=t.offsetHeight,n=t.firstElementChild,r=getComputedStyle(n),o=n.offsetWidth+parseFloat(r.marginRight)+parseFloat(r.marginLeft),s=n.offsetHeight+parseFloat(r.marginTop)+parseFloat(r.marginBottom);this.thumbSize_=[o,s],e>i?(this.direction_=g,this.widthLimit_=e-o):(this.direction_=p,this.heightLimit_=i-s),this.sliderInitialized_=!0},y.prototype.handleContainerClick_=function(t){const e=this.getMap().getView(),i=this.getRelativePosition_(t.offsetX-this.thumbSize_[0]/2,t.offsetY-this.thumbSize_[1]/2),n=this.getResolutionForPosition_(i);e.animate({resolution:e.constrainResolution(n),duration:this.duration_,easing:a.easeOut})},y.prototype.handleDraggerStart_=function(t){this.dragging_||t.originalEvent.target!==this.element.firstElementChild||(this.getMap().getView().setHint(r.default.INTERACTING,1),this.previousX_=t.clientX,this.previousY_=t.clientY,this.dragging_=!0)},y.prototype.handleDraggerDrag_=function(t){if(this.dragging_){const e=this.element.firstElementChild,i=t.clientX-this.previousX_+parseInt(e.style.left,10),n=t.clientY-this.previousY_+parseInt(e.style.top,10),r=this.getRelativePosition_(i,n);this.currentResolution_=this.getResolutionForPosition_(r),this.getMap().getView().setResolution(this.currentResolution_),this.setThumbPosition_(this.currentResolution_),this.previousX_=t.clientX,this.previousY_=t.clientY}},y.prototype.handleDraggerEnd_=function(t){if(this.dragging_){const t=this.getMap().getView();t.setHint(r.default.INTERACTING,-1),t.animate({resolution:t.constrainResolution(this.currentResolution_),duration:this.duration_,easing:a.easeOut}),this.dragging_=!1,this.previousX_=void 0,this.previousY_=void 0}},y.prototype.setThumbPosition_=function(t){const e=this.getPositionForResolution_(t),i=this.element.firstElementChild;this.direction_==g?i.style.left=this.widthLimit_*e+"px":i.style.top=this.heightLimit_*e+"px"},y.prototype.getRelativePosition_=function(t,e){let i;return i=this.direction_===g?t/this.widthLimit_:e/this.heightLimit_,Object(h.a)(i,0,1)},y.prototype.getResolutionForPosition_=function(t){return this.getMap().getView().getResolutionForValueFunction()(1-t)},y.prototype.getPositionForResolution_=function(t){return 1-this.getMap().getView().getValueForResolutionFunction()(t)},e.default=y},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(4),o=i(10),s=i(45),a=i(40);const l=function(t){const e=t||{};this.extent=e.extent?e.extent:null;const i=void 0!==e.className?e.className:"ol-zoom-extent",n=void 0!==e.label?e.label:"E",l=void 0!==e.tipLabel?e.tipLabel:"Fit to extent",u=document.createElement("button");u.setAttribute("type","button"),u.title=l,u.appendChild("string"==typeof n?document.createTextNode(n):n),Object(r.listen)(u,o.default.CLICK,this.handleClick_,this);const c=i+" "+a.e+" "+a.b,h=document.createElement("div");h.className=c,h.appendChild(u),s.default.call(this,{element:h,target:e.target})};Object(n.inherits)(l,s.default),l.prototype.handleClick_=function(t){t.preventDefault(),this.handleZoomToExtent()},l.prototype.handleZoomToExtent=function(){const t=this.getMap().getView(),e=this.extent?this.extent:t.getProjection().getExtent();t.fit(e)},e.default=l},function(t,e,i){t.exports={default:i(509),__esModule:!0}},function(t,e,i){var n=i(165),r=i(105).document,o=n(r)&&n(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}},function(t,e,i){var n=i(165);t.exports=function(t,e){if(!n(t))return t;var i,r;if(e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;if("function"==typeof(i=t.valueOf)&&!n(r=i.call(t)))return r;if(!e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,i){var n=i(297),r=i(247),o=i(181),s=i(294),a=i(182),l=i(364),u=Object.getOwnPropertyDescriptor;e.f=i(166)?u:function(t,e){if(t=o(t),e=s(e,!0),l)try{return u(t,e)}catch(t){}if(a(t,e))return r(!n.f.call(t,e),t[e])}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,i){var n=i(135),r=i(80),o=i(217);t.exports=function(t,e){var i=(r.Object||{})[t]||Object[t],s={};s[t]=e(i),n(n.S+n.F*o(function(){i(1)}),"Object",s)}},function(t,e,i){var n=i(105),r=n["__core-js_shared__"]||(n["__core-js_shared__"]={});t.exports=function(t){return r[t]||(r[t]={})}},function(t,e,i){e.f=i(106)},function(t,e,i){var n=i(105),r=i(80),o=i(250),s=i(300),a=i(164).f;t.exports=function(t){var e=r.Symbol||(r.Symbol=o?{}:n.Symbol||{});"_"==t.charAt(0)||t in e||a(e,t,{value:s.f(t)})}},function(t,e,i){var n=i(368),r=i(305);t.exports=Object.keys||function(t){return n(t,r)}},function(t,e){var i=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:i)(t)}},function(t,e,i){var n=i(299)("keys"),r=i(248);t.exports=function(t){return n[t]||(n[t]=r(t))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,i){var n=i(146),r=i(521),o=i(305),s=i(304)("IE_PROTO"),a=function(){},l=function(){var t,e=i(293)("iframe"),n=o.length;for(e.style.display="none",i(371).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),l=t.F;n--;)delete l.prototype[o[n]];return l()};t.exports=Object.create||function(t,e){var i;return null!==t?(a.prototype=n(t),i=new a,a.prototype=null,i[s]=t):i=l(),void 0===e?i:r(i,e)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CGeoFeatureSource=void 0;var n=g(i(13)),r=g(i(8)),o=g(i(20)),s=g(i(16)),a=g(i(17)),l=i(6),u=i(383),c=i(21),h=i(108),d=i(221),f=i(184),p=i(196);function g(t){return t&&t.__esModule?t:{default:t}}var y=function(t){function e(t,i){(0,r.default)(this,e);var o=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,i));return o.cache=i.cache||{},o.cacheFields=i.cacheFields||[],o.style=i.style||{},o.maxCacheCount=i.maxCacheCount||0,o.isCustomSetMaxCacheCount=void 0!==i.isCustomSetMaxCacheCount&&i.isCustomSetMaxCacheCount,o.nodesClipPixel=i.nodesClipPixel||2,o.isHoverAble=void 0!==i.isHoverAble&&i.isHoverAble,o.isMultiHover=void 0!==i.isMultiHover&&i.isMultiHover,o.isClickAble=void 0===i.isClickAble||i.isClickAble,o.highlightStyle=i.highlightStyle||null,o.isAllowFeatureStyle=void 0!==i.isAllowFeatureStyle&&i.isAllowFeatureStyle,o}return(0,a.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.maxCacheCount=null,this.isCustomSetMaxCacheCount=null,this.nodesClipPixel=null,this.isHoverAble=null,this.isMultiHover=null,this.isClickAble=null,this.cache=null,this.cacheFields=null,this.style=null,this.highlightStyle=null,this.isAllowFeatureStyle=null}},{key:"addFeatures",value:function(t){if(this.dispatchEvent({type:"beforefeaturesadded",value:{features:t}}),t instanceof f.FeatureSet){var e=null,i=t.AttStruct,n=t.SFEleArray;if(null!=n&&n.length>0)for(var r=0;r<n.length;r++){var o=n[r];if(null!=o.AttValue&&o.AttValue.length>0){e={};for(var s=0;s<o.AttValue.length;s++)e[i.FldName[s]]=o.AttValue[s];e.FID=o.FID}o.attributes=e,this.features.push(o)}}this.isCustomSetMaxCacheCount||(this.maxCacheCount=5*this.features.length),this.renderer&&this.changed()}},{key:"removeFeatures",value:function(t){this.clearCache(),u.CThemeSource.prototype.removeFeatures.apply(this,arguments)}},{key:"removeAllFeatures",value:function(){this.clearCache(),u.CThemeSource.prototype.removeAllFeatures.apply(this,arguments)}},{key:"redrawThematicFeatures",value:function(t){var e=this.renderer.getHoverOne(),i=null;e&&e.refDataID&&(i=e.refDataID),this.renderer.clearAll();for(var n=this.features,r=this.cache,o=this.cacheFields,s=this.map.getView().getZoom(),a=this.maxCacheCount,l=new p.Rectangle(t[0],t[1],t[2],t[3]),u=0,c=n.length;u<c;u++){var h=n[u],d=h.bound;if(!l||l.intersectsBounds(d)){var f,g=h.FID+"_zoom_"+s.toString();if(r[g])r[g].updateAndAddShapes();else{if((f=this.createThematicFeature(n[u])).getShapesCount()<1)continue;if(r[g]=f,o.push(g),o.length>a){var y=o[0];o.splice(0,1),delete r[y]}}}}if(this.renderer.render(),i&&this.isHoverAble&&this.isMultiHover){var m=this.getShapesByFeatureID(i);this.renderer.updateHoverShapes(m)}}},{key:"createThematicFeature",value:function(t){var e=(0,c.copyAttributesWithClip)(this.style),i={};i.nodesClipPixel=this.nodesClipPixel,i.isHoverAble=this.isHoverAble,i.isMultiHover=this.isMultiHover,i.isClickAble=this.isClickAble,i.highlightStyle=h.ShapeFactory.transformStyle(this.highlightStyle);for(var n=new d.ThemeVector(t,this,h.ShapeFactory.transformStyle(e),i),r=0;r<n.shapes.length;r++)this.renderer.addShape(n.shapes[r]);return n}},{key:"canvasFunctionInternal_",value:function(t,e,i,n,r){return u.CThemeSource.prototype.canvasFunctionInternal_.apply(this,arguments)}},{key:"clearCache",value:function(){this.cache={},this.cacheFields=[]}},{key:"clear",value:function(){this.renderer.clearAll(),this.renderer.refresh(),this.removeAllFeatures(),this.clearCache()}},{key:"getCacheCount",value:function(){return this.cacheFields.length}},{key:"setMaxCacheCount",value:function(t){isNaN(t)||(this.maxCacheCount=t,this.isCustomSetMaxCacheCount=!0)}},{key:"getShapesByFeatureID",value:function(t){var e=[],i=this.renderer.getAllShapes();if(!t)return i;for(var n=0,r=i.length;n<r;n++){var o=i[n];o.refDataID&&t===o.refDataID&&e.push(o)}return e}}]),e}(u.CThemeSource);e.CGeoFeatureSource=y,l.Zondy.Source.CGeoFeatureSource=y},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Color=void 0;var n=a(i(8)),r=a(i(20)),o=i(6),s=i(194);function a(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(){(0,n.default)(this,t),this.util=new s.Util,this._ctx=null,this.palette=["#ff9277"," #dddd00"," #ffc877"," #bbe3ff"," #d5ffbb","#bbbbff"," #ddb000"," #b0dd00"," #e2bbff"," #ffbbe3","#ff7777"," #ff9900"," #83dd00"," #77e3ff"," #778fff","#c877ff"," #ff77ab"," #ff6600"," #aa8800"," #77c7ff","#ad77ff"," #ff77ff"," #dd0083"," #777700"," #00aa00","#0088aa"," #8400dd"," #aa0088"," #dd0000"," #772e00"],this._palette=this.palette,this.highlightColor="rgba(0,0,255,1)",this._highlightColor=this.highlightColor,this.colorRegExp=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,this._nameColors={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#0ff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000",blanchedalmond:"#ffebcd",blue:"#00f",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#f0f",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#0f0",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#f0f",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#f00",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#fff",whitesmoke:"#f5f5f5",yellow:"#ff0",yellowgreen:"#9acd32"},this.CLASS_NAME="Zondy.LevelRenderer.Tool.Color"}return(0,r.default)(t,[{key:"customPalette",value:function(t){this.palette=t}},{key:"resetPalette",value:function(){this.palette=this._palette}},{key:"getColor",value:function(t,e){return t|=0,(e=e||this.palette)[t%e.length]}},{key:"customHighlight",value:function(t){this.highlightColor=t}},{key:"resetHighlight",value:function(){this.highlightColor=this._highlightColor}},{key:"getHighlightColor",value:function(){return this.highlightColor}},{key:"getRadialGradient",value:function(t,e,i,n,r,o,s){var a=this.util;this._ctx||(this._ctx=a.getContext());for(var l=this._ctx.createRadialGradient(t,e,i,n,r,o),u=0,c=s.length;u<c;u++)l.addColorStop(s[u][0],s[u][1]);return l.__nonRecursion=!0,l}},{key:"getLinearGradient",value:function(t,e,i,n,r){var o=this.util;this._ctx||(this._ctx=o.getContext());for(var s=this._ctx.createLinearGradient(t,e,i,n),a=0,l=r.length;a<l;a++)s.addColorStop(r[a][0],r[a][1]);return s.__nonRecursion=!0,s}},{key:"getStepColors",value:function(t,e,i){t=this.toRGBA(t),e=this.toRGBA(e),t=this.getData(t);for(var n=[],r=((e=this.getData(e))[0]-t[0])/i,o=(e[1]-t[1])/i,s=(e[2]-t[2])/i,a=(e[3]-t[3])/i,l=0,u=t[0],c=t[1],h=t[2],d=t[3];l<i;l++)n[l]=this.toColor([this.adjust(Math.floor(u),[0,255]),this.adjust(Math.floor(c),[0,255]),this.adjust(Math.floor(h),[0,255]),d.toFixed(4)-0],"rgba"),u+=r,c+=o,h+=s,d+=a;return u=e[0],c=e[1],h=e[2],d=e[3],n[l]=this.toColor([u,c,h,d],"rgba"),n}},{key:"getGradientColors",value:function(t,e){var i=[],n=t.length;if(void 0===e&&(e=20),1===n)i=this.getStepColors(t[0],t[0],e);else if(n>1)for(var r=0,o=n-1;r<o;r++){var s=this.getStepColors(t[r],t[r+1],e);r<o-1&&s.pop(),i=i.concat(s)}return i}},{key:"toColor",value:function(t,e){if(e=e||"rgb",t&&(3===t.length||4===t.length)){if(t=this.map(t,function(t){return t>1?Math.ceil(t):t}),e.indexOf("hex")>-1)return"#"+((1<<24)+(t[0]<<16)+(t[1]<<8)+ +t[2]).toString(16).slice(1);if(e.indexOf("hs")>-1){var i=this.map(t.slice(1,3),function(t){return t+"%"});t[1]=i[0],t[2]=i[1]}return e.indexOf("a")>-1?(3===t.length&&t.push(1),t[3]=this.adjust(t[3],[0,1]),e+"("+t.slice(0,4).join(",")+")"):e+"("+t.slice(0,3).join(",")+")"}}},{key:"toArray",value:function(t){(t=this.trim(t)).indexOf("rgba")<0&&(t=this.toRGBA(t));var e=[],i=0;return t.replace(/[\d.]+/g,function(t){i<3?t|=0:t=+t,e[i++]=t}),e}},{key:"convert",value:function(t,e){if(!this.isCalculableColor(t))return t;var i=this.getData(t),n=i[3];return void 0===n&&(n=1),t.indexOf("hsb")>-1?i=this._HSV_2_RGB(i):t.indexOf("hsl")>-1&&(i=this._HSL_2_RGB(i)),e.indexOf("hsb")>-1||e.indexOf("hsv")>-1?i=this._RGB_2_HSB(i):e.indexOf("hsl")>-1&&(i=this._RGB_2_HSL(i)),i[3]=n,this.toColor(i,e)}},{key:"toRGBA",value:function(t){return this.convert(t,"rgba")}},{key:"toRGB",value:function(t){return this.convert(t,"rgb")}},{key:"toHex",value:function(t){return this.convert(t,"hex")}},{key:"toHSVA",value:function(t){return this.convert(t,"hsva")}},{key:"toHSV",value:function(t){return this.convert(t,"hsv")}},{key:"toHSBA",value:function(t){return this.convert(t,"hsba")}},{key:"toHSB",value:function(t){return this.convert(t,"hsb")}},{key:"toHSLA",value:function(t){return this.convert(t,"hsla")}},{key:"toHSL",value:function(t){return this.convert(t,"hsl")}},{key:"toName",value:function(t){for(var e in this._nameColors)if(this.toHex(this._nameColors[e])===this.toHex(t))return e;return null}},{key:"trim",value:function(t){return String(t).replace(/\s+/g,"")}},{key:"normalize",value:function(t){if(this._nameColors[t]&&(t=this._nameColors[t]),t=(t=this.trim(t)).replace(/hsv/i,"hsb"),/^#[\da-f]{3}$/i.test(t)){var e=(3840&(t=parseInt(t.slice(1),16)))<<8,i=(240&t)<<4,n=15&t;t="#"+((1<<24)+(e<<4)+e+(i<<4)+i+(n<<4)+n).toString(16).slice(1)}return t}},{key:"lift",value:function(t,e){if(!this.isCalculableColor(t))return t;var i=e>0?1:-1;void 0===e&&(e=0),e=Math.abs(e)>1?1:Math.abs(e),t=this.toRGB(t);for(var n=this.getData(t),r=0;r<3;r++)n[r]=1===i?n[r]*(1-e)|0:(255-n[r])*e+n[r]|0;return"rgb("+n.join(",")+")"}},{key:"reverse",value:function(t){if(!this.isCalculableColor(t))return t;var e=this.getData(this.toRGBA(t));return e=this.map(e,function(t){return 255-t}),this.toColor(e,"rgb")}},{key:"mix",value:function(t,e,i){if(!this.isCalculableColor(t)||!this.isCalculableColor(e))return t;void 0===i&&(i=.5);for(var n=2*(i=1-this.adjust(i,[0,1]))-1,r=this.getData(this.toRGBA(t)),o=this.getData(this.toRGBA(e)),s=r[3]-o[3],a=((n*s==-1?n:(n+s)/(1+n*s))+1)/2,l=1-a,u=[],c=0;c<3;c++)u[c]=r[c]*a+o[c]*l;var h=r[3]*i+o[3]*(1-i);return h=Math.max(0,Math.min(1,h)),1===r[3]&&1===o[3]?this.toColor(u,"rgb"):(u[3]=h,this.toColor(u,"rgba"))}},{key:"random",value:function(){return"#"+Math.random().toString(16).slice(2,8)}},{key:"getData",value:function(e){var i,n,r=(e=this.normalize(e)).match(this.colorRegExp);if(null===r)throw new Error("The color format error");var o,s=[];if(r[2])o=[(i=r[2].replace("#","").split(""))[0]+i[1],i[2]+i[3],i[4]+i[5]],s=this.map(o,function(e){return t.prototype.adjust.call(this,parseInt(e,16),[0,255])});else if(r[4]){var a=r[4].split(",");n=a[3],o=a.slice(0,3),s=this.map(o,function(e){return e=Math.floor(e.indexOf("%")>0?2.55*parseInt(e,0):e),t.prototype.adjust.call(this,e,[0,255])}),void 0!==n&&s.push(this.adjust(parseFloat(n),[0,1]))}else if(r[5]||r[6]){var l=(r[5]||r[6]).split(","),u=parseInt(l[0],0)/360,c=l[1],h=l[2];n=l[3],(s=this.map([c,h],function(e){return t.prototype.adjust.call(this,parseFloat(e)/100,[0,1])})).unshift(u),void 0!==n&&s.push(this.adjust(parseFloat(n),[0,1]))}return s}},{key:"alpha",value:function(t,e){if(!this.isCalculableColor(t))return t;null===e&&(e=1);var i=this.getData(this.toRGBA(t));return i[3]=this.adjust(Number(e).toFixed(4),[0,1]),this.toColor(i,"rgba")}},{key:"map",value:function(t,e){if("function"!=typeof e)throw new TypeError;for(var i=t?t.length:0,n=0;n<i;n++)t[n]=e(t[n]);return t}},{key:"adjust",value:function(t,e){return t<=e[0]?t=e[0]:t>=e[1]&&(t=e[1]),t}},{key:"isCalculableColor",value:function(t){return t instanceof Array||"string"==typeof t}},{key:"_HSV_2_RGB",value:function(t){var e,i,n,r=t[0],o=t[1],s=t[2];if(0===o)e=255*s,i=255*s,n=255*s;else{var a=6*r;6===a&&(a=0);var l=0|a,u=s*(1-o),c=s*(1-o*(a-l)),h=s*(1-o*(1-(a-l))),d=0,f=0,p=0;0===l?(d=s,f=h,p=u):1===l?(d=c,f=s,p=u):2===l?(d=u,f=s,p=h):3===l?(d=u,f=c,p=s):4===l?(d=h,f=u,p=s):(d=s,f=u,p=c),e=255*d,i=255*f,n=255*p}return[e,i,n]}},{key:"_HSL_2_RGB",value:function(t){var e,i,n,r=t[0],o=t[1],s=t[2];if(0===o)e=255*s,i=255*s,n=255*s;else{var a,l=2*s-(a=s<.5?s*(1+o):s+o-o*s);e=255*this._HUE_2_RGB(l,a,r+1/3),i=255*this._HUE_2_RGB(l,a,r),n=255*this._HUE_2_RGB(l,a,r-1/3)}return[e,i,n]}},{key:"_HUE_2_RGB",value:function(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),6*i<1?t+6*(e-t)*i:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}},{key:"_RGB_2_HSB",value:function(t){var e,i,n=t[0]/255,r=t[1]/255,o=t[2]/255,s=Math.min(n,r,o),a=Math.max(n,r,o),l=a-s,u=a;if(0===l)e=0,i=0;else{i=l/a;var c=((a-n)/6+l/2)/l,h=((a-r)/6+l/2)/l,d=((a-o)/6+l/2)/l;n===a?e=d-h:r===a?e=1/3+c-d:o===a&&(e=2/3+h-c),e<0&&(e+=1),e>1&&(e-=1)}return[e*=360,i*=100,u*=100]}},{key:"_RGB_2_HSL",value:function(t){var e,i,n=t[0]/255,r=t[1]/255,o=t[2]/255,s=Math.min(n,r,o),a=Math.max(n,r,o),l=a-s,u=(a+s)/2;if(0===l)e=0,i=0;else{i=u<.5?l/(a+s):l/(2-a-s);var c=((a-n)/6+l/2)/l,h=((a-r)/6+l/2)/l,d=((a-o)/6+l/2)/l;n===a?e=d-h:r===a?e=1/3+c-d:o===a&&(e=2/3+h-c),e<0&&(e+=1),e>1&&(e-=1)}return[e*=360,i*=100,u*=100]}}]),t}();e.Color=l,o.Zondy.LevelRenderer.Tool.Color=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Config=void 0;var n,r=i(8),o=(n=r)&&n.__esModule?n:{default:n},s=i(6);var a=function t(){(0,o.default)(this,t)};a.EVENT={RESIZE:"resize",CLICK:"click",DBLCLICK:"dblclick",MOUSEWHEEL:"mousewheel",MOUSEMOVE:"mousemove",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",GLOBALOUT:"globalout",DRAGSTART:"dragstart",DRAGEND:"dragend",DRAGENTER:"dragenter",DRAGOVER:"dragover",DRAGLEAVE:"dragleave",DROP:"drop",touchClickDelay:300},a.catchBrushException=!1,a.debugMode=0,e.Config=a,s.Zondy.LevelRenderer.Config=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicImage=void 0;var n=c(i(13)),r=c(i(8)),o=c(i(20)),s=c(i(16)),a=c(i(46)),l=c(i(17)),u=i(6);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){(0,r.default)(this,e);var i=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t));return i.type="smicimage",i._imageCache={},i.refOriginalPosition&&2===i.refOriginalPosition.length||(i.refOriginalPosition=[0,0]),i.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicImage",i}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.type=null,this._imageCache=null,(0,a.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"destroy",this).call(this)}},{key:"brush",value:function(t,i,n){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,o=this.style||{};i&&(o=this.getHighlightStyle(o,this.highlightStyle||{}));var s=o.image,a=this;if("string"==typeof s){var l=s;this._imageCache[l]?s=this._imageCache[l]:((s=new Image).onload=function(){s.onload=null,clearTimeout(e._refreshTimeout),e._needsRefresh.push(a),e._refreshTimeout=setTimeout(function(){n&&n(e._needsRefresh),e._needsRefresh=[]},10)},s.src=l,this._imageCache[l]=s)}if(s){if("IMG"==s.nodeName.toUpperCase())if(window.ActiveXObject){if("complete"!=s.readyState)return}else if(!s.complete)return;var u=o.width||s.width,c=o.height||s.height,h=o.x+r[0],d=o.y+r[1];if(!s.width||!s.height)return;if(t.save(),this.doClip(t),this.setContext(t,o),this.setTransform(t),o.sWidth&&o.sHeight){var f=o.sx+r[0]||0,p=o.sy+r[1]||0;t.drawImage(s,f,p,o.sWidth,o.sHeight,h,d,u,c)}else if(o.sx&&o.sy){var g=o.sx+r[0],y=o.sy+r[1],m=u-g,_=c-y;t.drawImage(s,g,y,m,_,h,d,u,c)}else t.drawImage(s,h,d,u,c);o.width||(o.width=u),o.height||(o.height=c),this.style.width||(this.style.width=u),this.style.height||(this.style.height=c),this.drawText(t,o,this.style),t.restore()}}},{key:"getRect",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e=this.refOriginalPosition;return{x:t.x+e[0],y:t.y+e[1],width:t.width,height:t.height}}},{key:"clearCache",value:function(){this._imageCache={}}}]),e}(i(107).Shape);h._needsRefresh=[],h._refreshTimeout=null,e.SmicImage=h,u.Zondy.LevelRenderer.SmicImage=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Line=void 0;var n=c(i(13)),r=c(i(8)),o=c(i(20)),s=c(i(16)),a=c(i(46)),l=c(i(17)),u=i(6);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){(0,r.default)(this,e);var i=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t));return i.pointList=t,i.CLASS_NAME="Zondy.Feature.ShapeParameters.Line",i}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.pointList=null,(0,a.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"destroy",this).call(this)}}]),e}(i(147).ShapeParameters);e.Line=h,u.Zondy.Feature.ShapeParameters.Line=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Circle=void 0;var n=c(i(13)),r=c(i(8)),o=c(i(20)),s=c(i(16)),a=c(i(46)),l=c(i(17)),u=i(6);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t,i,o){(0,r.default)(this,e);var a=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,i,o));return a.x=isNaN(t)?0:t,a.y=isNaN(i)?0:i,a.r=isNaN(o)?0:o,a.CLASS_NAME="Zondy.Feature.ShapeParameters.Circle",a}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,(0,a.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"destroy",this).call(this)}}]),e}(i(147).ShapeParameters);e.Circle=h,u.Zondy.Feature.ShapeParameters.Circle=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicPoint=void 0;var n=c(i(13)),r=c(i(8)),o=c(i(20)),s=c(i(16)),a=c(i(46)),l=c(i(17)),u=i(6);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){(0,r.default)(this,e);var i=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t));return i.type="smicpoint",i.refOriginalPosition&&2===i.refOriginalPosition.length||(i.refOriginalPosition=[0,0]),i.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicPoint",i}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.type=null,(0,a.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var i=this.refOriginalPosition;t.arc(e.x+i[0],e.y+i[1],e.r,0,2*Math.PI,!0)}},{key:"getRect",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,i=this.refOriginalPosition;return t.__rect?t.__rect:(e="stroke"==t.brushType||"fill"==t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(t.x+i[0]-t.r-e/2),y:Math.round(t.y+i[1]-t.r-e/2),width:2*t.r+e,height:2*t.r+e},t.__rect)}}]),e}(i(107).Shape);e.SmicPoint=h,u.Zondy.LevelRenderer.SmicPoint=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicBrokenLine=void 0;var n=f(i(13)),r=f(i(8)),o=f(i(20)),s=f(i(16)),a=f(i(46)),l=f(i(17)),u=i(6),c=i(107),h=i(257),d=i(116);function f(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function e(t){(0,r.default)(this,e);var i=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t));return i.brushTypeOnly="stroke",i.textPosition="end",i.type="smicbroken-line",i.refOriginalPosition&&2===i.refOriginalPosition.length||(i.refOriginalPosition=[0,0]),i.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicBrokenLine",i}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.brushTypeOnly=null,this.textPosition=null,this.type=null,(0,a.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var i=this.refOriginalPosition,n=e.pointList;if(!(n.length<2)){var r=Math.min(e.pointList.length,Math.round(e.pointListLength||e.pointList.length));if(e.smooth&&"spline"!==e.smooth){var o,s,a,l=d.SUtil.SUtil_smoothBezier(n,e.smooth,!1,e.smoothConstraint,i);t.moveTo(n[0][0]+i[0],n[0][1]+i[1]);for(var u=0;u<r-1;u++)o=l[2*u],s=l[2*u+1],a=[n[u+1][0]+i[0],n[u+1][1]+i[1]],t.bezierCurveTo(o[0],o[1],s[0],s[1],a[0],a[1])}else if("spline"===e.smooth&&(r=(n=d.SUtil.SUtil_smoothSpline(n,null,null,i)).length),e.lineType&&"solid"!==e.lineType){if("dashed"===e.lineType||"dotted"===e.lineType||"dot"===e.lineType||"dash"===e.lineType||"longdash"===e.lineType){var c=e.lineWidth||1,h=c,f=c;"dashed"===e.lineType&&(h*=5,f*=5,e.lineCap&&"butt"!==e.lineCap&&(h-=c,f+=c)),"dotted"===e.lineType&&e.lineCap&&"butt"!==e.lineCap&&(h=1,f+=c),"dot"===e.lineType&&(f*=4,e.lineCap&&"butt"!==e.lineCap&&(h=1,f+=c)),"dash"===e.lineType&&(h*=4,f*=4,e.lineCap&&"butt"!==e.lineCap&&(h-=c,f+=c)),"longdash"===e.lineType&&(h*=8,f*=4,e.lineCap&&"butt"!==e.lineCap&&(h-=c,f+=c)),t.moveTo(n[0][0]+i[0],n[0][1]+i[1]);for(var p=1;p<r;p++)d.SUtil.SUtil_dashedLineTo(t,n[p-1][0]+i[0],n[p-1][1]+i[1],n[p][0]+i[0],n[p][1]+i[1],c,[h,f])}else if("dashot"===e.lineType||"longdashdot"===e.lineType){var g=e.lineWidth||1,y=g,m=g,_=g,v=g;"dashot"===e.lineType&&(y*=4,m*=4,v*=4,e.lineCap&&"butt"!==e.lineCap&&(y-=g,m+=g,_=1,v+=g)),"longdashdot"===e.lineType&&(y*=8,m*=4,v*=4,e.lineCap&&"butt"!==e.lineCap&&(y-=g,m+=g,_=1,v+=g)),g=(e.lineWidth||1)*("dashed"===e.lineType?5:1),t.moveTo(n[0][0]+i[0],n[0][1]+i[1]);for(var b=1;b<r;b++)d.SUtil.SUtil_dashedLineTo(t,n[b-1][0]+i[0],n[b-1][1]+i[1],n[b][0]+i[0],n[b][1]+i[1],g,[y,m,_,v])}}else{t.moveTo(n[0][0]+i[0],n[0][1]+i[1]);for(var S=1;S<r;S++)t.lineTo(n[S][0]+i[0],n[S][1]+i[1])}}}},{key:"getRect",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e=this.refOriginalPosition;return h.SmicPolygon.prototype.getRect.apply(this,[t,e])}}]),e}(c.Shape);e.SmicBrokenLine=p,u.Zondy.LevelRenderer.SmicBrokenLine=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FeatureGeometry=void 0;var n=i(6),r=i(21),o=(i(316),i(317),i(319),function(t){var e=void 0!==t?t:{};(0,r.extend)(this,e),this.PntGeom=void 0!==e.PntGeom&&null!=e.PntGeom?e.PntGeom:null,this.LinGeom=void 0!==e.LinGeom&&null!=e.LinGeom?e.LinGeom:null,this.RegGeom=void 0!==e.RegGeom&&null!=e.RegGeom?e.RegGeom:null});o.prototype.setPntGeom=function(t){this.PntGeom=void 0!==t&&null!=t&&Array.isArray(t)?t:null},o.prototype.setLine=function(t){this.LinGeom=void 0!==t&&null!=t&&Array.isArray(t)?t:null},o.prototype.setRegGeom=function(t){this.RegGeom=void 0!==t&&null!=t&&Array.isArray(t)?t:null},e.FeatureGeometry=o,n.Zondy.Object.FeatureGeometry=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GPoint=void 0;var n=h(i(13)),r=h(i(8)),o=h(i(20)),s=h(i(16)),a=h(i(17)),l=i(6),u=(i(21),i(258)),c=i(100);function h(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(t,i,o){(0,r.default)(this,e);var a=o||{},l=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,a));return void 0!==t&&null!=t&&void 0!==i&&null!=i&&(l.Dot=new c.Point2D(t,i)),l}return(0,a.default)(e,t),(0,o.default)(e,[{key:"setDot",value:function(t){this.Dot=void 0!==t&&null!=t?t:null}}]),e}(u.FeatureGraphicBase);e.GPoint=d,l.Zondy.Object.GPoint=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GLine=void 0;var n=c(i(13)),r=c(i(8)),o=c(i(20)),s=c(i(16)),a=c(i(17)),l=i(6),u=(i(21),i(258));i(318);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t,i){(0,r.default)(this,e);var o=i||{},a=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,o));return a.Line=void 0!==t&&null!=t?t:null,a}return(0,a.default)(e,t),(0,o.default)(e,[{key:"setLine",value:function(t){this.Line=void 0!==t&&null!=t?t:null}}]),e}(u.FeatureGraphicBase);e.GLine=h,l.Zondy.Object.GLine=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AnyLine=void 0;var n=i(6),r=i(21),o=function(t,e){var i=void 0!==e?e:{};(0,r.extend)(this,i),this.Arcs=void 0!==t&&null!=t?t:null};e.AnyLine=o,n.Zondy.Object.AnyLine=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GRegion=void 0;var n=c(i(13)),r=c(i(8)),o=c(i(20)),s=c(i(16)),a=c(i(17)),l=i(6),u=(i(21),i(258));i(318);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t,i){(0,r.default)(this,e);var o=i||{},a=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,o));return a.Rings=void 0!==t&&null!=t&&Array.isArray(t)?t:null,a}return(0,a.default)(e,t),(0,o.default)(e,[{key:"setRings",value:function(t){this.Rings=void 0!==t&&null!=t?t:null}}]),e}(u.FeatureGraphicBase);e.GRegion=h,l.Zondy.Object.GRegion=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CPointInfo=void 0;var n=i(6),r=i(21),o=function(t){var e=void 0!==t?t:{};(0,r.extend)(this,e),this.Angle=void 0!==e.Angle&&null!=e.Angle?e.Angle:1,this.Color=void 0!==e.Color&&null!=e.Color?e.Color:1,this.SymHeight=void 0!==e.SymHeight&&null!=e.SymHeight?e.SymHeight:1,this.SymID=void 0!==e.SymID&&null!=e.SymID?e.SymID:1,this.SymWidth=void 0!==e.SymWidth&&null!=e.SymWidth?e.SymWidth:1};e.CPointInfo=o,n.Zondy.Object.CPointInfo=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CRegionInfo=void 0;var n=i(6),r=i(21),o=function(t){var e=void 0!==t?t:{};(0,r.extend)(this,e),this.EndColor=void 0!==e.EndColor&&null!=e.EndColor?e.EndColor:1,this.FillColor=void 0!==e.FillColor&&null!=e.FillColor?e.FillColor:1,this.FillMode=void 0!==e.FillMode&&null!=e.FillMode?e.FillMode:0,this.OutPenWidth=void 0!==e.OutPenWidth&&null!=e.OutPenWidth?e.OutPenWidth:1,this.PatAngle=void 0!==e.PatAngle&&null!=e.PatAngle?e.PatAngle:1,this.PatColor=void 0!==e.PatColor&&null!=e.PatColor?e.PatColor:1,this.PatHeight=void 0!==e.PatHeight&&null!=e.PatHeight?e.PatHeight:1,this.PatID=void 0!==e.PatID&&null!=e.PatID?e.PatID:1,this.PatWidth=void 0!==e.PatWidth&&null!=e.PatWidth?e.PatWidth:1};e.CRegionInfo=o,n.Zondy.Object.CRegionInfo=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Polygon=void 0;var n=c(i(13)),r=c(i(8)),o=c(i(20)),s=c(i(16)),a=c(i(17)),l=i(183),u=i(100);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t,i){(0,r.default)(this,e);var o=i||{},a=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,o));return a.pointArr=void 0!==t&&null!=t&&Array.isArray(t)?t:new Array,a}return(0,a.default)(e,t),(0,o.default)(e,[{key:"setByOL",value:function(t){if(void 0!==t&&null!=t)for(var e=t.getLinearRing(0).getCoordinates(),i=e.length,n=0;n<i;n++)this.pointArr[n]=new u.Point2D(e[n][0],e[n][1])}},{key:"toString",value:function(){if(null==this.pointArr||0==this.pointArr.length)return"";for(var t="",e=0;e<this.pointArr.length;e++)t+=this.pointArr[e].x+","+this.pointArr[e].y+",";return t.substring(0,t.length-1)}},{key:"getGeometryType",value:function(){return"polygon"}}]),e}(l.Tangram);e.Polygon=h,Zondy.Object.Polygon=h},function(t,e,i){var n,r,o,s=i(216),a=i(575),l=i(371),u=i(293),c=i(105),h=c.process,d=c.setImmediate,f=c.clearImmediate,p=c.MessageChannel,g=c.Dispatch,y=0,m={},_=function(){var t=+this;if(m.hasOwnProperty(t)){var e=m[t];delete m[t],e()}},v=function(t){_.call(t.data)};d&&f||(d=function(t){for(var e=[],i=1;arguments.length>i;)e.push(arguments[i++]);return m[++y]=function(){a("function"==typeof t?t:Function(t),e)},n(y),y},f=function(t){delete m[t]},"process"==i(218)(h)?n=function(t){h.nextTick(s(_,t,1))}:g&&g.now?n=function(t){g.now(s(_,t,1))}:p?(o=(r=new p).port2,r.port1.onmessage=v,n=s(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(n=function(t){c.postMessage(t+"","*")},c.addEventListener("message",v,!1)):n="onreadystatechange"in u("script")?function(t){l.appendChild(u("script")).onreadystatechange=function(){l.removeChild(this),_.call(t)}}:function(t){setTimeout(s(_,t,1),0)}),t.exports={set:d,clear:f}},function(t,e,i){"use strict";var n=i(246);t.exports.f=function(t){return new function(t){var e,i;this.promise=new t(function(t,n){if(void 0!==e||void 0!==i)throw TypeError("Bad Promise constructor");e=t,i=n}),this.resolve=n(e),this.reject=n(i)}(t)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EditServiceBase=void 0;var n=c(i(13)),r=c(i(8)),o=c(i(16)),s=c(i(17)),a=i(6),l=i(148),u=i(21);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){(0,r.default)(this,e);var i=t||{},s=(0,o.default)(this,(e.__proto__||(0,n.default)(e)).call(this,i));return s.guid=void 0!==i.guid?i.guid:(0,u.newGuid)(),s.baseUrl="igs/rest/mrfs",s.f=void 0!==i.f?i.f:"json",s}return(0,s.default)(e,t),e}(l.ServiceBase);e.EditServiceBase=h,a.Zondy.Service.EditServiceBase=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryFeatureStruct=void 0;var n=i(6),r=i(21),o=function(t){var e=t||{};(0,r.extend)(this,e),this.IncludeAttribute=void 0===e.IncludeAttribute||"boolean"!=typeof e.IncludeAttribute||e.IncludeAttribute,this.IncludeGeometry=void 0!==e.IncludeGeometry&&"boolean"==typeof e.IncludeGeometry&&e.IncludeGeometry,this.IncludeWebGraphic=void 0!==e.IncludeWebGraphic&&"boolean"==typeof e.IncludeWebGraphic&&e.IncludeWebGraphic};o.prototype.toJSON=function(){return(0,r.toJSON)(this)},e.QueryFeatureStruct=o,n.Zondy.Service.QueryFeatureStruct=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ClassBufferBase=void 0;var n=l(i(13)),r=l(i(8)),o=l(i(16)),s=l(i(17)),a=i(6);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t){(0,r.default)(this,e);var i=t||{},s=(0,o.default)(this,(e.__proto__||(0,n.default)(e)).call(this,i));return s.srcInfo=void 0!==i.srcInfo?i.srcInfo:null,s.desInfo=void 0!==i.desInfo?i.desInfo:null,s.idstr=void 0!==i.idstr?i.idstr:"",s.angleType=void 0!==i.angleType?i.angleType:0,s.isDissolve=void 0===i.isDissolve||i.isDissolve,s.isDynPrj=void 0!==i.isDynPrj&&i.isDynPrj,s}return(0,s.default)(e,t),e}(i(167).AnalysisBase);e.ClassBufferBase=u,a.Zondy.Service.ClassBufferBase=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FeatureBuffBase=void 0;var n=l(i(13)),r=l(i(8)),o=l(i(16)),s=l(i(17)),a=i(6);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t){(0,r.default)(this,e);var i=t||{},s=(0,o.default)(this,(e.__proto__||(0,n.default)(e)).call(this,i));return s.sfGeometryXML=void 0!==i.sfGeometryXML?i.sfGeometryXML:null,s.attStrctXML=void 0!==i.attStrctXML?i.attStrctXML:null,s.attRowsXML=void 0!==i.attRowsXML?i.attRowsXML:null,s.traceRadius=void 0!==i.traceRadius?i.traceRadius:1e-4,s.resultName=void 0!==i.resultName?i.resultName:null,s.inFormat=void 0!==i.inFormat?i.inFormat:"json",s}return(0,s.default)(e,t),e}(i(167).AnalysisBase);e.FeatureBuffBase=u,a.Zondy.Service.FeatureBuffBase=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OverlayBase=void 0;var n=l(i(13)),r=l(i(8)),o=l(i(16)),s=l(i(17)),a=i(6);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t){(0,r.default)(this,e);var i=t||{},s=(0,o.default)(this,(e.__proto__||(0,n.default)(e)).call(this,i));return s.srcInfo1=void 0!==i.srcInfo1?i.srcInfo1:null,s.desInfo=void 0!==i.desInfo?i.desInfo:null,s.attOptType=void 0!==i.attOptType?i.attOptType:1,s.infoOptType=void 0!==i.infoOptType?i.infoOptType:1,s.overType=void 0!==i.overType?i.overType:3,s.isCleanNode=void 0!==i.isCleanNode&&i.isCleanNode,s.isLabelPnt=void 0!==i.isLabelPnt&&i.isLabelPnt,s.isValidReg=void 0!==i.isValidReg&&i.isValidReg,s.isReCalculate=void 0===i.isReCalculate||i.isReCalculate,s.radius=void 0!==i.radius?i.radius:.001,s}return(0,s.default)(e,t),e}(i(167).AnalysisBase);e.OverlayBase=u,a.Zondy.Service.OverlayBase=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProjectBase=void 0;var n=l(i(13)),r=l(i(8)),o=l(i(16)),s=l(i(17)),a=i(6);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t){(0,r.default)(this,e);var i=t||{},s=(0,o.default)(this,(e.__proto__||(0,n.default)(e)).call(this,i));return s.clsName=void 0!==i.clsName?i.clsName:null,s.desClsName=void 0!==i.desClsName?i.desClsName:null,s.resultName=void 0!==i.resultName?i.resultName:null,s}return(0,s.default)(e,t),e}(i(167).AnalysisBase);e.ProjectBase=u,a.Zondy.Service.ProjectBase=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CalServiceBase=void 0;var n=p(i(75)),r=p(i(13)),o=p(i(8)),s=p(i(20)),a=p(i(16)),l=p(i(17)),u=i(6),c=i(197),h=(i(100),i(67)),d=i(263),f=i(332);function p(t){return t&&t.__esModule?t:{default:t}}var g=function(t){function e(t){(0,o.default)(this,e);var i=t||{},n=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,i));return n.dots=void 0!==i.dots?i.dots:null,n.projectInfo=void 0!==i.projectInfo?i.projectInfo:null,n.projectInfoBySRSID=void 0!==i.projectInfoBySRSID?i.projectInfoBySRSID:null,n}return(0,l.default)(e,t),(0,s.default)(e,[{key:"execute",value:function(t,e,i){t instanceof d.CProjectParam&&(this.projectInfo=t),t instanceof f.CProjectBySRSID&&(this.projectInfoBySrsID=t);var r={};r.Dots=this.dots,r.ProjectInfo=this.projectInfo,r.ProjectInfoBySrsID=this.projectInfoBySrsID;var o=this.getFullUrl();new h.IgsServiceBase(o,{eventListeners:{scope:this,processCompleted:e,processFailed:i}}).processAsync({method:"POST",data:(0,n.default)(r),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]),e}(c.GeometryAnalysisBase);e.CalServiceBase=g,u.Zondy.Service.CalServiceBase=g},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CProjectBySRSID=void 0;var n=i(6),r=(i(417),function(t,e){this.SrsID=t,this.GdbInfo=e});e.CProjectBySRSID=r,n.Zondy.Service.CProjectBySRSID=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FolderInfoAttribute=void 0;var n=i(6),r=function(t,e){this.name=void 0!==t?t:null,this.Value=void 0!==e?e:null};e.FolderInfoAttribute=r,n.Zondy.Object.Theme.FolderInfoAttribute=r},function(t,e,i){"use strict";i.r(e);var n=i(1),r="accuracy",o="accuracyGeometry",s="altitude",a="altitudeAccuracy",l="heading",u="position",c="projection",h="speed",d="tracking",f="trackingOptions",p=i(25),g=i(4),y=i(10),m=i(36),_=i(47),v=i(18),b=i(9);const S=function(t){p.default.call(this);const e=t||{};this.position_=null,this.transform_=b.identityTransform,this.watchId_=void 0,Object(g.listen)(this,Object(p.getChangeEventType)(c),this.handleProjectionChanged_,this),Object(g.listen)(this,Object(p.getChangeEventType)(d),this.handleTrackingChanged_,this),void 0!==e.projection&&this.setProjection(e.projection),void 0!==e.trackingOptions&&this.setTrackingOptions(e.trackingOptions),this.setTracking(void 0!==e.tracking&&e.tracking)};Object(n.inherits)(S,p.default),S.prototype.disposeInternal=function(){this.setTracking(!1),p.default.prototype.disposeInternal.call(this)},S.prototype.handleProjectionChanged_=function(){const t=this.getProjection();t&&(this.transform_=Object(b.getTransformFromProjections)(Object(b.get)("EPSG:4326"),t),this.position_&&this.set(u,this.transform_(this.position_)))},S.prototype.handleTrackingChanged_=function(){if(_.GEOLOCATION){const t=this.getTracking();t&&void 0===this.watchId_?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):t||void 0===this.watchId_||(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}},S.prototype.positionChange_=function(t){const e=t.coords;this.set(r,e.accuracy),this.set(s,null===e.altitude?void 0:e.altitude),this.set(a,null===e.altitudeAccuracy?void 0:e.altitudeAccuracy),this.set(l,null===e.heading?void 0:Object(v.j)(e.heading)),this.position_?(this.position_[0]=e.longitude,this.position_[1]=e.latitude):this.position_=[e.longitude,e.latitude];const i=this.transform_(this.position_);this.set(u,i),this.set(h,null===e.speed?void 0:e.speed);const n=Object(m.circular)(this.position_,e.accuracy);n.applyTransform(this.transform_),this.set(o,n),this.changed()},S.prototype.positionError_=function(t){t.type=y.default.ERROR,this.setTracking(!1),this.dispatchEvent(t)},S.prototype.getAccuracy=function(){return this.get(r)},S.prototype.getAccuracyGeometry=function(){return this.get(o)||null},S.prototype.getAltitude=function(){return this.get(s)},S.prototype.getAltitudeAccuracy=function(){return this.get(a)},S.prototype.getHeading=function(){return this.get(l)},S.prototype.getPosition=function(){return this.get(u)},S.prototype.getProjection=function(){return this.get(c)},S.prototype.getSpeed=function(){return this.get(h)},S.prototype.getTracking=function(){return this.get(d)},S.prototype.getTrackingOptions=function(){return this.get(f)},S.prototype.setProjection=function(t){this.set(c,Object(b.get)(t))},S.prototype.setTracking=function(t){this.set(d,t)},S.prototype.setTrackingOptions=function(t){this.set(f,t)};e.default=S},function(t,e,i){"use strict";i.r(e);var n=i(27),r=i(4),o=i(2),s=i(19),a=i(41),l=i(39),u=i(18),c=i(9);function h(t,e,i){const n=[];let r=t(0),o=t(1),s=e(r),a=e(o);const l=[o,r],c=[a,s],h=[1,0],d={};let f,p,g,y,m,_,v=1e5;for(;--v>0&&h.length>0;)g=h.pop(),r=l.pop(),s=c.pop(),(_=g.toString())in d||(n.push(s[0],s[1]),d[_]=!0),y=h.pop(),o=l.pop(),a=c.pop(),p=e(f=t(m=(g+y)/2)),Object(u.h)(p[0],p[1],s[0],s[1],a[0],a[1])<i?(n.push(a[0],a[1]),d[_=y.toString()]=!0):(h.push(y,m,m,g),c.push(a,p,p,s),l.push(o,f,f,r));return n}var d=i(68),f=i(96),p=i(91),g=i(188);const y=new p.default({color:"rgba(0,0,0,0.2)"}),m=[90,45,30,20,10,5,2,1,.5,.2,.1,.05,.01,.005,.002,.001],_=function(t){const e=t||{};this.map_=null,this.postcomposeListenerKey_=null,this.projection_=null,this.maxLat_=1/0,this.maxLon_=1/0,this.minLat_=-1/0,this.minLon_=-1/0,this.maxLatP_=1/0,this.maxLonP_=1/0,this.minLatP_=-1/0,this.minLonP_=-1/0,this.targetSize_=void 0!==e.targetSize?e.targetSize:100,this.maxLines_=void 0!==e.maxLines?e.maxLines:100,this.meridians_=[],this.parallels_=[],this.strokeStyle_=void 0!==e.strokeStyle?e.strokeStyle:y,this.fromLonLatTransform_=void 0,this.toLonLatTransform_=void 0,this.projectionCenterLonLat_=null,this.meridiansLabels_=null,this.parallelsLabels_=null,1==e.showLabels&&(this.lonLabelFormatter_=void 0==e.lonLabelFormatter?n.degreesToStringHDMS.bind(this,"EW"):e.lonLabelFormatter,this.latLabelFormatter_=void 0==e.latLabelFormatter?n.degreesToStringHDMS.bind(this,"NS"):e.latLabelFormatter,this.lonLabelPosition_=void 0==e.lonLabelPosition?0:e.lonLabelPosition,this.latLabelPosition_=void 0==e.latLabelPosition?1:e.latLabelPosition,this.lonLabelStyle_=void 0!==e.lonLabelStyle?e.lonLabelStyle:new g.default({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new f.default({color:"rgba(0,0,0,1)"}),stroke:new p.default({color:"rgba(255,255,255,1)",width:3})}),this.latLabelStyle_=void 0!==e.latLabelStyle?e.latLabelStyle:new g.default({font:"12px Calibri,sans-serif",textAlign:"end",fill:new f.default({color:"rgba(0,0,0,1)"}),stroke:new p.default({color:"rgba(255,255,255,1)",width:3})}),this.meridiansLabels_=[],this.parallelsLabels_=[]),this.setMap(void 0!==e.map?e.map:null)};_.prototype.addMeridian_=function(t,e,i,n,r,s){const a=this.getMeridian_(t,e,i,n,s);if(Object(o.intersects)(a.getExtent(),r)){if(this.meridiansLabels_){const e=this.getMeridianPoint_(a,r,s);this.meridiansLabels_[s]={geom:e,text:this.lonLabelFormatter_(t)}}this.meridians_[s++]=a}return s},_.prototype.getMeridianPoint_=function(t,e,i){const n=t.getFlatCoordinates(),r=Math.max(e[1],n[1]),o=Math.min(e[3],n[n.length-1]),s=Object(u.a)(e[1]+Math.abs(e[1]-e[3])*this.lonLabelPosition_,r,o),a=[n[0],s],c=void 0!==this.meridiansLabels_[i]?this.meridiansLabels_[i].geom:new l.default(null);return c.setCoordinates(a),c},_.prototype.addParallel_=function(t,e,i,n,r,s){const a=this.getParallel_(t,e,i,n,s);if(Object(o.intersects)(a.getExtent(),r)){if(this.parallelsLabels_){const e=this.getParallelPoint_(a,r,s);this.parallelsLabels_[s]={geom:e,text:this.latLabelFormatter_(t)}}this.parallels_[s++]=a}return s},_.prototype.getParallelPoint_=function(t,e,i){const n=t.getFlatCoordinates(),r=Math.max(e[0],n[0]),o=Math.min(e[2],n[n.length-2]),s=[Object(u.a)(e[0]+Math.abs(e[0]-e[2])*this.latLabelPosition_,r,o),n[1]],a=void 0!==this.parallelsLabels_[i]?this.parallelsLabels_[i].geom:new l.default(null);return a.setCoordinates(s),a},_.prototype.createGraticule_=function(t,e,i,n){const r=this.getInterval_(i);if(-1==r)return this.meridians_.length=this.parallels_.length=0,this.meridiansLabels_&&(this.meridiansLabels_.length=0),void(this.parallelsLabels_&&(this.parallelsLabels_.length=0));const o=this.toLonLatTransform_(e);let s=o[0],a=o[1];const l=this.maxLines_;let h,d,f,p,g=[Math.max(t[0],this.minLonP_),Math.max(t[1],this.minLatP_),Math.min(t[2],this.maxLonP_),Math.min(t[3],this.maxLatP_)];const y=(g=Object(c.transformExtent)(g,this.projection_,"EPSG:4326"))[3],m=g[2],_=g[1],v=g[0];for(s=Math.floor(s/r)*r,p=Object(u.a)(s,this.minLon_,this.maxLon_),d=this.addMeridian_(p,_,y,n,t,0),h=0;p!=this.minLon_&&h++<l;)p=Math.max(p-r,this.minLon_),d=this.addMeridian_(p,_,y,n,t,d);for(p=Object(u.a)(s,this.minLon_,this.maxLon_),h=0;p!=this.maxLon_&&h++<l;)p=Math.min(p+r,this.maxLon_),d=this.addMeridian_(p,_,y,n,t,d);for(this.meridians_.length=d,this.meridiansLabels_&&(this.meridiansLabels_.length=d),a=Math.floor(a/r)*r,f=Object(u.a)(a,this.minLat_,this.maxLat_),d=this.addParallel_(f,v,m,n,t,0),h=0;f!=this.minLat_&&h++<l;)f=Math.max(f-r,this.minLat_),d=this.addParallel_(f,v,m,n,t,d);for(f=Object(u.a)(a,this.minLat_,this.maxLat_),h=0;f!=this.maxLat_&&h++<l;)f=Math.min(f+r,this.maxLat_),d=this.addParallel_(f,v,m,n,t,d);this.parallels_.length=d,this.parallelsLabels_&&(this.parallelsLabels_.length=d)},_.prototype.getInterval_=function(t){const e=this.projectionCenterLonLat_[0],i=this.projectionCenterLonLat_[1];let n=-1;const r=Math.pow(this.targetSize_*t,2),o=[],s=[];for(let t=0,a=m.length;t<a;++t){const a=m[t]/2;if(o[0]=e-a,o[1]=i-a,s[0]=e+a,s[1]=i+a,this.fromLonLatTransform_(o,o),this.fromLonLatTransform_(s,s),Math.pow(s[0]-o[0],2)+Math.pow(s[1]-o[1],2)<=r)break;n=m[t]}return n},_.prototype.getMap=function(){return this.map_},_.prototype.getMeridian_=function(t,e,i,n,r){const o=function(t,e,i,n,r){const o=Object(c.get)("EPSG:4326");return h(function(n){return[t,e+(i-e)*n]},Object(c.getTransform)(o,n),r)}(t,e,i,this.projection_,n),l=void 0!==this.meridians_[r]?this.meridians_[r]:new a.default(null);return l.setFlatCoordinates(s.default.XY,o),l},_.prototype.getMeridians=function(){return this.meridians_},_.prototype.getParallel_=function(t,e,i,n,r){const o=function(t,e,i,n,r){const o=Object(c.get)("EPSG:4326");return h(function(n){return[e+(i-e)*n,t]},Object(c.getTransform)(o,n),r)}(t,e,i,this.projection_,n),l=void 0!==this.parallels_[r]?this.parallels_[r]:new a.default(null);return l.setFlatCoordinates(s.default.XY,o),l},_.prototype.getParallels=function(){return this.parallels_},_.prototype.handlePostCompose_=function(t){const e=t.vectorContext,i=t.frameState,n=i.extent,r=i.viewState,o=r.center,s=r.projection,a=r.resolution,l=i.pixelRatio,u=a*a/(4*l*l);let h,d,f,p;for((!this.projection_||!Object(c.equivalent)(this.projection_,s))&&this.updateProjectionInfo_(s),this.createGraticule_(n,o,a,u),e.setFillStrokeStyle(null,this.strokeStyle_),h=0,d=this.meridians_.length;h<d;++h)f=this.meridians_[h],e.drawGeometry(f);for(h=0,d=this.parallels_.length;h<d;++h)f=this.parallels_[h],e.drawGeometry(f);if(this.meridiansLabels_)for(h=0,d=this.meridiansLabels_.length;h<d;++h)p=this.meridiansLabels_[h],this.lonLabelStyle_.setText(p.text),e.setTextStyle(this.lonLabelStyle_),e.drawGeometry(p.geom);if(this.parallelsLabels_)for(h=0,d=this.parallelsLabels_.length;h<d;++h)p=this.parallelsLabels_[h],this.latLabelStyle_.setText(p.text),e.setTextStyle(this.latLabelStyle_),e.drawGeometry(p.geom)},_.prototype.updateProjectionInfo_=function(t){const e=Object(c.get)("EPSG:4326"),i=t.getWorldExtent(),n=Object(c.transformExtent)(i,e,t);this.maxLat_=i[3],this.maxLon_=i[2],this.minLat_=i[1],this.minLon_=i[0],this.maxLatP_=n[3],this.maxLonP_=n[2],this.minLatP_=n[1],this.minLonP_=n[0],this.fromLonLatTransform_=Object(c.getTransform)(e,t),this.toLonLatTransform_=Object(c.getTransform)(t,e),this.projectionCenterLonLat_=this.toLonLatTransform_(Object(o.getCenter)(t.getExtent())),this.projection_=t},_.prototype.setMap=function(t){this.map_&&(Object(r.unlistenByKey)(this.postcomposeListenerKey_),this.postcomposeListenerKey_=null,this.map_.render()),t&&(this.postcomposeListenerKey_=Object(r.listen)(t,d.a.POSTCOMPOSE,this.handlePostCompose_,this),t.render()),this.map_=t};e.default=_},function(t,e,i){"use strict";function n(t,e){return[[-1/0,-1/0,1/0,1/0]]}function r(t,e){return[t]}function o(t){return function(e,i){const n=t.getZForResolution(i),r=t.getTileRangeForExtentAndZ(e,n),o=[],s=[n,0,0];for(s[1]=r.minX;s[1]<=r.maxX;++s[1])for(s[2]=r.minY;s[2]<=r.maxY;++s[2])o.push(t.getTileCoordExtent(s));return o}}i.r(e),i.d(e,"all",function(){return n}),i.d(e,"bbox",function(){return r}),i.d(e,"tile",function(){return o})},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(54),o=i(34),s=i(26),a=i(4),l=i(10),u=i(206),c=i.n(u),h=i(2),d=i(68),f=i(22),p=i(243),g=i(178),y=i(88);const m=function(t){g.a.call(this,t),this.declutterTree_=t.getDeclutter()?c()(9,void 0):null,this.dirty_=!1,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Object(h.createEmpty)(),this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.context=Object(s.a)(),Object(a.listen)(f.labelCache,l.default.CLEAR,this.handleFontsChanged_,this)};Object(n.inherits)(m,g.a),m.handles=function(t){return t.getType()===r.a.VECTOR},m.create=function(t,e){return new m(e)},m.prototype.disposeInternal=function(){Object(a.unlisten)(f.labelCache,l.default.CLEAR,this.handleFontsChanged_,this),g.a.prototype.disposeInternal.call(this)},m.prototype.compose=function(t,e,i){const n=e.extent,r=e.pixelRatio,o=i.managed?e.skippedFeatureUids:{},s=e.viewState,a=s.projection,l=s.rotation,u=a.getExtent(),c=this.getLayer().getSource();let p=this.getTransform(e,0);const g=i.extent,y=void 0!==g;y&&this.clip(t,e,g);const m=this.replayGroup_;if(m&&!m.isEmpty()){this.declutterTree_&&this.declutterTree_.clear();const s=this.getLayer();let g,y=0,_=0;const v=1!==i.opacity,b=s.hasListener(d.a.RENDER);if(v||b){let e=t.canvas.width,i=t.canvas.height;if(l){const t=Math.round(Math.sqrt(e*e+i*i));y=(t-e)/2,_=(t-i)/2,e=i=t}this.context.canvas.width=e,this.context.canvas.height=i,g=this.context}else g=t;const S=g.globalAlpha;v||(g.globalAlpha=i.opacity),g!=t&&g.translate(y,_);const O=e.size[0]*r,C=e.size[1]*r;if(Object(f.rotateAtOffset)(g,-l,O/2,C/2),m.replay(g,p,l,o),c.getWrapX()&&a.canWrapX()&&!Object(h.containsExtent)(u,n)){let t=n[0];const i=Object(h.getWidth)(u);let r,s=0;for(;t<u[0];)r=i*--s,p=this.getTransform(e,r),m.replay(g,p,l,o),t+=i;for(s=0,t=n[2];t>u[2];)r=i*++s,p=this.getTransform(e,r),m.replay(g,p,l,o),t-=i}if(Object(f.rotateAtOffset)(g,l,O/2,C/2),g!=t){if(b&&this.dispatchRenderEvent(g,e,p),v){const e=t.globalAlpha;t.globalAlpha=i.opacity,t.drawImage(g.canvas,-y,-_),t.globalAlpha=e}else t.drawImage(g.canvas,-y,-_);g.translate(-y,-_)}v||(g.globalAlpha=S)}y&&t.restore()},m.prototype.composeFrame=function(t,e,i){const n=this.getTransform(t,0);this.preCompose(i,t,n),this.compose(i,t,e),this.postCompose(i,t,e,n)},m.prototype.forEachFeatureAtCoordinate=function(t,e,i,r,o){if(this.replayGroup_){const s=e.viewState.resolution,a=e.viewState.rotation,l=this.getLayer(),u={};return this.replayGroup_.forEachFeatureAtCoordinate(t,s,a,i,{},function(t){const e=Object(n.getUid)(t).toString();if(!(e in u))return u[e]=!0,r.call(o,t,l)},null)}},m.prototype.handleFontsChanged_=function(t){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()},m.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},m.prototype.prepareFrame=function(t,e){const i=this.getLayer(),n=i.getSource(),r=t.viewHints[o.default.ANIMATING],s=t.viewHints[o.default.INTERACTING],a=i.getUpdateWhileAnimating(),l=i.getUpdateWhileInteracting();if(!this.dirty_&&!a&&r||!l&&s)return!0;const u=t.extent,c=t.viewState,d=c.projection,f=c.resolution,g=t.pixelRatio,m=i.getRevision(),_=i.getRenderBuffer();let v=i.getRenderOrder();void 0===v&&(v=y.a);const b=Object(h.buffer)(u,_*f),S=c.projection.getExtent();if(n.getWrapX()&&c.projection.canWrapX()&&!Object(h.containsExtent)(S,t.extent)){const t=Object(h.getWidth)(S),e=Math.max(Object(h.getWidth)(b)/2,t);b[0]=S[0]-e,b[2]=S[2]+e}if(!this.dirty_&&this.renderedResolution_==f&&this.renderedRevision_==m&&this.renderedRenderOrder_==v&&Object(h.containsExtent)(this.renderedExtent_,b))return this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;const O=new p.a(Object(y.c)(f,g),b,f,g,n.getOverlaps(),this.declutterTree_,i.getRenderBuffer());n.loadFeatures(b,f,d);const C=function(t){let e;const n=t.getStyleFunction()||i.getStyleFunction();if(n&&(e=n(t,f)),e){const i=this.renderFeature(t,f,g,e,O);this.dirty_=this.dirty_||i}}.bind(this);if(v){const t=[];n.forEachFeatureInExtent(b,function(e){t.push(e)},this),t.sort(v);for(let e=0,i=t.length;e<i;++e)C(t[e])}else n.forEachFeatureInExtent(b,C,this);return O.finish(),this.renderedResolution_=f,this.renderedRevision_=m,this.renderedRenderOrder_=v,this.renderedExtent_=b,this.replayGroup_=O,this.replayGroupChanged=!0,!0},m.prototype.renderFeature=function(t,e,i,n,r){if(!n)return!1;let o=!1;if(Array.isArray(n))for(let s=0,a=n.length;s<a;++s)o=Object(y.d)(r,t,n[s],Object(y.b)(e,i),this.handleStyleImageChange_,this)||o;else o=Object(y.d)(r,t,n,Object(y.b)(e,i),this.handleStyleImageChange_,this);return o},e.default=m},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(54),o=i(15),s=i(26),a=i(4),l=i(10),u=i(206),c=i.n(u),h=i(2),d=i(115),f=i(9),p=i(51),g=i(31),y=i(22),m=i(243),_=i(69),v=i(114),b=i(88),S=i(14);const O={image:[g.a.POLYGON,g.a.CIRCLE,g.a.LINE_STRING,g.a.IMAGE,g.a.TEXT],hybrid:[g.a.POLYGON,g.a.LINE_STRING]},C={image:[g.a.DEFAULT],hybrid:[g.a.IMAGE,g.a.TEXT,g.a.DEFAULT],vector:_.a},x=function(t){this.context=null,v.default.call(this,t),this.declutterTree_=t.getDeclutter()?c()(9,void 0):null,this.dirty_=!1,this.renderedLayerRevision_,this.tmpTransform_=Object(S.c)(),this.zDirection=t.getRenderMode()==d.a.VECTOR?1:0,Object(a.listen)(y.labelCache,l.default.CLEAR,this.handleFontsChanged_,this)};Object(n.inherits)(x,v.default),x.handles=function(t){return t.getType()===r.a.VECTOR_TILE},x.create=function(t,e){return new x(e)},x.prototype.disposeInternal=function(){Object(a.unlisten)(y.labelCache,l.default.CLEAR,this.handleFontsChanged_,this),v.default.prototype.disposeInternal.call(this)},x.prototype.getTile=function(t,e,i,n,r){const s=v.default.prototype.getTile.call(this,t,e,i,n,r);return s.getState()===o.a.LOADED&&(this.createReplayGroup_(s,n,r),this.context&&this.renderTileImage_(s,n,r)),s},x.prototype.prepareFrame=function(t,e){const i=this.getLayer(),n=i.getRevision();if(this.renderedLayerRevision_!=n){this.renderedTiles.length=0;const t=i.getRenderMode();this.context||t==d.a.VECTOR||(this.context=Object(s.a)()),this.context&&t==d.a.VECTOR&&(this.context=null)}return this.renderedLayerRevision_=n,v.default.prototype.prepareFrame.apply(this,arguments)},x.prototype.createReplayGroup_=function(t,e,i){const n=this.getLayer(),r=n.getRevision(),s=n.getRenderOrder()||null,a=t.getReplayState(n);if(!a.dirty&&a.renderedRevision==r&&a.renderedRenderOrder==s)return;const l=n.getSource(),u=l.getTileGrid(),c=l.getTileGridForProjection(i).getResolution(t.tileCoord[0]),d=t.extent,g={};for(let r=0,y=t.tileKeys.length;r<y;++r){const y=t.getTile(t.tileKeys[r]);if(y.getState()!=o.a.LOADED)continue;const _=y.tileCoord,v=u.getTileCoordExtent(_),S=Object(h.getIntersection)(d,v),O=Object(h.equals)(v,S)?null:Object(h.buffer)(S,n.getRenderBuffer()*c,this.tmpExtent),C=y.getProjection();let x=!1;Object(f.equivalent)(i,C)||(x=!0,y.setProjection(i)),a.dirty=!1;const T=new m.a(0,S,c,e,l.getOverlaps(),this.declutterTree_,n.getRenderBuffer()),E=Object(b.b)(c,e),P=function(t){let e;const i=t.getStyleFunction()||n.getStyleFunction();if(i&&(e=i(t,c)),e){const i=this.renderFeature(t,E,e,T);this.dirty_=this.dirty_||i,a.dirty=a.dirty||i}},j=y.getFeatures();s&&s!==a.renderedRenderOrder&&j.sort(s);for(let t=0,e=j.length;t<e;++t){const e=j[t];x&&(C.getUnits()==p.default.TILE_PIXELS&&(C.setWorldExtent(v),C.setExtent(y.getExtent())),e.getGeometry().transform(C,i)),O&&!Object(h.intersects)(O,e.getGeometry().getExtent())||P.call(this,e)}T.finish();for(const t in T.getReplays())g[t]=!0;y.setReplayGroup(n,t.tileCoord.toString(),T)}a.renderedRevision=r,a.renderedRenderOrder=s},x.prototype.forEachFeatureAtCoordinate=function(t,e,i,r,s){const a=e.viewState.resolution,l=e.viewState.rotation;i=void 0==i?0:i;const u=this.getLayer(),c={},d=this.renderedTiles;let f,p,g,y,m;for(g=0,y=d.length;g<y;++g){const e=d[g];if(f=Object(h.buffer)(e.extent,i*a,f),Object(h.containsCoordinate)(f,t))for(let h=0,d=e.tileKeys.length;h<d;++h){const d=e.getTile(e.tileKeys[h]);d.getState()==o.a.LOADED&&(m=d.getReplayGroup(u,e.tileCoord.toString()),p=p||m.forEachFeatureAtCoordinate(t,a,l,i,{},function(t){const e=Object(n.getUid)(t).toString();if(!(e in c))return c[e]=!0,r.call(s,t,u)},null))}}return p},x.prototype.getReplayTransform_=function(t,e){const i=this.getLayer().getSource().getTileGrid(),n=t.tileCoord,r=i.getResolution(n[0]),o=e.viewState,s=e.pixelRatio,a=o.resolution/s,l=i.getTileCoordExtent(n,this.tmpExtent),u=o.center,c=Object(h.getTopLeft)(l),d=e.size,f=Math.round(s*d[0]/2),p=Math.round(s*d[1]/2);return Object(S.b)(this.tmpTransform_,f,p,r/a,r/a,o.rotation,(c[0]-u[0])/r,(u[1]-c[1])/r)},x.prototype.handleFontsChanged_=function(t){const e=this.getLayer();e.getVisible()&&void 0!==this.renderedLayerRevision_&&e.changed()},x.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},x.prototype.postCompose=function(t,e,i){const n=this.getLayer(),r=n.getRenderMode();if(r!=d.a.IMAGE){const s=n.getDeclutter()?{}:null,a=n.getSource(),l=C[r],u=e.pixelRatio,c=e.viewState.rotation,h=e.size;let f,p;c&&(f=Math.round(u*h[0]/2),p=Math.round(u*h[1]/2),Object(y.rotateAtOffset)(t,-c,f,p)),s&&this.declutterTree_.clear();const g=this.renderedTiles,_=a.getTileGridForProjection(e.viewState.projection),v=[],b=[];for(let a=g.length-1;a>=0;--a){const u=g[a];if(u.getState()==o.a.ABORT)continue;const h=u.tileCoord,f=_.getTileCoordExtent(h,this.tmpExtent)[0]-u.extent[0];let p=void 0;for(let a=0,g=u.tileKeys.length;a<g;++a){const g=u.getTile(u.tileKeys[a]);if(g.getState()!=o.a.LOADED)continue;const y=g.getReplayGroup(n,h.toString());if(r!=d.a.VECTOR&&!y.hasReplays(l))continue;p||(p=this.getTransform(e,f));const m=g.tileCoord[0],_=y.getClipCoords(p);t.save(),t.globalAlpha=i.opacity;for(let e=0,i=v.length;e<i;++e){const i=v[e];m<b[e]&&(t.beginPath(),t.moveTo(_[0],_[1]),t.lineTo(_[2],_[3]),t.lineTo(_[4],_[5]),t.lineTo(_[6],_[7]),t.moveTo(i[6],i[7]),t.lineTo(i[4],i[5]),t.lineTo(i[2],i[3]),t.lineTo(i[0],i[1]),t.clip())}y.replay(t,p,c,{},l,s),t.restore(),v.push(_),b.push(m)}}s&&Object(m.b)(s,t,c),c&&Object(y.rotateAtOffset)(t,c,f,p)}v.default.prototype.postCompose.apply(this,arguments)},x.prototype.renderFeature=function(t,e,i,n){if(!i)return!1;let r=!1;if(Array.isArray(i))for(let o=0,s=i.length;o<s;++o)r=Object(b.d)(n,t,i[o],e,this.handleStyleImageChange_,this)||r;else r=Object(b.d)(n,t,i,e,this.handleStyleImageChange_,this);return r},x.prototype.renderTileImage_=function(t,e,i){const n=this.getLayer(),r=t.getReplayState(n),s=n.getRevision(),a=O[n.getRenderMode()];if(a&&r.renderedTileRevision!==s){r.renderedTileRevision=s;const l=t.wrappedTileCoord,u=l[0],c=n.getSource(),h=c.getTileGridForProjection(i),d=h.getResolution(u),f=t.getContext(n),p=c.getTilePixelSize(u,e,i);f.canvas.width=p[0],f.canvas.height=p[1];const g=h.getTileCoordExtent(l,this.tmpExtent);for(let i=0,r=t.tileKeys.length;i<r;++i){const r=t.getTile(t.tileKeys[i]);if(r.getState()!=o.a.LOADED)continue;const s=e/d,l=Object(S.f)(this.tmpTransform_);Object(S.h)(l,s,-s),Object(S.j)(l,-g[0],-g[3]),r.getReplayGroup(n,t.tileCoord.toString()).replay(f,l,0,{},a)}}},e.default=x},function(t,e,i){"use strict";i.r(e);var n=i(226);i.d(e,"Attribution",function(){return n.default});var r=i(45);i.d(e,"Control",function(){return r.default});var o=i(288);i.d(e,"FullScreen",function(){return o.default});var s=i(245);i.d(e,"OverviewMap",function(){return s.default});var a=i(227);i.d(e,"Rotate",function(){return a.default});var l=i(289);i.d(e,"ScaleLine",function(){return l.default});var u=i(228);i.d(e,"Zoom",function(){return u.default});var c=i(290);i.d(e,"ZoomSlider",function(){return c.default});var h=i(291);i.d(e,"ZoomToExtent",function(){return h.default});var d=i(266);i.d(e,"defaults",function(){return d.a})},function(t,e,i){"use strict";i.r(e);var n=i(72),r=i(1),o=i(24),s=i(54),a=i(34),l=i(26),u=i(2),c=i(126),h=i(14),d=i(7),f=i(153);const p=function(t,e){c.a.call(this,t,e),this.image_=null,this.hitCanvasContext_=null,this.hitTransformationMatrix_=null};Object(r.inherits)(p,c.a),p.handles=function(t){return t.getType()===s.a.IMAGE},p.create=function(t,e){return new p(t,e)},p.prototype.createTexture_=function(t){const e=t.getImage(),i=this.mapRenderer.getGL();return Object(f.createTexture)(i,e,d.c,d.c)},p.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,r){const o=this.getLayer(),s=o.getSource(),a=e.viewState.resolution,l=e.viewState.rotation,u=e.skippedFeatureUids;return s.forEachFeatureAtCoordinate(t,a,l,i,u,function(t){return n.call(r,t,o)})},p.prototype.prepareFrame=function(t,e,i){const r=this.mapRenderer.getGL(),o=t.pixelRatio,s=t.viewState,l=s.center,c=s.resolution,d=s.rotation;let f=this.image_,p=this.texture;const g=this.getLayer().getSource(),y=t.viewHints;let m=t.extent;if(void 0!==e.extent&&(m=Object(u.getIntersection)(m,e.extent)),!y[a.default.ANIMATING]&&!y[a.default.INTERACTING]&&!Object(u.isEmpty)(m)){let e=s.projection;if(!n.a){const t=g.getProjection();t&&(e=t)}const i=g.getImage(m,c,o,e);if(i){if(this.loadImage(i)&&(f=i,p=this.createTexture_(i),this.texture)){const e=function(t,e){t.isContextLost()||t.deleteTexture(e)}.bind(null,r,this.texture);t.postRenderFunctions.push(e)}}}if(f){const t=this.mapRenderer.getContext().getCanvas();this.updateProjectionMatrix_(t.width,t.height,o,l,c,d,f.getExtent()),this.hitTransformationMatrix_=null;const e=this.texCoordMatrix;Object(h.f)(e),Object(h.h)(e,1,-1),Object(h.j)(e,0,-1),this.image_=f,this.texture=p}return!!f},p.prototype.updateProjectionMatrix_=function(t,e,i,n,r,o,s){const a=t*r,l=e*r,u=this.projectionMatrix;Object(h.f)(u),Object(h.h)(u,2*i/a,2*i/l),Object(h.g)(u,-o),Object(h.j)(u,s[0]-n[0],s[1]-n[1]),Object(h.h)(u,(s[2]-s[0])/2,(s[3]-s[1])/2),Object(h.j)(u,1,1)},p.prototype.hasFeatureAtCoordinate=function(t,e){return void 0!==this.forEachFeatureAtCoordinate(t,e,0,o.b,this)},p.prototype.forEachLayerAtPixel=function(t,e,i,n){if(this.image_&&this.image_.getImage()){if(this.getLayer().getSource().forEachFeatureAtCoordinate!==o.c){const r=Object(h.a)(e.pixelToCoordinateTransform,t.slice());return this.forEachFeatureAtCoordinate(r,e,0,o.b,this)?i.call(n,this.getLayer(),null):void 0}{const r=[this.image_.getImage().width,this.image_.getImage().height];this.hitTransformationMatrix_||(this.hitTransformationMatrix_=this.getHitTransformationMatrix_(e.size,r));const o=Object(h.a)(this.hitTransformationMatrix_,t.slice());if(o[0]<0||o[0]>r[0]||o[1]<0||o[1]>r[1])return;this.hitCanvasContext_||(this.hitCanvasContext_=Object(l.a)(1,1)),this.hitCanvasContext_.clearRect(0,0,1,1),this.hitCanvasContext_.drawImage(this.image_.getImage(),o[0],o[1],1,1,0,0,1,1);const s=this.hitCanvasContext_.getImageData(0,0,1,1).data;return s[3]>0?i.call(n,this.getLayer(),s):void 0}}},p.prototype.getHitTransformationMatrix_=function(t,e){const i=Object(h.c)();Object(h.j)(i,-1,-1),Object(h.h)(i,2/t[0],2/t[1]),Object(h.j)(i,0,t[1]),Object(h.h)(i,1,-1);const n=Object(h.d)(this.projectionMatrix.slice()),r=Object(h.c)();return Object(h.j)(r,0,e[1]),Object(h.h)(r,1,-1),Object(h.h)(r,e[0]/2,e[1]/2),Object(h.j)(r,1,1),Object(h.e)(r,n),Object(h.e)(r,i),r},e.default=p},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(12),o=i(40),s=i(26),a=i(4),l=i(60),u=i(175),c=i(68),h=i(241),d=i(142),f=i(44),p=i(172),g=i(157),y=i(7),m=i(153),_=i(214);const v=function(t){d.a.call(this,t);const e=t.getViewport();this.canvas_=document.createElement("CANVAS"),this.canvas_.style.width="100%",this.canvas_.style.height="100%",this.canvas_.style.display="block",this.canvas_.className=o.e,e.insertBefore(this.canvas_,e.childNodes[0]||null),this.clipTileCanvasWidth_=0,this.clipTileCanvasHeight_=0,this.clipTileContext_=Object(s.a)(),this.renderedVisible_=!0,this.gl_=Object(y.L)(this.canvas_,{antialias:!0,depth:!0,failIfMajorPerformanceCaveat:!0,preserveDrawingBuffer:!1,stencil:!0}),this.context_=new m.default(this.canvas_,this.gl_),Object(a.listen)(this.canvas_,_.a.LOST,this.handleWebGLContextLost,this),Object(a.listen)(this.canvas_,_.a.RESTORED,this.handleWebGLContextRestored,this),this.textureCache_=new p.default,this.focus_=null,this.tileTextureQueue_=new g.b(function(t){const e=t[1],i=t[2],n=e[0]-this.focus_[0],r=e[1]-this.focus_[1];return 65536*Math.log(i)+Math.sqrt(n*n+r*r)/i}.bind(this),function(t){return t[0].getKey()}),this.loadNextTileTexture_=function(t,e){if(!this.tileTextureQueue_.isEmpty()){this.tileTextureQueue_.reprioritize();const t=this.tileTextureQueue_.dequeue(),e=t[0],i=t[3],n=t[4];this.bindTileTexture(e,i,n,y.p,y.p)}return!1}.bind(this),this.textureCacheFrameMarkerCount_=0,this.initializeGL_()};Object(n.inherits)(v,d.a),v.prototype.bindTileTexture=function(t,e,i,n,r){const o=this.getGL(),s=t.getKey();if(this.textureCache_.containsKey(s)){const t=this.textureCache_.get(s);o.bindTexture(y.A,t.texture),t.magFilter!=n&&(o.texParameteri(y.A,y.B,n),t.magFilter=n),t.minFilter!=r&&(o.texParameteri(y.A,y.C,r),t.minFilter=r)}else{const a=o.createTexture();if(o.bindTexture(y.A,a),i>0){const n=this.clipTileContext_.canvas,r=this.clipTileContext_;this.clipTileCanvasWidth_!==e[0]||this.clipTileCanvasHeight_!==e[1]?(n.width=e[0],n.height=e[1],this.clipTileCanvasWidth_=e[0],this.clipTileCanvasHeight_=e[1]):r.clearRect(0,0,e[0],e[1]),r.drawImage(t.getImage(),i,i,e[0],e[1],0,0,e[0],e[1]),o.texImage2D(y.A,0,y.t,y.t,y.H,n)}else o.texImage2D(y.A,0,y.t,y.t,y.H,t.getImage());o.texParameteri(y.A,y.B,n),o.texParameteri(y.A,y.C,r),o.texParameteri(y.A,y.D,y.c),o.texParameteri(y.A,y.E,y.c),this.textureCache_.set(s,{texture:a,magFilter:n,minFilter:r})}},v.prototype.dispatchComposeEvent_=function(t,e){const i=this.getMap();if(i.hasListener(t)){const n=this.context_,r=e.extent,o=e.size,s=e.viewState,a=e.pixelRatio,l=s.resolution,c=s.center,d=s.rotation,f=new h.default(n,c,l,d,o,r,a),p=new u.a(t,f,e,null,n);i.dispatchEvent(p)}},v.prototype.disposeInternal=function(){const t=this.getGL();t.isContextLost()||this.textureCache_.forEach(function(e){e&&t.deleteTexture(e.texture)}),this.context_.dispose(),d.a.prototype.disposeInternal.call(this)},v.prototype.expireCache_=function(t,e){const i=this.getGL();let n;for(;this.textureCache_.getCount()-this.textureCacheFrameMarkerCount_>1024;){if(n=this.textureCache_.peekLast())i.deleteTexture(n.texture);else{if(+this.textureCache_.peekLastKey()==e.index)break;--this.textureCacheFrameMarkerCount_}this.textureCache_.pop()}},v.prototype.getContext=function(){return this.context_},v.prototype.getGL=function(){return this.gl_},v.prototype.getTileTextureQueue=function(){return this.tileTextureQueue_},v.prototype.handleWebGLContextLost=function(t){t.preventDefault(),this.textureCache_.clear(),this.textureCacheFrameMarkerCount_=0;const e=this.getLayerRenderers();for(const t in e){e[t].handleWebGLContextLost()}},v.prototype.handleWebGLContextRestored=function(){this.initializeGL_(),this.getMap().render()},v.prototype.initializeGL_=function(){const t=this.gl_;t.activeTexture(y.z),t.blendFuncSeparate(y.v,y.s,y.r,y.s),t.disable(y.f),t.disable(y.h),t.disable(y.u),t.disable(y.x)},v.prototype.isTileTextureLoaded=function(t){return this.textureCache_.containsKey(t.getKey())},v.prototype.renderFrame=function(t){const e=this.getContext(),i=this.getGL();if(i.isContextLost())return!1;if(!t)return this.renderedVisible_&&(this.canvas_.style.display="none",this.renderedVisible_=!1),!1;this.focus_=t.focus,this.textureCache_.set((-t.index).toString(),null),++this.textureCacheFrameMarkerCount_,this.dispatchComposeEvent_(c.a.PRECOMPOSE,t);const n=[],o=t.layerStatesArray;Object(r.l)(o,d.b);const s=t.viewState.resolution;let a,u,h,p;for(a=0,u=o.length;a<u;++a)p=o[a],Object(l.visibleAtResolution)(p,s)&&p.sourceState==f.a.READY&&(h=this.getLayerRenderer(p.layer)).prepareFrame(t,p,e)&&n.push(p);const g=t.size[0]*t.pixelRatio,m=t.size[1]*t.pixelRatio;for(this.canvas_.width==g&&this.canvas_.height==m||(this.canvas_.width=g,this.canvas_.height=m),i.bindFramebuffer(y.n,null),i.clearColor(0,0,0,0),i.clear(y.e),i.enable(y.b),i.viewport(0,0,this.canvas_.width,this.canvas_.height),a=0,u=n.length;a<u;++a)p=n[a],(h=this.getLayerRenderer(p.layer)).composeFrame(t,p,e);this.renderedVisible_||(this.canvas_.style.display="",this.renderedVisible_=!0),this.calculateMatrices2D(t),this.textureCache_.getCount()-this.textureCacheFrameMarkerCount_>1024&&t.postRenderFunctions.push(this.expireCache_.bind(this)),this.tileTextureQueue_.isEmpty()||(t.postRenderFunctions.push(this.loadNextTileTexture_),t.animate=!0),this.dispatchComposeEvent_(c.a.POSTCOMPOSE,t),this.scheduleRemoveUnusedLayerRenderers(t),this.scheduleExpireIconCache(t)},v.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,r,o,s){let a;if(this.getGL().isContextLost())return!1;const u=e.viewState,c=e.layerStatesArray;let h;for(h=c.length-1;h>=0;--h){const d=c[h],f=d.layer;if(Object(l.visibleAtResolution)(d,u.resolution)&&o.call(s,f)){if(a=this.getLayerRenderer(f).forEachFeatureAtCoordinate(t,e,i,n,r))return a}}},v.prototype.hasFeatureAtCoordinate=function(t,e,i,n,r){let o=!1;if(this.getGL().isContextLost())return!1;const s=e.viewState,a=e.layerStatesArray;let u;for(u=a.length-1;u>=0;--u){const i=a[u],c=i.layer;if(Object(l.visibleAtResolution)(i,s.resolution)&&n.call(r,c)){if(o=this.getLayerRenderer(c).hasFeatureAtCoordinate(t,e))return!0}}return o},v.prototype.forEachLayerAtPixel=function(t,e,i,n,r,o,s){if(this.getGL().isContextLost())return!1;const a=e.viewState;let u;const c=e.layerStatesArray;let h;for(h=c.length-1;h>=0;--h){const i=c[h],s=i.layer;if(Object(l.visibleAtResolution)(i,a.resolution)&&o.call(r,s)){if(u=this.getLayerRenderer(s).forEachLayerAtPixel(t,e,n,r))return u}}},e.default=v},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(54),o=i(34),s=i(2),a=i(145),l=i(88),u=i(126),c=i(14);const h=function(t,e){u.a.call(this,t,e),this.dirty_=!1,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Object(s.createEmpty)(),this.renderedRenderOrder_=null,this.replayGroup_=null,this.layerState_=null};Object(n.inherits)(h,u.a),h.handles=function(t){return t.getType()===r.a.VECTOR},h.create=function(t,e){return new h(t,e)},h.prototype.composeFrame=function(t,e,i){this.layerState_=e;const n=t.viewState,r=this.replayGroup_,o=t.size,s=t.pixelRatio,a=this.mapRenderer.getGL();r&&!r.isEmpty()&&(a.enable(a.SCISSOR_TEST),a.scissor(0,0,o[0]*s,o[1]*s),r.replay(i,n.center,n.resolution,n.rotation,o,s,e.opacity,e.managed?t.skippedFeatureUids:{}),a.disable(a.SCISSOR_TEST))},h.prototype.disposeInternal=function(){const t=this.replayGroup_;if(t){const e=this.mapRenderer.getContext();t.getDeleteResourcesFunction(e)(),this.replayGroup_=null}u.a.prototype.disposeInternal.call(this)},h.prototype.forEachFeatureAtCoordinate=function(t,e,i,r,o){if(this.replayGroup_&&this.layerState_){const i=this.mapRenderer.getContext(),s=e.viewState,a=this.getLayer(),l=this.layerState_,u={};return this.replayGroup_.forEachFeatureAtCoordinate(t,i,s.center,s.resolution,s.rotation,e.size,e.pixelRatio,l.opacity,{},function(t){const e=Object(n.getUid)(t).toString();if(!(e in u))return u[e]=!0,r.call(o,t,a)})}},h.prototype.hasFeatureAtCoordinate=function(t,e){if(this.replayGroup_&&this.layerState_){const i=this.mapRenderer.getContext(),n=e.viewState,r=this.layerState_;return this.replayGroup_.hasFeatureAtCoordinate(t,i,n.center,n.resolution,n.rotation,e.size,e.pixelRatio,r.opacity,e.skippedFeatureUids)}return!1},h.prototype.forEachLayerAtPixel=function(t,e,i,n){const r=Object(c.a)(e.pixelToCoordinateTransform,t.slice());return this.hasFeatureAtCoordinate(r,e)?i.call(n,this.getLayer(),null):void 0},h.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},h.prototype.prepareFrame=function(t,e,i){const n=this.getLayer(),r=n.getSource(),u=t.viewHints[o.default.ANIMATING],c=t.viewHints[o.default.INTERACTING],h=n.getUpdateWhileAnimating(),d=n.getUpdateWhileInteracting();if(!this.dirty_&&!h&&u||!d&&c)return!0;const f=t.extent,p=t.viewState,g=p.projection,y=p.resolution,m=t.pixelRatio,_=n.getRevision(),v=n.getRenderBuffer();let b=n.getRenderOrder();void 0===b&&(b=l.a);const S=Object(s.buffer)(f,v*y);if(!this.dirty_&&this.renderedResolution_==y&&this.renderedRevision_==_&&this.renderedRenderOrder_==b&&Object(s.containsExtent)(this.renderedExtent_,S))return!0;this.replayGroup_&&t.postRenderFunctions.push(this.replayGroup_.getDeleteResourcesFunction(i)),this.dirty_=!1;const O=new a.a(Object(l.c)(y,m),S,n.getRenderBuffer());r.loadFeatures(S,y,g);const C=function(t){let e;const i=t.getStyleFunction()||n.getStyleFunction();if(i&&(e=i(t,y)),e){const i=this.renderFeature(t,y,m,e,O);this.dirty_=this.dirty_||i}};if(b){const t=[];r.forEachFeatureInExtent(S,function(e){t.push(e)},this),t.sort(b),t.forEach(C.bind(this))}else r.forEachFeatureInExtent(S,C,this);return O.finish(i),this.renderedResolution_=y,this.renderedRevision_=_,this.renderedRenderOrder_=b,this.renderedExtent_=S,this.replayGroup_=O,!0},h.prototype.renderFeature=function(t,e,i,n,r){if(!n)return!1;let o=!1;if(Array.isArray(n))for(let s=n.length-1,a=0;s>=a;--s)o=Object(l.d)(r,t,n[s],Object(l.b)(e,i),this.handleStyleImageChange_,this)||o;else o=Object(l.d)(r,t,n,Object(l.b)(e,i),this.handleStyleImageChange_,this)||o;return o},e.default=h},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(98);const o=function(t,e,i){r.a.call(this,"BBOX"),this.geometryName=t,this.extent=e,this.srsName=i};Object(n.inherits)(o,r.a),e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(160);const o=function(t,e,i){r.a.call(this,"Contains",t,e,i)};Object(n.inherits)(o,r.a),e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(99);const o=function(t,e,i){r.a.call(this,"During",t),this.begin=e,this.end=i};Object(n.inherits)(o,r.a),e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(86);const o=function(t,e,i){r.a.call(this,"PropertyIsEqualTo",t,e,i)};Object(n.inherits)(o,r.a),e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(86);const o=function(t,e){r.a.call(this,"PropertyIsGreaterThan",t,e)};Object(n.inherits)(o,r.a),e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(86);const o=function(t,e){r.a.call(this,"PropertyIsGreaterThanOrEqualTo",t,e)};Object(n.inherits)(o,r.a),e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(160);const o=function(t,e,i){r.a.call(this,"Intersects",t,e,i)};Object(n.inherits)(o,r.a),e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(99);const o=function(t,e,i){r.a.call(this,"PropertyIsBetween",t),this.lowerBoundary=e,this.upperBoundary=i};Object(n.inherits)(o,r.a),e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(99);const o=function(t,e,i,n,o,s){r.a.call(this,"PropertyIsLike",t),this.pattern=e,this.wildCard=void 0!==i?i:"*",this.singleChar=void 0!==n?n:".",this.escapeChar=void 0!==o?o:"!",this.matchCase=s};Object(n.inherits)(o,r.a),e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(99);const o=function(t){r.a.call(this,"PropertyIsNull",t)};Object(n.inherits)(o,r.a),e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(86);const o=function(t,e){r.a.call(this,"PropertyIsLessThan",t,e)};Object(n.inherits)(o,r.a),e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(86);const o=function(t,e){r.a.call(this,"PropertyIsLessThanOrEqualTo",t,e)};Object(n.inherits)(o,r.a),e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(98);const o=function(t){r.a.call(this,"Not"),this.condition=t};Object(n.inherits)(o,r.a),e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(86);const o=function(t,e,i){r.a.call(this,"PropertyIsNotEqualTo",t,e,i)};Object(n.inherits)(o,r.a),e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(215);const o=function(t){const e=["Or"].concat(Array.prototype.slice.call(arguments));r.a.apply(this,e)};Object(n.inherits)(o,r.a),e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(160);const o=function(t,e,i){r.a.call(this,"Within",t,e,i)};Object(n.inherits)(o,r.a),e.default=o},function(t,e,i){"use strict";i.r(e),i.d(e,"ATTRIBUTION",function(){return o});var n=i(1),r=i(141);const o='&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors.',s=function(t){const e=t||{};let i;i=void 0!==e.attributions?e.attributions:[o];const n=void 0!==e.crossOrigin?e.crossOrigin:"anonymous",s=void 0!==e.url?e.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";r.default.call(this,{attributions:i,cacheSize:e.cacheSize,crossOrigin:n,opaque:void 0===e.opaque||e.opaque,maxZoom:void 0!==e.maxZoom?e.maxZoom:19,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,url:s,wrapX:e.wrapX})};Object(n.inherits)(s,r.default),e.default=s},function(t,e,i){"use strict";i.r(e),i.d(e,"createFromCapabilitiesMatrixSet",function(){return l});var n=i(1),r=i(12),o=i(9),s=i(101);const a=function(t){this.matrixIds_=t.matrixIds,s.default.call(this,{extent:t.extent,origin:t.origin,origins:t.origins,resolutions:t.resolutions,tileSize:t.tileSize,tileSizes:t.tileSizes,sizes:t.sizes})};function l(t,e,i){const n=[],s=[],l=[],u=[],c=[],h=void 0!==i?i:[],d=t.SupportedCRS,f=Object(o.get)(d.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||Object(o.get)(d),p=f.getMetersPerUnit(),g="ne"==f.getAxisOrientation().substr(0,2);return t.TileMatrix.sort(function(t,e){return e.ScaleDenominator-t.ScaleDenominator}),t.TileMatrix.forEach(function(e){let i;if(i=!(h.length>0)||Object(r.d)(h,function(i){return e.Identifier==i.TileMatrix||-1===e.Identifier.indexOf(":")&&t.Identifier+":"+e.Identifier===i.TileMatrix})){s.push(e.Identifier);const t=28e-5*e.ScaleDenominator/p,i=e.TileWidth,r=e.TileHeight;g?l.push([e.TopLeftCorner[1],e.TopLeftCorner[0]]):l.push(e.TopLeftCorner),n.push(t),u.push(i==r?i:[i,r]),c.push([e.MatrixWidth,-e.MatrixHeight])}}),new a({extent:e,origins:l,resolutions:n,matrixIds:s,tileSizes:u,sizes:c})}Object(n.inherits)(a,s.default),a.prototype.getMatrixId=function(t){return this.matrixIds_[t]},a.prototype.getMatrixIds=function(){return this.matrixIds_},e.default=a},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(54),o=i(130),s=i(15),a=i(12),l=i(2),u=i(18),c=i(126),h=i(7),d=i(119),f=i(120);const p=new d.a(h.g?"precision mediump float;\nvarying vec2 v_texCoord;\n\n\nuniform sampler2D u_texture;\n\nvoid main(void) {\n  gl_FragColor = texture2D(u_texture, v_texCoord);\n}\n":"precision mediump float;varying vec2 a;uniform sampler2D e;void main(void){gl_FragColor=texture2D(e,a);}"),g=new f.a(h.g?"varying vec2 v_texCoord;\n\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nuniform vec4 u_tileOffset;\n\nvoid main(void) {\n  gl_Position = vec4(a_position * u_tileOffset.xy + u_tileOffset.zw, 0., 1.);\n  v_texCoord = a_texCoord;\n}\n\n\n":"varying vec2 a;attribute vec2 b;attribute vec2 c;uniform vec4 d;void main(void){gl_Position=vec4(b*d.xy+d.zw,0.,1.);a=c;}");var y=function(t,e){this.u_tileOffset=t.getUniformLocation(e,h.g?"u_tileOffset":"d"),this.u_texture=t.getUniformLocation(e,h.g?"u_texture":"e"),this.a_position=t.getAttribLocation(e,h.g?"a_position":"b"),this.a_texCoord=t.getAttribLocation(e,h.g?"a_texCoord":"c")},m=i(49),_=i(14),v=i(79);const b=function(t,e){c.a.call(this,t,e),this.fragmentShader_=p,this.vertexShader_=g,this.locations_=null,this.renderArrayBuffer_=new v.a([0,0,0,1,1,0,1,1,0,1,0,0,1,1,1,0]),this.renderedTileRange_=null,this.renderedFramebufferExtent_=null,this.renderedRevision_=-1,this.tmpSize_=[0,0]};Object(n.inherits)(b,c.a),b.handles=function(t){return t.getType()===r.a.TILE},b.create=function(t,e){return new b(t,e)},b.prototype.disposeInternal=function(){this.mapRenderer.getContext().deleteBuffer(this.renderArrayBuffer_),c.a.prototype.disposeInternal.call(this)},b.prototype.createLoadedTileFinder=function(t,e,i){const n=this.mapRenderer;return function(r,o){return t.forEachLoadedTile(e,r,o,function(t){const e=n.isTileTextureLoaded(t);return e&&(i[r]||(i[r]={}),i[r][t.tileCoord.toString()]=t),e})}},b.prototype.handleWebGLContextLost=function(){c.a.prototype.handleWebGLContextLost.call(this),this.locations_=null},b.prototype.prepareFrame=function(t,e,i){const n=this.mapRenderer,r=i.getGL(),c=t.viewState,d=c.projection,f=this.getLayer(),p=f.getSource(),g=p.getTileGridForProjection(d),v=g.getZForResolution(c.resolution),b=g.getResolution(v),S=p.getTilePixelSize(v,t.pixelRatio,d),O=S[0]/Object(m.toSize)(g.getTileSize(v),this.tmpSize_)[0],C=b/O,x=p.getTilePixelRatio(O)*p.getGutter(d),T=c.center,E=t.extent,P=g.getTileRangeForExtentAndZ(E,v);let j;if(this.renderedTileRange_&&this.renderedTileRange_.equals(P)&&this.renderedRevision_==p.getRevision())j=this.renderedFramebufferExtent_;else{const c=P.getSize(),m=Math.max(c[0]*S[0],c[1]*S[1]),_=Object(u.e)(m),b=C*_,T=g.getOrigin(v),E=T[0]+P.minX*S[0]*C,w=T[1]+P.minY*S[1]*C;j=[E,w,E+b,w+b],this.bindFramebuffer(t,_),r.viewport(0,0,_,_),r.clearColor(0,0,0,0),r.clear(h.e),r.disable(h.b);const I=i.getProgram(this.fragmentShader_,this.vertexShader_);i.useProgram(I),this.locations_||(this.locations_=new y(r,I)),i.bindBuffer(h.a,this.renderArrayBuffer_),r.enableVertexAttribArray(this.locations_.a_position),r.vertexAttribPointer(this.locations_.a_position,2,h.l,!1,16,0),r.enableVertexAttribArray(this.locations_.a_texCoord),r.vertexAttribPointer(this.locations_.a_texCoord,2,h.l,!1,16,8),r.uniform1i(this.locations_.u_texture,0);const L={};L[v]={};const R=this.createLoadedTileFinder(p,d,L),A=f.getUseInterimTilesOnError();let M=!0;const F=Object(l.createEmpty)(),k=new o.b(0,0,0,0);let N,D,G,B,U,V,Z,W;for(V=P.minX;V<=P.maxX;++V)for(Z=P.minY;Z<=P.maxY;++Z)if(B=p.getTile(v,V,Z,O,d),void 0===e.extent||(W=g.getTileCoordExtent(B.tileCoord,F),Object(l.intersects)(W,e.extent))){if((D=(U=B.getState())==s.a.LOADED||U==s.a.EMPTY||U==s.a.ERROR&&!A)||(B=B.getInterimTile()),(U=B.getState())==s.a.LOADED){if(n.isTileTextureLoaded(B)){L[v][B.tileCoord.toString()]=B;continue}}else if(U==s.a.EMPTY||U==s.a.ERROR&&!A)continue;M=!1,(G=g.forEachTileCoordParentTileRange(B.tileCoord,R,null,k,F))||(N=g.getTileCoordChildTileRange(B.tileCoord,k,F))&&R(v+1,N)}const H=Object.keys(L).map(Number);H.sort(a.i);const z=new Float32Array(4);for(let t=0,e=H.length;t<e;++t){const e=L[H[t]];for(const t in e)B=e[t],W=g.getTileCoordExtent(B.tileCoord,F),z[0]=2*(W[2]-W[0])/b,z[1]=2*(W[3]-W[1])/b,z[2]=2*(W[0]-j[0])/b-1,z[3]=2*(W[1]-j[1])/b-1,r.uniform4fv(this.locations_.u_tileOffset,z),n.bindTileTexture(B,S,x*O,h.p,h.p),r.drawArrays(h.G,0,4)}M?(this.renderedTileRange_=P,this.renderedFramebufferExtent_=j,this.renderedRevision_=p.getRevision()):(this.renderedTileRange_=null,this.renderedFramebufferExtent_=null,this.renderedRevision_=-1,t.animate=!0)}this.updateUsedTiles(t.usedTiles,p,v,P);const w=n.getTileTextureQueue();this.manageTilePyramid(t,p,g,O,d,E,v,f.getPreload(),function(t){t.getState()!=s.a.LOADED||n.isTileTextureLoaded(t)||w.isKeyQueued(t.getKey())||w.enqueue([t,g.getTileCoordCenter(t.tileCoord),g.getResolution(t.tileCoord[0]),S,x*O])},this),this.scheduleExpireCache(t,p);const I=this.texCoordMatrix;return Object(_.f)(I),Object(_.j)(I,(Math.round(T[0]/b)*b-j[0])/(j[2]-j[0]),(Math.round(T[1]/b)*b-j[1])/(j[3]-j[1])),0!==c.rotation&&Object(_.g)(I,c.rotation),Object(_.h)(I,t.size[0]*c.resolution/(j[2]-j[0]),t.size[1]*c.resolution/(j[3]-j[1])),Object(_.j)(I,-.5,-.5),!0},b.prototype.forEachLayerAtPixel=function(t,e,i,n){if(!this.framebuffer)return;const r=[t[0]/e.size[0],(e.size[1]-t[1])/e.size[1]],o=Object(_.a)(this.texCoordMatrix,r.slice()),s=[o[0]*this.framebufferDimension,o[1]*this.framebufferDimension],a=this.mapRenderer.getContext().getGL();a.bindFramebuffer(a.FRAMEBUFFER,this.framebuffer);const l=new Uint8Array(4);return a.readPixels(s[0],s[1],1,1,a.RGBA,a.UNSIGNED_BYTE,l),l[3]>0?i.call(n,this.getLayer(),l):void 0};e.default=b},function(t,e,i){"use strict";i.r(e);var n=i(7),r=i(24),o=i(26);const s=function(t,e){this.space_=e,this.emptyBlocks_=[{x:0,y:0,width:t,height:t}],this.entries_={},this.context_=Object(o.a)(t,t),this.canvas_=this.context_.canvas};s.prototype.get=function(t){return this.entries_[t]||null},s.prototype.add=function(t,e,i,n,r){for(let o=0,s=this.emptyBlocks_.length;o<s;++o){const s=this.emptyBlocks_[o];if(s.width>=e+this.space_&&s.height>=i+this.space_){const a={offsetX:s.x+this.space_,offsetY:s.y+this.space_,image:this.canvas_};return this.entries_[t]=a,n.call(r,this.context_,s.x+this.space_,s.y+this.space_),this.split_(o,s,e+this.space_,i+this.space_),a}}return null},s.prototype.split_=function(t,e,i,n){let r,o;e.width-i>e.height-n?(r={x:e.x+i,y:e.y,width:e.width-i,height:e.height},o={x:e.x,y:e.y+n,width:i,height:e.height-n},this.updateBlocks_(t,r,o)):(r={x:e.x+i,y:e.y,width:e.width-i,height:n},o={x:e.x,y:e.y+n,width:e.width,height:e.height-n},this.updateBlocks_(t,r,o))},s.prototype.updateBlocks_=function(t,e,i){const n=[t,1];e.width>0&&e.height>0&&n.push(e),i.width>0&&i.height>0&&n.push(i),this.emptyBlocks_.splice.apply(this.emptyBlocks_,n)};var a=s;const l=function(t){const e=t||{};this.currentSize_=void 0!==e.initialSize?e.initialSize:256,this.maxSize_=void 0!==e.maxSize?e.maxSize:void 0!==n.q?n.q:2048,this.space_=void 0!==e.space?e.space:1,this.atlases_=[new a(this.currentSize_,this.space_)],this.currentHitSize_=this.currentSize_,this.hitAtlases_=[new a(this.currentHitSize_,this.space_)]};l.prototype.getInfo=function(t){const e=this.getInfo_(this.atlases_,t);if(!e)return null;const i=this.getInfo_(this.hitAtlases_,t);return this.mergeInfos_(e,i)},l.prototype.getInfo_=function(t,e){for(let i=0,n=t.length;i<n;++i){const n=t[i].get(e);if(n)return n}return null},l.prototype.mergeInfos_=function(t,e){return{offsetX:t.offsetX,offsetY:t.offsetY,image:t.image,hitImage:e.image}},l.prototype.add=function(t,e,i,n,o,s){if(e+this.space_>this.maxSize_||i+this.space_>this.maxSize_)return null;const a=this.add_(!1,t,e,i,n,s);if(!a)return null;const l=void 0!==o?o:r.c,u=this.add_(!0,t,e,i,l,s);return this.mergeInfos_(a,u)},l.prototype.add_=function(t,e,i,n,r,o){const s=t?this.hitAtlases_:this.atlases_;let l,u,c,h;for(c=0,h=s.length;c<h;++c){if(u=(l=s[c]).add(e,i,n,r,o))return u;if(!u&&c===h-1){let e;t?(e=Math.min(2*this.currentHitSize_,this.maxSize_),this.currentHitSize_=e):(e=Math.min(2*this.currentSize_,this.maxSize_),this.currentSize_=e),l=new a(e,this.space_),s.push(l),++h}}return null};e.default=l},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(171),o=i(2),s=i(57);const a=function(t){s.default.call(this,{attributions:t.attributions,projection:t.projection,resolutions:t.resolutions,state:t.state}),this.canvasFunction_=t.canvasFunction,this.canvas_=null,this.renderedRevision_=0,this.ratio_=void 0!==t.ratio?t.ratio:1.5};Object(n.inherits)(a,s.default),a.prototype.getImageInternal=function(t,e,i,n){e=this.findNearestResolution(e);let s=this.canvas_;if(s&&this.renderedRevision_==this.getRevision()&&s.getResolution()==e&&s.getPixelRatio()==i&&Object(o.containsExtent)(s.getExtent(),t))return s;t=t.slice(),Object(o.scaleFromCenter)(t,this.ratio_);const a=[Object(o.getWidth)(t)/e*i,Object(o.getHeight)(t)/e*i],l=this.canvasFunction_(t,e,i,a,n);return l&&(s=new r.a(t,e,i,l)),this.canvas_=s,this.renderedRevision_=this.getRevision(),s},e.default=a},function(t,e,i){t.exports=!i(166)&&!i(217)(function(){return 7!=Object.defineProperty(i(293)("div"),"a",{get:function(){return 7}}).a})},function(t,e,i){t.exports={default:i(511),__esModule:!0}},function(t,e,i){"use strict";var n=i(105),r=i(182),o=i(166),s=i(135),a=i(367),l=i(516).KEY,u=i(217),c=i(299),h=i(249),d=i(248),f=i(106),p=i(300),g=i(301),y=i(517),m=i(520),_=i(146),v=i(165),b=i(181),S=i(294),O=i(247),C=i(306),x=i(372),T=i(296),E=i(164),P=i(302),j=T.f,w=E.f,I=x.f,L=n.Symbol,R=n.JSON,A=R&&R.stringify,M=f("_hidden"),F=f("toPrimitive"),k={}.propertyIsEnumerable,N=c("symbol-registry"),D=c("symbols"),G=c("op-symbols"),B=Object.prototype,U="function"==typeof L,V=n.QObject,Z=!V||!V.prototype||!V.prototype.findChild,W=o&&u(function(){return 7!=C(w({},"a",{get:function(){return w(this,"a",{value:7}).a}})).a})?function(t,e,i){var n=j(B,e);n&&delete B[e],w(t,e,i),n&&t!==B&&w(B,e,n)}:w,H=function(t){var e=D[t]=C(L.prototype);return e._k=t,e},z=U&&"symbol"==typeof L.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof L},Y=function(t,e,i){return t===B&&Y(G,e,i),_(t),e=S(e,!0),_(i),r(D,e)?(i.enumerable?(r(t,M)&&t[M][e]&&(t[M][e]=!1),i=C(i,{enumerable:O(0,!1)})):(r(t,M)||w(t,M,O(1,{})),t[M][e]=!0),W(t,e,i)):w(t,e,i)},X=function(t,e){_(t);for(var i,n=y(e=b(e)),r=0,o=n.length;o>r;)Y(t,i=n[r++],e[i]);return t},q=function(t){var e=k.call(this,t=S(t,!0));return!(this===B&&r(D,t)&&!r(G,t))&&(!(e||!r(this,t)||!r(D,t)||r(this,M)&&this[M][t])||e)},K=function(t,e){if(t=b(t),e=S(e,!0),t!==B||!r(D,e)||r(G,e)){var i=j(t,e);return!i||!r(D,e)||r(t,M)&&t[M][e]||(i.enumerable=!0),i}},J=function(t){for(var e,i=I(b(t)),n=[],o=0;i.length>o;)r(D,e=i[o++])||e==M||e==l||n.push(e);return n},Q=function(t){for(var e,i=t===B,n=I(i?G:b(t)),o=[],s=0;n.length>s;)!r(D,e=n[s++])||i&&!r(B,e)||o.push(D[e]);return o};U||(a((L=function(){if(this instanceof L)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:void 0),e=function(i){this===B&&e.call(G,i),r(this,M)&&r(this[M],t)&&(this[M][t]=!1),W(this,t,O(1,i))};return o&&Z&&W(B,t,{configurable:!0,set:e}),H(t)}).prototype,"toString",function(){return this._k}),T.f=K,E.f=Y,i(373).f=x.f=J,i(297).f=q,i(370).f=Q,o&&!i(250)&&a(B,"propertyIsEnumerable",q,!0),p.f=function(t){return H(f(t))}),s(s.G+s.W+s.F*!U,{Symbol:L});for(var $="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),tt=0;$.length>tt;)f($[tt++]);for(var et=P(f.store),it=0;et.length>it;)g(et[it++]);s(s.S+s.F*!U,"Symbol",{for:function(t){return r(N,t+="")?N[t]:N[t]=L(t)},keyFor:function(t){if(!z(t))throw TypeError(t+" is not a symbol!");for(var e in N)if(N[e]===t)return e},useSetter:function(){Z=!0},useSimple:function(){Z=!1}}),s(s.S+s.F*!U,"Object",{create:function(t,e){return void 0===e?C(t):X(C(t),e)},defineProperty:Y,defineProperties:X,getOwnPropertyDescriptor:K,getOwnPropertyNames:J,getOwnPropertySymbols:Q}),R&&s(s.S+s.F*(!U||u(function(){var t=L();return"[null]"!=A([t])||"{}"!=A({a:t})||"{}"!=A(Object(t))})),"JSON",{stringify:function(t){for(var e,i,n=[t],r=1;arguments.length>r;)n.push(arguments[r++]);if(i=e=n[1],(v(e)||void 0!==t)&&!z(t))return m(e)||(e=function(t,e){if("function"==typeof i&&(e=i.call(this,t,e)),!z(e))return e}),n[1]=e,A.apply(R,n)}}),L.prototype[F]||i(180)(L.prototype,F,L.prototype.valueOf),h(L,"Symbol"),h(Math,"Math",!0),h(n.JSON,"JSON",!0)},function(t,e,i){t.exports=i(180)},function(t,e,i){var n=i(182),r=i(181),o=i(518)(!1),s=i(304)("IE_PROTO");t.exports=function(t,e){var i,a=r(t),l=0,u=[];for(i in a)i!=s&&n(a,i)&&u.push(i);for(;e.length>l;)n(a,i=e[l++])&&(~o(u,i)||u.push(i));return u}},function(t,e,i){var n=i(303),r=Math.min;t.exports=function(t){return t>0?r(n(t),9007199254740991):0}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,i){var n=i(105).document;t.exports=n&&n.documentElement},function(t,e,i){var n=i(181),r=i(373).f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return s&&"[object Window]"==o.call(t)?function(t){try{return r(t)}catch(t){return s.slice()}}(t):r(n(t))}},function(t,e,i){var n=i(368),r=i(305).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,r)}},function(t,e,i){t.exports={default:i(522),__esModule:!0}},function(t,e,i){"use strict";var n=i(526)(!0);i(376)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,i=this._i;return i>=e.length?{value:void 0,done:!0}:(t=n(e,i),this._i+=t.length,{value:t,done:!1})})},function(t,e,i){"use strict";var n=i(250),r=i(135),o=i(367),s=i(180),a=i(182),l=i(219),u=i(527),c=i(249),h=i(377),d=i(106)("iterator"),f=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(t,e,i,g,y,m,_){u(i,e,g);var v,b,S,O=function(t){if(!f&&t in E)return E[t];switch(t){case"keys":case"values":return function(){return new i(this,t)}}return function(){return new i(this,t)}},C=e+" Iterator",x="values"==y,T=!1,E=t.prototype,P=E[d]||E["@@iterator"]||y&&E[y],j=!f&&P||O(y),w=y?x?O("entries"):j:void 0,I="Array"==e&&E.entries||P;if(I&&(S=h(I.call(new t)))!==Object.prototype&&S.next&&(c(S,C,!0),n||a(S,d)||s(S,d,p)),x&&P&&"values"!==P.name&&(T=!0,j=function(){return P.call(this)}),n&&!_||!f&&!T&&E[d]||s(E,d,j),l[e]=j,l[C]=p,y)if(v={values:x?j:O("values"),keys:m?j:O("keys"),entries:w},_)for(b in v)b in E||o(E,b,v[b]);else r(r.P+r.F*(f||T),e,v);return v}},function(t,e,i){var n=i(182),r=i(378),o=i(304)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),n(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},function(t,e,i){var n=i(295);t.exports=function(t){return Object(n(t))}},function(t,e,i){i(528);for(var n=i(105),r=i(180),o=i(219),s=i(106)("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<a.length;l++){var u=a[l],c=n[u],h=c&&c.prototype;h&&!h[s]&&r(h,s,u),o[u]=o.Array}},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CacheTileLayer=e.CacheTileLayerSource=void 0;var n=i(6),r=i(21),o=h(i(53)),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(2)),a=h(i(101)),l=i(1),u=i(11),c=h(i(150));function h(t){return t&&t.__esModule?t:{default:t}}var d=function(t){var e=t||{};o.default.call(this,{attributions:e.attributions,logo:e.logo,opaque:e.opaque,projection:e.projection,state:void 0!==e.state?e.state:void 0,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,crossOrigin:void 0!==e.crossOrigin?e.crossOrigin:null}),this.ip=void 0!==e.ip?e.ip:"127.0.0.1",this.port=void 0!==e.port?e.port:"6163",this.name=void 0!==e.name?e.name:null,this.maxResolution=void 0!==e.maxResolution?e.maxResolution:null;var i=void 0!==e.projection?e.projection:null,n=[-180,-90,180,90];null!=i&&(n=i.getExtent()),this.extent=void 0!==e.extent?e.extent:n,this.maxZoom=void 0!==e.maxZoom?e.maxZoom:16,this.tileSize=void 0!==e.tileSize?e.tileSize:256,this.resolutions=void 0!==e.resolutions?e.resolutions:this.getResolutions(),this.origin=void 0!==e.origin?e.origin:s.getTopLeft(this.extent),this.guid=void 0!==e.guid?e.guid:(0,r.newGuid)(),this.cache=!0,this.tileGrid=new a.default({origin:this.origin,resolutions:this.resolutions,tileSize:this.tileSize}),this.tileUrlFunction=void 0!==e.tileUrlFunction?e.tileUrlFunction:this.tileUrlFunctionExtend};(0,l.inherits)(d,o.default),d.prototype.getResolutions=function(){if(null==this.maxResolution){var t=s.getWidth(this.extent),e=s.getHeight(this.extent);this.maxResolution=(t>=e?t:e)/this.tileSize}for(var i=new Array(this.maxZoom),n=0;n<this.maxZoom;++n)i[n]=this.maxResolution/Math.pow(2,n);return i},d.prototype.tileUrlFunctionExtend=function(t,e,i){if(null!=this.tileGrid){var n=this.tileGrid.getTileRangeForExtentAndZ(this.extent,t[0],n);if(!n.contains(t))return}this.cache=!0;var r="http://"+this.ip+":"+this.port+"/igs/rest/mrms/docs/"+this.name+"?f="+this.f+"&cache="+this.cache+"&guid="+this.guid+"&level={z}&col={x}&row={y}&w="+this.tileSize+"&h="+this.tileSize,o=t[0],s=t[1],a=-(t[2]+1);if(!(s>=Math.pow(2,o)||a>=Math.pow(2,o)))return r.replace("{x}",s.toString()).replace("{y}",a.toString()).replace("{z}",o.toString())},e.CacheTileLayerSource=d,n.Zondy.Source.CacheTileLayerSource=d;var f=function(t,e,i){var n=i||{};(0,u.assign)(n,{layerName:t}),(0,u.assign)(n,{name:e}),n.source=n.source?n.source:new d(n);var r=(0,u.assign)({},n);r.maxResolution=1/0,c.default.call(this,r),(0,u.assign)(this,n)};(0,l.inherits)(f,c.default),e.CacheTileLayer=f,n.Zondy.Map.CacheTileLayer=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.rangeThemeLayer=e.RangeThemeLayer=e.CRangeThemeSource=void 0;var n=y(i(13)),r=y(i(8)),o=y(i(20)),s=y(i(16)),a=y(i(17)),l=i(6),u=i(1),c=i(307),h=i(21),d=i(221),f=i(108),p=y(i(149)),g=(i(11),y(i(28)));function y(t){return t&&t.__esModule?t:{default:t}}var m=function(t){function e(t,i){(0,r.default)(this,e);var o=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,i));return o.style=i.style,o.isHoverAble=i.isHoverAble,o.highlightStyle=i.highlightStyle,o.themeField=i.themeField,o.styleGroups=i.styleGroups,o}return(0,a.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.style=null,this.themeField=null,this.styleGroups=null,c.CGeoFeatureSource.prototype.destroy.apply(this,arguments)}},{key:"createThematicFeature",value:function(t){var e=this.getStyleByData(t),i={};i.nodesClipPixel=this.nodesClipPixel,i.isHoverAble=this.isHoverAble,i.isMultiHover=this.isMultiHover,i.isClickAble=this.isClickAble,i.highlightStyle=f.ShapeFactory.transformStyle(this.highlightStyle);for(var n=new d.ThemeVector(t,this,f.ShapeFactory.transformStyle(e),i),r=0;r<n.shapes.length;r++)this.renderer.addShape(n.shapes[r]);return n}},{key:"getStyleByData",value:function(t){var e={},i=t;if(e=(0,h.copyAttributesWithClip)(e,this.style),this.themeField&&this.styleGroups&&this.styleGroups.length>0&&i.attributes){var n=this.themeField,r=i.attributes,o=this.styleGroups,s=!1,a=null;for(var l in r)if(n===l){s=!0,a=r[l];break}if(s)for(var u=0,c=o.length;u<c;u++)if(a>=o[u].start&&a<o[u].end){var d=o[u].style;e=(0,h.copyAttributesWithClip)(e,d)}}return i.style&&!0===this.isAllowFeatureStyle&&(e=(0,h.copyAttributesWithClip)(i.style)),e}},{key:"canvasFunctionInternal_",value:function(t,e,i,n,r){return c.CGeoFeatureSource.prototype.canvasFunctionInternal_.apply(this,arguments)}}]),e}(c.CGeoFeatureSource);e.CRangeThemeSource=m,l.Zondy.Source.CRangeThemeSource=m;var _=function(t,e){var i=void 0!==e?e:{};delete i.source;var n=new m(t,i);p.default.call(this,i),this.setSource(n),this.pointerInteraction=null};(0,u.inherits)(_,p.default),_.prototype.setOptions=function(t){var e=this.getSource();void 0!=e&&e.constructor==m&&(e.style=void 0!=t.style?t.style:e.style,e.isHoverAble=void 0!=t.isHoverAble?t.isHoverAble:e.isHoverAble,e.highlightStyle=void 0!=t.highlightStyle?t.highlightStyle:e.highlightStyle,e.themeField=void 0!=t.themeField?t.themeField:e.themeField,e.styleGroups=void 0!=t.styleGroups?t.styleGroups:e.styleGroups)},_.prototype.addFeatures=function(t){var e=this.getSource();if(void 0!==e&&e.constructor==m&&(e.addFeatures(t),null!=this.values_.map&&(e.isHoverAble||e.isClickAble))){var i=this.values_.map;null==this.pointerInteraction&&(this.pointerInteraction=new g.default,i.addInteraction(this.pointerInteraction)),e.isHoverAble&&(this.pointerInteraction.handleMoveEvent_=function(t){e&&e.fire("mousemove",t)}),e.isClickAble&&(this.pointerInteraction.handleDownEvent_=function(t){e&&e.fire("click",t)})}},_.prototype.removeFromMap=function(){var t=this.values_.map,e=this.getSource();void 0!=this.pointerInteraction&&(e.isHoverAble||e.isClickAble)&&t.removeInteraction(this.pointerInteraction),e.destroy(),this.setSource(null),t.removeLayer(this)},e.RangeThemeLayer=_;var v=e.rangeThemeLayer=function(t,e){return new _(t,e)};l.Zondy.Map.rangeThemeLayer=v},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CThemeSource=void 0;var n=d(i(13)),r=d(i(8)),o=d(i(20)),s=d(i(16)),a=d(i(17)),l=i(6),u=d(i(363)),c=i(384),h=i(21);function d(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t,i){(0,r.default)(this,e);var o=i||{},a=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,{canvasFunction:l,logo:o.logo,projection:o.projection,ratio:o.ratio,resolutions:o.resolutions,state:o.state}));function l(t,e,i,n,r){var o=n[0]*i,s=n[1]*i;if(this.context||(this.context=(0,h.createCanvasContext2D)(o,s)),!this.features)return this.context.canvas;if(void 0!=this.options&&this.options.fitZoom>-1){var a=this.map.getView().getZoom(),l=Math.abs(a-this.options.fitZoom)<=1;!this.notFirst&&l&&(this.redrawThematicFeatures(t),this.notFirst=!0)}else this.notFirst||(this.redrawThematicFeatures(t),this.notFirst=!0);if(this.notFirst){this.pixelRatio=i;var u=this.map.getSize()[0]*i,c=this.map.getSize()[1]*i;this.offset=[(o-u)/2/i,(s-c)/2/i],this.div.style.width=o+"px",this.div.style.height=s+"px",this.map.getViewport().appendChild(this.div),this.renderer.resize(),this.map.getViewport().removeChild(this.div),this.themeCanvas=this.renderer.painter.root.getElementsByTagName("canvas")[0],this.themeCanvas.width=o,this.themeCanvas.height=s,this.themeCanvas.style.width=o+"px",this.themeCanvas.style.height=s+"px",this.themeCanvas.getContext("2d").clearRect(0,0,o,s);var d=this.renderer.painter._layers.hover.ctx.canvas,f=(0,h.createCanvasContext2D)(o,s);f.drawImage(d,0,0,d.width,d.height,0,0,o,s),this.redrawThematicFeatures(t);var p=this.context.canvas;return this.context.clearRect(0,0,p.width,p.height),p.width=o,p.height=s,p.style.width=o+"px",p.style.height=s+"px",this.context.drawImage(this.themeCanvas,0,0,o,s,0,0,o,s),this.context.drawImage(f.canvas,0,0,o,s,0,0,o,s),this.context.canvas}}a.canvasFunctionInternal_=l,a.EVENT_TYPES=["loadstart","loadend","loadcancel","visibilitychanged","move","moveend","added","removed","tileloaded","beforefeaturesadded","featuresadded","featuresremoved"],a.features=[],a.TFEvents=o.TFEvents||[],a.map=o.map;var u=a.map.getSize();return a.div=document.createElement("div"),a.map.getViewport().appendChild(a.div),a.div.style.width=u[0]+"px",a.div.style.height=u[1]+"px",a.setOpacity(o.opacity),a.levelRenderer=new c.LevelRenderer,a.movingOffset=[0,0],a.renderer=a.levelRenderer.init(a.div),a.map.getViewport().removeChild(a.div),a.renderer.clear(),a.addTFEvents(),a}return(0,a.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.EVENT_TYPES=null,this.isBaseLayer=null,this.TFEvents=null,this.destroyFeatures(),this.features=null,this.renderer&&this.renderer.dispose(),this.renderer=null,this.levelRenderer=null,this.movingOffset=null,this.currentMousePosition=null}},{key:"destroyFeatures",value:function(t){void 0==t&&(t=this.features),t&&(this.removeFeatures(t),t=null)}},{key:"setOpacity",value:function(t){if(t!==this.opacity){this.opacity=t;var e=this.div;(0,h.modifyDOMElement)(e,null,null,null,null,null,null,t),null!==this.map&&this.dispatchEvent({type:"changelayer",value:{layer:this,property:"opacity"}})}}},{key:"addFeatures",value:function(t){}},{key:"removeFeatures",value:function(t){if(t&&0!==t.length){if(t===this.features)return this.removeAllFeatures();(0,h.isArray)(t)||(t=[t]);for(var e=[],i=t.length-1;i>=0;i--){var n=t[i],r=(0,h.indexOf)(this.features,n);-1!==r?this.features.splice(r,1):e.push(n)}for(var o=[],s=0,a=this.features.length;s<a;s++)n=this.features[s],o.push(n);this.features=[],this.addFeatures(o),this.renderer&&this.redrawThematicFeatures(this.map.getView().calculateExtent());var l=0==e.length;this.dispatchEvent({type:"featuresremoved",value:{features:e,succeed:l}})}}},{key:"removeAllFeatures",value:function(){this.renderer&&this.renderer.clear(),this.features=[],this.dispatchEvent({type:"featuresremoved",value:{features:[],succeed:!0}})}},{key:"getFeatures",value:function(){for(var t=this.features.length,e=new Array(t),i=0;i<t;++i)e[i]=this.features[i];return e}},{key:"getFeatureBy",value:function(t,e){var i=null;for(var n in this.features)if(this.features[n][t]===e){i=this.features[n];break}return i}},{key:"getFeatureById",value:function(t){return this.getFeatureBy("FID",t)}},{key:"getFeaturesByAttribute",value:function(t,e){var i,n=[];for(var r in this.features)(i=this.features[r])&&i.attributes&&i.attributes[t]===e&&n.push(i);return n}},{key:"redrawThematicFeatures",value:function(t){}},{key:"on",value:function(t,e){var i=e;if(this.renderer)this.renderer.on(t,i);else{var n=[];n.push(t),n.push(i),this.TFEvents.push(n)}}},{key:"fire",value:function(t,e){if(this.offset){e=e.originalEvent;var i=this.getX(e),n=this.getY(e),r=-this.map.getView().getRotation(),o=this.map.getPixelFromCoordinate(this.map.getView().getCenter()),s=this.scale([i,n],o,this.pixelRatio),a=this.rotate(s,r,o),l=[a[0]+this.offset[0],a[1]+this.offset[1]],u=document.createEvent("Event");u.initEvent("pointermove",!0,!0),u.offsetX=l[0],u.offsetY=l[1],u.layerX=l[0],u.layerY=l[1],u.clientX=l[0],u.clientY=l[1],u.x=i,u.y=n,"click"===t&&this.renderer.handler._clickHandler(u),"dblclick"===t&&this.renderer.handler._dblclickHandler(u),"onmousewheel"===t&&this.renderer.handler._mousewheelHandler(u),"mousemove"===t&&(this.renderer.handler._mousemoveHandler(u),this.changed()),"onmouseout"===t&&this.renderer.handler._mouseoutHandler(u),"onmousedown"===t&&this.renderer.handler._mousedownHandler(u),"onmouseup"===t&&this.renderer.handler._mouseupHandler(u)}}},{key:"getX",value:function(t){return void 0!==t.zrenderX&&t.zrenderX||void 0!==t.offsetX&&t.offsetX||void 0!==t.layerX&&t.layerX||void 0!==t.clientX&&t.clientX}},{key:"getY",value:function(t){return void 0!==t.zrenderY&&t.zrenderY||void 0!==t.offsetY&&t.offsetY||void 0!==t.layerY&&t.layerY||void 0!==t.clientY&&t.clientY}},{key:"un",value:function(t,e){var i=e;if(this.renderer)this.renderer.un(t,i);else{for(var n=this.TFEvents,r=n.length,o=[],s=0;s<r;s++){var a=n[s];a[0]===t&&a[1]===i||o.push(a)}this.TFEvents=o}}},{key:"addTFEvents",value:function(){for(var t=this.TFEvents,e=t.length,i=0;i<e;i++)this.renderer.on(t[i][0],t[i][1])}},{key:"getLocalXY",value:function(t){var e,i=this.map;(0,h.isArray)(t)&&(e=i.getPixelFromCoordinate(t));var n=-i.getView().getRotation(),r=i.getPixelFromCoordinate(i.getView().getCenter()),o=e;return this.pixelRatio&&(o=this.scale(e,r,this.pixelRatio)),e&&r&&(o=this.rotate(o,n,r)),this.offset&&o?[o[0]+this.offset[0],o[1]+this.offset[1]]:o}},{key:"rotate",value:function(t,e,i){return[Math.cos(e)*(t[0]-i[0])-Math.sin(e)*(t[1]-i[1])+i[0],Math.sin(e)*(t[0]-i[0])+Math.cos(e)*(t[1]-i[1])+i[1]]}},{key:"scale",value:function(t,e,i){return[(t[0]-e[0])*i+e[0],(t[1]-e[1])*i+e[1]]}}]),e}(u.default);e.CThemeSource=f,l.Zondy.Source.CThemeSource=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LevelRenderer=void 0;var n=l(i(8)),r=l(i(20)),o=i(6),s=i(21),a=i(385);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(){(0,n.default)(this,t),t._instances={},t.Tool={},this.CLASS_NAME="Zondy.LevelRenderer"}return(0,r.default)(t,[{key:"destroy",value:function(){this.dispose()}},{key:"init",value:function(e){var i=new a.Render((0,s.newGuid)(),e);return t._instances[i.id]=i,i}},{key:"dispose",value:function(e){if(e)e.dispose(),this.delInstance(e.id);else{for(var i in t._instances)t._instances[i].dispose();t._instances={}}return this}},{key:"getInstance",value:function(e){return t._instances[e]}},{key:"delInstance",value:function(e){return delete t._instances[e],this}}]),t}();e.LevelRenderer=u,o.Zondy.LevelRenderer=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Render=void 0;var n=h(i(8)),r=h(i(20)),o=i(6),s=i(21),a=i(386),l=i(395),u=i(396),c=i(397);function h(t){return t&&t.__esModule?t:{default:t}}var d=function(){function t(e,i){(0,n.default)(this,t),this.id=e,this.storage=new a.Storage,this.painter=new l.Painter(i,this.storage),this.handler=new u.Handler(i,this.storage,this.painter),this.animatingElements=[],this.animation=new c.Animation({stage:{update:t.getFrameCallback(this)}}),this._needsRefreshNextFrame=!1,this.animation.start(),this.CLASS_NAME="Zondy.LevelRenderer.Render"}return(0,r.default)(t,[{key:"destroy",value:function(){this.id=null,this.storage=null,this.painter=null,this.handler=null,this.animatingElements=null,this.animation=null,this._needsRefreshNextFrame=null}},{key:"getId",value:function(){return this.id}},{key:"addShape",value:function(t){return this.storage.addRoot(t),this}},{key:"addGroup",value:function(t){return this.storage.addRoot(t),this}},{key:"delShape",value:function(t){return this.storage.delRoot(t),this}},{key:"delGroup",value:function(t){return this.storage.delRoot(t),this}},{key:"modShape",value:function(t,e){return this.storage.mod(t,e),this}},{key:"modGroup",value:function(t,e){return this.storage.mod(t,e),this}},{key:"modLayer",value:function(t,e){return this.painter.modLayer(t,e),this}},{key:"addHoverShape",value:function(t){return this.storage.addHover(t),this}},{key:"render",value:function(t){return this.painter.render(t),this._needsRefreshNextFrame=!1,this}},{key:"refresh",value:function(t){return this.painter.refresh(t),this._needsRefreshNextFrame=!1,this}},{key:"refreshNextFrame",value:function(){return this._needsRefreshNextFrame=!0,this}},{key:"refreshHover",value:function(t){return this.painter.refreshHover(t),this}},{key:"refreshShapes",value:function(t,e){return this.painter.refreshShapes(t,e),this}},{key:"resize",value:function(){return this.painter.resize(),this}},{key:"animate",value:function(t,e,i){if("string"==typeof t&&(t=this.storage.get(t)),t){var n;if(e){for(var r=e.split("."),o=t,a=0,l=r.length;a<l;a++)o&&(o=o[r[a]]);o&&(n=o)}else n=t;if(!n)return;var u=this.animatingElements;return void 0===t.__aniCount&&(t.__aniCount=0),0===t.__aniCount&&u.push(t),t.__aniCount++,this.animation.animate(n,{loop:i}).done(function(){if(t.__aniCount--,0===t.__aniCount){var e=(0,s.indexOf)(u,t);u.splice(e,1)}})}}},{key:"clearAnimation",value:function(){this.animation.clear()}},{key:"getWidth",value:function(){return this.painter.getWidth()}},{key:"getHeight",value:function(){return this.painter.getHeight()}},{key:"toDataURL",value:function(t,e,i){return this.painter.toDataURL(t,e,i)}},{key:"shapeToImage",value:function(t,e,i){var n=(0,s.newGuid)();return this.painter.shapeToImage(n,t,e,i)}},{key:"on",value:function(t,e){return this.handler.on(t,e),this}},{key:"un",value:function(t,e){return this.handler.un(t,e),this}},{key:"trigger",value:function(t,e){return this.handler.trigger(t,e),this}},{key:"clear",value:function(){return this.storage.delRoot(),this.painter.clear(),this}},{key:"dispose",value:function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=null,this.animatingElements=null,this.storage=null,this.painter=null,this.handler=null}},{key:"updateHoverShapes",value:function(t){return this.painter.updateHoverLayer(t),this}},{key:"getAllShapes",value:function(){return this.storage._shapeList}},{key:"clearAll",value:function(){return this.clear(),this.painter.clearHover(),this}},{key:"getHoverOne",value:function(){return this.handler.getLastHoverOne()}}],[{key:"getFrameCallback",value:function(t){return function(){var e=t.animatingElements;if(e instanceof Array){for(var i=0,n=e.length;i<n;i++)t.storage.mod(e[i].id);(e.length||t._needsRefreshNextFrame)&&t.refresh()}}}}]),t}();e.Render=d,o.Zondy.LevelRenderer.Render=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Storage=void 0;var n=l(i(8)),r=l(i(20)),o=i(6),s=i(21),a=i(387);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(){(0,n.default)(this,t),this._elements={},this._hoverElements=[],this._roots=[],this._shapeList=[],this._shapeListOffset=0,this.CLASS_NAME="Zondy.LevelRenderer.Storage"}return(0,r.default)(t,[{key:"destroy",value:function(){this.dispose(),this._shapeList=null,this._shapeListOffset=null}},{key:"iterShape",value:function(t,e){if(!e){e={hover:!1,normal:"down",update:!1}}if(e.hover)for(var i=0,n=this._hoverElements.length;i<n;i++){var r=this._hoverElements[i];if(r.updateTransform(),t(r))return this}switch(e.update&&this.updateShapeList(),e.normal){case"down":for(var o=this._shapeList.length;o--;)if(t(this._shapeList[o]))return this;break;default:for(var s=0,a=this._shapeList.length;s<a;s++)if(t(this._shapeList[s]))return this}return this}},{key:"getHoverShapes",value:function(e){for(var i=[],n=this._hoverElements.length,r=0;r<n;r++){i.push(this._hoverElements[r]);var o=this._hoverElements[r].hoverConnect;if(o)for(var s,a=0,l=(o=o instanceof Array?o:[o]).length;a<l;a++)(s=o[a].id?o[a]:this.get(o[a]))&&i.push(s)}if(i.sort(t.shapeCompareFunc),e)for(var u=0,c=i.length;u<c;u++)i[u].updateTransform();return i}},{key:"getShapeList",value:function(t){return t&&this.updateShapeList(),this._shapeList}},{key:"updateShapeList",value:function(){this._shapeListOffset=0;for(var e=this._roots.length,i=0;i<e;i++){var n=this._roots[i];this._updateAndAddShape(n)}this._shapeList.length=this._shapeListOffset;for(var r=this._shapeList.length,o=0;o<r;o++)this._shapeList[o].__renderidx=o;this._shapeList.sort(t.shapeCompareFunc)}},{key:"_updateAndAddShape",value:function(t,e){if(!t.ignore)if(t.updateTransform(),"group"==t.type){t.clipShape&&(t.clipShape.parent=t,t.clipShape.updateTransform(),e?(e=e.slice()).push(t.clipShape):e=[t.clipShape]);for(var i=0;i<t._children.length;i++){var n=t._children[i];n.__dirty=t.__dirty||n.__dirty,this._updateAndAddShape(n,e)}t.__dirty=!1}else t.__clipShapes=e,this._shapeList[this._shapeListOffset++]=t}},{key:"mod",value:function(t,e){var i=this._elements[t];if(i&&(i.modSelf(),e))if(e.parent||e._storage||e.__startClip){var n={};for(var r in e)"parent"!=r&&"_storage"!=r&&"__startClip"!=r&&e.hasOwnProperty(r)&&(n[r]=e[r]);(0,s.merge)(i,n,!0)}else(0,s.merge)(i,e,!0);return this}},{key:"drift",value:function(t,e,i){var n=this._elements[t];return n&&(n.needTransform=!0,"horizontal"===n.draggable?i=0:"vertical"===n.draggable&&(e=0),(!n.ondrift||n.ondrift&&!n.ondrift(e,i))&&n.drift(e,i)),this}},{key:"addHover",value:function(t){return t.updateNeedTransform(),this._hoverElements.push(t),this}},{key:"delHover",value:function(){return this._hoverElements=[],this}},{key:"hasHoverShape",value:function(){return this._hoverElements.length>0}},{key:"addRoot",value:function(t){t instanceof a.Group&&t.addChildrenToStorage(this),this.addToMap(t),this._roots.push(t)}},{key:"delRoot",value:function(t){if(void 0===t){for(var e=0;e<this._roots.length;e++){var i=this._roots[e];i instanceof a.Group&&i.delChildrenFromStorage(this)}return this._elements={},this._hoverElements=[],void(this._roots=[])}if(t instanceof Array)for(var n=t.length,r=0;r<n;r++)this.delRoot(t[r]);else{var o;o="string"==typeof t?this._elements[t]:t;var l=(0,s.indexOf)(this._roots,o);l>=0&&(this.delFromMap(o.id),this._roots.splice(l,1),o instanceof a.Group&&o.delChildrenFromStorage(this))}}},{key:"addToMap",value:function(t){return t instanceof a.Group&&(t._storage=this),t.modSelf(),this._elements[t.id]=t,this}},{key:"get",value:function(t){return this._elements[t]}},{key:"delFromMap",value:function(t){var e=this._elements[t];return e&&(delete this._elements[t],e instanceof a.Group&&(e._storage=null)),this}},{key:"dispose",value:function(){this._elements=null,this._roots=null,this._hoverElements=null}}],[{key:"shapeCompareFunc",value:function(t,e){return t.zlevel==e.zlevel?t.z==e.z?t.__renderidx-e.__renderidx:t.z-e.z:t.zlevel-e.zlevel}}]),t}();e.Storage=u,o.Zondy.LevelRenderer.Storage=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Group=void 0;var n=f(i(13)),r=f(i(8)),o=f(i(20)),s=f(i(16)),a=f(i(46)),l=f(i(17)),u=i(6),c=i(21),h=i(220),d=i(251);function f(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function e(t){(0,r.default)(this,e);var i=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t));return t=t||{},i.id=null,i.type="group",i.clipShape=null,i._children=[],i._storage=null,i.__dirty=!0,i.ignore=!1,(0,c.extend)(i,t),i.id=i.id||(0,c.newGuid)(),i.CLASS_NAME="Zondy.LevelRenderer.Group",i}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.id=null,this.type=null,this.clipShape=null,this._children=null,this._storage=null,this.__dirty=null,this.ignore=null,(0,a.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"destroy",this).call(this)}},{key:"children",value:function(){return this._children.slice()}},{key:"childAt",value:function(t){return this._children[t]}},{key:"addChild",value:function(t){t!=this&&t.parent!=this&&(t.parent&&t.parent.removeChild(t),this._children.push(t),t.parent=this,this._storage&&this._storage!==t._storage&&(this._storage.addToMap(t),t instanceof e&&t.addChildrenToStorage(this._storage)))}},{key:"removeChild",value:function(t){var i=(0,c.indexOf)(this._children,t);this._children.splice(i,1),t.parent=null,this._storage&&(this._storage.delFromMap(t.id),t instanceof e&&t.delChildrenFromStorage(this._storage))}},{key:"eachChild",value:function(t,e){for(var i=!!e,n=0;n<this._children.length;n++){var r=this._children[n];i?t.call(e,r):t(r)}}},{key:"traverse",value:function(t,e){for(var i=!!e,n=0;n<this._children.length;n++){var r=this._children[n];i?t.call(e,r):t(r),"group"===r.type&&r.traverse(t,e)}}},{key:"addChildrenToStorage",value:function(t){for(var e=0;e<this._children.length;e++){var i=this._children[e];t.addToMap(i),"group"===i.type&&i.addChildrenToStorage(t)}}},{key:"delChildrenFromStorage",value:function(t){for(var e=0;e<this._children.length;e++){var i=this._children[e];t.delFromMap(i.id),"group"===i.type&&i.delChildrenFromStorage(t)}}},{key:"modSelf",value:function(){this.__dirty=!0}}]),e}((0,c.mixin)(h.Eventful,d.Transformable));e.Group=p,u.Zondy.LevelRenderer.Group=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Area=void 0;var n=l(i(8)),r=l(i(20)),o=i(6),s=i(194),a=i(252);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(){(0,n.default)(this,t),this.util=new s.Util,this.curve=new a.Curve,this._ctx=null,this._textWidthCache={},this._textHeightCache={},this._textWidthCacheCounter=0,this._textHeightCacheCounter=0,this.TEXT_CACHE_MAX=5e3,this.PI2=2*Math.PI,this.roots=[-1,-1,-1],this.extrema=[-1,-1],this.CLASS_NAME="Zondy.LevelRenderer.Tool.Area"}return(0,r.default)(t,[{key:"normalizeRadian",value:function(t){return(t%=this.PI2)<0&&(t+=this.PI2),t}},{key:"isInside",value:function(t,e,i,n){if(!e||!t)return!1;var r=t.type;this._ctx=this._ctx||this.util.getContext();var o=this._mathMethod(t,e,i,n);if(void 0!==o)return o;if(t.buildPath&&this._ctx.isPointInPath)return this._buildPathMethod(t,this._ctx,e,i,n);switch(r){case"ellipse":case"smicellipse":return!0;case"trochoid":var s="out"==e.location?e.r1+e.r2+e.d:e.r1-e.r2+e.d;return this.isInsideCircle(e,i,n,s);case"rose":return this.isInsideCircle(e,i,n,e.maxr);default:return!1}}},{key:"_mathMethod",value:function(t,e,i,n){switch(t.type){case"bezier-curve":return void 0===e.cpX2?this.isInsideQuadraticStroke(e.xStart,e.yStart,e.cpX1,e.cpY1,e.xEnd,e.yEnd,e.lineWidth,i,n):this.isInsideCubicStroke(e.xStart,e.yStart,e.cpX1,e.cpY1,e.cpX2,e.cpY2,e.xEnd,e.yEnd,e.lineWidth,i,n);case"line":return this.isInsideLine(e.xStart,e.yStart,e.xEnd,e.yEnd,e.lineWidth,i,n);case"broken-line":return this.isInsideBrokenLine(e.pointList,e.lineWidth,i,n);case"smicbroken-line":var r=i,o=n;return t.refOriginalPosition&&(r=i-t.refOriginalPosition[0],o=n-t.refOriginalPosition[1]),this.isInsideBrokenLine(e.pointList,e.lineWidth,r,o);case"ring":return this.isInsideRing(e.x,e.y,e.r0,e.r,i,n);case"smicring":var s=e.x,a=e.y;return t.refOriginalPosition&&(s=e.x+t.refOriginalPosition[0],a=e.y+t.refOriginalPosition[1]),this.isInsideRing(s,a,e.r0,e.r,i,n);case"circle":return this.isInsideCircle(e.x,e.y,e.r,i,n);case"smicpoint":var l=i,u=n;return t.refOriginalPosition&&(l=i-t.refOriginalPosition[0],u=n-t.refOriginalPosition[1]),this.isInsideCircle(e.x,e.y,e.r,l,u);case"sector":var c=e.startAngle*Math.PI/180,h=e.endAngle*Math.PI/180;return e.clockWise||(c=-c,h=-h),this.isInsideSector(e.x,e.y,e.r0,e.r,c,h,!e.clockWise,i,n);case"smicsector":var d=e.startAngle*Math.PI/180,f=e.endAngle*Math.PI/180;e.clockWise||(d=-d,f=-f);var p=e.x,g=e.y;return t.refOriginalPosition&&(p=e.x+t.refOriginalPosition[0],g=e.y+t.refOriginalPosition[1]),this.isInsideSector(p,g,e.r0,e.r,d,f,!e.clockWise,i,n);case"path":return this.isInsidePath(e.pathArray,Math.max(e.lineWidth,5),e.brushType,i,n);case"polygon":case"star":case"smicstar":case"isogon":case"smicisogon":return this.isInsidePolygon(e.pointList,i,n);case"smicpolygon":var y=i,m=n;if(t.refOriginalPosition&&(y=i-t.refOriginalPosition[0],m=n-t.refOriginalPosition[1]),t.holePolygonPointLists&&t.holePolygonPointLists.length>0){for(var _=this.isInsidePolygon(e.pointList,y,m),v=t.holePolygonPointLists,b=!1,S=0,O=v.length;S<O;S++){var C=v[S];!0===this.isInsidePolygon(C,y,m)&&(b=!0)}return!0===_&&!1===b}return this.isInsidePolygon(e.pointList,y,m);case"text":var x=e.__rect||t.getRect(e);return this.isInsideRect(x.x,x.y,x.width,x.height,i,n);case"smictext":var T=t.getTextBackground(e);return this.isInsidePolygon(T,i,n);case"rectangle":case"image":return this.isInsideRect(e.x,e.y,e.width,e.height,i,n);case"smicimage":var E=e.x,P=e.y;return t.refOriginalPosition&&(E=e.x+t.refOriginalPosition[0],P=e.y+t.refOriginalPosition[1]),this.isInsideRect(E,P,e.width,e.height,i,n)}}},{key:"_buildPathMethod",value:function(t,e,i,n,r){return e.beginPath(),t.buildPath(e,i),e.closePath(),e.isPointInPath(n,r)}},{key:"isOutside",value:function(t,e,i,n){return!this.isInside(t,e,i,n)}},{key:"isInsideLine",value:function(t,e,i,n,r,o,s){if(0===r)return!1;var a=Math.max(r,5),l=0;if(s>e+a&&s>n+a||s<e-a&&s<n-a||o>t+a&&o>i+a||o<t-a&&o<i-a)return!1;if(t===i)return Math.abs(o-t)<=a/2;var u=(l=(e-n)/(t-i))*o-s+(t*n-i*e)/(t-i);return u*u/(l*l+1)<=a/2*a/2}},{key:"isInsideCubicStroke",value:function(t,e,i,n,r,o,s,a,l,u,c){if(0===l)return!1;var h=Math.max(l,5);return!(c>e+h&&c>n+h&&c>o+h&&c>a+h||c<e-h&&c<n-h&&c<o-h&&c<a-h||u>t+h&&u>i+h&&u>r+h&&u>s+h||u<t-h&&u<i-h&&u<r-h&&u<s-h)&&this.curve.cubicProjectPoint(t,e,i,n,r,o,s,a,u,c,null)<=h/2}},{key:"isInsideQuadraticStroke",value:function(t,e,i,n,r,o,s,a,l){if(0===s)return!1;var u=Math.max(s,5);return!(l>e+u&&l>n+u&&l>o+u||l<e-u&&l<n-u&&l<o-u||a>t+u&&a>i+u&&a>r+u||a<t-u&&a<i-u&&a<r-u)&&this.curve.quadraticProjectPoint(t,e,i,n,r,o,a,l,null)<=u/2}},{key:"isInsideArcStroke",value:function(t,e,i,n,r,o,s,a,l){var u=this.PI2;if(0===s)return!1;var c=Math.max(s,5);a-=t,l-=e;var h=Math.sqrt(a*a+l*l);if(h-c>i||h+c<i)return!1;if(Math.abs(n-r)>=u)return!0;if(o){var d=n;n=this.normalizeRadian(r),r=this.normalizeRadian(d)}else n=this.normalizeRadian(n),r=this.normalizeRadian(r);n>r&&(r+=u);var f=Math.atan2(l,a);return f<0&&(f+=u),f>=n&&f<=r||f+u>=n&&f+u<=r}},{key:"isInsideBrokenLine",value:function(t,e,i,n){for(var r=Math.max(e,10),o=0,s=t.length-1;o<s;o++){var a=t[o][0],l=t[o][1],u=t[o+1][0],c=t[o+1][1];if(this.isInsideLine(a,l,u,c,r,i,n))return!0}return!1}},{key:"isInsideRing",value:function(t,e,i,n,r,o){var s=(r-t)*(r-t)+(o-e)*(o-e);return s<n*n&&s>i*i}},{key:"isInsideRect",value:function(t,e,i,n,r,o){return r>=t&&r<=t+i&&o>=e&&o<=e+n}},{key:"isInsideCircle",value:function(t,e,i,n,r){return(n-t)*(n-t)+(r-e)*(r-e)<i*i}},{key:"isInsideSector",value:function(t,e,i,n,r,o,s,a,l){return this.isInsideArcStroke(t,e,(i+n)/2,r,o,s,n-i,a,l)}},{key:"isInsidePolygon",value:function(t,e,i){for(var n=t.length,r=0,o=0,s=n-1;o<n;o++){var a=t[s][0],l=t[s][1],u=t[o][0],c=t[o][1];r+=this.windingLine(a,l,u,c,e,i),s=o}return 0!==r}},{key:"windingLine",value:function(t,e,i,n,r,o){return o>e&&o>n||o<e&&o<n?0:n==e?0:(o-e)/(n-e)*(i-t)+t>r?n<e?1:-1:0}},{key:"swapExtrema",value:function(){var t=this.extrema[0];this.extrema[0]=this.extrema[1],this.extrema[1]=t}},{key:"windingCubic",value:function(t,e,i,n,r,o,s,a,l,u){var c=this.curve,h=this.roots,d=this.extrema;if(u>e&&u>n&&u>o&&u>a||u<e&&u<n&&u<o&&u<a)return 0;var f=c.cubicRootAt(e,n,o,a,u,h);if(0===f)return 0;for(var p,g,y=0,m=-1,_=0;_<f;_++){var v=h[_];c.cubicAt(t,i,r,s,v)<l||(m<0&&(m=c.cubicExtrema(e,n,o,a,d),d[1]<d[0]&&m>1&&this.swapExtrema(),p=c.cubicAt(e,n,o,a,d[0]),m>1&&(g=c.cubicAt(e,n,o,a,d[1]))),2==m?v<d[0]?y+=p<e?1:-1:v<d[1]?y+=g<p?1:-1:y+=a<g?1:-1:v<d[0]?y+=p<e?1:-1:y+=a<p?1:-1)}return y}},{key:"windingQuadratic",value:function(t,e,i,n,r,o,s,a){var l=this.curve,u=this.roots;if(a>e&&a>n&&a>o||a<e&&a<n&&a<o)return 0;var c=l.quadraticRootAt(e,n,o,a,u);if(0===c)return 0;var h=l.quadraticExtremum(e,n,o);if(h>=0&&h<=1){for(var d=0,f=l.quadraticAt(e,n,o,h),p=0;p<c;p++){l.quadraticAt(t,i,r,u[p])>s||(u[p]<h?d+=f<e?1:-1:d+=o<f?1:-1)}return d}return l.quadraticAt(t,i,r,u[0])>s?0:o<e?1:-1}},{key:"windingArc",value:function(t,e,i,n,r,o,s,a){var l=this.roots,u=this.PI2;if((a-=e)>i||a<-i)return 0;var c=Math.sqrt(i*i-a*a);if(l[0]=-c,l[1]=c,Math.abs(n-r)>=u){n=0,r=u;var h=o?1:-1;return s>=l[0]+t&&s<=l[1]+t?h:0}if(o){var d=n;n=this.normalizeRadian(r),r=this.normalizeRadian(d)}else n=this.normalizeRadian(n),r=this.normalizeRadian(r);n>r&&(r+=u);for(var f=0,p=0;p<2;p++){var g=l[p];if(g+t>s){var y=Math.atan2(a,g),m=o?1:-1;y<0&&(y=u+y),(y>=n&&y<=r||y+u>=n&&y+u<=r)&&(y>Math.PI/2&&y<1.5*Math.PI&&(m=-m),f+=m)}}return f}},{key:"isInsidePath",value:function(t,e,i,n,r){for(var o=0,s=0,a=0,l=0,u=0,c=!0,h=!0,d="stroke"===(i=i||"fill")||"both"===i,f="fill"===i||"both"===i,p=0;p<t.length;p++){var g=t[p],y=g.points;if(c||"M"===g.command){if(p>0&&(f&&(o+=this.windingLine(s,a,l,u,n,r)),0!==o))return!0;l=y[y.length-2],u=y[y.length-1],c=!1,h&&"A"!==g.command&&(h=!1,s=l,a=u)}switch(g.command){case"M":s=y[0],a=y[1];break;case"L":if(d&&this.isInsideLine(s,a,y[0],y[1],e,n,r))return!0;f&&(o+=this.windingLine(s,a,y[0],y[1],n,r)),s=y[0],a=y[1];break;case"C":if(d&&this.isInsideCubicStroke(s,a,y[0],y[1],y[2],y[3],y[4],y[5],e,n,r))return!0;f&&(o+=this.windingCubic(s,a,y[0],y[1],y[2],y[3],y[4],y[5],n,r)),s=y[4],a=y[5];break;case"Q":if(d&&this.isInsideQuadraticStroke(s,a,y[0],y[1],y[2],y[3],e,n,r))return!0;f&&(o+=this.windingQuadratic(s,a,y[0],y[1],y[2],y[3],n,r)),s=y[2],a=y[3];break;case"A":var m=y[0],_=y[1],v=y[2],b=y[3],S=y[4],O=y[5],C=Math.cos(S)*v+m,x=Math.sin(S)*b+_;h?(h=!1,l=C,u=x):o+=this.windingLine(s,a,C,x);var T=(n-m)*b/v+m;if(d&&this.isInsideArcStroke(m,_,b,S,S+O,1-y[7],e,T,r))return!0;f&&(o+=this.windingArc(m,_,b,S,S+O,1-y[7],T,r)),s=Math.cos(S+O)*v+m,a=Math.sin(S+O)*b+_;break;case"z":if(d&&this.isInsideLine(s,a,l,u,e,n,r))return!0;c=!0}}return f&&(o+=this.windingLine(s,a,l,u,n,r)),0!==o}},{key:"getTextWidth",value:function(t,e){var i=t+":"+e;if(this._textWidthCache[i])return this._textWidthCache[i];this._ctx=this._ctx||this.util.getContext(),this._ctx.save(),e&&(this._ctx.font=e);for(var n=0,r=0,o=(t=(t+"").split("\n")).length;r<o;r++)n=Math.max(this._ctx.measureText(t[r]).width,n);return this._ctx.restore(),this._textWidthCache[i]=n,++this._textWidthCacheCounter>this.TEXT_CACHE_MAX&&(this._textWidthCacheCounter=0,this._textWidthCache={}),n}},{key:"getTextHeight",value:function(t,e){var i=t+":"+e;if(this._textHeightCache[i])return this._textHeightCache[i];this._ctx=this._ctx||this.util.getContext(),this._ctx.save(),e&&(this._ctx.font=e),t=(t+"").split("\n");var n=(this._ctx.measureText("ZH").width+2)*t.length;return this._ctx.restore(),this._textHeightCache[i]=n,++this._textHeightCacheCounter>this.TEXT_CACHE_MAX&&(this._textHeightCacheCounter=0,this._textHeightCache={}),n}}]),t}();e.Area=u,o.Zondy.LevelRenderer.Tool.Area=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComputeBoundingBox=void 0;var n=l(i(8)),r=l(i(20)),o=i(6),s=i(252),a=i(253);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(){(0,n.default)(this,t),3===arguments.length&&this.computeBoundingBox(arguments),this.CLASS_NAME="Zondy.LevelRenderer.Tool.ComputeBoundingBox"}return(0,r.default)(t,[{key:"computeBoundingBox",value:function(t,e,i){if(0!==t.length){for(var n=t[0][0],r=t[0][0],o=t[0][1],s=t[0][1],a=1;a<t.length;a++){var l=t[a];l[0]<n&&(n=l[0]),l[0]>r&&(r=l[0]),l[1]<o&&(o=l[1]),l[1]>s&&(s=l[1])}e[0]=n,e[1]=o,i[0]=r,i[1]=s}}},{key:"cubeBezier",value:function(t,e,i,n,r,o){var a=new s.Curve,l=[];a.cubicExtrema(t[0],e[0],i[0],n[0],l);for(var u=0;u<l.length;u++)l[u]=a.cubicAt(t[0],e[0],i[0],n[0],l[u]);var c=[];a.cubicExtrema(t[1],e[1],i[1],n[1],c);for(var h=0;h<c.length;h++)c[h]=a.cubicAt(t[1],e[1],i[1],n[1],c[h]);l.push(t[0],n[0]),c.push(t[1],n[1]);var d=Math.min.apply(null,l),f=Math.max.apply(null,l),p=Math.min.apply(null,c),g=Math.max.apply(null,c);r[0]=d,r[1]=p,o[0]=f,o[1]=g}},{key:"quadraticBezier",value:function(t,e,i,n,r){var o=new s.Curve,a=o.quadraticExtremum(t[0],e[0],i[0]),l=o.quadraticExtremum(t[1],e[1],i[1]),u=1-(a=Math.max(Math.min(a,1),0)),c=1-(l=Math.max(Math.min(l,1),0)),h=u*u*t[0]+2*u*a*e[0]+a*a*i[0],d=u*u*t[1]+2*u*a*e[1]+a*a*i[1],f=c*c*t[0]+2*c*l*e[0]+l*l*i[0],p=c*c*t[1]+2*c*l*e[1]+l*l*i[1];n[0]=Math.min(t[0],i[0],h,f),n[1]=Math.min(t[1],i[1],d,p),r[0]=Math.max(t[0],i[0],h,f),r[1]=Math.max(t[1],i[1],d,p)}},{key:"arc",value:function(t,e,i,n,r,o,s,l){var u=new a.Vector,c=u.create(),h=u.create(),d=u.create();if(c[0]=Math.cos(n)*i+t,c[1]=Math.sin(n)*i+e,h[0]=Math.cos(r)*i+t,h[1]=Math.sin(r)*i+e,u.min(s,c,h),u.max(l,c,h),(n%=2*Math.PI)<0&&(n+=2*Math.PI),(r%=2*Math.PI)<0&&(r+=2*Math.PI),n>r&&!o?r+=2*Math.PI:n<r&&o&&(n+=2*Math.PI),o){var f=r;r=n,n=f}for(var p=0;p<r;p+=Math.PI/2)p>n&&(d[0]=Math.cos(p)*i+t,d[1]=Math.sin(p)*i+e,u.min(s,d,s),u.max(l,d,l))}}]),t}();e.ComputeBoundingBox=u,o.Zondy.LevelRenderer.Tool.ComputeBoundingBox=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Env=void 0;var n=s(i(8)),r=s(i(20)),o=i(6);function s(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(){(0,n.default)(this,t),this.CLASS_NAME="Zondy.LevelRenderer.Tool.Env";var e,i,r,o,s,a,l,u,c,h,d,f,p,g,y,m,_,v,b,S,O,C=this;return e=navigator.userAgent,i=C.os={},r=C.browser={},o=e.match(/Web[kK]it[\/]{0,1}([\d.]+)/),s=e.match(/(Android);?[\s\/]+([\d.]+)?/),a=e.match(/(iPad).*OS\s([\d_]+)/),l=e.match(/(iPod)(.*OS\s([\d_]+))?/),u=!a&&e.match(/(iPhone\sOS)\s([\d_]+)/),c=e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),h=c&&e.match(/TouchPad/),d=e.match(/Kindle\/([\d.]+)/),f=e.match(/Silk\/([\d._]+)/),p=e.match(/(BlackBerry).*Version\/([\d.]+)/),g=e.match(/(BB10).*Version\/([\d.]+)/),y=e.match(/(RIM\sTablet\sOS)\s([\d.]+)/),m=e.match(/PlayBook/),_=e.match(/Chrome\/([\d.]+)/)||e.match(/CriOS\/([\d.]+)/),v=e.match(/Firefox\/([\d.]+)/),b=e.match(/MSIE ([\d.]+)/),S=o&&e.match(/Mobile\//)&&!_,O=e.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/)&&!_,(r.webkit=!!o)&&(r.version=o[1]),s&&(i.android=!0,i.version=s[2]),u&&!l&&(i.ios=i.iphone=!0,i.version=u[2].replace(/_/g,".")),a&&(i.ios=i.ipad=!0,i.version=a[2].replace(/_/g,".")),l&&(i.ios=i.ipod=!0,i.version=l[3]?l[3].replace(/_/g,"."):null),c&&(i.webos=!0,i.version=c[2]),h&&(i.touchpad=!0),p&&(i.blackberry=!0,i.version=p[2]),g&&(i.bb10=!0,i.version=g[2]),y&&(i.rimtabletos=!0,i.version=y[2]),m&&(r.playbook=!0),d&&(i.kindle=!0,i.version=d[1]),f&&(r.silk=!0,r.version=f[1]),!f&&i.android&&e.match(/Kindle Fire/)&&(r.silk=!0),_&&(r.chrome=!0,r.version=_[1]),v&&(r.firefox=!0,r.version=v[1]),b&&(r.ie=!0,r.version=b[1]),S&&(e.match(/Safari/)||i.ios)&&(r.safari=!0),O&&(r.webview=!0),b&&(r.ie=!0,r.version=b[1]),i.tablet=!!(a||m||s&&!e.match(/Mobile/)||v&&e.match(/Tablet/)||b&&!e.match(/Phone/)&&e.match(/Touch/)),i.phone=!(i.tablet||i.ipod||!(s||u||c||p||g||_&&e.match(/Android/)||_&&e.match(/CriOS\/([\d.]+)/)||v&&e.match(/Mobile/)||b&&e.match(/Touch/))),{browser:r,os:i,canvasSupported:!!document.createElement("canvas").getContext}}return(0,r.default)(t,[{key:"destory",value:function(){return!0}}]),t}();e.Env=a,o.Zondy.LevelRenderer.Tool.Env=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Event=void 0;var n=s(i(8)),r=s(i(20)),o=i(6);function s(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(){(0,n.default)(this,t),this.stop="function"==typeof window.addEventListener?function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0}:function(t){t.returnValue=!1,t.cancelBubble=!0},this.CLASS_NAME="Zondy.LevelRenderer.Tool.Event"}return(0,r.default)(t,[{key:"getX",value:function(t){return void 0!==t.zrenderX&&t.zrenderX||void 0!==t.offsetX&&t.offsetX||void 0!==t.layerX&&t.layerX||void 0!==t.clientX&&t.clientX}},{key:"getY",value:function(t){return void 0!==t.zrenderY&&t.zrenderY||void 0!==t.offsetY&&t.offsetY||void 0!==t.layerY&&t.layerY||void 0!==t.clientY&&t.clientY}},{key:"getDelta",value:function(t){return void 0!==t.zrenderDelta&&t.zrenderDelta||void 0!==t.wheelDelta&&t.wheelDelta||void 0!==t.detail&&-t.detail}}]),t}();e.Event=a,o.Zondy.LevelRenderer.Tool.Event=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Http=void 0;var n=a(i(136)),r=a(i(8)),o=a(i(20)),s=i(6);function a(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(){(0,r.default)(this,t),this.CLASS_NAME="Zondy.LevelRenderer.Tool.Http"}return(0,o.default)(t,[{key:"get",value:function(t,e,i){if("object"===(void 0===t?"undefined":(0,n.default)(t))){var r=t;t=r.url,e=r.onsuccess,i=r.onerror}var o=window.XMLHttpRequest?new XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");o.open("GET",t,!0),o.onreadystatechange=function(){4==o.readyState&&(o.status>=200&&o.status<300||304===o.status?e&&e(o.responseText):i&&i(),o.onreadystatechange=new Function,o=null)},o.send(null)}}]),t}();e.Http=l,s.Zondy.LevelRenderer.Tool.Http=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Math=void 0;var n=s(i(8)),r=s(i(20)),o=i(6);function s(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(){(0,n.default)(this,t),this._radians=window.Math.PI/180,this.CLASS_NAME="Zondy.LevelRenderer.Tool.Math"}return(0,r.default)(t,[{key:"sin",value:function(t,e){return window.Math.sin(e?t*this._radians:t)}},{key:"cos",value:function(t,e){return window.Math.cos(e?t*this._radians:t)}},{key:"degreeToRadian",value:function(t){return t*this._radians}},{key:"radianToDegree",value:function(t){return t/this._radians}}]),t}();e.Math=a,o.Zondy.LevelRenderer.Tool.Math=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Matrix=void 0;var n=s(i(8)),r=s(i(20)),o=i(6);function s(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(){(0,n.default)(this,t),this.ArrayCtor="undefined"==typeof Float32Array?Array:Float32Array,this.CLASS_NAME="Zondy.LevelRenderer.Tool.Matrix"}return(0,r.default)(t,[{key:"create",value:function(){var t=new(0,this.ArrayCtor)(6);return this.identity(t),t}},{key:"identity",value:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}},{key:"copy",value:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}},{key:"mul",value:function(t,e,i){return t[0]=e[0]*i[0]+e[2]*i[1],t[1]=e[1]*i[0]+e[3]*i[1],t[2]=e[0]*i[2]+e[2]*i[3],t[3]=e[1]*i[2]+e[3]*i[3],t[4]=e[0]*i[4]+e[2]*i[5]+e[4],t[5]=e[1]*i[4]+e[3]*i[5]+e[5],t}},{key:"translate",value:function(t,e,i){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4]+i[0],t[5]=e[5]+i[1],t}},{key:"rotate",value:function(t,e,i){var n=e[0],r=e[2],o=e[4],s=e[1],a=e[3],l=e[5],u=Math.sin(i),c=Math.cos(i);return t[0]=n*c+s*u,t[1]=-n*u+s*c,t[2]=r*c+a*u,t[3]=-r*u+c*a,t[4]=c*o+u*l,t[5]=c*l-u*o,t}},{key:"scale",value:function(t,e,i){var n=i[0],r=i[1];return t[0]=e[0]*n,t[1]=e[1]*r,t[2]=e[2]*n,t[3]=e[3]*r,t[4]=e[4]*n,t[5]=e[5]*r,t}},{key:"invert",value:function(t,e){var i=e[0],n=e[2],r=e[4],o=e[1],s=e[3],a=e[5],l=i*s-o*n;return l?(l=1/l,t[0]=s*l,t[1]=-o*l,t[2]=-n*l,t[3]=i*l,t[4]=(n*a-s*r)*l,t[5]=(o*r-i*a)*l,t):null}},{key:"mulVector",value:function(t,e,i){var n=e[0],r=e[2],o=e[4],s=e[1],a=e[3],l=e[5];return t[0]=i[0]*n+i[1]*r+o,t[1]=i[0]*s+i[1]*a+l,t}}]),t}();e.Matrix=a,o.Zondy.LevelRenderer.Tool.Matrix=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PaintLayer=e.Painter=void 0;var n=g(i(13)),r=g(i(16)),o=g(i(17)),s=g(i(8)),a=g(i(20)),l=i(6),u=i(21),c=i(194),h=i(251),d=i(309),f=i(116),p=i(310);function g(t){return t&&t.__esModule?t:{default:t}}var y=function(){function t(e,i){(0,s.default)(this,t),this.root=e,this.storage=i,this._domRoot=null,this._layers={},this._zlevelList=[],this._layerConfig={},this._bgDom=null,this.shapeToImage=null,t.devicePixelRatio=Math.max(window.devicePixelRatio||1,1),this.CLASS_NAME="Zondy.LevelRenderer.Painter",this.root.innerHTML="",this._width=this._getWidth(),this._height=this._getHeight();var n=document.createElement("div");this._domRoot=n,n.style.position="relative",n.style.overflow="hidden",n.style.width=this._width+"px",n.style.height=this._height+"px",this.root.appendChild(n),this.shapeToImage=this._createShapeToImageProcessor(),this._bgDom=t.createDom((0,u.newGuid)(),"div",this),n.appendChild(this._bgDom),this._bgDom.onselectstart=a,this._bgDom.style["-webkit-user-select"]="none",this._bgDom.style["user-select"]="none",this._bgDom.style["-webkit-touch-callout"]="none";var r=new m((0,u.newGuid)(),this);this._layers.hover=r,n.appendChild(r.dom),r.initContext(),r.dom.onselectstart=a,r.dom.style["-webkit-user-select"]="none",r.dom.style["user-select"]="none",r.dom.style["-webkit-touch-callout"]="none";var o=this;function a(){return!1}this.updatePainter=function(t,e){o.refreshShapes(t,e)}}return(0,a.default)(t,[{key:"destroy",value:function(){this.dispose(),this._zlevelList=null,this._layerConfig=null,this._bgDom=null,this.shapeToImage=null}},{key:"render",value:function(t){return this.refresh(t,!0),this}},{key:"refresh",value:function(t,e){var i=this.storage.getShapeList(!0);return this._paintList(i,e),"function"==typeof t&&t(),this}},{key:"_paintList",value:function(t,e){var i,n,r;for(var o in void 0===e&&(e=!1),this._updateLayerStatus(t),this._layers)"hover"!==o&&(this._layers[o].unusedCount++,this._layers[o].updateTransform());for(var s=[],a=0,l=t.length;a<l;a++){var u=t[a];if(n!==u.zlevel&&(i&&i.needTransform&&r.restore(),r=(i=this.getLayer(u.zlevel)).ctx,n=u.zlevel,i.unusedCount=0,(i.dirty||e)&&i.clear(),i.needTransform&&(r.save(),i.setTransform(r))),r&&u.__startClip){var c=u.__startClip;if(r.save(),c.needTransform){var h=c.transform;f.SUtil.Util_matrix.invert(s,h),r.transform(h[0],h[1],h[2],h[3],h[4],h[5])}if(r.beginPath(),c.buildPath(r,c.style),r.clip(),c.needTransform){var p=s;r.transform(p[0],p[1],p[2],p[3],p[4],p[5])}}if((i&&i.dirty||e)&&!u.invisible&&(!u.onbrush||u.onbrush&&!u.onbrush(r,!1)))if(d.Config.catchBrushException)try{u.brush(r,!1,this.updatePainter)}catch(t){}else u.brush(r,!1,this.updatePainter);r&&u.__stopClip&&r.restore(),u.__dirty=!1}for(var g in r&&i&&i.needTransform&&r.restore(),this._layers)if("hover"!==g){var y=this._layers[g];y.dirty=!1,1==y.unusedCount&&y.clear()}}},{key:"getLayer",value:function(t){var e=this._layers[t];if(!e){var i=this._zlevelList.length,n=null,r=-1;if(i>0&&t>this._zlevelList[0]){for(r=0;r<i-1&&!(this._zlevelList[r]<t&&this._zlevelList[r+1]>t);r++);n=this._layers[this._zlevelList[r]]}this._zlevelList.splice(r+1,0,t),e=new m((0,u.newGuid)(),this);var o=n?n.dom:this._bgDom;o.nextSibling?o.parentNode.insertBefore(e.dom,o.nextSibling):o.parentNode.appendChild(e.dom),e.initContext(),this._layers[t]=e,this._layerConfig[t]&&(new c.Util).merge(e,this._layerConfig[t],!0),e.updateTransform()}return e}},{key:"getLayers",value:function(){return this._layers}},{key:"_updateLayerStatus",value:function(t){var e=this._layers,i={};for(var n in e)"hover"!==n&&(i[n]=e[n].elCount,e[n].elCount=0);for(var r=0;r<t.length;r++){var o=t[r],s=e[o.zlevel];if(s){if(s.elCount++,s.dirty)continue;s.dirty=o.__dirty}}for(var a in e)"hover"!==a&&i[a]!==e[a].elCount&&(e[a].dirty=!0)}},{key:"refreshShapes",value:function(t,e){for(var i=0,n=t.length;i<n;i++){var r=t[i];this.storage.mod(r.id)}return this.refresh(e),this}},{key:"clear",value:function(){for(var t in this._layers)"hover"!=t&&this._layers[t].clear();return this}},{key:"modLayer",value:function(t,e){if(e){this._layerConfig[t]?(new c.Util).merge(this._layerConfig[t],e,!0):this._layerConfig[t]=e;var i=this._layers[t];i&&(new c.Util).merge(i,this._layerConfig[t],!0)}}},{key:"delLayer",value:function(t){var e=this._layers[t];e&&(this.modLayer(t,{position:e.position,rotation:e.rotation,scale:e.scale}),e.dom.parentNode.removeChild(e.dom),delete this._layers[t],this._zlevelList.splice((new c.Util).indexOf(this._zlevelList,t),1))}},{key:"refreshHover",value:function(){this.clearHover();for(var t=this.storage.getHoverShapes(!0),e=0,i=t.length;e<i;e++)this._brushHover(t[e]);return this.storage.delHover(),this}},{key:"clearHover",value:function(){var t=this._layers.hover;return t&&t.clear(),this}},{key:"resize",value:function(){var t=this._domRoot;t.style.display="none";var e=this._getWidth(),i=this._getHeight();if(t.style.display="",this._width!=e||i!=this._height){for(var n in this._width=e,this._height=i,t.style.width=e+"px",t.style.height=i+"px",this._layers)this._layers[n].resize(e,i);this.refresh(null,!0)}return this}},{key:"clearLayer",value:function(t){var e=this._layers[t];e&&e.clear()}},{key:"dispose",value:function(){this.root.innerHTML="",this.root=null,this.storage=null,this._domRoot=null,this._layers=null}},{key:"getDomHover",value:function(){return this._layers.hover.dom}},{key:"toDataURL",value:function(e,i,n){var r=t.createDom((0,u.newGuid)(),"canvas",this);this._bgDom.appendChild(r);var o=r.getContext("2d");1!=t.devicePixelRatio&&o.scale(t.devicePixelRatio,t.devicePixelRatio),o.fillStyle=i||"#fff",o.rect(0,0,this._width*t.devicePixelRatio,this._height*t.devicePixelRatio),o.fill();var s=this;this.storage.iterShape(function(t){if(!t.invisible&&(!t.onbrush||t.onbrush&&!t.onbrush(o,!1)))if(d.Config.catchBrushException)try{t.brush(o,!1,s.updatePainter)}catch(t){}else t.brush(o,!1,s.updatePainter)},{normal:"up",update:!0});var a=r.toDataURL(e,n);return o=null,this._bgDom.removeChild(r),a}},{key:"getWidth",value:function(){return this._width}},{key:"getHeight",value:function(){return this._height}},{key:"_getWidth",value:function(){var t=this.root,e=t.currentStyle||document.defaultView.getComputedStyle(t);return((t.clientWidth||parseInt(e.width,10))-parseInt(e.paddingLeft,10)-parseInt(e.paddingRight,10)).toFixed(0)-0}},{key:"_getHeight",value:function(){var t=this.root,e=t.currentStyle||document.defaultView.getComputedStyle(t);return((t.clientHeight||parseInt(e.height,10))-parseInt(e.paddingTop,10)-parseInt(e.paddingBottom,10)).toFixed(0)-0}},{key:"_brushHover",value:function(t){var e=this._layers.hover.ctx;if(!t.onbrush||t.onbrush&&!t.onbrush(e,!0)){var i=this.getLayer(t.zlevel);if(i.needTransform&&(e.save(),i.setTransform(e)),d.Config.catchBrushException)try{t.brush(e,!0,this.updatePainter)}catch(t){}else t.brush(e,!0,this.updatePainter);i.needTransform&&e.restore()}}},{key:"_shapeToImage",value:function(t,e,i,n,r){var o=document.createElement("canvas"),s=o.getContext("2d"),a=r||window.devicePixelRatio||1;o.style.width=i+"px",o.style.height=n+"px",o.setAttribute("width",i*a),o.setAttribute("height",n*a),s.clearRect(0,0,i*a,n*a);var l={position:e.position,rotation:e.rotation,scale:e.scale};e.position=[0,0,0],e.rotation=0,e.scale=[1,1],e&&e.brush(s,!1);var u=new p.SmicImage({id:t,style:{x:0,y:0,image:o}});return null!=l.position&&(u.position=e.position=l.position),null!=l.rotation&&(u.rotation=e.rotation=l.rotation),null!=l.scale&&(u.scale=e.scale=l.scale),u}},{key:"_createShapeToImageProcessor",value:function(){var e=this;return function(i,n,r,o){return e._shapeToImage(i,n,r,o,t.devicePixelRatio)}}},{key:"updateHoverLayer",value:function(t){if(!(t instanceof Array))return this;this.clearHover(),this.storage.delHover();for(var e=0;e<t.length;e++)this.storage.addHover(t[e]),this._brushHover(t[e])}}],[{key:"createDom",value:function(e,i,n){var r=document.createElement(i),o=n._width,s=n._height;return r.style.position="absolute",r.style.left=0,r.style.top=0,r.style.width=o+"px",r.style.height=s+"px",r.setAttribute("width",o*t.devicePixelRatio),r.setAttribute("height",s*t.devicePixelRatio),r.setAttribute("id",e),r}}]),t}(),m=function(t){function e(t,i){(0,s.default)(this,e);var o=(0,r.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,i));return o.dom=null,o.domBack=null,o.ctxBack=null,o.painter=i,o.unusedCount=0,o.config=null,o.dirty=!0,o.elCount=0,o.clearColor=0,o.motionBlur=!1,o.lastFrameAlpha=.7,o.zoomable=!1,o.panable=!1,o.maxZoom=1/0,o.minZoom=0,o.ctx=null,o.dom=y.createDom((0,u.newGuid)(),"canvas",i),o.dom.onselectstart=function(){return!1},o.dom.style["-webkit-user-select"]="none",o.dom.style["user-select"]="none",o.dom.style["-webkit-touch-callout"]="none",o.CLASS_NAME="Zondy.LevelRenderer.Painter.Layer",o}return(0,o.default)(e,t),(0,a.default)(e,[{key:"destroy",value:function(){this.dom=null,this.domBack=null,this.ctxBack=null,this.painter=null,this.unusedCount=null,this.config=null,this.dirty=null,this.elCount=null,this.clearColor=null,this.motionBlur=null,this.lastFrameAlpha=null,this.zoomable=null,this.panable=null,this.maxZoom=null,this.minZoom=null,this.ctx=null,h.Transformable.destroy.apply(this,arguments)}},{key:"initContext",value:function(){this.ctx=this.dom.getContext("2d"),1!=y.devicePixelRatio&&this.ctx.scale(y.devicePixelRatio,y.devicePixelRatio)}},{key:"createBackBuffer",value:function(){this.domBack=y.createDom((0,u.newGuid)(),"canvas",this.painter),this.ctxBack=this.domBack.getContext("2d"),1!=y.devicePixelRatio&&this.ctxBack.scale(y.devicePixelRatio,y.devicePixelRatio)}},{key:"resize",value:function(t,e){this.dom.style.width=t+"px",this.dom.style.height=e+"px",this.dom.setAttribute("width",t*y.devicePixelRatio),this.dom.setAttribute("height",e*y.devicePixelRatio),1!=y.devicePixelRatio&&this.ctx.scale(y.devicePixelRatio,y.devicePixelRatio),this.domBack&&(this.domBack.setAttribute("width",t*y.devicePixelRatio),this.domBack.setAttribute("height",e*y.devicePixelRatio),1!=y.devicePixelRatio&&this.ctxBack.scale(y.devicePixelRatio,y.devicePixelRatio))}},{key:"clear",value:function(){var t=this.dom,e=this.ctx,i=t.width,n=t.height,r=this.clearColor,o=this.motionBlur,s=this.lastFrameAlpha;if(o&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(t,0,0,i/y.devicePixelRatio,n/y.devicePixelRatio)),r?(e.save(),e.fillStyle=this.config.clearColor,e.fillRect(0,0,i/y.devicePixelRatio,n/y.devicePixelRatio),e.restore()):e.clearRect(0,0,i/y.devicePixelRatio,n/y.devicePixelRatio),o){var a=this.domBack;e.save(),e.globalAlpha=s,e.drawImage(a,0,0,i/y.devicePixelRatio,n/y.devicePixelRatio),e.restore()}}}]),e}(h.Transformable);e.Painter=y,l.Zondy.LevelRenderer.Painter=y,e.PaintLayer=m,l.Zondy.LevelRenderer.PaintLayer=m},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Handler=void 0;var n=d(i(13)),r=d(i(8)),o=d(i(20)),s=d(i(16)),a=d(i(17)),l=i(6),u=i(220),c=i(309),h=i(116);function d(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t,i,o){(0,r.default)(this,e);var a,l,u=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,i,o));u.root=t,u.storage=i,u.painter=o,u._lastX=0,u._lastY=0,u._mouseX=0,u._mouseY=0,u._findHover=null,u._domHover=null,u._findHover=(a=function(t,e,i){var n=this;if(n._draggingTarget&&n._draggingTarget.id==t.id||t.isSilent())return!1;var r=n._event;if(t.isCover(e,i)){if(t.hoverable)if(t.isHoverByRefDataID&&!0===t.isHoverByRefDataID){if(t.refDataID){var o=t.refDataID,s=null;t.refDataHoverGroup&&(s=t.refDataHoverGroup);for(var a=n.storage._shapeList,l=0,u=a.length;l<u;l++){var c=a[l];c.refDataID&&o===c.refDataID&&(s?c.refDataHoverGroup&&s===c.refDataHoverGroup&&n.storage.addHover(c):n.storage.addHover(c))}}}else n.storage.addHover(t);for(var h=t.parent;h;){if(h.clipShape&&!h.clipShape.isCover(n._mouseX,n._mouseY))return!1;h=h.parent}return n._lastHover!=t&&(n._processOutShape(r),n._processDragLeave(r),n._lastHover=t,n._processDragEnter(r)),n._processOverShape(r),n._processDragOver(r),n._hasfound=1,!0}return!1},l=u,function(t,e,i){return a.call(l,t,e,i)}),u._domHover=o.getDomHover(),u.CLASS_NAME="Zondy.LevelRenderer.Handler";var d={resize:function(t){t=t||window.event,this._lastHover=null,this._isMouseDown=0,this.dispatch(c.Config.EVENT.RESIZE,t)},click:function(t){t=this._zrenderEventFixed(t);var e=this._lastHover;(e&&e.clickable||!e)&&this._clickThreshold<10&&this._dispatchAgency(e,c.Config.EVENT.CLICK,t),this._mousemoveHandler(t)},dblclick:function(t){t=t||window.event,t=this._zrenderEventFixed(t);var e=this._lastHover;(e&&e.clickable||!e)&&this._clickThreshold<5&&this._dispatchAgency(e,c.Config.EVENT.DBLCLICK,t),this._mousemoveHandler(t)},mousewheel:function(t){var e=((t=this._zrenderEventFixed(t)).wheelDelta||-t.detail)>0?1.1:1/1.1,i=this.painter.getLayers(),n=!1;for(var r in i)if("hover"!==r){var o=i[r],s=o.position;if(o.zoomable){o.__zoom=o.__zoom||1;var a=o.__zoom;a*=e,e=(a=Math.max(Math.min(o.maxZoom,a),o.minZoom))/o.__zoom,o.__zoom=a,s[0]-=(this._mouseX-s[0])*(e-1),s[1]-=(this._mouseY-s[1])*(e-1),o.scale[0]*=e,o.scale[1]*=e,o.dirty=!0,n=!0}}n&&this.painter.refresh(),this._dispatchAgency(this._lastHover,c.Config.EVENT.MOUSEWHEEL,t),this._mousemoveHandler(t)},mousemove:function(t){this._clickThreshold++,t=this._zrenderEventFixed(t),this._lastX=this._mouseX,this._lastY=this._mouseY,this._mouseX=h.SUtil.Util_event.getX(t),this._mouseY=h.SUtil.Util_event.getY(t);var e=this._mouseX-this._lastX,i=this._mouseY-this._lastY;this._processDragStart(t),this._hasfound=0,this._event=t,this._iterateAndFindHover(),this._hasfound||((!this._draggingTarget||this._lastHover&&this._lastHover!=this._draggingTarget)&&(this._processOutShape(t),this._processDragLeave(t)),this._lastHover=null,this.storage.delHover(),this.painter.clearHover());var n="";if(this._draggingTarget)this.storage.drift(this._draggingTarget.id,e,i),this._draggingTarget.modSelf(),this.storage.addHover(this._draggingTarget);else if(this._isMouseDown){var r=this.painter.getLayers(),o=!1;for(var s in r)if("hover"!==s){var a=r[s];a.panable&&(n="move",a.position[0]+=e,a.position[1]+=i,o=!0,a.dirty=!0)}o&&this.painter.refresh()}this._draggingTarget||this._hasfound&&this._lastHover.draggable?n="move":this._hasfound&&this._lastHover.clickable&&(n="pointer"),this.root.style.cursor=n,this._dispatchAgency(this._lastHover,c.Config.EVENT.MOUSEMOVE,t),(this._draggingTarget||this._hasfound||this.storage.hasHoverShape())&&this.painter.refreshHover()},mouseout:function(t){var e=(t=this._zrenderEventFixed(t)).toElement||t.relatedTarget;if(e!=this.root)for(;e&&9!=e.nodeType;){if(e==this.root)return void this._mousemoveHandler(t);e=e.parentNode}t.zrenderX=this._lastX,t.zrenderY=this._lastY,this.root.style.cursor="",this._isMouseDown=0,this._processOutShape(t),this._processDrop(t),this._processDragEnd(t),this.painter.refreshHover(),this.dispatch(c.Config.EVENT.GLOBALOUT,t)},mousedown:function(t){if(this._clickThreshold=0,2==this._lastDownButton)return this._lastDownButton=t.button,void(this._mouseDownTarget=null);this._lastMouseDownMoment=new Date,t=this._zrenderEventFixed(t),this._isMouseDown=1,this._mouseDownTarget=this._lastHover,this._dispatchAgency(this._lastHover,c.Config.EVENT.MOUSEDOWN,t),this._lastDownButton=t.button},mouseup:function(t){t=this._zrenderEventFixed(t),this.root.style.cursor="",this._isMouseDown=0,this._mouseDownTarget=null,this._dispatchAgency(this._lastHover,c.Config.EVENT.MOUSEUP,t),this._processDrop(t),this._processDragEnd(t)},touchstart:function(t){t=this._zrenderEventFixed(t,!0),this._lastTouchMoment=new Date,this._mobildFindFixed(t),this._mousedownHandler(t)},touchmove:function(t){t=this._zrenderEventFixed(t,!0),this._mousemoveHandler(t),this._isDragging&&h.SUtil.Util_event.stop(t)},touchend:function(t){t=this._zrenderEventFixed(t,!0),this._mouseupHandler(t);var e=new Date;e-this._lastTouchMoment<c.Config.EVENT.touchClickDelay&&(this._mobildFindFixed(t),this._clickHandler(t),e-this._lastClickMoment<c.Config.EVENT.touchClickDelay/2&&(this._dblclickHandler(t),this._lastHover&&this._lastHover.clickable&&h.SUtil.Util_event.stop(t)),this._lastClickMoment=e),this.painter.clearHover()}};function f(t,e){return function(i){return t.call(e,i)}}return function(t){var e=["resize","click","dblclick","mousewheel","mousemove","mouseout","mouseup","mousedown","touchstart","touchend","touchmove"],i=e.length;for(;i--;){var n=e[i];t["_"+n+"Handler"]=f(d[n],t)}}(u),window.addEventListener?(window.addEventListener("resize",u._resizeHandler),h.SUtil.Util_env.os.tablet||h.SUtil.Util_env.os.phone?(t.addEventListener("touchstart",u._touchstartHandler),t.addEventListener("touchmove",u._touchmoveHandler),t.addEventListener("touchend",u._touchendHandler)):(t.addEventListener("click",u._clickHandler),t.addEventListener("dblclick",u._dblclickHandler),t.addEventListener("mousewheel",u._mousewheelHandler),t.addEventListener("mousemove",u._mousemoveHandler),t.addEventListener("mousedown",u._mousedownHandler),t.addEventListener("mouseup",u._mouseupHandler)),t.addEventListener("DOMMouseScroll",u._mousewheelHandler),t.addEventListener("mouseout",u._mouseoutHandler)):(window.attachEvent("onresize",u._resizeHandler),t.attachEvent("onclick",u._clickHandler),t.ondblclick=u._dblclickHandler,t.attachEvent("onmousewheel",u._mousewheelHandler),t.attachEvent("onmousemove",u._mousemoveHandler),t.attachEvent("onmouseout",u._mouseoutHandler),t.attachEvent("onmousedown",u._mousedownHandler),t.attachEvent("onmouseup",u._mouseupHandler)),u}return(0,a.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.dispose(),this._lastX=null,this._lastY=null,this._mouseX=null,this._mouseY=null,this._findHover=null,u.Eventful.prototype.destroy.apply(this,arguments)}},{key:"on",value:function(t,e){return this.bind(t,e),this}},{key:"un",value:function(t,e){return this.unbind(t,e),this}},{key:"trigger",value:function(t,e){var i=c.Config.EVENT;switch(t){case i.RESIZE:case i.CLICK:case i.DBLCLICK:case i.MOUSEWHEEL:case i.MOUSEMOVE:case i.MOUSEDOWN:case i.MOUSEUP:case i.MOUSEOUT:this["_"+t+"Handler"](e)}}},{key:"dispose",value:function(){var t=this.root;window.removeEventListener?(window.removeEventListener("resize",this._resizeHandler),h.SUtil.Util_env.os.tablet||h.SUtil.Util_env.os.phone?(t.removeEventListener("touchstart",this._touchstartHandler),t.removeEventListener("touchmove",this._touchmoveHandler),t.removeEventListener("touchend",this._touchendHandler)):(t.removeEventListener("click",this._clickHandler),t.removeEventListener("dblclick",this._dblclickHandler),t.removeEventListener("mousewheel",this._mousewheelHandler),t.removeEventListener("mousemove",this._mousemoveHandler),t.removeEventListener("mousedown",this._mousedownHandler),t.removeEventListener("mouseup",this._mouseupHandler)),t.removeEventListener("DOMMouseScroll",this._mousewheelHandler),t.removeEventListener("mouseout",this._mouseoutHandler)):(window.detachEvent("onresize",this._resizeHandler),t.detachEvent("onclick",this._clickHandler),t.detachEvent("dblclick",this._dblclickHandler),t.detachEvent("onmousewheel",this._mousewheelHandler),t.detachEvent("onmousemove",this._mousemoveHandler),t.detachEvent("onmouseout",this._mouseoutHandler),t.detachEvent("onmousedown",this._mousedownHandler),t.detachEvent("onmouseup",this._mouseupHandler)),this.root=null,this._domHover=null,this.storage=null,this.painter=null,this.un()}},{key:"_processDragStart",value:function(t){var e=this._lastHover;if(this._isMouseDown&&e&&e.draggable&&!this._draggingTarget&&this._mouseDownTarget==e){if(e.dragEnableTime&&new Date-this._lastMouseDownMoment<e.dragEnableTime)return;var i=e;this._draggingTarget=i,this._isDragging=1,i.invisible=!0,this.storage.mod(i.id),this._dispatchAgency(i,c.Config.EVENT.DRAGSTART,t),this.painter.refresh()}}},{key:"_processDragEnter",value:function(t){this._draggingTarget&&this._dispatchAgency(this._lastHover,c.Config.EVENT.DRAGENTER,t,this._draggingTarget)}},{key:"_processDragOver",value:function(t){this._draggingTarget&&this._dispatchAgency(this._lastHover,c.Config.EVENT.DRAGOVER,t,this._draggingTarget)}},{key:"_processDragLeave",value:function(t){this._draggingTarget&&this._dispatchAgency(this._lastHover,c.Config.EVENT.DRAGLEAVE,t,this._draggingTarget)}},{key:"_processDrop",value:function(t){this._draggingTarget&&(this._draggingTarget.invisible=!1,this.storage.mod(this._draggingTarget.id),this.painter.refresh(),this._dispatchAgency(this._lastHover,c.Config.EVENT.DROP,t,this._draggingTarget))}},{key:"_processDragEnd",value:function(t){this._draggingTarget&&(this._dispatchAgency(this._draggingTarget,c.Config.EVENT.DRAGEND,t),this._lastHover=null),this._isDragging=0,this._draggingTarget=null}},{key:"_processOverShape",value:function(t){this._dispatchAgency(this._lastHover,c.Config.EVENT.MOUSEOVER,t)}},{key:"_processOutShape",value:function(t){this._dispatchAgency(this._lastHover,c.Config.EVENT.MOUSEOUT,t)}},{key:"_dispatchAgency",value:function(t,e,i,n){var r="on"+e,o={type:e,event:i,target:t,cancelBubble:!1},s=t;for(n&&(o.dragged=n);s&&(s[r]&&(o.cancelBubble=s[r](o)),s.dispatch(e,o),s=s.parent,!o.cancelBubble););t?o.cancelBubble||this.dispatch(e,o):n||this.dispatch(e,{type:e,event:i})}},{key:"_iterateAndFindHover",value:function(){for(var t,e=h.SUtil.Util_matrix.create(),i=this.storage.getShapeList(),n=[0,0],r=i.length-1;r>=0;r--){var o=i[r];if(void 0!==o.zlevel&&(t=this.painter.getLayer(o.zlevel,t),n[0]=this._mouseX,n[1]=this._mouseY,t.needTransform&&(h.SUtil.Util_matrix.invert(e,t.transform),h.SUtil.Util_vector.applyTransform(n,n,e))),this._findHover(o,n[0],n[1]))break}}},{key:"_mobildFindFixed",value:function(t){var e=[{x:10},{x:-20},{x:10,y:10},{y:-20}];this._lastHover=null,this._mouseX=t.zrenderX,this._mouseY=t.zrenderY,this._event=t,this._iterateAndFindHover();for(var i=0;!this._lastHover&&i<e.length;i++){var n=e[i];n.x&&(this._mouseX+=n.x),n.y&&(this._mouseX+=n.y),this._iterateAndFindHover()}this._lastHover&&(t.zrenderX=this._mouseX,t.zrenderY=this._mouseY)}},{key:"_zrenderEventFixed",value:function(t,e){if(t.zrenderFixed)return t;if(e){var i="touchend"!=t.type?t.targetTouches[0]:t.changedTouches[0];if(i){var n=this.root.getBoundingClientRect();t.zrenderX=i.clientX-n.left,t.zrenderY=i.clientY-n.top}}else{var r=(t=t||window.event).toElement||t.relatedTarget||t.srcElement||t.target;r&&r!=this._domHover&&(t.zrenderX=(void 0!==t.offsetX?t.offsetX:t.layerX)+r.offsetLeft,t.zrenderY=(void 0!==t.offsetY?t.offsetY:t.layerY)+r.offsetTop)}return t.zrenderFixed=1,t}},{key:"getLastHoverOne",value:function(){return this._lastHover?this._lastHover:null}}]),e}(u.Eventful);e.Handler=f,l.Zondy.LevelRenderer.Handler=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Animator=e.Animation=void 0;var n=g(i(136)),r=g(i(13)),o=g(i(8)),s=g(i(20)),a=g(i(16)),l=g(i(17)),u=i(6),c=i(21),h=i(194),d=i(220),f=i(398),p=i(116);function g(t){return t&&t.__esModule?t:{default:t}}var y=function(t){function e(t){(0,o.default)(this,e);var i=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t));return t=t||{},i.stage={},i.onframe=function(){},i._clips=[],i._running=!1,i._time=0,(0,c.extend)(i,t),i.CLASS_NAME="Zondy.LevelRenderer.Animation",i}return(0,l.default)(e,t),(0,s.default)(e,[{key:"add",value:function(t){this._clips.push(t)}},{key:"remove",value:function(t){var e=(new h.Util).indexOf(this._clips,t);e>=0&&this._clips.splice(e,1)}},{key:"_update",value:function(){for(var t=(new Date).getTime(),e=t-this._time,i=this._clips,n=i.length,r=[],o=[],s=0;s<n;s++){var a=i[s],l=a.step(t);l&&(r.push(l),o.push(a))}this.stage.update&&this.stage.update();for(var u=0;u<n;)i[u]._needsRemove?(i[u]=i[n-1],i.pop(),n--):u++;n=r.length;for(var c=0;c<n;c++)o[c].fire(r[c]);this._time=t,this.onframe(e),this.dispatch("frame",e)}},{key:"start",value:function(){var t=window.requestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(t){setTimeout(t,16)},e=this;this._running=!0,this._time=(new Date).getTime(),t(function i(){e._running&&(e._update(),t(i))})}},{key:"stop",value:function(){this._running=!1}},{key:"clear",value:function(){this._clips=[]}},{key:"animate",value:function(t,e){var i=new m(t,(e=e||{}).loop,e.getter,e.setter);return i.animation=this,i}}],[{key:"_interpolateNumber",value:function(t,e,i){return(e-t)*i+t}},{key:"_interpolateArray",value:function(t,i,n,r,o){var s=t.length;if(1==o)for(var a=0;a<s;a++)r[a]=e._interpolateNumber(t[a],i[a],n);else for(var l=t[0].length,u=0;u<s;u++)for(var c=0;c<l;c++)r[u][c]=e._interpolateNumber(t[u][c],i[u][c],n)}},{key:"_isArrayLike",value:function(t){switch(void 0===t?"undefined":(0,n.default)(t)){case"undefined":case"string":return!1}return void 0!==t.length}},{key:"_catmullRomInterpolateArray",value:function(t,i,n,r,o,s,a,l,u){var c=t.length;if(1==u)for(var h=0;h<c;h++)l[h]=e._catmullRomInterpolate(t[h],i[h],n[h],r[h],o,s,a);else for(var d=t[0].length,f=0;f<c;f++)for(var p=0;p<d;p++)l[f][p]=e._catmullRomInterpolate(t[f][p],i[f][p],n[f][p],r[f][p],o,s,a)}},{key:"_catmullRomInterpolate",value:function(t,e,i,n,r,o,s){var a=.5*(i-t),l=.5*(n-e);return(2*(e-i)+a+l)*s+(-3*(e-i)-2*a-l)*o+a*r+e}},{key:"_cloneValue",value:function(t){var i=Array.prototype.slice;if(e._isArrayLike(t)){var n=t.length;if(e._isArrayLike(t[0])){for(var r=[],o=0;o<n;o++)r.push(i.call(t[o]));return r}return i.call(t)}return t}},{key:"rgba2String",value:function(t){return t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.floor(t[2]),"rgba("+t.join(",")+")"}}]),e}(d.Eventful),m=function(){function t(e,i,n,r){(0,o.default)(this,t),this._tracks={},this._target=e,this._loop=i||!1,this._getter=n||function(t,e){return t[e]},this._setter=r||function(t,e,i){t[e]=i},this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[],this.CLASS_NAME="Zondy.LevelRenderer.Animation.Animator"}return(0,s.default)(t,[{key:"when",value:function(t,e){for(var i in e)this._tracks[i]||(this._tracks[i]=[],0!==t&&this._tracks[i].push({time:0,value:y._cloneValue(this._getter(this._target,i))})),this._tracks[i].push({time:parseInt(t,10),value:e[i]});return this}},{key:"during",value:function(t){return this._onframeList.push(t),this}},{key:"start",value:function(t){var e=this,i=this._setter,n=this._getter,r=e._onframeList.length,o="spline"===t,s=function(){if(e._clipCount--,0===e._clipCount){e._tracks={};for(var t=e._doneList.length,i=0;i<t;i++)e._doneList[i].call(e)}},a=function(a,l){var u=a.length;if(u){var c=a[0].value,h=y._isArrayLike(c),d=!1,g=h&&y._isArrayLike(c[0])?2:1;a.sort(function(t,e){return t.time-e.time});for(var m=a[u-1].time,_=[],v=[],b=0;b<u;b++){_.push(a[b].time/m);var S=a[b].value;"string"==typeof S&&(0===(S=p.SUtil.Util_color.toArray(S)).length&&(S[0]=S[1]=S[2]=0,S[3]=1),d=!0),v.push(S)}var O,C,x,T,E,P,j,w=0,I=0;if(d)var L=[0,0,0,0];var R=new f.Clip({target:e._target,life:m,loop:e._loop,delay:e._delay,onframe:function(t,s){if(s<I){for(O=Math.min(w+1,u-1),C=O;C>=0&&!(_[C]<=s);C--);C=Math.min(C,u-2)}else{for(C=w;C<u&&!(_[C]>s);C++);C=Math.min(C-1,u-2)}w=C,I=s;var a=_[C+1]-_[C];if(0!==a){if(x=(s-_[C])/a,o)if(E=v[C],T=v[0===C?C:C-1],P=v[C>u-2?u-1:C+1],j=v[C>u-3?u-1:C+2],h)y._catmullRomInterpolateArray(T,E,P,j,x,x*x,x*x*x,n(t,l),g);else{var c=void 0;c=d?y.rgba2String(L):y._catmullRomInterpolate(T,E,P,j,x,x*x,x*x*x),i(t,l,c)}else if(h)y._interpolateArray(v[C],v[C+1],x,n(t,l),g);else{var f=void 0;d?(y._interpolateArray(v[C],v[C+1],x,L,1),f=y.rgba2String(L)):f=y._interpolateNumber(v[C],v[C+1],x),i(t,l,f)}for(C=0;C<r;C++)e._onframeList[C](t,s)}},ondestroy:s});t&&"spline"!==t&&(R.easing=t),e._clipList.push(R),e._clipCount++,e.animation.add(R)}};for(var l in this._tracks)a(this._tracks[l],l);return this}},{key:"stop",value:function(){for(var t=0;t<this._clipList.length;t++){var e=this._clipList[t];this.animation.remove(e)}this._clipList=[]}},{key:"delay",value:function(t){return this._delay=t,this}},{key:"done",value:function(t){return t&&this._doneList.push(t),this}}]),t}();e.Animation=y,u.Zondy.LevelRenderer.Animation=y,e.Animator=m,u.Zondy.LevelRenderer.Animation.Animator=m},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Clip=void 0;var n=a(i(8)),r=a(i(20)),o=i(6),s=i(399);function a(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(e){(0,n.default)(this,t),this._targetPool=e.target||{},this._targetPool instanceof Array||(this._targetPool=[this._targetPool]),this._life=e.life||1e3,this._delay=e.delay||0,this._startTime=(new Date).getTime()+this._delay,this._endTime=this._startTime+1e3*this._life,this.loop=void 0!==e.loop&&e.loop,this.gap=e.gap||0,this.easing=e.easing||"Linear",this.onframe=e.onframe,this.ondestroy=e.ondestroy,this.onrestart=e.onrestart,this.CLASS_NAME="Zondy.LevelRenderer.Animation.Clip"}return(0,r.default)(t,[{key:"destroy",value:function(){}},{key:"step",value:function(t){var e=new s.Easing,i=(t-this._startTime)/this._life;if(!(i<0)){i=Math.min(i,1);var n="string"==typeof this.easing?e[this.easing]:this.easing,r="function"==typeof n?n(i):i;return this.fire("frame",r),1==i?this.loop?(this.restart(),"restart"):(this._needsRemove=!0,"destroy"):null}}},{key:"restart",value:function(){var t=((new Date).getTime()-this._startTime)%this._life;this._startTime=(new Date).getTime()-t+this.gap}},{key:"fire",value:function(t,e){for(var i=0,n=this._targetPool.length;i<n;i++)this["on"+t]&&this["on"+t](this._targetPool[i],e)}}]),t}();e.Clip=l,o.Zondy.LevelRenderer.Animation.Clip=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Easing=void 0;var n=s(i(8)),r=s(i(20)),o=i(6);function s(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(){(0,n.default)(this,t),this.CLASS_NAME="Zondy.LevelRenderer.Animation.easing"}return(0,r.default)(t,[{key:"destroy",value:function(){}},{key:"Linear",value:function(t){return t}},{key:"QuadraticIn",value:function(t){return t*t}},{key:"QuadraticOut",value:function(t){return t*(2-t)}},{key:"QuadraticInOut",value:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},{key:"CubicIn",value:function(t){return t*t*t}},{key:"CubicOut",value:function(t){return--t*t*t+1}},{key:"CubicInOut",value:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},{key:"QuarticIn",value:function(t){return t*t*t*t}},{key:"QuarticOut",value:function(t){return 1- --t*t*t*t}},{key:"QuarticInOut",value:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},{key:"QuinticIn",value:function(t){return t*t*t*t*t}},{key:"QuinticOut",value:function(t){return--t*t*t*t*t+1}},{key:"QuinticInOut",value:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},{key:"SinusoidalIn",value:function(t){return 1-Math.cos(t*Math.PI/2)}},{key:"SinusoidalOut",value:function(t){return Math.sin(t*Math.PI/2)}},{key:"SinusoidalInOut",value:function(t){return.5*(1-Math.cos(Math.PI*t))}},{key:"ExponentialIn",value:function(t){return 0===t?0:Math.pow(1024,t-1)}},{key:"ExponentialOut",value:function(t){return 1===t?1:1-Math.pow(2,-10*t)}},{key:"ExponentialInOut",value:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},{key:"CircularIn",value:function(t){return 1-Math.sqrt(1-t*t)}},{key:"CircularOut",value:function(t){return Math.sqrt(1- --t*t)}},{key:"CircularInOut",value:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},{key:"ElasticIn",value:function(t){var e,i=.1;return 0===t?0:1===t?1:(!i||i<1?(i=1,e=.1):e=.4*Math.asin(1/i)/(2*Math.PI),-i*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4))}},{key:"ElasticOut",value:function(t){var e,i=.1;return 0===t?0:1===t?1:(!i||i<1?(i=1,e=.1):e=.4*Math.asin(1/i)/(2*Math.PI),i*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/.4)+1)}},{key:"ElasticInOut",value:function(t){var e,i=.1;return 0===t?0:1===t?1:(!i||i<1?(i=1,e=.1):e=.4*Math.asin(1/i)/(2*Math.PI),(t*=2)<1?i*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*-.5:i*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*.5+1)}},{key:"BackIn",value:function(t){var e=1.70158;return t*t*((e+1)*t-e)}},{key:"BackOut",value:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1}},{key:"BackInOut",value:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},{key:"BounceIn",value:function(t){return 1-this.BounceOut(1-t)}},{key:"BounceOut",value:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},{key:"BounceInOut",value:function(t){return t<.5?.5*this.BounceIn(2*t):.5*this.BounceOut(2*t-1)+.5}}]),t}();e.Easing=a,o.Zondy.LevelRenderer.Animation.Easing=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Rectangle=void 0;var n=c(i(13)),r=c(i(8)),o=c(i(20)),s=c(i(16)),a=c(i(46)),l=c(i(17)),u=i(6);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t,i,o,a){(0,r.default)(this,e);var l=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,i,o,a));return l.x=isNaN(t)?0:t,l.y=isNaN(t)?0:i,l.width=isNaN(o)?0:o,l.height=isNaN(a)?0:a,l.CLASS_NAME="Zondy.Feature.ShapeParameters.Rectangle",l}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.x=null,this.y=null,this.width=null,this.height=null,(0,a.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"destroy",this).call(this)}}]),e}(i(147).ShapeParameters);e.Rectangle=h,u.Zondy.Feature.ShapeParameters.Rectangle=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Label=void 0;var n=c(i(13)),r=c(i(8)),o=c(i(20)),s=c(i(16)),a=c(i(46)),l=c(i(17)),u=i(6);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t,i,o){(0,r.default)(this,e);var a=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,i,o));return a.x=t,a.y=i,a.text=o,a.CLASS_NAME="Zondy.Feature.ShapeParameters.Label",a}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.x=null,this.y=null,this.text=null,(0,a.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"destroy",this).call(this)}}]),e}(i(147).ShapeParameters);e.Label=h,u.Zondy.Feature.ShapeParameters.Label=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Image=void 0;var n=c(i(13)),r=c(i(8)),o=c(i(20)),s=c(i(16)),a=c(i(46)),l=c(i(17)),u=i(6);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t,i,o,a,l,u,c,h,d){(0,r.default)(this,e);var f=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,i,o,a,l,u,c,h,d));return f.x=t,f.y=i,f.image=o,f.width=a,f.height=l,f.sx=u,f.sy=c,f.sWidth=h,f.sHeight=d,f.CLASS_NAME="Zondy.Feature.ShapeParameters.Image",f}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.x=null,this.y=null,this.image=null,this.width=null,this.height=null,this.sx=null,this.sy=null,this.sWidth=null,this.sHeight=null,(0,a.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"destroy",this).call(this)}}]),e}(i(147).ShapeParameters);e.Image=h,u.Zondy.Feature.ShapeParameters.Image=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicText=void 0;var n=d(i(13)),r=d(i(8)),o=d(i(20)),s=d(i(16)),a=d(i(46)),l=d(i(17)),u=i(6),c=i(107),h=i(116);function d(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t){(0,r.default)(this,e);var i=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t));return i.type="smictext",i.refOriginalPosition&&2===i.refOriginalPosition.length||(i.refOriginalPosition=[0,0]),i.CLASS_NAME="Zondy.LevelRenderer.SmicText",i}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.type=null,(0,a.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"destroy",this).call(this)}},{key:"brush",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var i=this.refOriginalPosition,n=this.style;if(e&&(n=this.getHighlightStyle(n,this.highlightStyle||{})),void 0!==n.text&&!1!==n.text){t.save(),this.doClip(t),this.setContext(t,n),this.setTransform(t),n.textFont&&(t.font=n.textFont),t.textAlign=n.textAlign||"start",t.textBaseline=n.textBaseline||"middle";var r,o=(n.text+"").split("\n"),s=h.SUtil.Util_area.getTextHeight("ZH",n.textFont),a=this.getRectNoRotation(n),l=n.x+i[0];r="top"==n.textBaseline?a.y:"bottom"==n.textBaseline?a.y+s:a.y+s/2;for(var u=n.x+i[0],c=n.y+i[1],d=0,f=o.length;d<f;d++){switch(n.labelRect&&(t.fillRect(a.x-2,a.y,a.width+4,a.height),t.fillStyle=n.strokeColor,t.strokeRect(a.x-2,a.y,a.width+4,a.height),t.fillStyle=n.textColor),n.brushType){case"stroke":this.setCtxGlobalAlpha(t,"stroke",n),n.textRotation&&0!==n.textRotation?(t.save(),t.translate(u,c),t.rotate(n.textRotation*Math.PI/180),"top"==n.textBaseline?n.maxWidth?t.strokeText(o[d],0,s*d,n.maxWidth):t.strokeText(o[d],0,s*d):"bottom"==n.textBaseline?n.maxWidth?t.strokeText(o[d],0,s*(d+1)-a.height,n.maxWidth):t.strokeText(o[d],0,s*(d+1)-a.height):n.maxWidth?t.strokeText(o[d],0,s*(d+1)-a.height/2-s/2,n.maxWidth):t.strokeText(o[d],0,s*(d+1)-a.height/2-s/2),t.restore()):n.maxWidth?t.strokeText(o[d],l,r,n.maxWidth):t.strokeText(o[d],l,r),this.setCtxGlobalAlpha(t,"reset",n);break;case"both":n.textRotation&&0!==n.textRotation?(t.save(),t.translate(u,c),t.rotate(n.textRotation*Math.PI/180),"top"==n.textBaseline?n.maxWidth?(this.setCtxGlobalAlpha(t,"fill",n),t.fillText(o[d],0,s*d,n.maxWidth),this.setCtxGlobalAlpha(t,"reset",n),this.setCtxGlobalAlpha(t,"stroke",n),t.strokeText(o[d],0,s*d,n.maxWidth),this.setCtxGlobalAlpha(t,"reset",n)):(this.setCtxGlobalAlpha(t,"fill",n),t.fillText(o[d],0,s*d),this.setCtxGlobalAlpha(t,"reset",n),this.setCtxGlobalAlpha(t,"stroke",n),t.strokeText(o[d],0,s*d),this.setCtxGlobalAlpha(t,"reset",n)):"bottom"==n.textBaseline?n.maxWidth?(this.setCtxGlobalAlpha(t,"fill",n),t.fillText(o[d],0,s*(d+1)-a.height,n.maxWidth),this.setCtxGlobalAlpha(t,"reset",n),this.setCtxGlobalAlpha(t,"stroke",n),t.strokeText(o[d],0,s*(d+1)-a.height,n.maxWidth),this.setCtxGlobalAlpha(t,"reset",n)):(this.setCtxGlobalAlpha(t,"fill",n),t.fillText(o[d],0,s*(d+1)-a.height),this.setCtxGlobalAlpha(t,"reset",n),this.setCtxGlobalAlpha(t,"stroke",n),t.strokeText(o[d],0,s*(d+1)-a.height),this.setCtxGlobalAlpha(t,"reset",n)):n.maxWidth?(this.setCtxGlobalAlpha(t,"fill",n),t.fillText(o[d],0,s*(d+1)-a.height/2-s/2,n.maxWidth),this.setCtxGlobalAlpha(t,"reset",n),this.setCtxGlobalAlpha(t,"stroke",n),t.strokeText(o[d],0,s*(d+1)-a.height/2-s/2,n.maxWidth),this.setCtxGlobalAlpha(t,"reset",n)):(this.setCtxGlobalAlpha(t,"fill",n),t.fillText(o[d],0,s*(d+1)-a.height/2-s/2),this.setCtxGlobalAlpha(t,"reset",n),this.setCtxGlobalAlpha(t,"stroke",n),t.strokeText(o[d],0,s*(d+1)-a.height/2-s/2),this.setCtxGlobalAlpha(t,"reset",n)),t.restore()):n.maxWidth?(this.setCtxGlobalAlpha(t,"fill",n),t.fillText(o[d],l,r,n.maxWidth),this.setCtxGlobalAlpha(t,"reset",n),this.setCtxGlobalAlpha(t,"stroke",n),t.strokeText(o[d],l,r,n.maxWidth),this.setCtxGlobalAlpha(t,"reset",n)):(this.setCtxGlobalAlpha(t,"fill",n),t.fillText(o[d],l,r),this.setCtxGlobalAlpha(t,"reset",n),this.setCtxGlobalAlpha(t,"stroke",n),t.strokeText(o[d],l,r),this.setCtxGlobalAlpha(t,"reset",n));break;default:this.setCtxGlobalAlpha(t,"fill",n),n.textRotation&&0!==n.textRotation?(t.save(),t.translate(u,c),t.rotate(n.textRotation*Math.PI/180),"top"==n.textBaseline?n.maxWidth?t.fillText(o[d],0,s*d,n.maxWidth):t.fillText(o[d],0,s*d):"bottom"==n.textBaseline?n.maxWidth?t.fillText(o[d],0,s*(d+1)-a.height,n.maxWidth):t.fillText(o[d],0,s*(d+1)-a.height):n.maxWidth?t.fillText(o[d],0,s*(d+1)-a.height/2-s/2,n.maxWidth):t.fillText(o[d],0,s*(d+1)-a.height/2-s/2),t.restore()):n.maxWidth?t.fillText(o[d],l,r,n.maxWidth):t.fillText(o[d],l,r),this.setCtxGlobalAlpha(t,"reset",n)}r+=s}t.restore()}}},{key:"getRect",value:function(t){if(t.__rect)return t.__rect;for(var e,i,n,r,o=this.getTextBackground(t,!0),s=0,a=o.length;s<a;s++){var l=o[s];0==s?(e=l[0],n=l[0],i=l[1],r=l[1]):(l[0]<e&&(e=l[0]),l[0]>n&&(n=l[0]),l[1]<i&&(i=l[1]),l[1]>r&&(r=l[1]))}return t.__rect={x:e,y:i,width:n-e,height:r-i},t.__rect}},{key:"getRectNoRotation",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,i=this.refOriginalPosition,n=h.SUtil.Util_area.getTextHeight("ZH",t.textFont),r=h.SUtil.Util_area.getTextWidth(t.text,t.textFont),o=h.SUtil.Util_area.getTextHeight(t.text,t.textFont),s=t.x+i[0];"end"==t.textAlign||"right"==t.textAlign?s-=r:"center"==t.textAlign&&(s-=r/2),e="top"==t.textBaseline?t.y+i[1]:"bottom"==t.textBaseline?t.y+i[1]-o:t.y+i[1]-o/2;var a,l=!1;if(t.maxWidth){var u=parseInt(t.maxWidth);u<r&&(a=r,l=!0,r=u),s=t.x+i[0],"end"==t.textAlign||"right"==t.textAlign?s-=r:"center"==t.textAlign&&(s-=r/2)}t.textFont&&(t.textFont.toLowerCase().indexOf("italic")>-1&&(r+=a&&!0===l?n/3*(r/a):n/3));return{x:s,y:e,width:r,height:o}}},{key:"getTextBackground",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var i=this.refOriginalPosition;if((!e||!1===e)&&t.__textBackground)return t.__textBackground;var n=this.getRectNoRotation(t),r=t.x+i[0],o=t.y+i[1],s=[];if(t.textRotation&&0!==t.textRotation){var a=t.textRotation,l=this.getRotatedLocation(n.x,n.y,r,o,a),u=this.getRotatedLocation(n.x+n.width,n.y,r,o,a),c=this.getRotatedLocation(n.x+n.width,n.y+n.height,r,o,a),h=this.getRotatedLocation(n.x,n.y+n.height,r,o,a);s.push(l),s.push(u),s.push(c),s.push(h)}else{var d=[n.x,n.y],f=[n.x+n.width,n.y],p=[n.x+n.width,n.y+n.height],g=[n.x,n.y+n.height];s.push(d),s.push(f),s.push(p),s.push(g)}return t.__textBackground=s,t.__textBackground}},{key:"getRotatedLocation",value:function(t,e,i,n,r){var o,s,a=new Array;return e=-e,n=-n,r=-r,o=(t-i)*Math.cos(r/180*Math.PI)-(e-n)*Math.sin(r/180*Math.PI)+i,s=(t-i)*Math.sin(r/180*Math.PI)+(e-n)*Math.cos(r/180*Math.PI)+n,a[0]=o,a[1]=-s,a}}]),e}(c.Shape);e.SmicText=f,u.Zondy.LevelRenderer.SmicText=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicCircle=void 0;var n=c(i(13)),r=c(i(8)),o=c(i(20)),s=c(i(16)),a=c(i(46)),l=c(i(17)),u=i(6);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){(0,r.default)(this,e);var i=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t));return i.type="smiccircle",i.refOriginalPosition&&2===i.refOriginalPosition.length||(i.refOriginalPosition=[0,0]),i.CLASS_NAME="Zondy.LevelRenderer.SmicCircle",i}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.type=null,(0,a.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var i=this.refOriginalPosition,n=e.x+i[0],r=e.y+i[1];return t.moveTo(n+e.r,r),t.arc(n,r,e.r,0,2*Math.PI,!0),!0}},{key:"getRect",value:function(t){if(t.__rect)return t.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,i=this.refOriginalPosition,n=t.x+i[0],r=t.y+i[1],o=t.r;return e="stroke"==t.brushType||"fill"==t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(n-o-e/2),y:Math.round(r-o-e/2),width:2*o+e,height:2*o+e},t.__rect}}]),e}(i(107).Shape);e.SmicCircle=h,u.Zondy.LevelRenderer.SmicCircle=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicRectangle=void 0;var n=c(i(13)),r=c(i(8)),o=c(i(20)),s=c(i(16)),a=c(i(46)),l=c(i(17)),u=i(6);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){(0,r.default)(this,e);var i=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t));return i.type="smicrectangle",i.refOriginalPosition&&2===i.refOriginalPosition.length||(i.refOriginalPosition=[0,0]),i.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicRectangle",i}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.type=null,(0,a.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"destroy",this).call(this)}},{key:"_buildRadiusPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var i,n,r,o,s,a=this.refOriginalPosition,l=e.x+a[0],u=e.y+a[1],c=e.width,h=e.height,d=e.radius;"number"==typeof d?i=n=r=o=d:d instanceof Array?1===d.length?i=n=r=o=d[0]:2===d.length?(i=r=d[0],n=o=d[1]):3===d.length?(i=d[0],n=o=d[1],r=d[2]):(i=d[0],n=d[1],r=d[2],o=d[3]):i=n=r=o=0,i+n>c&&(i*=c/(s=i+n),n*=c/s),r+o>c&&(r*=c/(s=r+o),o*=c/s),n+r>h&&(n*=h/(s=n+r),r*=h/s),i+o>h&&(i*=h/(s=i+o),o*=h/s),t.moveTo(l+i,u),t.lineTo(l+c-n,u),0!==n&&t.quadraticCurveTo(l+c,u,l+c,u+n),t.lineTo(l+c,u+h-r),0!==r&&t.quadraticCurveTo(l+c,u+h,l+c-r,u+h),t.lineTo(l+o,u+h),0!==o&&t.quadraticCurveTo(l,u+h,l,u+h-o),t.lineTo(l,u+i),0!==i&&t.quadraticCurveTo(l,u,l+i,u)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var i=this.refOriginalPosition;e.radius?this._buildRadiusPath(t,e):(t.moveTo(e.x+i[0],e.y+i[1]),t.lineTo(e.x+i[0]+e.width,e.y+i[1]),t.lineTo(e.x+i[0]+e.width,e.y+i[1]+e.height),t.lineTo(e.x+i[0],e.y+i[1]+e.height),t.lineTo(e.x+i[0],e.y+i[1])),t.closePath()}},{key:"getRect",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,i=this.refOriginalPosition;return t.__rect?t.__rect:(e="stroke"==t.brushType||"fill"==t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(t.x+i[0]-e/2),y:Math.round(t.y+i[1]-e/2),width:t.width+e,height:t.height+e},t.__rect)}}]),e}(i(107).Shape);e.SmicRectangle=h,u.Zondy.LevelRenderer.SmicRectangle=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicSector=void 0;var n=d(i(13)),r=d(i(8)),o=d(i(20)),s=d(i(16)),a=d(i(46)),l=d(i(17)),u=i(6),c=i(107),h=i(116);function d(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t){(0,r.default)(this,e);var i=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t));return i.type="smicsector",i.refOriginalPosition&&2===i.refOriginalPosition.length||(i.refOriginalPosition=[0,0]),i.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicSector",i}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.type=null,(0,a.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var i=this.refOriginalPosition,n=e.x+i[0],r=e.y+i[1],o=e.r0||0,s=e.r,a=e.startAngle,l=e.endAngle,u=e.clockWise||!1;a=h.SUtil.Util_math.degreeToRadian(a),l=h.SUtil.Util_math.degreeToRadian(l),u||(a=-a,l=-l);var c=h.SUtil.Util_math.cos(a),d=h.SUtil.Util_math.sin(a);t.moveTo(c*o+n,d*o+r),t.lineTo(c*s+n,d*s+r),t.arc(n,r,s,a,l,!u),t.lineTo(h.SUtil.Util_math.cos(l)*o+n,h.SUtil.Util_math.sin(l)*o+r),0!==o&&t.arc(n,r,o,l,a,u),t.closePath()}},{key:"getRect",value:function(t){if(t.__rect)return t.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e=this.refOriginalPosition,i=h.SUtil.Util_vector.create(),n=h.SUtil.Util_vector.create(),r=h.SUtil.Util_vector.create(),o=h.SUtil.Util_vector.create(),s=t.x+e[0],a=t.y+e[1],l=t.r0||0,u=t.r,c=h.SUtil.Util_math.degreeToRadian(t.startAngle),d=h.SUtil.Util_math.degreeToRadian(t.endAngle),f=t.clockWise;return f||(c=-c,d=-d),l>1?h.SUtil.Util_computeBoundingBox.arc(s,a,l,c,d,!f,i,r):(i[0]=r[0]=s,i[1]=r[1]=a),h.SUtil.Util_computeBoundingBox.arc(s,a,u,c,d,!f,n,o),h.SUtil.Util_vector.min(i,i,n),h.SUtil.Util_vector.max(r,r,o),t.__rect={x:i[0],y:i[1],width:r[0]-i[0],height:r[1]-i[1]},t.__rect}}]),e}(c.Shape);e.SmicSector=f,u.Zondy.LevelRenderer.SmicSector=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Feature=void 0;var n=i(6),r=i(21),o=i(196),s=(i(315),i(109),i(408)),a=function(t){var e=void 0!==t?t:{};(0,r.extend)(this,e),this.AttValue=void 0!==e.AttValue&&null!=e.AttValue?e.AttValue:null,this.FID=void 0!==e.FID&&null!=e.FID?e.FID:0,this.bound=void 0!==e.bound&&null!=e.bound?e.bound:null,this.fGeom=void 0!==e.fGeom&&null!=e.fGeom?e.fGeom:null,this.ftype=void 0!==e.ftype&&null!=e.ftype?e.ftype:0,this.GraphicInfo=void 0!==e.GraphicInfo&&null!=e.GraphicInfo?e.GraphicInfo:null};a.prototype.getAttValue=function(t){if(null===this.AttValue)return null;var e=this.AttValue.length;return"number"==typeof t?t>=e?null:this.AttValue[t]:void 0},a.prototype.getGraphicInfo=function(){return null===this.GraphicInfo?null:new s.WebGraphicsInfo(this.GraphicInfo)},a.prototype.getAttValueArray=function(){return this.AttValue},a.prototype.getRectBound=function(){var t=this.bound;return null!=t?new o.Rectangle(t):t},a.prototype.getGeometry=function(){return this.fGeom},a.prototype.getFID=function(){return this.FID},a.prototype.setAttValues=function(t){this.AttValue=t},a.prototype.setBound=function(t){var e=null;"string"==typeof t&&(e=new o.Rectangle(t)),t instanceof String&&(e=new o.Rectangle(t)),t instanceof o.Rectangle&&(e=t),t instanceof ol.extent&&(e=new o.Rectangle).setByOL(t),this.bound=e},a.prototype.setFID=function(t){this.FID=t},a.prototype.setFType=function(t){this.ftype=t},a.prototype.destroy=function(){this.AttValue=null,this.FID=null,this.bound=null,this.fGeom=null,this.ftype=null,this.GraphicInfo=null},e.Feature=a,n.Zondy.Object.Feature=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WebGraphicsInfo=void 0;var n=i(6),r=i(21),o=(i(109),i(320),i(260),i(321),function(t){var e=void 0!==t?t:{};(0,r.extend)(this,e),this.InfoType=void 0!==e.InfoType&&null!=e.InfoType?e.InfoType:0,this.PntInfo=void 0!==e.PntInfo&&null!=e.PntInfo?e.PntInfo:null,this.LinInfo=void 0!==e.LinInfo&&null!=e.LinInfo?e.LinInfo:null,this.RegInfo=void 0!==e.RegInfo&&null!=e.RegInfo?e.RegInfo:null});e.WebGraphicsInfo=o,n.Zondy.Object.WebGraphicsInfo=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.graphThemeLayer=e.GraphThemeLayer=e.CGraphThemeSource=void 0;var n=_(i(13)),r=_(i(8)),o=_(i(20)),s=_(i(16)),a=_(i(17)),l=i(6),u=i(383),c=i(195),h=i(100),d=i(21),f=i(184),p=i(196),g=_(i(28)),y=_(i(149)),m=i(1);function _(t){return t&&t.__esModule?t:{default:t}}var v=function(t){function e(t,i,o){(0,r.default)(this,e);var a=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,o));return a.chartsType=i,a.themeFields=o&&o.themeFields?o.themeFields:null,a.charts=o&&o.charts?o.charts:[],a.cache=o&&o.cache?o.cache:{},a.chartsSetting=o&&o.chartsSetting?o.chartsSetting:{},a.options={isOverLay:!0,fitZoom:-1,isHoverAble:void 0===o.isHoverAble||opt_options.isHoverAble,calGravity:!1},(0,d.copy)(a.options,o),a}return(0,a.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){u.CThemeSource.prototype.destroy.apply(this,arguments),this.chartsType=null,this.chartsSetting=null,this.themeFields=null,this.overlayWeightField=null,this.options={isOverLay:null,fitZoom:-1},this.charts=null,this.cache=null}},{key:"setChartsType",value:function(t){this.chartsType=t,this.redraw()}},{key:"addFeatures",value:function(t){if(this.dispatchEvent({type:"beforefeaturesadded",value:{features:t}}),t instanceof f.FeatureSet){var e=null,i=t.AttStruct,n=t.SFEleArray;if(null!=n&&n.length>0)for(var r=0;r<n.length;r++){var o=n[r];if(null!=o.AttValue&&o.AttValue.length>0){e={};for(var s=0;s<o.AttValue.length;s++)e[i.FldName[s]]=o.AttValue[s];e.FID=o.FID}o.attributes=e,this.features.push(o)}}if(this.isCustomSetMaxCacheCount||(this.maxCacheCount=5*this.features.length),void 0!=this.options&&this.options.fitZoom>-1){var a=this.map.getView().getZoom();Math.abs(a-this.options.fitZoom)<=1&&this.renderer&&this.changed()}else this.renderer&&this.changed()}},{key:"redrawThematicFeatures",value:function(t){var e=this;e.renderer.clearAll();for(var i=e.features,n=new p.Rectangle(t[0],t[1],t[2],t[3]),r=0,o=i.length;r<o;r++){var s=i[r],a=s.bound;if(!n||n.intersectsBounds(a)){var l=e.cache,u=s.FID;if(!l[u]){l[u]=u;var c=e.createThematicFeature(s),h=e.overlayWeightField&&s.attributes[e.overlayWeightField]&&!isNaN(s.attributes[e.overlayWeightField]);c&&h&&(c.__overlayWeight=s.attributes[e.overlayWeightField]),c&&e.charts.push(c)}}}e.drawCharts()}},{key:"createThematicFeature",value:function(t){var e,i=this;return c.Theme[i.chartsType]&&i.themeFields&&i.chartsSetting&&(e=new c.Theme[i.chartsType](t,i,i.themeFields,i.chartsSetting,null,i.options)),!!e&&(e.assembleShapes(),e)}},{key:"drawCharts",value:function(){var t=this;t.renderer&&(t.overlayWeightField&&t._sortChart(),t.options&&!t.options.isOverLay?t._addOverlayShape():t._addNoOverlayShape(),t.renderer.render())}},{key:"getShapesByFeatureID",value:function(t){var e=[],i=this.renderer.getAllShapes();if(!t)return i;for(var n=0,r=i.length;n<r;n++){var o=i[n];o.refDataID&&t===o.refDataID&&e.push(o)}return e}},{key:"isQuadrilateralOverLap",value:function(t,e){var i=[{x:t.xmin,y:t.ymin},{x:t.xmax,y:t.ymin},{x:t.xmax,y:t.ymax},{x:t.xmin,y:t.ymax}],n=[{x:e.xmin,y:e.ymin},{x:e.xmax,y:e.ymin},{x:e.xmax,y:e.ymax},{x:e.xmin,y:e.ymax}],r=i.length,o=n.length;if(4!==r||4!==o)return null;for(var s=!1,a=0;a<r;a++)if(this.isPointInPoly(i[a],n)){s=!0;break}for(var l=0;l<o;l++)if(this.isPointInPoly(n[l],i)){s=!0;break}for(var u=0;u<r-1&&!s;u++)for(var c=0;c<o-1;c++){if("Zondy.Object.Point2D"===this.lineIntersection(i[u],i[u+1],n[c],n[c+1]).CLASS_NAME){s=!0;break}}return s}},{key:"lineIntersection",value:function(t,e,i,n){var r,o,s=null,a=(n.x-i.x)*(t.y-i.y)-(n.y-i.y)*(t.x-i.x),l=(e.x-t.x)*(t.y-i.y)-(e.y-t.y)*(t.x-i.x),u=(n.y-i.y)*(e.x-t.x)-(n.x-i.x)*(e.y-t.y);if(0!=u)o=l/u,s=(r=a/u)>=0&&o<=1&&r<=1&&o>=0?new h.Point2D(t.x+r*(e.x-t.x),t.y+r*(e.y-t.y)):"No Intersection";else if(0==a&&0==l){var c=Math.max(t.y,e.y),d=Math.min(t.y,e.y),f=Math.max(t.x,e.x),p=Math.min(t.x,e.x);s=(i.y>=d&&i.y<=c||n.y>=d&&n.y<=c)&&i.x>=p&&i.x<=f||n.x>=p&&n.x<=f?"Coincident":"Parallel"}else s="Parallel";return s}},{key:"isPointInPoly",value:function(t,e){for(var i=!1,n=-1,r=e.length,o=r-1;++n<r;o=n)(e[n].y<=t.y&&t.y<e[o].y||e[o].y<=t.y&&t.y<e[n].y)&&t.x<(e[o].x-e[n].x)*(t.y-e[n].y)/(e[o].y-e[n].y)+e[n].x&&(i=!i);return i}},{key:"isChartInMap",value:function(t,e){for(var i=t,n=!1,r=[{x:e.xmin,y:e.ymin},{x:e.xmax,y:e.ymin},{x:e.xmax,y:e.ymax},{x:e.xmin,y:e.ymax}],o=0,s=r.length;o<s;o++){var a=r[o];if(a.x>=i.xmin&&a.x<=i.xmax&&a.y>=i.ymin&&a.y<=i.ymax){n=!0;break}}return n}},{key:"isSuitableChart",value:function(t,e,i){return Math.abs(i)<=1}},{key:"clearCache",value:function(){this.cache={},this.charts=[]}},{key:"removeFeatures",value:function(t){this.clearCache(),u.CThemeSource.prototype.removeFeatures.apply(this,arguments)}},{key:"removeAllFeatures",value:function(){this.clearCache(),u.CThemeSource.prototype.removeAllFeatures.apply(this,arguments)}},{key:"redraw",value:function(){return this.clearCache(),!!this.renderer&&(this.changed(),!0)}},{key:"clear",value:function(){var t=this;t.renderer&&(t.renderer.clearAll(),t.renderer.refresh()),t.removeAllFeatures(),t.clearCache()}},{key:"getWeightFieldValue",value:function(t,e,i){if((void 0===i||isNaN(i))&&(i=0),!t.attributes)return i;var n=t.attributes[e];return(void 0===n||isNaN(n))&&(n=i),n}},{key:"_sortChart",value:function(){this.charts&&this.charts.sort(function(t,e){return void 0===t.__overlayWeight&&void 0===e.__overlayWeight?0:void 0!==t.__overlayWeight&&void 0===e.__overlayWeight?-1:void 0===t.__overlayWeight&&void 0!==e.__overlayWeight?1:void 0!==t.__overlayWeight&&void 0!==e.__overlayWeight?parseFloat(t.__overlayWeight)<parseFloat(e.__overlayWeight)?1:-1:0})}},{key:"_addOverlayShape",value:function(){for(var t=this.charts,e=0,i=t.length;e<i;e++)for(var n=t[e],r=n.resetLocation(),o=n.shapes,s=0,a=o.length;s<a;s++)o[s].refOriginalPosition=r,this.renderer.addShape(o[s])}},{key:"_addNoOverlayShape",value:function(){if(this.options.fitZoom>-1){var t=this.map.getView().getZoom();if(Math.abs(this.options.fitZoom-t)>1)return}var e=this,i=e.map.getView().calculateExtent(),n=null,r=this.getLocalXY([i[0],i[3]]),o=this.getLocalXY([i[2],i[1]]);(n=new p.Rectangle).xmin=Math.min(parseFloat(r[0]),parseFloat(o[0])),n.xmax=Math.max(parseFloat(r[0]),parseFloat(o[0])),n.ymin=Math.min(parseFloat(r[1]),parseFloat(o[1])),n.ymax=Math.max(parseFloat(r[1]),parseFloat(o[1]));for(var s=e.charts,a=[],l=0,u=s.length;l<u;l++){var c=s[l],h=c.resetLocation(),d=c.chartBounds;if(!n||e.isChartInMap(n,d)){for(var f=!1,g=0;g<a.length;g++)if(e.isQuadrilateralOverLap(d,a[g])){f=!0;break}if(!f){a.push(d);for(var y=c.shapes,m=0,_=y.length;m<_;m++)y[m].refOriginalPosition=h,e.renderer.addShape(y[m])}}}}},{key:"canvasFunctionInternal_",value:function(t,e,i,n,r){return u.CThemeSource.prototype.canvasFunctionInternal_.apply(this,arguments)}}]),e}(u.CThemeSource);e.CGraphThemeSource=v,l.Zondy.Source.CGraphThemeSource=v;var b=function(t,e,i){var n=void 0!==i?i:{};delete n.source;var r=new v(t,e,n);y.default.call(this,n),this.setSource(r),this.pointerInteraction=null};(0,m.inherits)(b,y.default),b.prototype.setOptions=function(t){var e=this.getSource();void 0!=e&&e.constructor==v&&(t&&t.chartsType&&(e.chartsType=t.chartsType),e.themeFields=t&&t.themeFields?t.themeFields:null,e.charts=t&&t.charts?t.charts:[],e.cache=t&&t.cache?t.cache:{},e.chartsSetting=t&&t.chartsSetting?t.chartsSetting:{},e.options={isOverLay:!0,fitZoom:-1,isHoverAble:void 0===t.isHoverAble||t.isHoverAble,calGravity:!1},(0,d.copy)(e.options,t))},b.prototype.addFeatures=function(t){var e=this.getSource();if(void 0!==e&&e.constructor==v&&(e.addFeatures(t),null!=this.values_.map&&null!=e.options&&e.options.isHoverAble)){var i=this.values_.map;null==this.pointerInteraction&&(this.pointerInteraction=new g.default,i.addInteraction(this.pointerInteraction)),this.pointerInteraction.handleMoveEvent_=function(t){e&&e.fire("mousemove",t)}}},b.prototype.removeFromMap=function(){var t=this.values_.map,e=this.getSource();void 0!=this.pointerInteraction&&e.options.isHoverAble&&t.removeInteraction(this.pointerInteraction),e.destroy(),this.setSource(null),t.removeLayer(this)},e.GraphThemeLayer=b;var S=e.graphThemeLayer=function(t,e,i){return new b(t,e,i)};l.Zondy.Map.graphThemeLayer=S},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DynShowStyle=void 0;var n=i(6),r=i(21),o=(i(411),i(109),i(260),i(320),i(321),function(t){var e=void 0!==t?t:{};(0,r.extend)(this,e),this.Alpha=void 0!==e.Alpha?e.Alpha:0,this.BugSpare=void 0!==e.BugSpare&&e.BugSpare,this.CustomRender=void 0!==e.CustomRender&&e.CustomRender,this.CustomRenderPath=void 0!==e.CustomRenderPath?e.CustomRenderPath:null,this.DirectionLineClr=void 0!==e.DirectionLineClr?e.DirectionLineClr:0,this.DynNoteFlag=void 0!==e.DynNoteFlag&&e.DynNoteFlag,this.DynNoteInfo=void 0!==e.DynNoteInfo?e.DynNoteInfo:null,this.IsShowArc=void 0!==e.IsShowArc?e.IsShowArc:0,this.ISShowLineDirection=void 0!==e.ISShowLineDirection&&e.ISShowLineDirection,this.LineInfo=void 0!==e.LineInfo?e.LineInfo:null,this.MaxScale=void 0!==e.MaxScale?e.MaxScale:0,this.MinScale=void 0!==e.MinScale?e.MinScale:0,this.ShowCoordPnt=void 0!==e.ShowCoordPnt&&e.ShowCoordPnt,this.SpareLineInfo=void 0!==e.SpareLineInfo?e.SpareLineInfo:null,this.SparePointInfo=void 0!==e.SparePointInfo?e.SparePointInfo:null,this.SpareRegInfo=void 0!==e.SpareRegInfo?e.SpareRegInfo:null,this.SymbleScale=void 0!==e.SymbleScale?e.SymbleScale:0});e.DynShowStyle=o,n.Zondy.Object.DynShowStyle=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CDynNoteInfo=void 0;var n=i(6),r=i(21),o=i(109),s=(i(412),function(t){var e=void 0!==t?t:{};(0,r.extend)(this,e),this.Angle=void 0!==e.Angle?e.Angle:0,this.Backclr=void 0!==e.Backclr?e.Backclr:0,this.Backexp=void 0!==e.Backexp?e.Backexp:0,this.Bold=void 0!==e.Bold?e.Bold:0,this.FieldName=void 0!==e.FieldName?e.FieldName:null,this.FontAngle=void 0!==e.FontAngle?e.FontAngle:0,this.FontColor=void 0!==e.FontColor?e.FontColor:0,this.FontSize=void 0!==e.FontSize?e.FontSize:0,this.FontStyle=void 0!==e.FontStyle?e.FontStyle:0,this.Ifnt=void 0!==e.Ifnt?e.Ifnt:0,this.Ifnx=void 0!==e.Ifnx?e.Ifnx:o.FontShape.Positive,this.IsFilled=void 0!==e.IsFilled&&e.IsFilled,this.IsHzpl=void 0!==e.IsHzpl&&e.IsHzpl,this.IsOvprnt=void 0!==e.IsOvprnt&&e.IsOvprnt,this.LabelLevel=void 0!==e.LabelLevel?e.LabelLevel:0,this.LableType=void 0!==e.LableType?e.LableType:null,this.Offsetx=void 0!==e.Offsetx?e.Offsetx:0,this.Offsety=void 0!==e.Offsety?e.Offsety:0,this.Space=void 0!==e.Space?e.Space:0,this.StrikeThrough=void 0!==e.StrikeThrough?e.StrikeThrough:0,this.UnderLine=void 0!==e.UnderLine?e.UnderLine:0});e.CDynNoteInfo=s,n.Zondy.Object.CDynNoteInfo=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DynNoteLableType=void 0;var n=i(6),r=i(21),o=(i(413),i(414),i(415),function(t){var e=void 0!==t?t:{};(0,r.extend)(this,e),this.PntInfo=void 0!==e.PntInfo&&null!=e.PntInfo?e.PntInfo:null,this.LinInfo=void 0!==e.LinInfo&&null!=e.LinInfo?e.LinInfo:null,this.RegInfo=void 0!==e.RegInfo&&null!=e.RegInfo?e.RegInfo:null});e.DynNoteLableType=o,n.Zondy.Object.DynNoteLableType=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LablePntInfo=void 0;var n=i(6),r=i(21),o=(i(109),function(t){var e=void 0!==t?t:{};(0,r.extend)(this,e),this.Ang=void 0!==e.Ang&&null!=e.Ang?e.Ang:null,this.ClientOutLabel=void 0!==e.ClientOutLabel&&null!=e.ClientOutLabel&&e.ClientOutLabel,this.Distance=void 0!==e.Distance&&null!=e.Distance?e.Distance:0,this.EightDirLableType=void 0!==e.EightDirLableType&&null!=e.EightDirLableType?e.EightDirLableType:null,this.PntType=void 0!==e.PntType&&null!=e.PntType?e.PntType:0});e.LablePntInfo=o,n.Zondy.Object.LablePntInfo=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LabelLinInfo=void 0;var n=i(6),r=i(21),o=(i(109),function(t){var e=void 0!==t?t:{};(0,r.extend)(this,e),this.ClientOutLabel=void 0!==e.ClientOutLabel&&null!=e.ClientOutLabel&&e.ClientOutLabel,this.DistFromLine=void 0!==e.DistFromLine&&null!=e.DistFromLine?e.DistFromLine:0,this.FromLineConstrain=void 0!==e.FromLineConstrain&&null!=e.FromLineConstrain?e.FromLineConstrain:0,this.Interval=void 0!==e.Interval&&null!=e.Interval?e.Interval:0,this.LinType=void 0!==e.LinType&&null!=e.LinType?e.LinType:0,this.Repeat=void 0!==e.Repeat&&null!=e.Repeat?e.Repeat:0,this.SpreadType=void 0!==e.SpreadType&&null!=e.SpreadType?e.SpreadType:null});e.LabelLinInfo=o,n.Zondy.Object.LabelLinInfo=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LabelRegInfo=void 0;var n=i(6),r=i(21),o=(i(109),function(t){var e=void 0!==t?t:{};(0,r.extend)(this,e),this.ClientOutLabel=void 0!==e.ClientOutLabel&&null!=e.ClientOutLabel&&e.ClientOutLabel,this.LabelMiniRegion=void 0!==e.LabelMiniRegion&&null!=e.LabelMiniRegion?e.LabelMiniRegion:0,this.MayPlaceOutside=void 0!==e.MayPlaceOutside&&null!=e.MayPlaceOutside?e.MayPlaceOutside:0,this.MiniRegionArea=void 0!==e.MiniRegionArea&&null!=e.MiniRegionArea?e.MiniRegionArea:0,this.Offset=void 0!==e.Offset&&null!=e.Offset?e.Offset:0,this.RegType=void 0!==e.RegType&&null!=e.RegType?e.RegType:0});e.LabelRegInfo=o,n.Zondy.Object.LabelRegInfo=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CDisplayStyleExtend=void 0;var n=i(6),r=i(21),o=function(t){var e=void 0!==t?t:{};(0,r.extend)(this,e),this.Index=void 0!==e.Index?e.Index:0,this.SymbleShow=void 0!==e.SymbleShow&&e.SymbleShow,this.LinPenWidFixed=void 0!==e.LinPenWidFixed&&e.LinPenWidFixed,this.LinSizeFixed=void 0!==e.LinSizeFixed&&e.LinSizeFixed,this.PntPenWidFixed=void 0!==e.PntPenWidFixed&&e.PntPenWidFixed,this.PntSizeFixed=void 0!==e.PntSizeFixed&&e.PntSizeFixed,this.RegPenWidFixed=void 0!==e.RegPenWidFixed&&e.RegPenWidFixed,this.RegSizeFixed=void 0!==e.RegSizeFixed&&e.RegSizeFixed,this.AnnSizeFixed=void 0!==e.AnnSizeFixed&&e.AnnSizeFixed,this.FollowScale=void 0!==e.FollowScale&&e.FollowScale,this.ShowCoordPnt=void 0!==e.ShowCoordPnt&&e.ShowCoordPnt,this.ShowElemRect=void 0!==e.ShowElemRect&&e.ShowElemRect,this.DriverQuality=void 0!==e.DriverQuality?e.DriverQuality:0,this.DynProjFlag=void 0!==e.DynProjFlag&&e.DynProjFlag};e.CDisplayStyleExtend=o,n.Zondy.Object.CDisplayStyleExtend=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CGDBInfo=void 0;var n=i(6),r=(i(21),function(t){var e=t||{};this.GDBSvrName=void 0!==e.ServerName?e.ServerName:null,this.GDBName=void 0!==e.GDBName?e.GDBName:null,this.User=void 0!==e.User?e.User:null,this.Password=void 0!==e.Password?e.Password:null});e.CGDBInfo=r,n.Zondy.Object.CGDBInfo=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PolyLine=void 0;var n=c(i(13)),r=c(i(8)),o=c(i(20)),s=c(i(16)),a=c(i(17)),l=i(183),u=i(100);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t,i){(0,r.default)(this,e);var o=i||{},a=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,o));return a.nearDis=void 0!==o.nearDis&&null!=o.nearDis?parseFloat(o.nearDis):null,a.pointArr=void 0!==t&&null!=t&&Array.isArray(t)?t:new Array,a}return(0,a.default)(e,t),(0,o.default)(e,[{key:"setByOL",value:function(t){if(void 0!==t&&null!=t)for(var e=t.getCoordinates(),i=e.length,n=0;n<i;n++)this.pointArr[n]=new u.Point2D(e[n][0],e[n][1])}},{key:"toString",value:function(){if(null==this.pointArr||0==this.pointArr.length)return"";for(var t=this.pointArr[0].x+","+this.pointArr[0].y,e=1;e<this.pointArr.length;e++)t+=","+this.pointArr[e].x+","+this.pointArr[e].y;return void 0!==this.nearDis&&null!=this.nearDis?t+=";"+this.nearDis:t=t.substring(0,t.length-1),this.Trim(t,"g")}},{key:"getGeometryType",value:function(){return"line"}}]),e}(l.Tangram);e.PolyLine=h,Zondy.Object.PolyLine=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VectCls=void 0;var n=i(6),r=i(21),o=i(109),s=(i(259),function(t){var e=void 0!==t?t:{};(0,r.extend)(this,e),this.clsType=void 0!==e.clsType?e.clsType:o.VectClsType.SFCls,this.clsName=void 0!==e.clsName?e.clsName:null,this.geoType=void 0!==e.geoType?e.geoType:1,this.srefName=void 0!==e.srefName?encodeURI(e.srefName):"",this.dsName=void 0!==e.dsName?encodeURI(e.dsName):"",this.attStruct=void 0!==e.attStruct?e.attStruct:null});e.VectCls=s,n.Zondy.Object.VectCls=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContourNoteParam=void 0;var n=i(6),r=function(t){var e=void 0!=t?t:{};this.IsClipLine=void 0==e.IsClipLine||e.IsClipLine,this.isXYScaleOut=void 0!=e.isXYScaleOut&&e.isXYScaleOut,this.NoteDirection=void 0!=e.NoteDirection?e.NoteDirection:1,this.LineWidth=void 0!=e.LineWidth?e.LineWidth:.05,this.MaxAngle=void 0!=e.MaxAngle?e.MaxAngle:90,this.MinDist=void 0!=e.MinDist?e.MinDist:10,this.IsAbs=void 0!=e.IsAbs&&e.IsAbs,this.IsComma=void 0!=e.IsComma&&e.IsComma,this.DigitNum=void 0!=e.DigitNum?e.DigitNum:0,this.FormatNo=void 0!=e.FormatNo?e.FormatNo:0,this.LogFlag=void 0!=e.LogFlag?e.LogFlag:0,this.Prefix=void 0!=e.Prefix?e.Prefix:"",this.Suffix=void 0!=e.Suffix?e.Suffix:"",this.ColorNo=void 0!=e.ColorNo?e.ColorNo:0,this.FixSize=void 0!=e.FixSize?e.FixSize:.01,this.FontNo=void 0!=e.FontNo?e.FontNo:0};e.ContourNoteParam=r,n.Zondy.Object.ContourAnalyse.ContourNoteParam=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContourParam=void 0;var n=i(6),r=(i(420),i(422),i(423),function(t){var e=void 0!=t?t:{};this.IsSmoothLine=void 0!=e.IsSmoothLine&&e.IsSmoothLine,this.SmoothGrade=void 0!=e.SmoothGrade?e.SmoothGrade:1,this.IsMakeReg=void 0!=e.IsMakeReg&&e.IsMakeReg,this.IsMakeNote=void 0!=e.IsMakeNote&&e.IsMakeNote,this.IsMakeSLin=void 0!=e.IsMakeSLin&&e.IsMakeSLin,this.MapWay=void 0!=e.MapWay?e.MapWay:1,this.FrameWidth=void 0!=e.FrameWidth?e.FrameWidth:1,this.FrameHeight=void 0!=e.FrameHeight?e.FrameHeight:1,this.IsDrawColorScl=void 0!=e.IsDrawColorScl&&e.IsDrawColorScl,this.IsSaveEdge=void 0!=e.IsSaveEdge&&e.IsSaveEdge,this.NoteParam=void 0!=e.NoteParam?e.NoteParam:null,this.SlopLineParam=void 0!=e.SlopLineParam?e.SlopLineParam:null,this.ZValues=void 0!=e.ZValues?e.ZValues:null});e.ContourParam=r,n.Zondy.Object.ContourAnalyse.ContourParam=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SlopLineParam=void 0;var n=i(6),r=function(t){var e=void 0!=t?t:{};this.XScale=void 0!=e.XScale?e.XScale:2,this.YScale=void 0!=e.YScale?e.YScale:10,this.LineType=void 0!=e.LineType?e.LineType:0,this.SubLineType=void 0!=e.SubLineType?e.SubLineType:0};e.SlopLineParam=r,n.Zondy.Object.ContourAnalyse.SlopLineParam=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContourZValue=void 0;var n=i(6),r=(i(260),i(424),function(t){var e=void 0!=t?t:{};this.ZValue=void 0!=e.ZValue?e.ZValue:1,this.LineInfo=void 0!=e.LineInfo?e.LineInfo:null,this.RegInfo=void 0!=e.RegInfo?e.RegInfo:null,this.IsOutputNote=void 0!=e.IsOutputNote&&e.IsOutputNote});e.ContourZValue=r,n.Zondy.Object.ContourAnalyse.ContourZValue=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContourRegionInfo=void 0;var n=i(6),r=function(t){var e=void 0!=t?t:{};this.PatID=void 0!=e.PatID?e.PatID:0,this.FillMode=void 0!=e.FillMode?e.FillMode:0,this.FillColor=void 0!=e.FillColor?e.FillColor:1,this.PatHeight=void 0!=e.PatHeight?e.PatHeight:1,this.PatWidth=void 0!=e.PatWidth?e.PatWidth:1,this.PatAngle=void 0!=e.PatAngle?e.PatAngle:1,this.PatColor=void 0!=e.PatColor?e.PatColor:1,this.OutPenWidth=void 0!=e.OutPenWidth?e.OutPenWidth:1,this.OverMethod=void 0!=e.OverMethod?e.OverMethod:0};e.ContourRegionInfo=r,n.Zondy.Object.ContourAnalyse.ContourRegionInfo=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MeshingParam=void 0;var n=i(6),r=function(t){var e=void 0!=t?t:{};this.SfClsURL=void 0!=e.SfClsURL?e.SfClsURL:null,this.FieldName=void 0!=e.FieldName?e.FieldName:null,this.XCellNum=void 0!=e.XCellNum?e.XCellNum:200,this.Bound=void 0!=e.Bound?e.Bound:null};e.MeshingParam=r,n.Zondy.Object.ContourAnalyse.MeshingParam=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CommonServiceBase=void 0;var n=c(i(8)),r=c(i(20)),o=i(6),s=i(21),a=i(427),l=i(428),u=i(429);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(){function t(e,i){(0,n.default)(this,t);var r=this;this.EVENT_TYPES=["processCompleted","processFailed"],this.events=null,this.eventListeners=null,this.url=null,this.urls=null,this.index=null,this.length=null,this.options=null,this.totalTimes=null,this.POLLING_TIMES=3,this._processSuccess=null,this._processFailed=null,this.isInTheSameDomain=null,(0,s.isArray)(e)?(r.urls=e,r.length=e.length,r.totalTimes=r.length,1===r.length?r.url=e[0]:(r.index=parseInt(Math.random()*r.length),r.url=e[r.index])):(r.totalTimes=1,r.url=e),(i=i||{})&&(0,s.extend)(this,i),r.isInTheSameDomain=(0,s.isInTheSameDomain)(r.url),r.events=new a.Events(r,null,r.EVENT_TYPES,!0),r.eventListeners instanceof Object&&r.events.on(r.eventListeners)}return(0,r.default)(t,[{key:"destroy",value:function(){var t=this;(0,s.isArray)(t.urls)&&(t.urls=null,t.index=null,t.length=null,t.totalTimes=null),t.url=null,t.options=null,t._processSuccess=null,t._processFailed=null,t.isInTheSameDomain=null,t.EVENT_TYPES=null,t.events&&(t.events.destroy(),t.events=null),t.eventListeners&&(t.eventListeners=null)}},{key:"request",value:function(t){var e=this;t.url=t.url||e.url,t.isInTheSameDomain=e.isInTheSameDomain,e.calculatePollingTimes(),e._processSuccess=t.success,e._processFailed=t.failure,t.scope=e,t.success=e.getUrlCompleted,t.failure=e.getUrlFailed,e.options=t,e._commit(e.options)}},{key:"getUrlCompleted",value:function(t){this._processSuccess(t)}},{key:"getUrlFailed",value:function(t){this.totalTimes>0?(this.totalTimes--,this.ajaxPolling()):this._processFailed(t)}},{key:"ajaxPolling",value:function(){var t=this,e=t.options.url,i=/^http:\/\/([a-z]{9}|(\d+\.){3}\d+):\d{0,4}/;t.index=parseInt(Math.random()*t.length),t.url=t.urls[t.index],e=e.replace(i,i.exec(t.url)[0]),t.options.url=e,t.options.isInTheSameDomain=(0,s.isInTheSameDomain)(e),t._commit(t.options)}},{key:"calculatePollingTimes",value:function(){var t=this;t.times?t.totalTimes>t.POLLING_TIMES?t.times>t.POLLING_TIMES?t.totalTimes=t.POLLING_TIMES:t.totalTimes=t.times:t.times<t.totalTimes&&(t.totalTimes=t.times):t.totalTimes>t.POLLING_TIMES&&(t.totalTimes=t.POLLING_TIMES),t.totalTimes--}},{key:"serviceProcessCompleted",value:function(t){t=(0,s.transformResult)(t),this.events.triggerEvent("processCompleted",{result:t})}},{key:"serviceProcessFailed",value:function(t){var e=(t=(0,s.transformResult)(t)).error||t;this.events.triggerEvent("processFailed",{error:e})}},{key:"_commit",value:function(t){"POST"!==t.method&&"PUT"!==t.method||(t.params&&(t.url=(0,s.urlAppend)(t.url,(0,s.getParameterString)(t.params||{}))),t.params=t.data),u.FetchRequest.commit(t.method,t.url,t.params,{headers:t.headers,withCredentials:t.withCredentials,timeout:t.async?0:null,proxy:t.proxy}).then(function(t){return t.text?t.text():t.json()}).then(function(e){var i=null;("string"!=typeof e||"true"!=e.toLowerCase()&&"false"!=e.toLowerCase()?"string"==typeof e&&(i=(new l.JSONFormat).read(e)):(i={},"true"==e.toLowerCase()?i.succeed=!0:i.error=!0),(!i&&isNaN(i)||i.error)&&(i=i&&i.error?{error:i.error}:{error:!0}),i.error)?(t.scope?(0,s.bind)(t.failure,t.scope):t.failure)(i):(isNaN(i)||(i={value:i}),"string"==typeof i&&(i={value:i}),"[object Array]"!=Object.prototype.toString.call(i)?i.succeed=void 0==i.succeed||i.succeed:i={value:i,succeed:!0},(t.scope?(0,s.bind)(t.success,t.scope):t.success)(i))})}}]),t}();e.CommonServiceBase=h,o.Zondy.Service.CommonServiceBase=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Events=void 0;var n,r=i(136),o=(n=r)&&n.__esModule?n:{default:n},s=i(21);var a=function(t,e,i,n){if(this.listeners={},this.object=t,this.eventTypes=[],this.extensions={},this.extensionCount={},(0,s.extend)(this,n),null!=i)for(var r=0,o=i.length;r<o;r++)this.addEventType(i[r])};a.prototype.destroy=function(){for(var t in this.extensions)"boolean"!=typeof this.extensions[t]&&this.extensions[t].destroy();this.extensions=null,this.listeners=null,this.object=null,this.eventTypes=null},a.prototype.addEventType=function(t){this.listeners[t]||(this.eventTypes.push(t),this.listeners[t]=[])},a.prototype.on=function(t){for(var e in t)"scope"!==e&&t.hasOwnProperty(e)&&this.register(e,t.scope,t[e])},a.prototype.register=function(t,e,i,n){if(t in a&&!this.extensions[t]&&(this.extensions[t]=new a[t](this)),null!=i&&-1!==(0,s.indexOf)(this.eventTypes,t)){null==e&&(e=this.object);var r=this.listeners[t];r||(r=[],this.listeners[t]=r,this.extensionCount[t]=0);var l={obj:e,func:i};n?(r.splice(this.extensionCount[t],0,l),"object"===(void 0===n?"undefined":(0,o.default)(n))&&n.extension&&this.extensionCount[t]++):r.push(l)}},a.prototype.registerPriority=function(t,e,i){this.register(t,e,i,!0)},a.prototype.un=function(t){for(var e in t)"scope"!==e&&t.hasOwnProperty(e)&&this.unregister(e,t.scope,t[e])},a.prototype.unregister=function(t,e,i){null==e&&(e=this.object);var n=this.listeners[t];if(null!=n)for(var r=0,o=n.length;r<o;r++)if(n[r].obj===e&&n[r].func===i){n.splice(r,1);break}},a.prototype.remove=function(t){null!=this.listeners[t]&&(this.listeners[t]=[])},a.prototype.triggerEvent=function(t,e){var i=this.listeners[t];if(i&&0!=i.length){var n;null==e&&(e={}),e.object=this.object,e.type||(e.type=t);for(var r=0,o=(i=i.slice()).length;r<o;r++){var s=i[r];if(void 0!=(n=s.func.apply(s.obj,[e]))&&0==n)break}return n}},e.Events=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.JSONFormat=void 0;var n=s(i(136)),r=s(i(75)),o=i(21);function s(t){return t&&t.__esModule?t:{default:t}}var a=function(t){this.data=null,this.keepData=!1,this.indent="    ",this.space=" ",this.newline="\n",this.level=0,this.pretty=!1,this.nativeJSON=!(!window.JSON||"function"!=typeof JSON.parse||"function"!=typeof r.default),(0,o.extend)(this,t),this.options=t,this.serialize={object:function(t){if(null==t)return"null";if(t.constructor===Date)return this.serialize.date.apply(this,[t]);if(t.constructor===Array)return this.serialize.array.apply(this,[t]);var e,i,n,r=["{"];this.level+=1;var o=!1;for(e in t)t.hasOwnProperty(e)&&(i=this.write.apply(this,[e,this.pretty]),n=this.write.apply(this,[t[e],this.pretty]),null!=i&&null!=n&&(o&&r.push(","),r.push(this.writeNewline(),this.writeIndent(),i,":",this.writeSpace(),n),o=!0));return this.level-=1,r.push(this.writeNewline(),this.writeIndent(),"}"),r.join("")},array:function(t){var e,i=["["];this.level+=1;for(var n=0,r=t.length;n<r;++n)null!=(e=this.write.apply(this,[t[n],this.pretty]))&&(n>0&&i.push(","),i.push(this.writeNewline(),this.writeIndent(),e));return this.level-=1,i.push(this.writeNewline(),this.writeIndent(),"]"),i.join("")},string:function(t){var e={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return/["\\\x00-\x1f]/.test(t)?'"'+t.replace(/([\x00-\x1f\\"])/g,function(t,i){var n=e[i];return n||(n=i.charCodeAt(),"\\u00"+Math.floor(n/16).toString(16)+(n%16).toString(16))})+'"':'"'+t+'"'},number:function(t){return isFinite(t)?String(t):"null"},boolean:function(t){return String(t)},date:function(t){function e(t){return t<10?"0"+t:t}return'"'+t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDate())+"T"+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())+'"'}}};a.prototype.read=function(t,e){var i;if(this.nativeJSON)try{i=JSON.parse(t,e)}catch(t){}return this.keepData&&(this.data=i),i},a.prototype.write=function(t,e){this.pretty=!!e;var i=null,o=void 0===t?"undefined":(0,n.default)(t);if(this.serialize[o])try{i=!this.pretty&&this.nativeJSON?(0,r.default)(t):this.serialize[o].apply(this,[t])}catch(t){Console.error("Trouble serializing: "+t)}return i},a.prototype.writeIndent=function(){var t=[];if(this.pretty)for(var e=0;e<this.level;++e)t.push(this.indent);return t.join("")},a.prototype.writeNewline=function(){return this.pretty?this.newline:""},a.prototype.writeSpace=function(){return this.pretty?this.space:""},e.JSONFormat=a,Zondy.Service.JSONFormat=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FetchRequest=e.RequestTimeout=e.CORS=void 0;var n=s(i(136)),r=s(i(430)),o=s(i(75));i(21);function s(t){return t&&t.__esModule?t:{default:t}}i(582),i(587);var a=window.fetch,l=Zondy.CORS=Zondy.CORS||window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest,u=Zondy.RequestTimeout=Zondy.RequestTimeout||45e3,c=Zondy.FetchRequest={commit:function(t,e,i,n){switch(t=t?t.toUpperCase():t){case"GET":return this._get(e,i,n);case"POST":return this._post(e,i,n);case"PUT":return this._put(e,i,n);case"DELETE":return this._delete(e,i,n);default:return this._get(e,i,n)}},_get:function(t,e,i){i=i||{};return t=this._processUrl(t,i),t=Zondy.Util.urlAppend(t,this._getParameterString(e||{})),this.urlIsLong(t)?this._postSimulatie("GET",t.substring(0,t.indexOf("?")-1),e,i):this._fetch(t,e,i,"GET")},_delete:function(t,e,i){i=i||{};return t=this._processUrl(t,i),t=Zondy.Util.urlAppend(t,this._getParameterString(e||{})),!this.urlIsLong(t)&&l?this._fetch(t,e,i,"DELETE"):this._postSimulatie("DELETE",t.substring(0,t.indexOf("?")-1),e,i)},_post:function(t,e,i){return i=i||{},this._fetch(this._processUrl(t,i),e,i,"POST")},_put:function(t,e,i){return i=i||{},this._fetch(this._processUrl(t,i),e,i,"PUT")},urlIsLong:function(t){for(var e=0,i=null,n=0,r=t.length;n<r;n++)(i=t.charCodeAt(n))<127?e++:128<=i&&i<=2047?e+=2:2048<=i&&i<=65535&&(e+=3);return!(e<2e3)},_postSimulatie:function(t,e,i,n){return e+=(e.indexOf("?")>-1?"&":"?")+"_method="+t,"string"!=typeof i&&(i=(0,o.default)(i)),this._post(e,i,n)},_processUrl:function(t,e){return this._isMVTRequest(t)?t:(e&&e.proxy&&("function"==typeof e.proxy?t=e.proxy(t):(t=decodeURIComponent(t),t=e.proxy+encodeURIComponent(t))),t)},_fetch:function(t,e,i,n){return(i=i||{}).headers=i.headers||{},i.headers["Content-Type"]||(i.headers["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8"),i.timeout?this._timeout(i.timeout,a(t,{method:n,headers:i.headers,body:"PUT"===n||"POST"===n?e:void 0,credentials:i.withCredentials?"include":"omit",mode:"cors",timeout:u}).then(function(t){return t})):a(t,{method:n,body:"PUT"===n||"POST"===n?e:void 0,headers:i.headers,credentials:i.withCredentials?"include":"omit",mode:"cors",timeout:u}).then(function(t){return t})},_timeout:function(t,e){return new r.default(function(i,n){setTimeout(function(){n(new Error("timeout"))},t),e.then(i,n)})},_getParameterString:function(t){var e=[];for(var i in t){var r=t[i];if(null!=r&&"function"!=typeof r){var o;if("object"===(void 0===r?"undefined":(0,n.default)(r))&&r.constructor===Array){for(var s,a=[],l=0,u=r.length;l<u;l++)s=r[l],a.push(encodeURIComponent(null===s||void 0===s?"":s));o="["+a.join(",")+"]"}else o=encodeURIComponent(r);e.push(encodeURIComponent(i)+"="+o)}}return e.join("&")},_isMVTRequest:function(t){return t.indexOf(".mvt")>-1||t.indexOf(".pbf")>-1}};e.CORS=l,e.RequestTimeout=u,e.FetchRequest=c,Zondy.Service.FetchRequest=c,Zondy.Service.CORS=l,Zondy.Service.RequestTimeout=u},function(t,e,i){t.exports={default:i(568),__esModule:!0}},function(t,e,i){var n=i(218),r=i(106)("toStringTag"),o="Arguments"==n(function(){return arguments}());t.exports=function(t){var e,i,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),r))?i:o?n(e):"Object"==(s=n(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e,i){var n=i(146),r=i(246),o=i(106)("species");t.exports=function(t,e){var i,s=n(t).constructor;return void 0===s||void 0==(i=n(s)[o])?e:r(i)}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,i){var n=i(146),r=i(165),o=i(324);t.exports=function(t,e){if(n(t),r(e)&&e.constructor===t)return e;var i=o.f(t);return(0,i.resolve)(e),i.promise}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GDBInfo=void 0;var n=c(i(13)),r=c(i(8)),o=c(i(20)),s=c(i(16)),a=c(i(17)),l=i(222),u=i(67);i(21);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){(0,r.default)(this,e);var i=t||{},o=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,i));return o.serverName=void 0!==i.serverName?i.serverName:null,o.gdbName=void 0!==i.gdbName?i.gdbName:null,o.dsName=void 0!==i.dsName?i.dsName:null,o.rcsName=void 0!==i.rcsName?i.rcsName:null,o.User=void 0!==i.User?i.User:null,o.Password=void 0!==i.Password?i.Password:null,o.containAll=void 0===i.containAll||i.containAll,o}return(0,a.default)(e,t),(0,o.default)(e,[{key:"getServerList",value:function(t,e){this.partUrl="datasource?f=json";var i=this.getFullUrl();new u.IgsServiceBase(i,{eventListeners:{scope:this,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getGDBList",value:function(t,e){var i=this;"mapgislocal"==i.serverName.toLowerCase()?i.partUrl="datasource/"+i.serverName+"?f=json":i.partUrl="datasource/"+i.serverName+"?user="+i.User+"&psw="+i.Password+"&f=json";var n=i.getFullUrl();new u.IgsServiceBase(n,{eventListeners:{scope:i,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getDsList",value:function(t,e,i){var n=this;"mapgislocal"==n.serverName.toLowerCase()?n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/ds?containAll="+n.containAll+"&f=json":n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/ds?user="+n.User+"&psw="+n.Password+"&containAll="+n.containAll+"&f=json";var r=n.getFullUrl();new u.IgsServiceBase(r,{eventListeners:{scope:n,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getRcsList",value:function(t,e){var i=this;"mapgislocal"==i.serverName.toLowerCase()?i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/rcs?f=json":i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/rcs?user="+i.User+"&psw="+i.Password+"&containAll="+i.containAll+"&f=json";var n=i.getFullUrl();new u.IgsServiceBase(n,{eventListeners:{scope:i,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getProjectList",value:function(t,e){var i=this;i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"?f=json";var n=i.getFullUrl();new u.IgsServiceBase(n,{eventListeners:{scope:i,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getProjectInfo",value:function(t,e,i,n){var r=this;r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/"+t+"?f=json";var o=r.getFullUrl();new u.IgsServiceBase(o,{eventListeners:{scope:r,processCompleted:e,processFailed:i}}).processAsync()}},{key:"AttachGDB",value:function(t,e,i){var n=this;if(null!=n.serverName&&null!=n.gdbName&&null!=t){n.partUrl="gdb/attach/"+n.gdbName+"?gdbSvrName="+n.serverName+"&path="+t+"&f=json",null!=n.user&&null!=n.password&&(n.partUrl+="&gdbUserName="+n.User+"&gdbPwd="+n.Password);var r=n.getFullUrl();new u.IgsServiceBase(r,{eventListeners:{scope:n,processCompleted:e,processFailed:i}}).processAsync()}}},{key:"DetachGDB",value:function(t,e){var i=this;if(null!=i.serverName&&null!=i.gdbName){i.partUrl="gdb/detach/"+i.gdbName+"?gdbSvrName="+i.serverName,null!=i.user&&null!=i.password&&(i.partUrl+="&gdbUserName="+i.User+"&gdbPwd="+i.Password);var n=i.getFullUrl();new u.IgsServiceBase(n,{eventListeners:{scope:i,processCompleted:t,processFailed:e}}).processAsync()}}},{key:"CreateGDB",value:function(t,e,i){var n=this;if(null!=n.serverName&&null!=n.gdbName&&("mapgislocal"!=n.serverName.toLowerCase()||null!=t)){n.partUrl="gdb/creat/"+n.gdbName+"?gdbSvrName="+n.serverName+"&path="+t+"&f=json",null!=n.user&&null!=n.password&&(n.partUrl+="&gdbUserName="+n.User+"&gdbPwd="+n.Password);var r=n.getFullUrl();new u.IgsServiceBase(r,{eventListeners:{scope:n,processCompleted:e,processFailed:i}}).processAsync()}}},{key:"DeleteGDB",value:function(t,e){var i=this;if(null!=i.serverName&&null!=i.gdbName){i.partUrl="gdb/delete/"+i.gdbName+"?gdbSvrName="+i.serverName,null!=i.user&&null!=i.password&&(i.partUrl+="&gdbUserName="+i.User+"&gdbPwd="+i.Password);var n=i.getFullUrl();new u.IgsServiceBase(n,{eventListeners:{scope:i,processCompleted:t,processFailed:e}}).processAsync()}}}]),e}(l.CatalogService);e.GDBInfo=h,Zondy.Catalog.GDBInfo=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryParameterBase=void 0;var n,r=i(8),o=(n=r)&&n.__esModule?n:{default:n},s=i(6),a=i(21),l=i(326);i(437);var u=function t(e){(0,o.default)(this,t);var i=e||{};(0,a.extend)(this,i),this.geometry=void 0!==i.geometry?i.geometry:null,this.where=void 0!==i.where?i.where:null,this.rule=void 0!==i.rule?i.rule:null,this.objectIds=void 0!==i.objectIds?i.objectIds:null,this.pageIndex=void 0!==i.pageIndex?i.pageIndex:0,this.recordNumber=void 0!==i.recordNumber?i.recordNumber:20,this.resultFormat=void 0!==i.resultFormat?i.resultFormat:"json",this.struct=void 0!==i.struct?i.struct:new l.QueryFeatureStruct,this.orderField=void 0!==i.orderField?i.orderField:null,this.isAsc=void 0!==i.isAsc&&i.isAsc};e.QueryParameterBase=u,s.Zondy.Service.QueryParameterBase=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryFeatureRule=void 0;var n=i(6),r=i(21),o=function(t){var e=t||{};(0,r.extend)(this,e),this.CompareRectOnly=void 0!==e.CompareRectOnly&&"boolean"==typeof e.CompareRectOnly&&e.CompareRectOnly,this.EnableDisplayCondition=void 0!==e.EnableDisplayCondition&&"boolean"==typeof e.EnableDisplayCondition&&e.EnableDisplayCondition,this.MustInside=void 0!==e.MustInside&&"boolean"==typeof e.MustInside&&e.MustInside,this.Intersect=void 0!==e.Intersect&&"boolean"==typeof e.Intersect&&e.Intersect};o.prototype.toJSON=function(){return(0,r.toJSON)(this)},e.QueryFeatureRule=o,n.Zondy.Service.QueryFeatureRule=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MultiGeoQueryParameter=void 0;var n=i(6),r=i(21),o=(i(100),i(418),i(322),function(t){var e=void 0!==t?t:{};(0,r.extend)(this,e),this.geometry=void 0!==e.geometry?e.geometry:null,this.geometryType=void 0!==e.geometryType?e.geometryType:null,this.resultFormat=void 0!==e.resultFormat?e.resultFormat:"json",this.nearDis=void 0!==e.nearDis?e.nearDis:1e-4});o.prototype.getParameterURL=function(){var t="";return t+="?f="+this.resultFormat,t+="&geometryType="+this.geometryType,t+="&nearDis="+this.nearDis},e.MultiGeoQueryParameter=o,n.Zondy.Service.MultiGeoQueryParameter=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ObjClsQueryParameter=void 0;var n=i(6),r=i(21),o=function(t){var e=void 0!==t?t:{};(0,r.extend)(this,e),this.objectIds=void 0!==e.objectIds?e.objectIds:null,this.where=void 0!==e.where?e.where:null,this.resultFormat=void 0!==e.resultFormat?e.resultFormat:"json"};o.prototype.getParameterURL=function(){var t="";return t+="&f="+this.resultFormat,null!=this.objectIds?t+="&objectIds="+this.objectIds:null!=this.where&&(t+="&where="+this.where),t},e.ObjClsQueryParameter=o,n.Zondy.Service.ObjClsQueryParameter=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CAllOtherDataItemInfoSource=void 0;var n=i(6),r={DefaultThemeInfo:1,DataItemIntrinsicInfo:2};e.CAllOtherDataItemInfoSource=r,n.Zondy.Object.Theme.CAllOtherDataItemInfoSource=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CAnnInfo=void 0;var n=i(6),r=i(21),o=function(t){var e=void 0!==t?t:{};(0,r.extend)(this,e),this.LibID=void 0!==e.LibID?e.LibID:0,this.Ovprnt=void 0!==e.Ovprnt&&e.Ovprnt,this.Angle=void 0!==e.Ovprnt?e.Ovprnt:0,this.BackClr=void 0!==e.BackClr?e.BackClr:0,this.BackExp=void 0!==e.BackExp?e.BackExp:0,this.Chnt=void 0!==e.Chnt?e.Chnt:0,this.Color=void 0!==e.Color?e.Color:0,this.FontAngle=void 0!==e.FontAngle?e.FontAngle:0,this.Height=void 0!==e.Height?e.Height:0,this.Ifnt=void 0!==e.Ifnt?e.Ifnt:0,this.Ifnx=void 0!==e.Ifnx?e.Ifnx:0,this.IsFilled=void 0!==e.IsFilled&&e.IsFilled,this.IsHzpl=void 0===e.IsHzpl||e.IsHzpl,this.OffsetX=void 0!==e.OffsetX?e.OffsetX:0,this.OffsetY=void 0!==e.OffsetY?e.OffsetY:0,this.Space=void 0!==e.Space?e.Space:0,this.Width=void 0!==e.Width?e.Width:0};e.CAnnInfo=o,n.Zondy.Object.Theme.CAnnInfo=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CChartLabelFormat=void 0;var n=i(6),r={Unknown:0,Value:1,Percent:2};e.CChartLabelFormat=r,n.Zondy.Object.Theme.CChartLabelFormat=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CChartTheme=void 0;var n=c(i(13)),r=c(i(8)),o=c(i(16)),s=c(i(17)),a=i(6),l=i(128),u=i(444);i(445),i(448);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){(0,r.default)(this,e);var i=t||{},s=(0,o.default)(this,(e.__proto__||(0,n.default)(e)).call(this,i));return s.ChartType=void 0!==i.ChartType?i.ChartType:u.CChartType.Bar,s.ChartThemeInfoArr=void 0!==i.ChartThemeInfoArr?i.ChartThemeInfoArr:null,s.RepresentInfo=void 0!==i.RepresentInfo?i.RepresentInfo:null,s.Type="CChartTheme",s}return(0,s.default)(e,t),e}(l.CTheme);e.CChartTheme=h,a.Zondy.Object.Theme.CChartTheme=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CChartType=void 0;var n=i(6),r={Unknown:0,Bar:1,Bar3D:2,Pie:3,Pie3D:4,Line:5,Line3D:6,Point:7};e.CChartType=r,n.Zondy.Object.Theme.CChartType=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CChartThemeInfo=void 0;var n=l(i(13)),r=l(i(8)),o=l(i(16)),s=l(i(17)),a=i(6);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t,i){(0,r.default)(this,e);var s=i||{},a=(0,o.default)(this,(e.__proto__||(0,n.default)(e)).call(this,s));return a.Expression=void 0!==t?t:"",a}return(0,s.default)(e,t),e}(i(168).CThemeInfo);e.CChartThemeInfo=u,a.Zondy.Object.Theme.CChartThemeInfo=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CLinInfo=void 0;var n=i(6),r=i(21),o=i(109),s=function(t){var e=void 0!==t?t:{};(0,r.extend)(this,e),this.LibID=void 0!==e.LibID?e.LibID:0,this.Ovprnt=void 0!==e.Ovprnt&&e.Ovprnt,this.AdjustFlg=void 0!==e.AdjustFlg?e.AdjustFlg:o.CLinAdjustType.Adjust,this.HeadType=void 0!==e.HeadType?e.HeadType:o.CLinHeadType.Round,this.JointType=void 0!==e.JointType?e.JointType:o.CLinJointType.Round,this.LinStyID=void 0!==e.LinStyID?e.LinStyID:0,this.MakeMethod=void 0!==e.MakeMethod?e.MakeMethod:o.CLinStyleMakeType.Byrule,this.OutClr=void 0!==e.OutClr?e.OutClr:[46,4,3],this.XScale=void 0!==e.XScale?e.XScale:10,this.YScale=void 0!==e.YScale?e.YScale:10,this.OutPenW=void 0!==e.OutPenW?e.OutPenW:[.05,.05,.05]};e.CLinInfo=s,n.Zondy.Object.Theme.CLinInfo=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CRegInfo=void 0;var n=i(6),r=i(21),o=function(t){var e=void 0!==t?t:{};(0,r.extend)(this,e),this.LibID=void 0!==e.LibID?e.LibID:0,this.Ovprnt=void 0!==e.Ovprnt&&e.Ovprnt,this.Angle=void 0!==e.Angle?e.Angle:0,this.EndClr=void 0!==e.EndClr?e.EndClr:0,this.FillClr=void 0!==e.FillClr?e.FillClr:46,this.FillMode=void 0!==e.FillMode?e.FillMode:0,this.FullPatFlg=void 0===e.FullPatFlg||e.FullPatFlg,this.PatClr=void 0!==e.PatClr?e.PatClr:3,this.PatHeight=void 0!==e.PatHeight?e.PatHeight:5,this.PatID=void 0!==e.PatID?e.PatID:0,this.PatWidth=void 0!==e.PatWidth?e.PatWidth:5,this.OutPenW=void 0!==e.OutPenW?e.OutPenW:1};e.CRegInfo=o,n.Zondy.Object.Theme.CRegInfo=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CChartThemeRepresentInfo=void 0;var n=i(6),r=i(21),o=i(441),s=i(442),a=function(t){var e=void 0!==t?t:{};(0,r.extend)(this,e),this.AnnInfoLabel=void 0!==e.AnnInfoLabel?e.AnnInfoLabel:new o.CAnnInfo,this.DigitLabel=void 0!==e.DigitLabel?e.DigitLabel:0,this.FormatLabel=void 0!==e.FormatLabel?e.FormatLabel:s.CChartLabelFormat.Unknown,this.IsDrawLabel=void 0===e.IsDrawLabel||e.IsDrawLabel,this.LineColor=void 0!==e.LineColor?e.LineColor:-1,this.MaxLength=void 0!==e.MaxLength?e.MaxLength:30,this.MinRadius=void 0!==e.MinRadius?e.MinRadius:10,this.PieSizeFixFlag=void 0!==e.PieSizeFixFlag?e.PieSizeFixFlag:0,this.PieTiltedAngle=void 0!==e.PieTiltedAngle?e.PieTiltedAngle:30,this.PlotRadius=void 0!==e.PlotRadius?e.PlotRadius:1,this.ThickPersent=void 0!==e.ThickPersent?e.ThickPersent:10,this.Width=void 0!==e.Width?e.Width:3};e.CChartThemeRepresentInfo=a,n.Zondy.Object.Theme.CChartThemeRepresentInfo=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CDotDensityTheme=void 0;var n=u(i(13)),r=u(i(8)),o=u(i(16)),s=u(i(17)),a=i(6),l=i(128);i(264);function u(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function e(t){(0,r.default)(this,e);var i=t||{},s=(0,o.default)(this,(e.__proto__||(0,n.default)(e)).call(this,i));return s.Expression=void 0!==i.Expression?i.Expression:"",s.Info=void 0!==i.Info?i.Info:null,s.Value=void 0!==i.Value?i.Value:null,s.Type="CDotDensityTheme",s}return(0,s.default)(e,t),e}(l.CTheme);e.CDotDensityTheme=c,a.Zondy.Object.Theme.CDotDensityTheme=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CFourColorTheme=void 0;var n=l(i(13)),r=l(i(8)),o=l(i(16)),s=l(i(17)),a=i(6);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t){(0,r.default)(this,e);var i=t||{},s=(0,o.default)(this,(e.__proto__||(0,n.default)(e)).call(this,i));return s.ClrInfo=void 0!==i.ClrInfo?i.ClrInfo:[25,57,89,121],s.Type="CFourColorTheme",s}return(0,s.default)(e,t),e}(i(128).CTheme);e.CFourColorTheme=u,a.Zondy.Object.Theme.CFourColorTheme=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CGraduatedSymbolTheme=void 0;var n=u(i(13)),r=u(i(8)),o=u(i(16)),s=u(i(17)),a=i(6),l=i(128);i(264);function u(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function e(t){(0,r.default)(this,e);var i=t||{},s=(0,o.default)(this,(e.__proto__||(0,n.default)(e)).call(this,i));return s.BaseValue=void 0!==i.BaseValue?i.BaseValue:141e-6,s.DispMinus=void 0!==i.DispMinus&&i.DispMinus,s.DispZero=void 0!==i.DispZero&&i.DispZero,s.Expression=void 0!==i.Expression?i.Expression:null,s.MinusPntInfo=void 0!==i.MinusPntInfo?i.MinusPntInfo:null,s.PlusPntInfo=void 0!==i.PlusPntInfo?i.PlusPntInfo:null,s.ZeroPntInfo=void 0!==i.ZeroPntInfo?i.ZeroPntInfo:null,s.Type="CGraduatedSymbolTheme",s}return(0,s.default)(e,t),e}(l.CTheme);e.CGraduatedSymbolTheme=c,a.Zondy.Object.Theme.CGraduatedSymbolTheme=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CMultiClassTheme=void 0;var n=u(i(13)),r=u(i(8)),o=u(i(16)),s=u(i(17)),a=i(6),l=i(128);i(168),i(453);function u(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function e(t){(0,r.default)(this,e);var i=t||{},s=(0,o.default)(this,(e.__proto__||(0,n.default)(e)).call(this,i));return s.DefaultInfo=void 0!==i.DefaultInfo?i.DefaultInfo:null,s.ExpInfoArr=void 0!==i.ExpInfoArr?i.ExpInfoArr:null,s.MultiClassThemeInfoArr=void 0!==i.MultiClassThemeInfoArr?i.MultiClassThemeInfoArr:null,s.GeoInfoType=void 0!==i.GeoInfoType?i.GeoInfoType:null,s.Type="CMultiClassTheme",s}return(0,s.default)(e,t),e}(l.CTheme);e.CMultiClassTheme=c,a.Zondy.Object.Theme.CMultiClassTheme=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExpInfo=void 0;var n=i(6),r=i(21),o=function(t,e,i){var n=void 0!==i?i:{};(0,r.extend)(this,n),this.Expression=void 0!==t?t:"",this.ItemValueArr=void 0!==e?e:null};e.ExpInfo=o,n.Zondy.Object.Theme.ExpInfo=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CRandomTheme=void 0;var n=l(i(13)),r=l(i(8)),o=l(i(16)),s=l(i(17)),a=i(6);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t){(0,r.default)(this,e);var i=t||{},s=(0,o.default)(this,(e.__proto__||(0,n.default)(e)).call(this,i));return s.Type="CRandomTheme",s}return(0,s.default)(e,t),e}(i(128).CTheme);e.CRandomTheme=u,a.Zondy.Object.Theme.CRandomTheme=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CRangeTheme=void 0;var n=c(i(13)),r=c(i(8)),o=c(i(16)),s=c(i(17)),a=i(6),l=i(128),u=i(440);i(168),i(456);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){(0,r.default)(this,e);var i=t||{},s=(0,o.default)(this,(e.__proto__||(0,n.default)(e)).call(this,i));return s.AllOtherDataItemInfoSource=void 0!==i.AllOtherDataItemInfoSource?i.AllOtherDataItemInfoSource:u.CAllOtherDataItemInfoSource.DefaultThemeInfo,s.Expression=void 0!==i.Expression?i.Expression:"",s.DefaultInfo=void 0!==i.DefaultInfo?i.DefaultInfo:null,s.RangeThemeInfoArr=void 0!==i.RangeThemeInfoArr?i.RangeThemeInfoArr:null,s.GeoInfoType=void 0!==i.GeoInfoType?i.GeoInfoType:null,s.Type="CRangeTheme",s}return(0,s.default)(e,t),e}(l.CTheme);e.CRangeTheme=h,a.Zondy.Object.Theme.CRangeTheme=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CRangeThemeInfo=void 0;var n=l(i(13)),r=l(i(8)),o=l(i(16)),s=l(i(17)),a=i(6);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t,i,s){(0,r.default)(this,e);var a=s||{},l=(0,o.default)(this,(e.__proto__||(0,n.default)(e)).call(this,a));return l.StartValue=void 0!==t?t:"",l.EndValue=void 0!==i?i:"",l}return(0,s.default)(e,t),e}(i(168).CThemeInfo);e.CRangeThemeInfo=u,a.Zondy.Object.Theme.CRangeThemeInfo=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CSimpleTheme=void 0;var n=c(i(13)),r=c(i(8)),o=c(i(16)),s=c(i(17)),a=i(6),l=i(128),u=i(168);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){(0,r.default)(this,e);var i=t||{},s=(0,o.default)(this,(e.__proto__||(0,n.default)(e)).call(this,i));return s.ThemeInfo=void 0!==i.ThemeInfo?i.ThemeInfo:new u.CThemeInfo,s.Type="CSimpleTheme",s}return(0,s.default)(e,t),e}(l.CTheme);e.CSimpleTheme=h,a.Zondy.Object.Theme.CSimpleTheme=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CUniqueTheme=void 0;var n=u(i(13)),r=u(i(8)),o=u(i(16)),s=u(i(17)),a=i(6),l=i(128);i(168),i(459);function u(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function e(t){(0,r.default)(this,e);var i=t||{},s=(0,o.default)(this,(e.__proto__||(0,n.default)(e)).call(this,i));return s.DefaultInfo=void 0!==i.DefaultInfo?i.DefaultInfo:null,s.Expression=void 0!==i.Expression?i.Expression:"",s.UniqueThemeInfoArr=void 0!==i.UniqueThemeInfoArr?i.UniqueThemeInfoArr:null,s.GeoInfoType=void 0!==i.GeoInfoType?i.GeoInfoType:null,s.Type="CUniqueTheme",s}return(0,s.default)(e,t),e}(l.CTheme);e.CUniqueTheme=c,a.Zondy.Object.Theme.CUniqueTheme=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CUniqueThemeInfo=void 0;var n=l(i(13)),r=l(i(8)),o=l(i(16)),s=l(i(17)),a=i(6);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t,i){(0,r.default)(this,e);var s=i||{},a=(0,o.default)(this,(e.__proto__||(0,n.default)(e)).call(this,s));return a.Value=void 0!==t?t:"",a}return(0,s.default)(e,t),e}(i(168).CThemeInfo);e.CUniqueThemeInfo=u,a.Zondy.Object.Theme.CUniqueThemeInfo=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FolderInfo=void 0;var n=i(6),r=(i(333),function(t,e){this.name=void 0!==t?t:null,this.attribute=void 0!==e?e:null});e.FolderInfo=r,n.Zondy.Object.Theme.FolderInfo=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ThemesInfo=void 0;var n=i(6),r=(i(128),function(t,e){this.LayerName=void 0!==t?t:null,this.ThemeArr=void 0!==e?e:null});e.ThemesInfo=r,n.Zondy.Object.Theme.ThemesInfo=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RankSymbol=void 0;var n=c(i(13)),r=c(i(8)),o=c(i(20)),s=c(i(16)),a=c(i(46)),l=c(i(17)),u=i(6);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t,i,o,a,l,u){(0,r.default)(this,e);var c=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,i,o,a,l,u));return c.setting=null,a&&a.codomain&&(c.setting=a,c.DVBCodomain=c.setting.codomain),c.CLASS_NAME="Zondy.Feature.Theme.RankSymbol",c}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.setting=null,(0,a.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"destroy",this).call(this)}},{key:"initBaseParameter",value:function(){if(!this.setting)return!1;var t=this.setting;t.XOffset&&(this.XOffset=t.XOffset),t.YOffset&&(this.YOffset=t.YOffset),this.XOffset=t.XOffset?t.XOffset:0,this.YOffset=t.YOffset?t.YOffset:0,this.origonPoint=[],this.chartBox=[],this.dataViewBox=[],this.DVBParameter=t.dataViewBoxParameter?t.dataViewBoxParameter:[0,0,0,0],this.DVBOrigonPoint=[],this.DVBCenterPoint=[],this.origonPointOffset=[],this.resetLocation();var e=this.width,i=this.height,n=this.location;this.origonPoint=[n[0]-e/2,n[1]-i/2];var r=this.origonPoint;this.chartBox=[r[0],r[1]+i,r[0]+e,r[1]];var o=this.chartBox,s=this.DVBParameter;this.dataViewBox=[o[0]+s[0],o[1]-s[1],o[2]-s[2],o[3]+s[3]];var a=this.dataViewBox;return!(a[0]>=a[2]||a[1]<=a[3])&&(this.DVBOrigonPoint=[a[0],a[3]],this.DVBWidth=Math.abs(a[2]-a[0]),this.DVBHeight=Math.abs(a[1]-a[3]),this.DVBCenterPoint=[this.DVBOrigonPoint[0]+this.DVBWidth/2,this.DVBOrigonPoint[1]+this.DVBHeight/2],this.origonPointOffset=[this.DVBOrigonPoint[0]-r[0],this.DVBOrigonPoint[1]-r[1]],!0)}}]),e}(i(169).Graph);e.RankSymbol=h,u.Zondy.Theme.RankSymbol=h},function(t,e,i){"use strict";t.exports=r;var n=i(476);function r(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}r.Varint=0,r.Fixed64=1,r.Bytes=2,r.Fixed32=5;function o(t){return t.type===r.Bytes?t.readVarint()+t.pos:t.pos+1}function s(t,e,i){return i?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function a(t,e,i){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.ceil(Math.log(e)/(7*Math.LN2));i.realloc(n);for(var r=i.pos-1;r>=t;r--)i.buf[r+n]=i.buf[r]}function l(t,e){for(var i=0;i<t.length;i++)e.writeVarint(t[i])}function u(t,e){for(var i=0;i<t.length;i++)e.writeSVarint(t[i])}function c(t,e){for(var i=0;i<t.length;i++)e.writeFloat(t[i])}function h(t,e){for(var i=0;i<t.length;i++)e.writeDouble(t[i])}function d(t,e){for(var i=0;i<t.length;i++)e.writeBoolean(t[i])}function f(t,e){for(var i=0;i<t.length;i++)e.writeFixed32(t[i])}function p(t,e){for(var i=0;i<t.length;i++)e.writeSFixed32(t[i])}function g(t,e){for(var i=0;i<t.length;i++)e.writeFixed64(t[i])}function y(t,e){for(var i=0;i<t.length;i++)e.writeSFixed64(t[i])}function m(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function _(t,e,i){t[i]=e,t[i+1]=e>>>8,t[i+2]=e>>>16,t[i+3]=e>>>24}function v(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}r.prototype={destroy:function(){this.buf=null},readFields:function(t,e,i){for(i=i||this.length;this.pos<i;){var n=this.readVarint(),r=n>>3,o=this.pos;this.type=7&n,t(r,e,this),this.pos===o&&this.skip(n)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=m(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=v(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=m(this.buf,this.pos)+4294967296*m(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=m(this.buf,this.pos)+4294967296*v(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=n.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=n.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,i,n=this.buf;return e=127&(i=n[this.pos++]),i<128?e:(e|=(127&(i=n[this.pos++]))<<7,i<128?e:(e|=(127&(i=n[this.pos++]))<<14,i<128?e:(e|=(127&(i=n[this.pos++]))<<21,i<128?e:function(t,e,i){var n,r,o=i.buf;if(r=o[i.pos++],n=(112&r)>>4,r<128)return s(t,n,e);if(r=o[i.pos++],n|=(127&r)<<3,r<128)return s(t,n,e);if(r=o[i.pos++],n|=(127&r)<<10,r<128)return s(t,n,e);if(r=o[i.pos++],n|=(127&r)<<17,r<128)return s(t,n,e);if(r=o[i.pos++],n|=(127&r)<<24,r<128)return s(t,n,e);if(r=o[i.pos++],n|=(1&r)<<31,r<128)return s(t,n,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(i=n[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=function(t,e,i){var n="",r=e;for(;r<i;){var o,s,a,l=t[r],u=null,c=l>239?4:l>223?3:l>191?2:1;if(r+c>i)break;1===c?l<128&&(u=l):2===c?128==(192&(o=t[r+1]))&&(u=(31&l)<<6|63&o)<=127&&(u=null):3===c?(o=t[r+1],s=t[r+2],128==(192&o)&&128==(192&s)&&((u=(15&l)<<12|(63&o)<<6|63&s)<=2047||u>=55296&&u<=57343)&&(u=null)):4===c&&(o=t[r+1],s=t[r+2],a=t[r+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&((u=(15&l)<<18|(63&o)<<12|(63&s)<<6|63&a)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,c=1):u>65535&&(u-=65536,n+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),n+=String.fromCharCode(u),r+=c}return n}(this.buf,this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){var i=o(this);for(t=t||[];this.pos<i;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===r.Varint)for(;this.buf[this.pos++]>127;);else if(e===r.Bytes)this.pos=this.readVarint()+this.pos;else if(e===r.Fixed32)this.pos+=4;else{if(e!==r.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var i=new Uint8Array(e);i.set(this.buf),this.buf=i,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),_(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),_(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),_(this.buf,-1&t,this.pos),_(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),_(this.buf,-1&t,this.pos),_(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var i,n;t>=0?(i=t%4294967296|0,n=t/4294967296|0):(n=~(-t/4294967296),4294967295^(i=~(-t%4294967296))?i=i+1|0:(i=0,n=n+1|0));if(t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,i){i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos]=127&t}(i,0,e),function(t,e){var i=(7&t)<<4;if(e.buf[e.pos++]|=i|((t>>>=3)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;e.buf[e.pos++]=127&t}(n,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,i){for(var n,r,o=0;o<e.length;o++){if((n=e.charCodeAt(o))>55295&&n<57344){if(!r){n>56319||o+1===e.length?(t[i++]=239,t[i++]=191,t[i++]=189):r=n;continue}if(n<56320){t[i++]=239,t[i++]=191,t[i++]=189,r=n;continue}n=r-55296<<10|n-56320|65536,r=null}else r&&(t[i++]=239,t[i++]=191,t[i++]=189,r=null);n<128?t[i++]=n:(n<2048?t[i++]=n>>6|192:(n<65536?t[i++]=n>>12|224:(t[i++]=n>>18|240,t[i++]=n>>12&63|128),t[i++]=n>>6&63|128),t[i++]=63&n|128)}return i}(this.buf,t,this.pos);var i=this.pos-e;i>=128&&a(e,i,this),this.pos=e-1,this.writeVarint(i),this.pos+=i},writeFloat:function(t){this.realloc(4),n.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),n.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var i=0;i<e;i++)this.buf[this.pos++]=t[i]},writeRawMessage:function(t,e){this.pos++;var i=this.pos;t(e,this);var n=this.pos-i;n>=128&&a(i,n,this),this.pos=i-1,this.writeVarint(n),this.pos+=n},writeMessage:function(t,e,i){this.writeTag(t,r.Bytes),this.writeRawMessage(e,i)},writePackedVarint:function(t,e){this.writeMessage(t,l,e)},writePackedSVarint:function(t,e){this.writeMessage(t,u,e)},writePackedBoolean:function(t,e){this.writeMessage(t,d,e)},writePackedFloat:function(t,e){this.writeMessage(t,c,e)},writePackedDouble:function(t,e){this.writeMessage(t,h,e)},writePackedFixed32:function(t,e){this.writeMessage(t,f,e)},writePackedSFixed32:function(t,e){this.writeMessage(t,p,e)},writePackedFixed64:function(t,e){this.writeMessage(t,g,e)},writePackedSFixed64:function(t,e){this.writeMessage(t,y,e)},writeBytesField:function(t,e){this.writeTag(t,r.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,r.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,r.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,r.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,r.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,r.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,r.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,r.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,r.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,r.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}},function(t,e,i){var n=i(493);e.Processor=n},function(t,e,i){"use strict";i(466)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ThemesInfo=e.ThemeOper=void 0,e.ItemValue=e.FolderInfoAttribute=e.FolderInfo=e.ExpInfo=e.CUniqueThemeInfo=e.CUniqueTheme=e.CThemeInfo=e.CTheme=e.CSimpleTheme=e.CRegInfo=e.CRangeThemeInfo=e.CRangeTheme=e.CRandomTheme=e.CPntInfo=e.CMultiClassTheme=e.CLinInfo=e.CGraduatedSymbolTheme=e.CFourColorTheme=e.CDotDensityTheme=e.CChartType=e.CChartThemeRepresentInfo=e.CChartThemeInfo=e.CChartTheme=e.CChartLabelFormat=e.CAnnInfo=e.CAllOtherDataItemInfoSource=e.MapServiceBase=e.GetTileImageService=e.GetMapInfoService=e.GetMapImageService=e.GetLayerImageService=e.GetDocImageService=e.TopAnalysis=e.Smooth=e.ProjectRang=e.ProjectDots=e.GeometryAnalysisBase=e.CProjectParam=e.CProjectBySRSID=e.CalServiceBase=e.CalPolyLineLength=e.CalArea=e.ProjectBySRID=e.ProjectByLayer=e.ProjectBase=e.OverlayByPolygon=e.OverlayByLayer=e.OverlayBase=e.NetAnalysis=e.FeatureBuffBySingleRing=e.FeatureBuffByMultiplyRing=e.FeatureBuffBase=e.ContourAnalyse=e.ClipByPolygon=e.ClipByLayer=e.ClipByCircle=e.ClipBase=e.ClassBufferBySingleRing=e.ClassBufferByMultiplyRing=e.ClassBufferBase=e.AnalysisBase=e.QueryServiceBase=e.QueryParameterBase=e.QueryParameter=e.QueryLayerFeature=e.QueryFeatureStruct=e.QueryFeatureRule=e.QueryDocFeature=e.QueryByLayerParameter=e.ObjClsQueryParameter=e.ObjClsQuery=e.MultiGeoQueryParameter=e.MultiGeoQuery=e.EditServiceBase=e.EditLayerFeature=e.EditDocFeature=e.VectorLayer=e.TileLayer=e.CatalogService=e.MapDoc=e.GDBInfo=e.ColorInfo=e.JSONFormat=e.IgsServiceBase=e.FetchRequest=e.RequestTimeout=e.CORS=e.Events=e.CommonServiceBase=e.SlopLineParam=e.NetAnalysisExtent=e.NetAnalyse=e.MeshingParam=e.ContourRegionInfo=e.ContourZValue=e.ContourParam=e.ContourNoteParam=e.createCanvasContext2D=e.mixin=e.merge=void 0,e.DeepMerge=e.ChineseToUtf8=e.getTopAnalysisResult=e.bindAsEventListener=e.bind=e.newGuid=e.cloneObject=e.copyAttributesWithClip=e.copyAttributes=e.transformResult=e.toJSON=e.isInTheSameDomain=e.supportCanvas=e.isSupportCanvas=e.getBrowser=e.Browser=e.IS_GECKO=e.getParameters=e.urlAppend=e.getWFParameterString=e.getParameterString=e.applyDefaults=e.modifyDOMElement=e.indexOf=e.removeItem=e.isElement=e.getElement=e.reset=e.copyExcluce=e.copy=e.extendDeep=e.isArray=e.extend=e.WebGraphicsInfo=e.VectCls=e.Tangram=e.Rectangle=e.PolyLine=e.Polygon=e.Point2D=e.MultiPolygon=e.LablePntInfo=e.LabelRegInfo=e.LabelLinInfo=e.GRegion=e.GPoint=e.GLine=e.FeatureSet=e.FeatureGraphicBase=e.FeatureGeometry=e.Feature=e.LayerStatusType=e.MapType=e.CItemType=e.CLinStyleMakeType=e.CLinJointType=e.CLinHeadType=e.CLinAdjustType=e.NetElemType=e.NetAnalyType=e.ISShowArc=e.EightDirType=e.LineConstrain=e.LabelSpreadType=e.RepeatType=e.LabelPntType=e.LabelRegType=e.LabelLinType=e.FontShape=e.FeatureType=e.VectClsType=e.XClsType=e.DynShowStyle=e.DynNoteLableType=e.CRegionInfo=e.CPointInfo=e.CLineInfo=e.Circle=e.CGDBInfo=e.CDynNoteInfo=e.CDisplayStyleExtend=e.CDisplayStyle=e.CAttDataRow=e.CAttStruct=e.Zondy=e.Arc=e.AnyLine=e.ServiceBase=e.SUtil=e.LevelRendererVector=e.Util=e.Transformable=e.Storage=e.SmicText=e.SmicStar=e.SmicSector=e.SmicRing=e.SmicRectangle=e.SmicPolygon=e.SmicPoint=void 0,e.SmicIsogon=e.SmicImage=e.SmicEllipse=e.SmicCircle=e.SmicBrokenLine=e.Shape=e.PaintLayer=e.Painter=e.Matrix=e.Math=e.Http=e.Handler=e.Group=e.Eventful=e.LevelRendererEvent=e.Env=e.Easing=e.LevelRendererCurve=e.Config=e.ComputeBoundingBox=e.Color=e.Clip=e.Area=e.Animator=e.Animation=e.Render=e.LevelRenderer=e.FeatureTheme=e.Sector=e.FeatureRectangle=e.FeaturePolygon=e.Point=e.FeatureLine=e.Label=e.Image=e.FeatureCircle=e.ShapeParameters=e.ShapeFactory=e.ThemeVector=e.Ring=e.RankSymbol=e.OverlayPoint=e.Pie=e.Line=e.Graph=e.OverlayCircle=e.Bar3D=e.Bar=e.rankSymbolThemeLayer=e.RankSymbolThemeLayer=e.CRankSymbolThemeSource=e.graphThemeLayer=e.GraphThemeLayer=e.CGraphThemeSource=e.randomThemeLayer=e.RandomThemeLayer=e.CRandomThemeSource=e.simpleThemeLayer=e.SimpleThemeLayer=e.CSimpleThemeSource=e.uniqueThemeLayer=e.UniqueThemeLayer=e.CUniqueThemeSource=e.ThemeStyle=e.rangeThemeLayer=e.RangeThemeLayer=e.CRangeThemeSource=e.ZDOverviewMap=e.PolygonJSON=e.MilstdParams=e.EnumMilstdType=e.MilStdDragPan=e.MilStdModifyTool=e.MilStdDrawTool=e.MilStd=e.Drag=e.OpenStreetLayerType=e.ArcGISLayerType=e.GoogleLayerType=e.TiandituType=e.OpenStreetLayer=e.OpenStreetMapSource=e.ArcGISLayer=e.ArcGISMapSource=e.GoogleLayer=e.GoogleMapSource=e.TianDiTu=e.TiandituMapSource=e.GaoDeLayer=e.GaodeMapSource=e.BaiDuLayer=e.BaiduMapSource=e.GdbpLayer=e.MapLayerTileSource=e.TileLayer_mapgis=e.TileLayerSource=e.CacheTileLayer=e.CacheTileLayerSource=e.MapDocTileLayer=e.MapDocTileSource=void 0;var n=Oi(i(42)),r=Oi(i(38)),o=Oi(i(334)),s=Oi(i(335)),a=(Oi(i(129)),Oi(i(151)),Oi(i(224))),l=Oi(i(225)),u=(Oi(i(170)),Oi(i(25))),c=Si(i(137)),h=Oi(i(236)),d=Oi(i(152)),f=(Oi(i(56)),Oi(i(237)),Oi(i(200))),p=Oi(i(287)),g=Si(i(226)),y=Oi(i(45)),m=Oi(i(288)),_=Si(i(468)),v=Si(i(245)),b=Si(i(227)),S=Si(i(289)),O=Oi(i(228)),C=Si(i(290)),x=Oi(i(291)),T=(Oi(i(29)),Oi(i(469))),E=Oi(i(33)),P=Oi(i(470)),j=Oi(i(210)),w=Oi(i(133)),I=(Oi(i(43)),Oi(i(471))),L=Oi(i(472)),R=Oi(i(473)),A=Oi(i(474)),M=Oi(i(475)),F=Oi(i(477)),k=Si(i(646)),N=Oi(i(478)),D=Si(i(479)),G=Oi(i(480)),B=Oi(i(481)),U=Oi(i(482)),V=Oi(i(648)),Z=Oi(i(343)),W=Oi(i(344)),H=Oi(i(345)),z=Oi(i(346)),Y=Oi(i(347)),X=Oi(i(348)),q=Oi(i(349)),K=Oi(i(350)),J=Oi(i(351)),Q=Oi(i(352)),$=Oi(i(353)),tt=Oi(i(354)),et=Oi(i(355)),it=Oi(i(356)),nt=Oi(i(357)),rt=Oi(i(358)),ot=Oi(i(273)),st=Oi(i(77)),at=Oi(i(131)),lt=Oi(i(41)),ut=Oi(i(154)),ct=Oi(i(58)),ht=Oi(i(71)),dt=Oi(i(76)),ft=Oi(i(39)),pt=Si(i(36)),gt=Oi(i(48)),yt=Oi(i(199)),mt=Oi(i(279)),_t=Oi(i(204)),vt=Oi(i(229)),bt=Oi(i(230)),St=Oi(i(280)),Ot=Oi(i(231)),Ct=Si(i(281)),xt=Oi(i(282)),Tt=Oi(i(35)),Et=Oi(i(238)),Pt=Oi(i(232)),jt=Oi(i(283)),wt=Oi(i(233)),It=Oi(i(234)),Lt=Oi(i(235)),Rt=Si(i(28)),At=Oi(i(284)),Mt=Oi(i(285)),Ft=Oi(i(286)),kt=Oi(i(189)),Nt=Oi(i(272)),Dt=Oi(i(483)),Gt=Oi(i(149)),Bt=Oi(i(60)),Ut=Oi(i(150)),Vt=Oi(i(90)),Zt=Oi(i(484)),Wt=Oi(i(110)),Ht=(Oi(i(276)),Oi(i(111))),zt=(Oi(i(185)),Oi(i(241)),Oi(i(207))),Yt=Oi(i(208)),Xt=Oi(i(114)),qt=Oi(i(337)),Kt=Oi(i(338)),Jt=Oi(i(340)),Qt=Oi(i(341)),$t=Oi(i(361)),te=Oi(i(342)),ee=Oi(i(485)),ie=Oi(i(486)),ne=Oi(i(487)),re=Oi(i(57)),oe=Oi(i(488)),se=Oi(i(363)),ae=Oi(i(489)),le=Oi(i(490)),ue=Oi(i(491)),ce=Si(i(359)),he=Oi(i(492)),de=Oi(i(139)),fe=Oi(i(495)),pe=Oi(i(112)),ge=Oi(i(496)),ye=Oi(i(497)),me=Oi(i(53)),_e=Oi(i(498)),ve=Oi(i(499)),be=Oi(i(500)),Se=(Oi(i(127)),Oi(i(83))),Oe=Oi(i(501)),Ce=Si(i(647)),xe=Oi(i(141)),Te=Oi(i(502)),Ee=(Oi(i(172)),Oi(i(362))),Pe=Oi(i(267)),je=Oi(i(96)),we=Oi(i(192)),Ie=Si(i(209)),Le=Oi(i(186)),Re=Oi(i(268)),Ae=Oi(i(91)),Me=Oi(i(62)),Fe=Oi(i(188)),ke=Oi(i(101)),Ne=Si(i(360)),De=(Oi(i(153)),Si(i(503))),Ge=Si(i(63)),Be=Si(i(84)),Ue=Si(i(339)),Ve=Si(i(27)),Ze=Si(i(59)),We=Si(i(37)),He=Si(i(2)),ze=Si(i(240)),Ye=Si(i(278)),Xe=i(47),qe=Si(Xe),Ke=(Si(Xe),Si(i(239))),Je=Si(i(336)),Qe=Si(i(9)),$e=Si(i(51)),ti=Si(i(504)),ei=Si(i(505)),ii=Si(i(22)),ni=Si(i(49)),ri=Si(i(205)),oi=Si(i(64)),si=Si(i(0)),ai=i(506),li=i(538),ui=i(543),ci=i(148),hi=i(559),di=i(565),fi=i(588),pi=i(589),gi=i(594),yi=i(602),mi=i(616),_i=i(623),vi=i(629),bi=i(632);function Si(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function Oi(t){return t&&t.__esModule?t:{default:t}}var Ci=window.ol={};Ci.color={},Ci.colorlike={},Ci.control={},Ci.coordinate={},Ci.easing={},Ci.events={},Ci.events.condition={},Ci.extent={},Ci.featureloader={},Ci.format={},Ci.format.filter={},Ci.geom={},Ci.has={},Ci.interaction={},Ci.layer={},Ci.loadingstrategy={},Ci.proj={},Ci.proj.Units={},Ci.proj.proj4={},Ci.render={},Ci.render.canvas={},Ci.renderer={},Ci.renderer.canvas={},Ci.renderer.webgl={},Ci.size={},Ci.source={},Ci.sphere={},Ci.style={},Ci.style.IconImageCache={},Ci.tilegrid={},Ci.xml={},Ci.Collection=n.default,Ci.Feature=r.default,Ci.Geolocation=o.default,Ci.Graticule=s.default,Ci.Kinetic=a.default,Ci.Map=l.default,Ci.Object=u.default,Ci.Observable=c.default,Ci.Observable.unByKey=c.unByKey,Ci.Overlay=h.default,Ci.PluggableMap=d.default,Ci.View=f.default,Ci.WebGLMap=p.default,Ci.color.asArray=Ge.asArray,Ci.color.asString=Ge.asString,Ci.colorlike.asColorLike=Be.asColorLike,Ci.control.Attribution=g.default,Ci.control.Attribution.render=g.render,Ci.control.Control=y.default,Ci.control.FullScreen=m.default,Ci.control.MousePosition=_.default,Ci.control.MousePosition.render=_.render,Ci.control.OverviewMap=v.default,Ci.control.OverviewMap.render=v.render,Ci.control.Rotate=b.default,Ci.control.Rotate.render=b.render,Ci.control.ScaleLine=S.default,Ci.control.ScaleLine.render=S.render,Ci.control.Zoom=O.default,Ci.control.ZoomSlider=C.default,Ci.control.ZoomSlider.render=C.render,Ci.control.ZoomToExtent=x.default,Ci.control.defaults=Ue.defaults,Ci.coordinate.add=Ve.add,Ci.coordinate.createStringXY=Ve.createStringXY,Ci.coordinate.format=Ve.format,Ci.coordinate.rotate=Ve.rotate,Ci.coordinate.toStringHDMS=Ve.toStringHDMS,Ci.coordinate.toStringXY=Ve.toStringXY,Ci.easing.easeIn=Ze.easeIn,Ci.easing.easeOut=Ze.easeOut,Ci.easing.inAndOut=Ze.inAndOut,Ci.easing.linear=Ze.linear,Ci.easing.upAndDown=Ze.upAndDown,Ci.events.condition.altKeyOnly=We.altKeyOnly,Ci.events.condition.altShiftKeysOnly=We.altShiftKeysOnly,Ci.events.condition.always=We.always,Ci.events.condition.click=We.click,Ci.events.condition.doubleClick=We.doubleClick,Ci.events.condition.focus=We.focus,Ci.events.condition.mouseOnly=We.mouseOnly,Ci.events.condition.never=We.never,Ci.events.condition.noModifierKeys=We.noModifierKeys,Ci.events.condition.platformModifierKeyOnly=We.platformModifierKeyOnly,Ci.events.condition.pointerMove=We.pointerMove,Ci.events.condition.primaryAction=We.primaryAction,Ci.events.condition.shiftKeyOnly=We.shiftKeyOnly,Ci.events.condition.singleClick=We.singleClick,Ci.events.condition.targetNotEditable=We.targetNotEditable,Ci.extent.applyTransform=He.applyTransform,Ci.extent.boundingExtent=He.boundingExtent,Ci.extent.buffer=He.buffer,Ci.extent.containsCoordinate=He.containsCoordinate,Ci.extent.containsExtent=He.containsExtent,Ci.extent.containsXY=He.containsXY,Ci.extent.createEmpty=He.createEmpty,Ci.extent.equals=He.equals,Ci.extent.extend=He.extend,Ci.extent.getArea=He.getArea,Ci.extent.getBottomLeft=He.getBottomLeft,Ci.extent.getBottomRight=He.getBottomRight,Ci.extent.getCenter=He.getCenter,Ci.extent.getHeight=He.getHeight,Ci.extent.getIntersection=He.getIntersection,Ci.extent.getSize=He.getSize,Ci.extent.getTopLeft=He.getTopLeft,Ci.extent.getTopRight=He.getTopRight,Ci.extent.getWidth=He.getWidth,Ci.extent.intersects=He.intersects,Ci.extent.isEmpty=He.isEmpty,Ci.featureloader.xhr=ze.xhr,Ci.format.EsriJSON=T.default,Ci.format.Feature=E.default,Ci.format.GML=P.default,Ci.format.GML2=j.default,Ci.format.GML3=w.default,Ci.format.GPX=I.default,Ci.format.GeoJSON=L.default,Ci.format.IGC=R.default,Ci.format.KML=A.default,Ci.format.MVT=M.default,Ci.format.OSMXML=F.default,Ci.format.Polyline=k.default,Ci.format.Polyline.decodeDeltas=k.decodeDeltas,Ci.format.Polyline.decodeFloats=k.decodeFloats,Ci.format.Polyline.encodeDeltas=k.encodeDeltas,Ci.format.Polyline.encodeFloats=k.encodeFloats,Ci.format.TopoJSON=N.default,Ci.format.WFS=D.default,Ci.format.WFS.writeFilter=D.writeFilter,Ci.format.WKT=G.default,Ci.format.WMSCapabilities=B.default,Ci.format.WMSGetFeatureInfo=U.default,Ci.format.WMTSCapabilities=V.default,Ci.format.filter.Bbox=Z.default,Ci.format.filter.Contains=W.default,Ci.format.filter.During=H.default,Ci.format.filter.EqualTo=z.default,Ci.format.filter.GreaterThan=Y.default,Ci.format.filter.GreaterThanOrEqualTo=X.default,Ci.format.filter.Intersects=q.default,Ci.format.filter.IsBetween=K.default,Ci.format.filter.IsLike=J.default,Ci.format.filter.IsNull=Q.default,Ci.format.filter.LessThan=$.default,Ci.format.filter.LessThanOrEqualTo=tt.default,Ci.format.filter.Not=et.default,Ci.format.filter.NotEqualTo=it.default,Ci.format.filter.Or=nt.default,Ci.format.filter.Within=rt.default,Ci.format.filter.and=Ye.and,Ci.format.filter.bbox=Ye.bbox,Ci.format.filter.between=Ye.between,Ci.format.filter.contains=Ye.contains,Ci.format.filter.during=Ye.during,Ci.format.filter.equalTo=Ye.equalTo,Ci.format.filter.greaterThan=Ye.greaterThan,Ci.format.filter.greaterThanOrEqualTo=Ye.greaterThanOrEqualTo,Ci.format.filter.intersects=Ye.intersects,Ci.format.filter.isNull=Ye.isNull,Ci.format.filter.lessThan=Ye.lessThan,Ci.format.filter.lessThanOrEqualTo=Ye.lessThanOrEqualTo,Ci.format.filter.like=Ye.like,Ci.format.filter.not=Ye.not,Ci.format.filter.notEqualTo=Ye.notEqualTo,Ci.format.filter.or=Ye.or,Ci.format.filter.within=Ye.within,Ci.geom.Circle=ot.default,Ci.geom.Geometry=st.default,Ci.geom.GeometryCollection=at.default,Ci.geom.LineString=lt.default,Ci.geom.LinearRing=ut.default,Ci.geom.MultiLineString=ct.default,Ci.geom.MultiPoint=ht.default,Ci.geom.MultiPolygon=dt.default,Ci.geom.Point=ft.default,Ci.geom.Polygon=pt.default,Ci.geom.Polygon.circular=pt.circular,Ci.geom.Polygon.fromCircle=pt.fromCircle,Ci.geom.Polygon.fromExtent=pt.fromExtent,Ci.geom.SimpleGeometry=gt.default,Ci.has.DEVICE_PIXEL_RATIO=qe.DEVICE_PIXEL_RATIO,Ci.has.GEOLOCATION=qe.GEOLOCATION,Ci.has.TOUCH=qe.TOUCH,Ci.has.WEBGL=qe.WEBGL,Ci.inherits=De.inherits,Ci.interaction.DoubleClickZoom=yt.default,Ci.interaction.DragAndDrop=mt.default,Ci.interaction.DragBox=_t.default,Ci.interaction.DragPan=vt.default,Ci.interaction.DragRotate=bt.default,Ci.interaction.DragRotateAndZoom=St.default,Ci.interaction.DragZoom=Ot.default,Ci.interaction.Draw=Ct.default,Ci.interaction.Draw.createBox=Ct.createBox,Ci.interaction.Draw.createRegularPolygon=Ct.createRegularPolygon,Ci.interaction.Draw.handleEvent=Ct.handleEvent,Ci.interaction.Extent=xt.default,Ci.interaction.Interaction=Tt.default,Ci.interaction.KeyboardPan=Et.default,Ci.interaction.KeyboardZoom=Pt.default,Ci.interaction.Modify=jt.default,Ci.interaction.MouseWheelZoom=wt.default,Ci.interaction.PinchRotate=It.default,Ci.interaction.PinchZoom=Lt.default,Ci.interaction.Pointer=Rt.default,Ci.interaction.Pointer.handleEvent=Rt.handleEvent,Ci.interaction.Select=At.default,Ci.interaction.Snap=Mt.default,Ci.interaction.Translate=Ft.default,Ci.interaction.defaults=Ke.defaults,Ci.layer.Base=kt.default,Ci.layer.Group=Nt.default,Ci.layer.Heatmap=Dt.default,Ci.layer.Image=Gt.default,Ci.layer.Layer=Bt.default,Ci.layer.Tile=Ut.default,Ci.layer.Vector=Vt.default,Ci.layer.VectorTile=Zt.default,Ci.loadingstrategy.all=Je.all,Ci.loadingstrategy.bbox=Je.bbox,Ci.loadingstrategy.tile=Je.tile,Ci.proj.Projection=Wt.default,Ci.proj.Units.METERS_PER_UNIT=$e.METERS_PER_UNIT,Ci.proj.addCoordinateTransforms=Qe.addCoordinateTransforms,Ci.proj.addEquivalentProjections=Qe.addEquivalentProjections,Ci.proj.addProjection=Qe.addProjection,Ci.proj.equivalent=Qe.equivalent,Ci.proj.fromLonLat=Qe.fromLonLat,Ci.proj.get=Qe.get,Ci.proj.getPointResolution=Qe.getPointResolution,Ci.proj.getTransform=Qe.getTransform,Ci.proj.proj4.register=ti.register,Ci.proj.toLonLat=Qe.toLonLat,Ci.proj.transform=Qe.transform,Ci.proj.transformExtent=Qe.transformExtent,Ci.render.VectorContext=Ht.default,Ci.render.canvas.labelCache=ii.labelCache,Ci.render.toContext=ei.toContext,Ci.renderer.canvas.ImageLayer=zt.default,Ci.renderer.canvas.Map=Yt.default,Ci.renderer.canvas.TileLayer=Xt.default,Ci.renderer.canvas.VectorLayer=qt.default,Ci.renderer.canvas.VectorTileLayer=Kt.default,Ci.renderer.webgl.ImageLayer=Jt.default,Ci.renderer.webgl.Map=Qt.default,Ci.renderer.webgl.TileLayer=$t.default,Ci.renderer.webgl.VectorLayer=te.default,Ci.size.toSize=ni.toSize,Ci.source.BingMaps=ee.default,Ci.source.CartoDB=ie.default,Ci.source.Cluster=ne.default,Ci.source.Image=re.default,Ci.source.ImageArcGISRest=oe.default,Ci.source.ImageCanvas=se.default,Ci.source.ImageMapGuide=ae.default,Ci.source.ImageStatic=le.default,Ci.source.ImageWMS=ue.default,Ci.source.OSM=ce.default,Ci.source.OSM.ATTRIBUTION=ce.ATTRIBUTION,Ci.source.Raster=he.default,Ci.source.Source=de.default,Ci.source.Stamen=fe.default,Ci.source.Tile=pe.default,Ci.source.TileArcGISRest=ge.default,Ci.source.TileDebug=ye.default,Ci.source.TileImage=me.default,Ci.source.TileJSON=_e.default,Ci.source.TileWMS=ve.default,Ci.source.UTFGrid=be.default,Ci.source.Vector=Se.default,Ci.source.VectorTile=Oe.default,Ci.source.WMTS=Ce.default,Ci.source.WMTS.optionsFromCapabilities=Ce.optionsFromCapabilities,Ci.source.XYZ=xe.default,Ci.source.Zoomify=Te.default,Ci.sphere.getArea=ri.getArea,Ci.sphere.getDistance=ri.getDistance,Ci.sphere.getLength=ri.getLength,Ci.style.AtlasManager=Ee.default,Ci.style.Circle=Pe.default,Ci.style.Fill=je.default,Ci.style.Icon=we.default,Ci.style.IconImageCache.shared=Ie.shared,Ci.style.Image=Le.default,Ci.style.RegularShape=Re.default,Ci.style.Stroke=Ae.default,Ci.style.Style=Me.default,Ci.style.Text=Fe.default,Ci.tilegrid.TileGrid=ke.default,Ci.tilegrid.WMTS=Ne.default,Ci.tilegrid.WMTS.createFromCapabilitiesMatrixSet=Ne.createFromCapabilitiesMatrixSet,Ci.tilegrid.createXYZ=oi.createXYZ,Ci.xml.getAllTextContent=si.getAllTextContent,Ci.xml.parse=si.parse,e.MapDocTileSource=ai.MapDocTileSource,e.MapDocTileLayer=ai.MapDocTileLayer,e.CacheTileLayerSource=ai.CacheTileLayerSource,e.CacheTileLayer=ai.CacheTileLayer,e.TileLayerSource=ai.TileLayerSource,e.TileLayer_mapgis=ai.TileLayer_mapgis,e.MapLayerTileSource=ai.MapLayerTileSource,e.GdbpLayer=ai.GdbpLayer,e.BaiduMapSource=ai.BaiduMapSource,e.BaiDuLayer=ai.BaiDuLayer,e.GaodeMapSource=ai.GaodeMapSource,e.GaoDeLayer=ai.GaoDeLayer,e.TiandituMapSource=ai.TiandituMapSource,e.TianDiTu=ai.TianDiTu,e.GoogleMapSource=ai.GoogleMapSource,e.GoogleLayer=ai.GoogleLayer,e.ArcGISMapSource=ai.ArcGISMapSource,e.ArcGISLayer=ai.ArcGISLayer,e.OpenStreetMapSource=ai.OpenStreetMapSource,e.OpenStreetLayer=ai.OpenStreetLayer,e.TiandituType=ai.TiandituType,e.GoogleLayerType=ai.GoogleLayerType,e.ArcGISLayerType=ai.ArcGISLayerType,e.OpenStreetLayerType=ai.OpenStreetLayerType,e.Drag=li.Drag,e.MilStd=li.MilStd,e.MilStdDrawTool=li.MilStdDrawTool,e.MilStdModifyTool=li.MilStdModifyTool,e.MilStdDragPan=li.MilStdDragPan,e.EnumMilstdType=li.EnumMilstdType,e.MilstdParams=li.MilstdParams,e.PolygonJSON=li.PolygonJSON,e.ZDOverviewMap=li.ZDOverviewMap,e.CRangeThemeSource=ui.CRangeThemeSource,e.RangeThemeLayer=ui.RangeThemeLayer,e.rangeThemeLayer=ui.rangeThemeLayer,e.ThemeStyle=ui.ThemeStyle,e.CUniqueThemeSource=ui.CUniqueThemeSource,e.UniqueThemeLayer=ui.UniqueThemeLayer,e.uniqueThemeLayer=ui.uniqueThemeLayer,e.CSimpleThemeSource=ui.CSimpleThemeSource,e.SimpleThemeLayer=ui.SimpleThemeLayer,e.simpleThemeLayer=ui.simpleThemeLayer,e.CRandomThemeSource=ui.CRandomThemeSource,e.RandomThemeLayer=ui.RandomThemeLayer,e.randomThemeLayer=ui.randomThemeLayer,e.CGraphThemeSource=ui.CGraphThemeSource,e.GraphThemeLayer=ui.GraphThemeLayer,e.graphThemeLayer=ui.graphThemeLayer,e.CRankSymbolThemeSource=ui.CRankSymbolThemeSource,e.RankSymbolThemeLayer=ui.RankSymbolThemeLayer,e.rankSymbolThemeLayer=ui.rankSymbolThemeLayer,e.Bar=bi.Bar,e.Bar3D=bi.Bar3D,e.OverlayCircle=bi.OverlayCircle,e.Graph=bi.Graph,e.Line=bi.Line,e.Pie=bi.Pie,e.OverlayPoint=bi.OverlayPoint,e.RankSymbol=bi.RankSymbol,e.Ring=bi.Ring,e.ThemeVector=bi.ThemeVector,e.ShapeFactory=bi.ShapeFactory,e.ShapeParameters=bi.ShapeParameters,e.FeatureCircle=bi.FeatureCircle,e.Image=bi.Image,e.Label=bi.Label,e.FeatureLine=bi.FeatureLine,e.Point=bi.Point,e.FeaturePolygon=bi.FeaturePolygon,e.FeatureRectangle=bi.FeatureRectangle,e.Sector=bi.Sector,e.FeatureTheme=bi.FeatureTheme,e.LevelRenderer=bi.LevelRenderer,e.Render=bi.Render,e.Animation=bi.Animation,e.Animator=bi.Animator,e.Area=bi.Area,e.Clip=bi.Clip,e.Color=bi.Color,e.ComputeBoundingBox=bi.ComputeBoundingBox,e.Config=bi.Config,e.LevelRendererCurve=bi.LevelRendererCurve,e.Easing=bi.Easing,e.Env=bi.Env,e.LevelRendererEvent=bi.LevelRendererEvent,e.Eventful=bi.Eventful,e.Group=bi.Group,e.Handler=bi.Handler,e.Http=bi.Http,e.Math=bi.Math,e.Matrix=bi.Matrix,e.Painter=bi.Painter,e.PaintLayer=bi.PaintLayer,e.Shape=bi.Shape,e.SmicBrokenLine=bi.SmicBrokenLine,e.SmicCircle=bi.SmicCircle,e.SmicEllipse=bi.SmicEllipse,e.SmicImage=bi.SmicImage,e.SmicIsogon=bi.SmicIsogon,e.SmicPoint=bi.SmicPoint,e.SmicPolygon=bi.SmicPolygon,e.SmicRectangle=bi.SmicRectangle,e.SmicRing=bi.SmicRing,e.SmicSector=bi.SmicSector,e.SmicStar=bi.SmicStar,e.SmicText=bi.SmicText,e.Storage=bi.Storage,e.Transformable=bi.Transformable,e.Util=bi.Util,e.LevelRendererVector=bi.LevelRendererVector,e.SUtil=bi.SUtil,e.ServiceBase=ci.ServiceBase,e.AnyLine=hi.AnyLine,e.Arc=hi.Arc,e.Zondy=hi.Zondy,e.CAttStruct=hi.CAttStruct,e.CAttDataRow=hi.CAttDataRow,e.CDisplayStyle=hi.CDisplayStyle,e.CDisplayStyleExtend=hi.CDisplayStyleExtend,e.CDynNoteInfo=hi.CDynNoteInfo,e.CGDBInfo=hi.CGDBInfo,e.Circle=hi.Circle,e.CLineInfo=hi.CLineInfo,e.CPointInfo=hi.CPointInfo,e.CRegionInfo=hi.CRegionInfo,e.DynNoteLableType=hi.DynNoteLableType,e.DynShowStyle=hi.DynShowStyle,e.XClsType=hi.XClsType,e.VectClsType=hi.VectClsType,e.FeatureType=hi.FeatureType,e.FontShape=hi.FontShape,e.LabelLinType=hi.LabelLinType,e.LabelRegType=hi.LabelRegType,e.LabelPntType=hi.LabelPntType,e.RepeatType=hi.RepeatType,e.LabelSpreadType=hi.LabelSpreadType,e.LineConstrain=hi.LineConstrain,e.EightDirType=hi.EightDirType,e.ISShowArc=hi.ISShowArc,e.NetAnalyType=hi.NetAnalyType,e.NetElemType=hi.NetElemType,e.CLinAdjustType=hi.CLinAdjustType,e.CLinHeadType=hi.CLinHeadType,e.CLinJointType=hi.CLinJointType,e.CLinStyleMakeType=hi.CLinStyleMakeType,e.CItemType=hi.CItemType,e.MapType=hi.MapType,e.LayerStatusType=hi.LayerStatusType,e.Feature=hi.Feature,e.FeatureGeometry=hi.FeatureGeometry,e.FeatureGraphicBase=hi.FeatureGraphicBase,e.FeatureSet=hi.FeatureSet,e.GLine=hi.GLine,e.GPoint=hi.GPoint,e.GRegion=hi.GRegion,e.LabelLinInfo=hi.LabelLinInfo,e.LabelRegInfo=hi.LabelRegInfo,e.LablePntInfo=hi.LablePntInfo,e.MultiPolygon=hi.MultiPolygon,e.Point2D=hi.Point2D,e.Polygon=hi.Polygon,e.PolyLine=hi.PolyLine,e.Rectangle=hi.Rectangle,e.Tangram=hi.Tangram,e.VectCls=hi.VectCls,e.WebGraphicsInfo=hi.WebGraphicsInfo,e.extend=hi.extend,e.isArray=hi.isArray,e.extendDeep=hi.extendDeep,e.copy=hi.copy,e.copyExcluce=hi.copyExcluce,e.reset=hi.reset,e.getElement=hi.getElement,e.isElement=hi.isElement,e.removeItem=hi.removeItem,e.indexOf=hi.indexOf,e.modifyDOMElement=hi.modifyDOMElement,e.applyDefaults=hi.applyDefaults,e.getParameterString=hi.getParameterString,e.getWFParameterString=hi.getWFParameterString,e.urlAppend=hi.urlAppend,e.getParameters=hi.getParameters,e.IS_GECKO=hi.IS_GECKO,e.Browser=hi.Browser,e.getBrowser=hi.getBrowser,e.isSupportCanvas=hi.isSupportCanvas,e.supportCanvas=hi.supportCanvas,e.isInTheSameDomain=hi.isInTheSameDomain,e.toJSON=hi.toJSON,e.transformResult=hi.transformResult,e.copyAttributes=hi.copyAttributes,e.copyAttributesWithClip=hi.copyAttributesWithClip,e.cloneObject=hi.cloneObject,e.newGuid=hi.newGuid,e.bind=hi.bind,e.bindAsEventListener=hi.bindAsEventListener,e.getTopAnalysisResult=hi.getTopAnalysisResult,e.ChineseToUtf8=hi.ChineseToUtf8,e.DeepMerge=hi.DeepMerge,e.merge=hi.merge,e.mixin=hi.mixin,e.createCanvasContext2D=hi.createCanvasContext2D,e.ContourNoteParam=di.ContourNoteParam,e.ContourParam=di.ContourParam,e.ContourZValue=di.ContourZValue,e.ContourRegionInfo=di.ContourRegionInfo,e.MeshingParam=di.MeshingParam,e.NetAnalyse=di.NetAnalyse,e.NetAnalysisExtent=di.NetAnalysisExtent,e.SlopLineParam=di.SlopLineParam,e.CommonServiceBase=fi.CommonServiceBase,e.Events=fi.Events,e.CORS=fi.CORS,e.RequestTimeout=fi.RequestTimeout,e.FetchRequest=fi.FetchRequest,e.IgsServiceBase=fi.IgsServiceBase,e.JSONFormat=fi.JSONFormat,e.ColorInfo=pi.ColorInfo,e.GDBInfo=pi.GDBInfo,e.MapDoc=pi.MapDoc,e.CatalogService=pi.CatalogService,e.TileLayer=pi.TileLayer,e.VectorLayer=pi.VectorLayer,e.EditDocFeature=gi.EditDocFeature,e.EditLayerFeature=gi.EditLayerFeature,e.EditServiceBase=gi.EditServiceBase,e.MultiGeoQuery=gi.MultiGeoQuery,e.MultiGeoQueryParameter=gi.MultiGeoQueryParameter,e.ObjClsQuery=gi.ObjClsQuery,e.ObjClsQueryParameter=gi.ObjClsQueryParameter,e.QueryByLayerParameter=gi.QueryByLayerParameter,e.QueryDocFeature=gi.QueryDocFeature,e.QueryFeatureRule=gi.QueryFeatureRule,e.QueryFeatureStruct=gi.QueryFeatureStruct,e.QueryLayerFeature=gi.QueryLayerFeature,e.QueryParameter=gi.QueryParameter,e.QueryParameterBase=gi.QueryParameterBase,e.QueryServiceBase=gi.QueryServiceBase,e.AnalysisBase=yi.AnalysisBase,e.ClassBufferBase=yi.ClassBufferBase,e.ClassBufferByMultiplyRing=yi.ClassBufferByMultiplyRing,e.ClassBufferBySingleRing=yi.ClassBufferBySingleRing,e.ClipBase=yi.ClipBase,e.ClipByCircle=yi.ClipByCircle,e.ClipByLayer=yi.ClipByLayer,e.ClipByPolygon=yi.ClipByPolygon,e.ContourAnalyse=yi.ContourAnalyse,e.FeatureBuffBase=yi.FeatureBuffBase,e.FeatureBuffByMultiplyRing=yi.FeatureBuffByMultiplyRing,e.FeatureBuffBySingleRing=yi.FeatureBuffBySingleRing,e.NetAnalysis=yi.NetAnalysis,e.OverlayBase=yi.OverlayBase,e.OverlayByLayer=yi.OverlayByLayer,e.OverlayByPolygon=yi.OverlayByPolygon,e.ProjectBase=yi.ProjectBase,e.ProjectByLayer=yi.ProjectByLayer,e.ProjectBySRID=yi.ProjectBySRID,e.CalArea=mi.CalArea,e.CalPolyLineLength=mi.CalPolyLineLength,e.CalServiceBase=mi.CalServiceBase,e.CProjectBySRSID=mi.CProjectBySRSID,e.CProjectParam=mi.CProjectParam,e.GeometryAnalysisBase=mi.GeometryAnalysisBase,e.ProjectDots=mi.ProjectDots,e.ProjectRang=mi.ProjectRang,e.Smooth=mi.Smooth,e.TopAnalysis=mi.TopAnalysis,e.GetDocImageService=_i.GetDocImageService,e.GetLayerImageService=_i.GetLayerImageService,e.GetMapImageService=_i.GetMapImageService,e.GetMapInfoService=_i.GetMapInfoService,e.GetTileImageService=_i.GetTileImageService,e.MapServiceBase=_i.MapServiceBase,e.CAllOtherDataItemInfoSource=vi.CAllOtherDataItemInfoSource,e.CAnnInfo=vi.CAnnInfo,e.CChartLabelFormat=vi.CChartLabelFormat,e.CChartTheme=vi.CChartTheme,e.CChartThemeInfo=vi.CChartThemeInfo,e.CChartThemeRepresentInfo=vi.CChartThemeRepresentInfo,e.CChartType=vi.CChartType,e.CDotDensityTheme=vi.CDotDensityTheme,e.CFourColorTheme=vi.CFourColorTheme,e.CGraduatedSymbolTheme=vi.CGraduatedSymbolTheme,e.CLinInfo=vi.CLinInfo,e.CMultiClassTheme=vi.CMultiClassTheme,e.CPntInfo=vi.CPntInfo,e.CRandomTheme=vi.CRandomTheme,e.CRangeTheme=vi.CRangeTheme,e.CRangeThemeInfo=vi.CRangeThemeInfo,e.CRegInfo=vi.CRegInfo,e.CSimpleTheme=vi.CSimpleTheme,e.CTheme=vi.CTheme,e.CThemeInfo=vi.CThemeInfo,e.CUniqueTheme=vi.CUniqueTheme,e.CUniqueThemeInfo=vi.CUniqueThemeInfo,e.ExpInfo=vi.ExpInfo,e.FolderInfo=vi.FolderInfo,e.FolderInfoAttribute=vi.FolderInfoAttribute,e.ItemValue=vi.ItemValue,e.ThemeOper=vi.ThemeOper,e.ThemesInfo=vi.ThemesInfo},function(t,e,i){t.exports=function(){"use strict";function t(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function e(t,e){return t<e?-1:t>e?1:0}return function(i,n,r,o,s){!function e(i,n,r,o,s){for(;o>r;){if(o-r>600){var a=o-r+1,l=n-r+1,u=Math.log(a),c=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*c*(a-c)/a)*(l-a/2<0?-1:1),d=Math.max(r,Math.floor(n-l*c/a+h)),f=Math.min(o,Math.floor(n+(a-l)*c/a+h));e(i,n,d,f,s)}var p=i[n],g=r,y=o;for(t(i,r,n),s(i[o],p)>0&&t(i,r,o);g<y;){for(t(i,g,y),g++,y--;s(i[g],p)<0;)g++;for(;s(i[y],p)>0;)y--}0===s(i[r],p)?t(i,r,y):t(i,++y,o),y<=n&&(r=y+1),n<=y&&(o=y-1)}}(i,n,r||0,o||i.length-1,s||e)}}()},function(t,e,i){"use strict";i.r(e),i.d(e,"render",function(){return c});var n=i(1),r=i(4),o=i(10),s=i(25),a=i(45),l=i(9);const u=function(t){const e=t||{},i=document.createElement("DIV");i.className=void 0!==e.className?e.className:"ol-mouse-position",a.default.call(this,{element:i,render:e.render||c,target:e.target}),Object(r.listen)(this,Object(s.getChangeEventType)("projection"),this.handleProjectionChanged_,this),e.coordinateFormat&&this.setCoordinateFormat(e.coordinateFormat),e.projection&&this.setProjection(e.projection),this.undefinedHTML_="undefinedHTML"in e?e.undefinedHTML:"&nbsp;",this.renderOnMouseOut_=!!this.undefinedHTML_,this.renderedHTML_=i.innerHTML,this.mapProjection_=null,this.transform_=null,this.lastMouseMovePixel_=null};function c(t){const e=t.frameState;e?this.mapProjection_!=e.viewState.projection&&(this.mapProjection_=e.viewState.projection,this.transform_=null):this.mapProjection_=null,this.updateHTML_(this.lastMouseMovePixel_)}Object(n.inherits)(u,a.default),u.prototype.handleProjectionChanged_=function(){this.transform_=null},u.prototype.getCoordinateFormat=function(){return this.get("coordinateFormat")},u.prototype.getProjection=function(){return this.get("projection")},u.prototype.handleMouseMove=function(t){const e=this.getMap();this.lastMouseMovePixel_=e.getEventPixel(t),this.updateHTML_(this.lastMouseMovePixel_)},u.prototype.handleMouseOut=function(t){this.updateHTML_(null),this.lastMouseMovePixel_=null},u.prototype.setMap=function(t){if(a.default.prototype.setMap.call(this,t),t){const e=t.getViewport();this.listenerKeys.push(Object(r.listen)(e,o.default.MOUSEMOVE,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push(Object(r.listen)(e,o.default.MOUSEOUT,this.handleMouseOut,this))}},u.prototype.setCoordinateFormat=function(t){this.set("coordinateFormat",t)},u.prototype.setProjection=function(t){this.set("projection",Object(l.get)(t))},u.prototype.updateHTML_=function(t){let e=this.undefinedHTML_;if(t&&this.mapProjection_){if(!this.transform_){const t=this.getProjection();this.transform_=t?Object(l.getTransformFromProjections)(this.mapProjection_,t):l.identityTransform}const i=this.getMap().getCoordinateFromPixel(t);if(i){this.transform_(i,i);const t=this.getCoordinateFormat();e=t?t(i):i.toString()}}this.renderedHTML_&&e===this.renderedHTML_||(this.element.innerHTML=e,this.renderedHTML_=e)},e.default=u},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(38),o=i(23),s=i(2),a=i(33),l=i(158),u=i(19),c=i(5),h=i(41),d=i(154),f=i(58),p=i(71),g=i(76),y=i(39),m=i(36),_=i(81),v=i(87),b=i(11),S=i(9);const O={};O[c.default.POINT]=function(t){let e;e=void 0!==t.m&&void 0!==t.z?new y.default([t.x,t.y,t.z,t.m],u.default.XYZM):void 0!==t.z?new y.default([t.x,t.y,t.z],u.default.XYZ):void 0!==t.m?new y.default([t.x,t.y,t.m],u.default.XYM):new y.default([t.x,t.y]);return e},O[c.default.LINE_STRING]=function(t){const e=E(t);return new h.default(t.paths[0],e)},O[c.default.POLYGON]=function(t){const e=E(t);return new m.default(t.rings,e)},O[c.default.MULTI_POINT]=function(t){const e=E(t);return new p.default(t.points,e)},O[c.default.MULTI_LINE_STRING]=function(t){const e=E(t);return new f.default(t.paths,e)},O[c.default.MULTI_POLYGON]=function(t){const e=E(t);return new g.default(t.rings,e)};const C={};C[c.default.POINT]=function(t,e){const i=t.getCoordinates();let n;const r=t.getLayout();r===u.default.XYZ?n={x:i[0],y:i[1],z:i[2]}:r===u.default.XYM?n={x:i[0],y:i[1],m:i[2]}:r===u.default.XYZM?n={x:i[0],y:i[1],z:i[2],m:i[3]}:r===u.default.XY?n={x:i[0],y:i[1]}:Object(o.a)(!1,34);return n},C[c.default.LINE_STRING]=function(t,e){const i=P(t);return{hasZ:i.hasZ,hasM:i.hasM,paths:[t.getCoordinates()]}},C[c.default.POLYGON]=function(t,e){const i=P(t);return{hasZ:i.hasZ,hasM:i.hasM,rings:t.getCoordinates(!1)}},C[c.default.MULTI_POINT]=function(t,e){const i=P(t);return{hasZ:i.hasZ,hasM:i.hasM,points:t.getCoordinates()}},C[c.default.MULTI_LINE_STRING]=function(t,e){const i=P(t);return{hasZ:i.hasZ,hasM:i.hasM,paths:t.getCoordinates()}},C[c.default.MULTI_POLYGON]=function(t,e){const i=P(t),n=t.getCoordinates(!1),r=[];for(let t=0;t<n.length;t++)for(let e=n[t].length-1;e>=0;e--)r.push(n[t][e]);return{hasZ:i.hasZ,hasM:i.hasM,rings:r}};const x=function(t){const e=t||{};l.a.call(this),this.geometryName_=e.geometryName};function T(t,e){if(!t)return null;let i;if("number"==typeof t.x&&"number"==typeof t.y)i=c.default.POINT;else if(t.points)i=c.default.MULTI_POINT;else if(t.paths)i=1===t.paths.length?c.default.LINE_STRING:c.default.MULTI_LINE_STRING;else if(t.rings){const e=E(t),n=function(t,e){const i=[],n=[],r=[];let o,a;for(o=0,a=t.length;o<a;++o){i.length=0,Object(_.b)(i,0,t[o],e.length);const s=Object(v.a)(i,0,i.length,e.length);s?n.push([t[o]]):r.push(t[o])}for(;r.length;){const t=r.shift();let e=!1;for(o=n.length-1;o>=0;o--){const i=n[o][0],r=Object(s.containsExtent)(new d.default(i).getExtent(),new d.default(t).getExtent());if(r){n[o].push(t),e=!0;break}}e||n.push([t.reverse()])}return n}(t.rings,e);t=Object(b.assign)({},t),1===n.length?(i=c.default.POLYGON,t.rings=n[0]):(i=c.default.MULTI_POLYGON,t.rings=n)}const n=O[i];return Object(a.transformWithOptions)(n(t),!1,e)}function E(t){let e=u.default.XY;return!0===t.hasZ&&!0===t.hasM?e=u.default.XYZM:!0===t.hasZ?e=u.default.XYZ:!0===t.hasM&&(e=u.default.XYM),e}function P(t){const e=t.getLayout();return{hasZ:e===u.default.XYZ||e===u.default.XYZM,hasM:e===u.default.XYM||e===u.default.XYZM}}function j(t,e){return(0,C[t.getType()])(Object(a.transformWithOptions)(t,!0,e),e)}Object(n.inherits)(x,l.a),x.prototype.readFeature,x.prototype.readFeatures,x.prototype.readFeatureFromObject=function(t,e){const i=t,n=T(i.geometry,e),o=new r.default;return this.geometryName_&&o.setGeometryName(this.geometryName_),o.setGeometry(n),e&&e.idField&&i.attributes[e.idField]&&o.setId(i.attributes[e.idField]),i.attributes&&o.setProperties(i.attributes),o},x.prototype.readFeaturesFromObject=function(t,e){const i=e||{};if(t.features){const e=[],n=t.features;i.idField=t.objectIdFieldName;for(let t=0,r=n.length;t<r;++t)e.push(this.readFeatureFromObject(n[t],i));return e}return[this.readFeatureFromObject(t,i)]},x.prototype.readGeometry,x.prototype.readGeometryFromObject=function(t,e){return T(t,e)},x.prototype.readProjection,x.prototype.readProjectionFromObject=function(t){const e=t;if(e.spatialReference&&e.spatialReference.wkid){const t=e.spatialReference.wkid;return Object(S.get)("EPSG:"+t)}return null},x.prototype.writeGeometry,x.prototype.writeGeometryObject=function(t,e){return j(t,this.adaptOptions(e))},x.prototype.writeFeature,x.prototype.writeFeatureObject=function(t,e){e=this.adaptOptions(e);const i={},n=t.getGeometry();n&&(i.geometry=j(n,e),e&&e.featureProjection&&(i.geometry.spatialReference={wkid:Object(S.get)(e.featureProjection).getCode().split(":").pop()}));const r=t.getProperties();return delete r[t.getGeometryName()],Object(b.isEmpty)(r)?i.attributes={}:i.attributes=r,i},x.prototype.writeFeatures,x.prototype.writeFeaturesObject=function(t,e){e=this.adaptOptions(e);const i=[];for(let n=0,r=t.length;n<r;++n)i.push(this.writeFeatureObject(t[n],e));return{features:i}},e.default=x},function(t,e,i){"use strict";i.r(e);const n=i(133).default;n.prototype.writeFeatures,n.prototype.writeFeaturesNode,e.default=n},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(38),o=i(12),s=i(33),a=i(85),l=i(3),u=i(19),c=i(41),h=i(58),d=i(39),f=i(9),p=i(0);const g=function(t){const e=t||{};a.a.call(this),this.dataProjection=Object(f.get)("EPSG:4326"),this.readExtensions_=e.readExtensions};Object(n.inherits)(g,a.a);const y=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],m={rte:W,trk:H,wpt:z},_=Object(p.makeStructureNS)(y,{rte:Object(p.makeArrayPusher)(W),trk:Object(p.makeArrayPusher)(H),wpt:Object(p.makeArrayPusher)(z)}),v=Object(p.makeStructureNS)(y,{text:Object(p.makeObjectPropertySetter)(l.h,"linkText"),type:Object(p.makeObjectPropertySetter)(l.h,"linkType")}),b=Object(p.makeStructureNS)(y,{name:Object(p.makeObjectPropertySetter)(l.h),cmt:Object(p.makeObjectPropertySetter)(l.h),desc:Object(p.makeObjectPropertySetter)(l.h),src:Object(p.makeObjectPropertySetter)(l.h),link:V,number:Object(p.makeObjectPropertySetter)(l.f),extensions:Z,type:Object(p.makeObjectPropertySetter)(l.h),rtept:function(t,e){const i=Object(p.pushParseAndPop)({},S,t,e);if(i){const n=e[e.length-1],r=n.flatCoordinates,o=n.layoutOptions;B(r,o,t,i)}}}),S=Object(p.makeStructureNS)(y,{ele:Object(p.makeObjectPropertySetter)(l.d),time:Object(p.makeObjectPropertySetter)(l.c)}),O=Object(p.makeStructureNS)(y,{name:Object(p.makeObjectPropertySetter)(l.h),cmt:Object(p.makeObjectPropertySetter)(l.h),desc:Object(p.makeObjectPropertySetter)(l.h),src:Object(p.makeObjectPropertySetter)(l.h),link:V,number:Object(p.makeObjectPropertySetter)(l.f),type:Object(p.makeObjectPropertySetter)(l.h),extensions:Z,trkseg:function(t,e){const i=e[e.length-1];Object(p.parseNode)(C,t,e);const n=i.flatCoordinates;i.ends.push(n.length)}}),C=Object(p.makeStructureNS)(y,{trkpt:function(t,e){const i=Object(p.pushParseAndPop)({},x,t,e);if(i){const n=e[e.length-1],r=n.flatCoordinates,o=n.layoutOptions;B(r,o,t,i)}}}),x=Object(p.makeStructureNS)(y,{ele:Object(p.makeObjectPropertySetter)(l.d),time:Object(p.makeObjectPropertySetter)(l.c)}),T=Object(p.makeStructureNS)(y,{ele:Object(p.makeObjectPropertySetter)(l.d),time:Object(p.makeObjectPropertySetter)(l.c),magvar:Object(p.makeObjectPropertySetter)(l.d),geoidheight:Object(p.makeObjectPropertySetter)(l.d),name:Object(p.makeObjectPropertySetter)(l.h),cmt:Object(p.makeObjectPropertySetter)(l.h),desc:Object(p.makeObjectPropertySetter)(l.h),src:Object(p.makeObjectPropertySetter)(l.h),link:V,sym:Object(p.makeObjectPropertySetter)(l.h),type:Object(p.makeObjectPropertySetter)(l.h),fix:Object(p.makeObjectPropertySetter)(l.h),sat:Object(p.makeObjectPropertySetter)(l.f),hdop:Object(p.makeObjectPropertySetter)(l.d),vdop:Object(p.makeObjectPropertySetter)(l.d),pdop:Object(p.makeObjectPropertySetter)(l.d),ageofdgpsdata:Object(p.makeObjectPropertySetter)(l.d),dgpsid:Object(p.makeObjectPropertySetter)(l.f),extensions:Z}),E=["text","type"],P=Object(p.makeStructureNS)(y,{text:Object(p.makeChildAppender)(l.n),type:Object(p.makeChildAppender)(l.n)}),j=Object(p.makeStructureNS)(y,["name","cmt","desc","src","link","number","type","rtept"]),w=Object(p.makeStructureNS)(y,{name:Object(p.makeChildAppender)(l.n),cmt:Object(p.makeChildAppender)(l.n),desc:Object(p.makeChildAppender)(l.n),src:Object(p.makeChildAppender)(l.n),link:Object(p.makeChildAppender)(Y),number:Object(p.makeChildAppender)(l.m),type:Object(p.makeChildAppender)(l.n),rtept:Object(p.makeArraySerializer)(Object(p.makeChildAppender)(X))}),I=Object(p.makeStructureNS)(y,["ele","time"]),L=Object(p.makeStructureNS)(y,["name","cmt","desc","src","link","number","type","trkseg"]),R=Object(p.makeStructureNS)(y,{name:Object(p.makeChildAppender)(l.n),cmt:Object(p.makeChildAppender)(l.n),desc:Object(p.makeChildAppender)(l.n),src:Object(p.makeChildAppender)(l.n),link:Object(p.makeChildAppender)(Y),number:Object(p.makeChildAppender)(l.m),type:Object(p.makeChildAppender)(l.n),trkseg:Object(p.makeArraySerializer)(Object(p.makeChildAppender)(function(t,e,i){const n={node:t,geometryLayout:e.getLayout(),properties:{}};Object(p.pushSerializeAndPop)(n,M,A,e.getCoordinates(),i)}))}),A=Object(p.makeSimpleNodeFactory)("trkpt"),M=Object(p.makeStructureNS)(y,{trkpt:Object(p.makeChildAppender)(X)}),F=Object(p.makeStructureNS)(y,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),k=Object(p.makeStructureNS)(y,{ele:Object(p.makeChildAppender)(l.l),time:Object(p.makeChildAppender)(l.k),magvar:Object(p.makeChildAppender)(l.l),geoidheight:Object(p.makeChildAppender)(l.l),name:Object(p.makeChildAppender)(l.n),cmt:Object(p.makeChildAppender)(l.n),desc:Object(p.makeChildAppender)(l.n),src:Object(p.makeChildAppender)(l.n),link:Object(p.makeChildAppender)(Y),sym:Object(p.makeChildAppender)(l.n),type:Object(p.makeChildAppender)(l.n),fix:Object(p.makeChildAppender)(l.n),sat:Object(p.makeChildAppender)(l.m),hdop:Object(p.makeChildAppender)(l.l),vdop:Object(p.makeChildAppender)(l.l),pdop:Object(p.makeChildAppender)(l.l),ageofdgpsdata:Object(p.makeChildAppender)(l.l),dgpsid:Object(p.makeChildAppender)(l.m)}),N={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function D(t,e,i){const n=t.getGeometry();if(n){const t=N[n.getType()];if(t){const i=e[e.length-1].node;return Object(p.createElementNS)(i.namespaceURI,t)}}}const G=Object(p.makeStructureNS)(y,{rte:Object(p.makeChildAppender)(function(t,e,i){const n=i[0],r=e.getProperties(),o={node:t,properties:r};let a=e.getGeometry();a&&(a=Object(s.transformWithOptions)(a,!0,n),o.geometryLayout=a.getLayout(),r.rtept=a.getCoordinates());const l=i[i.length-1].node,u=j[l.namespaceURI],c=Object(p.makeSequence)(r,u);Object(p.pushSerializeAndPop)(o,w,p.OBJECT_PROPERTY_NODE_FACTORY,c,i,u)}),trk:Object(p.makeChildAppender)(function(t,e,i){const n=i[0],r=e.getProperties(),o={node:t,properties:r};let a=e.getGeometry();a&&(a=Object(s.transformWithOptions)(a,!0,n),r.trkseg=a.getLineStrings());const l=i[i.length-1].node,u=L[l.namespaceURI],c=Object(p.makeSequence)(r,u);Object(p.pushSerializeAndPop)(o,R,p.OBJECT_PROPERTY_NODE_FACTORY,c,i,u)}),wpt:Object(p.makeChildAppender)(function(t,e,i){const n=i[0],r=i[i.length-1];r.properties=e.getProperties();let o=e.getGeometry();o&&(o=Object(s.transformWithOptions)(o,!0,n),r.geometryLayout=o.getLayout(),X(t,o.getCoordinates(),i))})});function B(t,e,i,n){return t.push(parseFloat(i.getAttribute("lon")),parseFloat(i.getAttribute("lat"))),"ele"in n?(t.push(n.ele),delete n.ele,e.hasZ=!0):t.push(0),"time"in n?(t.push(n.time),delete n.time,e.hasM=!0):t.push(0),t}function U(t,e,i){let n=u.default.XY,r=2;if(t.hasZ&&t.hasM?(n=u.default.XYZM,r=4):t.hasZ?(n=u.default.XYZ,r=3):t.hasM&&(n=u.default.XYM,r=3),4!==r){for(let i=0,n=e.length/4;i<n;i++)e[i*r]=e[4*i],e[i*r+1]=e[4*i+1],t.hasZ&&(e[i*r+2]=e[4*i+2]),t.hasM&&(e[i*r+2]=e[4*i+3]);if(e.length=e.length/4*r,i)for(let t=0,e=i.length;t<e;t++)i[t]=i[t]/4*r}return n}function V(t,e){const i=e[e.length-1],n=t.getAttribute("href");null!==n&&(i.link=n),Object(p.parseNode)(v,t,e)}function Z(t,e){e[e.length-1].extensionsNode_=t}function W(t,e){const i=e[0],n=Object(p.pushParseAndPop)({flatCoordinates:[],layoutOptions:{}},b,t,e);if(!n)return;const o=n.flatCoordinates;delete n.flatCoordinates;const a=n.layoutOptions;delete n.layoutOptions;const l=U(a,o),u=new c.default(null);u.setFlatCoordinates(l,o),Object(s.transformWithOptions)(u,!1,i);const h=new r.default(u);return h.setProperties(n),h}function H(t,e){const i=e[0],n=Object(p.pushParseAndPop)({flatCoordinates:[],ends:[],layoutOptions:{}},O,t,e);if(!n)return;const o=n.flatCoordinates;delete n.flatCoordinates;const a=n.ends;delete n.ends;const l=n.layoutOptions;delete n.layoutOptions;const u=U(l,o,a),c=new h.default(null);c.setFlatCoordinates(u,o,a),Object(s.transformWithOptions)(c,!1,i);const d=new r.default(c);return d.setProperties(n),d}function z(t,e){const i=e[0],n=Object(p.pushParseAndPop)({},T,t,e);if(!n)return;const o={},a=B([],o,t,n),l=U(o,a),u=new d.default(a,l);Object(s.transformWithOptions)(u,!1,i);const c=new r.default(u);return c.setProperties(n),c}function Y(t,e,i){t.setAttribute("href",e);const n=i[i.length-1].properties,r=[n.linkText,n.linkType];Object(p.pushSerializeAndPop)({node:t},P,p.OBJECT_PROPERTY_NODE_FACTORY,r,i,E)}function X(t,e,i){const n=i[i.length-1],r=n.node.namespaceURI,o=n.properties;switch(t.setAttributeNS(null,"lat",e[1]),t.setAttributeNS(null,"lon",e[0]),n.geometryLayout){case u.default.XYZM:0!==e[3]&&(o.time=e[3]);case u.default.XYZ:0!==e[2]&&(o.ele=e[2]);break;case u.default.XYM:0!==e[2]&&(o.time=e[2])}const s="rtept"==t.nodeName?I[r]:F[r],a=Object(p.makeSequence)(o,s);Object(p.pushSerializeAndPop)({node:t,properties:o},k,p.OBJECT_PROPERTY_NODE_FACTORY,a,i,s)}g.prototype.handleReadExtensions_=function(t){t||(t=[]);for(let e=0,i=t.length;e<i;++e){const i=t[e];if(this.readExtensions_){const t=i.get("extensionsNode_")||null;this.readExtensions_(i,t)}i.set("extensionsNode_",void 0)}},g.prototype.readFeature,g.prototype.readFeatureFromNode=function(t,e){if(!Object(o.f)(y,t.namespaceURI))return null;const i=m[t.localName];if(!i)return null;const n=i(t,[this.getReadOptions(t,e)]);return n?(this.handleReadExtensions_([n]),n):null},g.prototype.readFeatures,g.prototype.readFeaturesFromNode=function(t,e){if(!Object(o.f)(y,t.namespaceURI))return[];if("gpx"==t.localName){const i=Object(p.pushParseAndPop)([],_,t,[this.getReadOptions(t,e)]);return i?(this.handleReadExtensions_(i),i):[]}return[]},g.prototype.readProjection,g.prototype.writeFeatures,g.prototype.writeFeaturesNode=function(t,e){e=this.adaptOptions(e);const i=Object(p.createElementNS)("http://www.topografix.com/GPX/1/1","gpx");return i.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",p.XML_SCHEMA_INSTANCE_URI),i.setAttributeNS(p.XML_SCHEMA_INSTANCE_URI,"xsi:schemaLocation","http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd"),i.setAttribute("version","1.1"),i.setAttribute("creator","OpenLayers"),Object(p.pushSerializeAndPop)({node:i},G,D,t,[e]),i},e.default=g},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(23),o=i(38),s=i(33),a=i(158),l=i(131),u=i(41),c=i(58),h=i(71),d=i(76),f=i(39),p=i(36),g=i(11),y=i(9);const m=function(t){const e=t||{};a.a.call(this),this.dataProjection=Object(y.get)(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=Object(y.get)(e.featureProjection)),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName};Object(n.inherits)(m,a.a);const _={Point:function(t){return new f.default(t.coordinates)},LineString:function(t){return new u.default(t.coordinates)},Polygon:function(t){return new p.default(t.coordinates)},MultiPoint:function(t){return new h.default(t.coordinates)},MultiLineString:function(t){return new c.default(t.coordinates)},MultiPolygon:function(t){return new d.default(t.coordinates)},GeometryCollection:function(t,e){const i=t.geometries.map(function(t){return b(t,e)});return new l.default(i)}},v={Point:function(t,e){return{type:"Point",coordinates:t.getCoordinates()}},LineString:function(t,e){return{type:"LineString",coordinates:t.getCoordinates()}},Polygon:function(t,e){let i;e&&(i=e.rightHanded);return{type:"Polygon",coordinates:t.getCoordinates(i)}},MultiPoint:function(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}},MultiLineString:function(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}},MultiPolygon:function(t,e){let i;e&&(i=e.rightHanded);return{type:"MultiPolygon",coordinates:t.getCoordinates(i)}},GeometryCollection:function(t,e){return{type:"GeometryCollection",geometries:t.getGeometriesArray().map(function(t){const i=Object(g.assign)({},e);return delete i.featureProjection,S(t,i)})}},Circle:function(t){return{type:"GeometryCollection",geometries:[]}}};function b(t,e){if(!t)return null;const i=_[t.type];return Object(s.transformWithOptions)(i(t),!1,e)}function S(t,e){return(0,v[t.getType()])(Object(s.transformWithOptions)(t,!0,e),e)}m.prototype.readFeature,m.prototype.readFeatures,m.prototype.readFeatureFromObject=function(t,e){let i=null;const n=b((i="Feature"===t.type?t:{type:"Feature",geometry:t}).geometry,e),r=new o.default;return this.geometryName_?r.setGeometryName(this.geometryName_):this.extractGeometryName_&&void 0!==i.geometry_name&&r.setGeometryName(i.geometry_name),r.setGeometry(n),void 0!==i.id&&r.setId(i.id),i.properties&&r.setProperties(i.properties),r},m.prototype.readFeaturesFromObject=function(t,e){let i=null;if("FeatureCollection"===t.type){i=[];const n=t.features;for(let t=0,r=n.length;t<r;++t)i.push(this.readFeatureFromObject(n[t],e))}else i=[this.readFeatureFromObject(t,e)];return i},m.prototype.readGeometry,m.prototype.readGeometryFromObject=function(t,e){return b(t,e)},m.prototype.readProjection,m.prototype.readProjectionFromObject=function(t){const e=t.crs;let i;return e?"name"==e.type?i=Object(y.get)(e.properties.name):Object(r.a)(!1,36):i=this.dataProjection,i},m.prototype.writeFeature,m.prototype.writeFeatureObject=function(t,e){e=this.adaptOptions(e);const i={type:"Feature"},n=t.getId();void 0!==n&&(i.id=n);const r=t.getGeometry();i.geometry=r?S(r,e):null;const o=t.getProperties();return delete o[t.getGeometryName()],Object(g.isEmpty)(o)?i.properties=null:i.properties=o,i},m.prototype.writeFeatures,m.prototype.writeFeaturesObject=function(t,e){e=this.adaptOptions(e);const i=[];for(let n=0,r=t.length;n<r;++n)i.push(this.writeFeatureObject(t[n],e));return{type:"FeatureCollection",features:i}},m.prototype.writeGeometry,m.prototype.writeGeometryObject=function(t,e){return S(t,this.adaptOptions(e))},e.default=m},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(38),o=i(33),s=i(159),a=i(19),l=i(41),u=i(9);const c="barometric",h="gps",d="none",f=function(t){const e=t||{};s.a.call(this),this.dataProjection=Object(u.get)("EPSG:4326"),this.altitudeMode_=e.altitudeMode?e.altitudeMode:d};Object(n.inherits)(f,s.a);const p=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{5})([NS])(\d{3})(\d{5})([EW])([AV])(\d{5})(\d{5})/,g=/^H.([A-Z]{3}).*?:(.*)/,y=/^HFDTE(\d{2})(\d{2})(\d{2})/,m=/\r\n|\r|\n/;f.prototype.readFeature,f.prototype.readFeatureFromText=function(t,e){const i=this.altitudeMode_,n=t.split(m),s={},u=[];let f,_,v=2e3,b=0,S=1,O=-1;for(f=0,_=n.length;f<_;++f){const t=n[f];let e;if("B"==t.charAt(0)){if(e=p.exec(t)){const t=parseInt(e[1],10),n=parseInt(e[2],10),r=parseInt(e[3],10);let o=parseInt(e[4],10)+parseInt(e[5],10)/6e4;"S"==e[6]&&(o=-o);let s=parseInt(e[7],10)+parseInt(e[8],10)/6e4;if("W"==e[9]&&(s=-s),u.push(s,o),i!=d){let t;t=i==h?parseInt(e[11],10):i==c?parseInt(e[12],10):0,u.push(t)}let a=Date.UTC(v,b,S,t,n,r);a<O&&(a=Date.UTC(v,b,S+1,t,n,r)),u.push(a/1e3),O=a}}else"H"==t.charAt(0)&&((e=y.exec(t))?(S=parseInt(e[1],10),b=parseInt(e[2],10)-1,v=2e3+parseInt(e[3],10)):(e=g.exec(t))&&(s[e[1]]=e[2].trim()))}if(0===u.length)return null;const C=new l.default(null),x=i==d?a.default.XYM:a.default.XYZM;C.setFlatCoordinates(x,u);const T=new r.default(Object(o.transformWithOptions)(C,!1,e));return T.setProperties(s),T},f.prototype.readFeatures,f.prototype.readFeaturesFromText=function(t,e){const i=this.readFeatureFromText(t,e);return i?[i]:[]},f.prototype.readProjection,f.prototype.writeFeatureText=function(t,e){},f.prototype.writeFeaturesText=function(t,e){},f.prototype.writeGeometryText=function(t,e){},f.prototype.readGeometryFromText=function(t,e){},e.default=f},function(t,e,i){"use strict";i.r(e),i.d(e,"getDefaultFillStyle",function(){return D}),i.d(e,"getDefaultImageStyle",function(){return U}),i.d(e,"getDefaultStrokeStyle",function(){return W}),i.d(e,"getDefaultTextStyle",function(){return z}),i.d(e,"getDefaultStyle",function(){return X}),i.d(e,"getDefaultStyleArray",function(){return K}),i.d(e,"readFlatCoordinates",function(){return rt});var n=i(1),r=i(38),o=i(12),s=i(23),a=i(63),l=i(33),u=i(85),c=i(3),h=i(131),d=i(19),f=i(5),p=i(41),g=i(58),y=i(71),m=i(76),_=i(39),v=i(36),b=i(18),S=i(9),O=i(96),C=i(192),x=i(92),T=i(70),E=i(91),P=i(62),j=i(188),w=i(0);let I,L,R,A,M,F,k,N=null;function D(){return N}let G,B=null;function U(){return B}let V,Z=null;function W(){return Z}let H=null;function z(){return H}let Y=null;function X(){return Y}let q=null;function K(){return q}const J=function(t){const e=t||{};u.a.call(this),q||(I=[255,255,255,1],N=new O.default({color:I}),L=[20,2],R=x.a.PIXELS,A=x.a.PIXELS,M=[64,64],F="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",k=.5,B=new C.default({anchor:L,anchorOrigin:T.a.BOTTOM_LEFT,anchorXUnits:R,anchorYUnits:A,crossOrigin:"anonymous",rotation:0,scale:k,size:M,src:F}),G="NO_IMAGE",Z=new E.default({color:I,width:1}),V=new E.default({color:[51,51,51,1],width:2}),H=new j.default({font:"bold 16px Helvetica",fill:N,stroke:V,scale:.8}),Y=new P.default({fill:N,image:B,text:H,stroke:Z,zIndex:0}),q=[Y]),this.dataProjection=Object(S.get)("EPSG:4326"),this.defaultStyle_=e.defaultStyle?e.defaultStyle:q,this.extractStyles_=void 0===e.extractStyles||e.extractStyles,this.writeStyles_=void 0===e.writeStyles||e.writeStyles,this.sharedStyles_={},this.showPointNames_=void 0===e.showPointNames||e.showPointNames};Object(n.inherits)(J,u.a);const Q=["http://www.google.com/kml/ext/2.2"],$=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],tt={fraction:x.a.FRACTION,pixels:x.a.PIXELS,insetPixels:x.a.PIXELS};function et(t,e){let i=null;const n=[0,0];let r="start";if(t.getImage()){let e=t.getImage().getImageSize();if(null===e&&(e=M),2==e.length){const i=t.getImage().getScale();n[0]=i*e[0]/2,n[1]=-i*e[1]/2,r="left"}}if(null!==t.getText()){const e=t.getText();(i=e.clone()).setFont(e.getFont()||H.getFont()),i.setScale(e.getScale()||H.getScale()),i.setFill(e.getFill()||H.getFill()),i.setStroke(e.getStroke()||V)}else i=H.clone();return i.setText(e),i.setOffsetX(n[0]),i.setOffsetY(n[1]),i.setTextAlign(r),new P.default({text:i})}function it(t,e,i,n,r){return function(o,s){let a,l=r,u="";if(l){const t=o.getGeometry();t&&(l=t.getType()===f.default.POINT)}if(l&&(u=o.get("name"),l=l&&u),t)return l?(a=et(t[0],u),t.concat(a)):t;if(e){const t=function t(e,i,n){return Array.isArray(e)?e:"string"==typeof e?(!(e in n)&&"#"+e in n&&(e="#"+e),t(n[e],i,n)):i}(e,i,n);return l?(a=et(t[0],u),t.concat(a)):t}return l?(a=et(i[0],u),i.concat(a)):i}}function nt(t){const e=Object(w.getAllTextContent)(t,!1),i=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(i){const t=i[1];return[parseInt(t.substr(6,2),16),parseInt(t.substr(4,2),16),parseInt(t.substr(2,2),16),parseInt(t.substr(0,2),16)/255]}}function rt(t){let e=Object(w.getAllTextContent)(t,!1);const i=[],n=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?))?\s*/i;let r;for(;r=n.exec(e);){const t=parseFloat(r[1]),n=parseFloat(r[2]),o=r[3]?parseFloat(r[3]):0;i.push(t,n,o),e=e.substr(r[0].length)}if(""===e)return i}function ot(t){const e=Object(w.getAllTextContent)(t,!1).trim();let i=t.baseURI;if(i&&"about:blank"!=i||(i=window.location.href),i){return new URL(e,i).href}return e}function st(t){return Object(c.d)(t)}const at=Object(w.makeStructureNS)($,{Pair:function(t,e){const i=Object(w.pushParseAndPop)({},Nt,t,e);if(!i)return;const n=i.key;if(n&&"normal"==n){const t=i.styleUrl;t&&(e[e.length-1]=t);const n=i.Style;n&&(e[e.length-1]=n)}}});function lt(t,e){return Object(w.pushParseAndPop)(void 0,at,t,e)}const ut=Object(w.makeStructureNS)($,{Icon:Object(w.makeObjectPropertySetter)(function(t,e){const i=Object(w.pushParseAndPop)({},_t,t,e);return i||null}),heading:Object(w.makeObjectPropertySetter)(c.d),hotSpot:Object(w.makeObjectPropertySetter)(function(t){const e=t.getAttribute("xunits"),i=t.getAttribute("yunits");let n;return n="insetPixels"!==e?"insetPixels"!==i?T.a.BOTTOM_LEFT:T.a.TOP_LEFT:"insetPixels"!==i?T.a.BOTTOM_RIGHT:T.a.TOP_RIGHT,{x:parseFloat(t.getAttribute("x")),xunits:tt[e],y:parseFloat(t.getAttribute("y")),yunits:tt[i],origin:n}}),scale:Object(w.makeObjectPropertySetter)(st)});const ct=Object(w.makeStructureNS)($,{color:Object(w.makeObjectPropertySetter)(nt),scale:Object(w.makeObjectPropertySetter)(st)});const ht=Object(w.makeStructureNS)($,{color:Object(w.makeObjectPropertySetter)(nt),width:Object(w.makeObjectPropertySetter)(c.d)});const dt=Object(w.makeStructureNS)($,{color:Object(w.makeObjectPropertySetter)(nt),fill:Object(w.makeObjectPropertySetter)(c.a),outline:Object(w.makeObjectPropertySetter)(c.a)});const ft=Object(w.makeStructureNS)($,{coordinates:Object(w.makeReplacer)(rt)});function pt(t,e){return Object(w.pushParseAndPop)(null,ft,t,e)}const gt=Object(w.makeStructureNS)(Q,{Track:Object(w.makeArrayPusher)(mt)});const yt=Object(w.makeStructureNS)($,{when:function(t,e){const i=e[e.length-1].whens,n=Object(w.getAllTextContent)(t,!1),r=Date.parse(n);i.push(isNaN(r)?0:r)}},Object(w.makeStructureNS)(Q,{coord:function(t,e){const i=e[e.length-1].flatCoordinates,n=Object(w.getAllTextContent)(t,!1),r=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(n);if(r){const t=parseFloat(r[1]),e=parseFloat(r[2]),n=parseFloat(r[3]);i.push(t,e,n,0)}else i.push(0,0,0,0)}}));function mt(t,e){const i=Object(w.pushParseAndPop)({flatCoordinates:[],whens:[]},yt,t,e);if(!i)return;const n=i.flatCoordinates,r=i.whens;for(let t=0,e=Math.min(n.length,r.length);t<e;++t)n[4*t+3]=r[t];const o=new p.default(null);return o.setFlatCoordinates(d.default.XYZM,n),o}const _t=Object(w.makeStructureNS)($,{href:Object(w.makeObjectPropertySetter)(ot)},Object(w.makeStructureNS)(Q,{x:Object(w.makeObjectPropertySetter)(c.d),y:Object(w.makeObjectPropertySetter)(c.d),w:Object(w.makeObjectPropertySetter)(c.d),h:Object(w.makeObjectPropertySetter)(c.d)}));const vt=Object(w.makeStructureNS)($,{coordinates:Object(w.makeReplacer)(rt)});function bt(t,e){return Object(w.pushParseAndPop)(null,vt,t,e)}const St=Object(w.makeStructureNS)($,{extrude:Object(w.makeObjectPropertySetter)(c.a),tessellate:Object(w.makeObjectPropertySetter)(c.a),altitudeMode:Object(w.makeObjectPropertySetter)(c.h)});function Ot(t,e){const i=Object(w.pushParseAndPop)({},St,t,e),n=bt(t,e);if(n){const t=new p.default(null);return t.setFlatCoordinates(d.default.XYZ,n),t.setProperties(i),t}}function Ct(t,e){const i=Object(w.pushParseAndPop)({},St,t,e),n=bt(t,e);if(n){const t=new v.default(null);return t.setFlatCoordinates(d.default.XYZ,n,[n.length]),t.setProperties(i),t}}const xt=Object(w.makeStructureNS)($,{LineString:Object(w.makeArrayPusher)(Ot),LinearRing:Object(w.makeArrayPusher)(Ct),MultiGeometry:Object(w.makeArrayPusher)(Tt),Point:Object(w.makeArrayPusher)(Et),Polygon:Object(w.makeArrayPusher)(jt)});function Tt(t,e){const i=Object(w.pushParseAndPop)([],xt,t,e);if(!i)return null;if(0===i.length)return new h.default(i);let n,r=!0;const a=i[0].getType();let l;for(let t=1,e=i.length;t<e;++t)if((l=i[t]).getType()!=a){r=!1;break}if(r){let t,e;if(a==f.default.POINT){const r=i[0];t=r.getLayout(),e=r.getFlatCoordinates();for(let t=1,n=i.length;t<n;++t)l=i[t],Object(o.c)(e,l.getFlatCoordinates());(n=new y.default(null)).setFlatCoordinates(t,e),Lt(n,i)}else a==f.default.LINE_STRING?((n=new g.default(null)).setLineStrings(i),Lt(n,i)):a==f.default.POLYGON?((n=new m.default(null)).setPolygons(i),Lt(n,i)):a==f.default.GEOMETRY_COLLECTION?n=new h.default(i):Object(s.a)(!1,37)}else n=new h.default(i);return n}function Et(t,e){const i=Object(w.pushParseAndPop)({},St,t,e),n=bt(t,e);if(n){const t=new _.default(null);return t.setFlatCoordinates(d.default.XYZ,n),t.setProperties(i),t}}const Pt=Object(w.makeStructureNS)($,{innerBoundaryIs:function(t,e){const i=Object(w.pushParseAndPop)(void 0,Ut,t,e);if(i){const t=e[e.length-1];t.push(i)}},outerBoundaryIs:function(t,e){const i=Object(w.pushParseAndPop)(void 0,Vt,t,e);if(i){const t=e[e.length-1];t[0]=i}}});function jt(t,e){const i=Object(w.pushParseAndPop)({},St,t,e),n=Object(w.pushParseAndPop)([null],Pt,t,e);if(n&&n[0]){const t=new v.default(null),e=n[0],r=[e.length];for(let t=1,i=n.length;t<i;++t)Object(o.c)(e,n[t]),r.push(e.length);return t.setFlatCoordinates(d.default.XYZ,e,r),t.setProperties(i),t}}const wt=Object(w.makeStructureNS)($,{IconStyle:function(t,e){const i=Object(w.pushParseAndPop)({},ut,t,e);if(!i)return;const n=e[e.length-1],r="Icon"in i?i.Icon:{},o=!("Icon"in i)||Object.keys(r).length>0;let s;const a=r.href;let l,u,c;a?s=a:o&&(s=F);let h=T.a.BOTTOM_LEFT;const d=i.hotSpot;let f;d?(l=[d.x,d.y],u=d.xunits,c=d.yunits,h=d.origin):s===F?(l=L,u=R,c=A):/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(s)&&(l=[.5,0],u=x.a.FRACTION,c=x.a.FRACTION);const p=r.x,g=r.y;let y;void 0!==p&&void 0!==g&&(f=[p,g]);const m=r.w,_=r.h;let v;void 0!==m&&void 0!==_&&(y=[m,_]);const S=i.heading;void 0!==S&&(v=Object(b.j)(S));let O=i.scale;if(o){s==F&&(y=M,void 0===O&&(O=k));const t=new C.default({anchor:l,anchorOrigin:h,anchorXUnits:u,anchorYUnits:c,crossOrigin:"anonymous",offset:f,offsetOrigin:T.a.BOTTOM_LEFT,rotation:v,scale:O,size:y,src:s});n.imageStyle=t}else n.imageStyle=G},LabelStyle:function(t,e){const i=Object(w.pushParseAndPop)({},ct,t,e);if(!i)return;const n=e[e.length-1],r=new j.default({fill:new O.default({color:"color"in i?i.color:I}),scale:i.scale});n.textStyle=r},LineStyle:function(t,e){const i=Object(w.pushParseAndPop)({},ht,t,e);if(!i)return;const n=e[e.length-1],r=new E.default({color:"color"in i?i.color:I,width:"width"in i?i.width:1});n.strokeStyle=r},PolyStyle:function(t,e){const i=Object(w.pushParseAndPop)({},dt,t,e);if(!i)return;const n=e[e.length-1],r=new O.default({color:"color"in i?i.color:I});n.fillStyle=r;const o=i.fill;void 0!==o&&(n.fill=o);const s=i.outline;void 0!==s&&(n.outline=s)}});function It(t,e){const i=Object(w.pushParseAndPop)({},wt,t,e);if(!i)return null;let n="fillStyle"in i?i.fillStyle:N;const r=i.fill;void 0===r||r||(n=null);let o="imageStyle"in i?i.imageStyle:B;o==G&&(o=void 0);const s="textStyle"in i?i.textStyle:H;let a="strokeStyle"in i?i.strokeStyle:Z;const l=i.outline;return void 0===l||l||(a=null),[new P.default({fill:n,image:o,stroke:a,text:s,zIndex:void 0})]}function Lt(t,e){const i=e.length,n=new Array(e.length),r=new Array(e.length),o=new Array(e.length);let s,a,l;s=a=l=!1;for(let t=0;t<i;++t){const i=e[t];n[t]=i.get("extrude"),r[t]=i.get("tessellate"),o[t]=i.get("altitudeMode"),s=s||void 0!==n[t],a=a||void 0!==r[t],l=l||o[t]}s&&t.set("extrude",n),a&&t.set("tessellate",r),l&&t.set("altitudeMode",o)}const Rt=Object(w.makeStructureNS)($,{displayName:Object(w.makeObjectPropertySetter)(c.h),value:Object(w.makeObjectPropertySetter)(c.h)});const At=Object(w.makeStructureNS)($,{Data:function(t,e){const i=t.getAttribute("name");Object(w.parseNode)(Rt,t,e);const n=e[e.length-1];null!==i?n[i]=n.value:null!==n.displayName&&(n[n.displayName]=n.value),delete n.value},SchemaData:function(t,e){Object(w.parseNode)(Dt,t,e)}});function Mt(t,e){Object(w.parseNode)(At,t,e)}const Ft=Object(w.makeStructureNS)($,{LatLonAltBox:function(t,e){const i=Object(w.pushParseAndPop)({},Gt,t,e);if(!i)return;const n=e[e.length-1],r=[parseFloat(i.west),parseFloat(i.south),parseFloat(i.east),parseFloat(i.north)];n.extent=r,n.altitudeMode=i.altitudeMode,n.minAltitude=parseFloat(i.minAltitude),n.maxAltitude=parseFloat(i.maxAltitude)},Lod:function(t,e){const i=Object(w.pushParseAndPop)({},Bt,t,e);if(!i)return;const n=e[e.length-1];n.minLodPixels=parseFloat(i.minLodPixels),n.maxLodPixels=parseFloat(i.maxLodPixels),n.minFadeExtent=parseFloat(i.minFadeExtent),n.maxFadeExtent=parseFloat(i.maxFadeExtent)}});function kt(t,e){Object(w.parseNode)(Ft,t,e)}const Nt=Object(w.makeStructureNS)($,{Style:Object(w.makeObjectPropertySetter)(It),key:Object(w.makeObjectPropertySetter)(c.h),styleUrl:Object(w.makeObjectPropertySetter)(ot)});const Dt=Object(w.makeStructureNS)($,{SimpleData:function(t,e){const i=t.getAttribute("name");if(null!==i){const n=Object(c.h)(t),r=e[e.length-1];r[i]=n}}});const Gt=Object(w.makeStructureNS)($,{altitudeMode:Object(w.makeObjectPropertySetter)(c.h),minAltitude:Object(w.makeObjectPropertySetter)(c.d),maxAltitude:Object(w.makeObjectPropertySetter)(c.d),north:Object(w.makeObjectPropertySetter)(c.d),south:Object(w.makeObjectPropertySetter)(c.d),east:Object(w.makeObjectPropertySetter)(c.d),west:Object(w.makeObjectPropertySetter)(c.d)});const Bt=Object(w.makeStructureNS)($,{minLodPixels:Object(w.makeObjectPropertySetter)(c.d),maxLodPixels:Object(w.makeObjectPropertySetter)(c.d),minFadeExtent:Object(w.makeObjectPropertySetter)(c.d),maxFadeExtent:Object(w.makeObjectPropertySetter)(c.d)});const Ut=Object(w.makeStructureNS)($,{LinearRing:Object(w.makeReplacer)(pt)});const Vt=Object(w.makeStructureNS)($,{LinearRing:Object(w.makeReplacer)(pt)});const Zt=Object(w.makeStructureNS)($,{ExtendedData:Mt,Region:kt,Link:function(t,e){Object(w.parseNode)(Wt,t,e)},address:Object(w.makeObjectPropertySetter)(c.h),description:Object(w.makeObjectPropertySetter)(c.h),name:Object(w.makeObjectPropertySetter)(c.h),open:Object(w.makeObjectPropertySetter)(c.a),phoneNumber:Object(w.makeObjectPropertySetter)(c.h),visibility:Object(w.makeObjectPropertySetter)(c.a)}),Wt=Object(w.makeStructureNS)($,{href:Object(w.makeObjectPropertySetter)(ot)});const Ht=Object(w.makeStructureNS)($,{ExtendedData:Mt,Region:kt,MultiGeometry:Object(w.makeObjectPropertySetter)(Tt,"geometry"),LineString:Object(w.makeObjectPropertySetter)(Ot,"geometry"),LinearRing:Object(w.makeObjectPropertySetter)(Ct,"geometry"),Point:Object(w.makeObjectPropertySetter)(Et,"geometry"),Polygon:Object(w.makeObjectPropertySetter)(jt,"geometry"),Style:Object(w.makeObjectPropertySetter)(It),StyleMap:function(t,e){const i=lt(t,e);if(!i)return;const n=e[e.length-1];Array.isArray(i)?n.Style=i:"string"==typeof i?n.styleUrl=i:Object(s.a)(!1,38)},address:Object(w.makeObjectPropertySetter)(c.h),description:Object(w.makeObjectPropertySetter)(c.h),name:Object(w.makeObjectPropertySetter)(c.h),open:Object(w.makeObjectPropertySetter)(c.a),phoneNumber:Object(w.makeObjectPropertySetter)(c.h),styleUrl:Object(w.makeObjectPropertySetter)(ot),visibility:Object(w.makeObjectPropertySetter)(c.a)},Object(w.makeStructureNS)(Q,{MultiTrack:Object(w.makeObjectPropertySetter)(function(t,e){const i=Object(w.pushParseAndPop)([],gt,t,e);if(!i)return;const n=new g.default(null);return n.setLineStrings(i),n},"geometry"),Track:Object(w.makeObjectPropertySetter)(mt,"geometry")}));function zt(t,e){const i=Object(a.asArray)(e),n=[255*(4==i.length?i[3]:1),i[2],i[1],i[0]];for(let t=0;t<4;++t){const e=parseInt(n[t],10).toString(16);n[t]=1==e.length?"0"+e:e}Object(c.n)(t,n.join(""))}J.prototype.readDocumentOrFolder_=function(t,e){const i=Object(w.makeStructureNS)($,{Document:Object(w.makeArrayExtender)(this.readDocumentOrFolder_,this),Folder:Object(w.makeArrayExtender)(this.readDocumentOrFolder_,this),Placemark:Object(w.makeArrayPusher)(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),n=Object(w.pushParseAndPop)([],i,t,e,this);return n||void 0},J.prototype.readPlacemark_=function(t,e){const i=Object(w.pushParseAndPop)({geometry:null},Ht,t,e);if(!i)return;const n=new r.default,o=t.getAttribute("id");null!==o&&n.setId(o);const s=e[0],a=i.geometry;if(a&&Object(l.transformWithOptions)(a,!1,s),n.setGeometry(a),delete i.geometry,this.extractStyles_){const t=it(i.Style,i.styleUrl,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);n.setStyle(t)}return delete i.Style,n.setProperties(i),n},J.prototype.readSharedStyle_=function(t,e){const i=t.getAttribute("id");if(null!==i){const n=It(t,e);if(n){let e,r=t.baseURI;if(r&&"about:blank"!=r||(r=window.location.href),r){e=new URL("#"+i,r).href}else e="#"+i;this.sharedStyles_[e]=n}}},J.prototype.readSharedStyleMap_=function(t,e){const i=t.getAttribute("id");if(null===i)return;const n=lt(t,e);if(!n)return;let r,o=t.baseURI;if(o&&"about:blank"!=o||(o=window.location.href),o){r=new URL("#"+i,o).href}else r="#"+i;this.sharedStyles_[r]=n},J.prototype.readFeature,J.prototype.readFeatureFromNode=function(t,e){if(!Object(o.f)($,t.namespaceURI))return null;const i=this.readPlacemark_(t,[this.getReadOptions(t,e)]);return i||null},J.prototype.readFeatures,J.prototype.readFeaturesFromNode=function(t,e){if(!Object(o.f)($,t.namespaceURI))return[];let i;const n=t.localName;if("Document"==n||"Folder"==n)return(i=this.readDocumentOrFolder_(t,[this.getReadOptions(t,e)]))||[];if("Placemark"==n){const i=this.readPlacemark_(t,[this.getReadOptions(t,e)]);return i?[i]:[]}if("kml"==n){i=[];for(let n=t.firstElementChild;n;n=n.nextElementSibling){const t=this.readFeaturesFromNode(n,e);t&&Object(o.c)(i,t)}return i}return[]},J.prototype.readName=function(t){if(Object(w.isDocument)(t))return this.readNameFromDocument(t);if(Object(w.isNode)(t))return this.readNameFromNode(t);if("string"==typeof t){const e=Object(w.parse)(t);return this.readNameFromDocument(e)}},J.prototype.readNameFromDocument=function(t){for(let e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE){const t=this.readNameFromNode(e);if(t)return t}},J.prototype.readNameFromNode=function(t){for(let e=t.firstElementChild;e;e=e.nextElementSibling)if(Object(o.f)($,e.namespaceURI)&&"name"==e.localName)return Object(c.h)(e);for(let e=t.firstElementChild;e;e=e.nextElementSibling){const t=e.localName;if(Object(o.f)($,e.namespaceURI)&&("Document"==t||"Folder"==t||"Placemark"==t||"kml"==t)){const t=this.readNameFromNode(e);if(t)return t}}},J.prototype.readNetworkLinks=function(t){const e=[];if(Object(w.isDocument)(t))Object(o.c)(e,this.readNetworkLinksFromDocument(t));else if(Object(w.isNode)(t))Object(o.c)(e,this.readNetworkLinksFromNode(t));else if("string"==typeof t){const i=Object(w.parse)(t);Object(o.c)(e,this.readNetworkLinksFromDocument(i))}return e},J.prototype.readNetworkLinksFromDocument=function(t){const e=[];for(let i=t.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&Object(o.c)(e,this.readNetworkLinksFromNode(i));return e},J.prototype.readNetworkLinksFromNode=function(t){const e=[];for(let i=t.firstElementChild;i;i=i.nextElementSibling)if(Object(o.f)($,i.namespaceURI)&&"NetworkLink"==i.localName){const t=Object(w.pushParseAndPop)({},Zt,i,[]);e.push(t)}for(let i=t.firstElementChild;i;i=i.nextElementSibling){const t=i.localName;!Object(o.f)($,i.namespaceURI)||"Document"!=t&&"Folder"!=t&&"kml"!=t||Object(o.c)(e,this.readNetworkLinksFromNode(i))}return e},J.prototype.readRegion=function(t){const e=[];if(Object(w.isDocument)(t))Object(o.c)(e,this.readRegionFromDocument(t));else if(Object(w.isNode)(t))Object(o.c)(e,this.readRegionFromNode(t));else if("string"==typeof t){const i=Object(w.parse)(t);Object(o.c)(e,this.readRegionFromDocument(i))}return e},J.prototype.readRegionFromDocument=function(t){const e=[];for(let i=t.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&Object(o.c)(e,this.readRegionFromNode(i));return e},J.prototype.readRegionFromNode=function(t){const e=[];for(let i=t.firstElementChild;i;i=i.nextElementSibling)if(Object(o.f)($,i.namespaceURI)&&"Region"==i.localName){const t=Object(w.pushParseAndPop)({},Ft,i,[]);e.push(t)}for(let i=t.firstElementChild;i;i=i.nextElementSibling){const t=i.localName;!Object(o.f)($,i.namespaceURI)||"Document"!=t&&"Folder"!=t&&"kml"!=t||Object(o.c)(e,this.readRegionFromNode(i))}return e},J.prototype.readProjection;const Yt=Object(w.makeStructureNS)($,{Data:Object(w.makeChildAppender)(function(t,e,i){t.setAttribute("name",e.name);const n={node:t},r=e.value;"object"==typeof r?(null!==r&&r.displayName&&Object(w.pushSerializeAndPop)(n,Yt,w.OBJECT_PROPERTY_NODE_FACTORY,[r.displayName],i,["displayName"]),null!==r&&r.value&&Object(w.pushSerializeAndPop)(n,Yt,w.OBJECT_PROPERTY_NODE_FACTORY,[r.value],i,["value"])):Object(w.pushSerializeAndPop)(n,Yt,w.OBJECT_PROPERTY_NODE_FACTORY,[r],i,["value"])}),value:Object(w.makeChildAppender)(function(t,e){Object(c.n)(t,e)}),displayName:Object(w.makeChildAppender)(function(t,e){Object(c.j)(t,e)})});const Xt=Object(w.makeStructureNS)($,{Placemark:Object(w.makeChildAppender)(ve)}),qt=function(t,e,i){const n=e[e.length-1].node;return Object(w.createElementNS)(n.namespaceURI,"Placemark")};const Kt=Object(w.makeSimpleNodeFactory)("Data");const Jt=Object(w.makeStructureNS)($,["href"],Object(w.makeStructureNS)(Q,["x","y","w","h"])),Qt=Object(w.makeStructureNS)($,{href:Object(w.makeChildAppender)(c.n)},Object(w.makeStructureNS)(Q,{x:Object(w.makeChildAppender)(c.l),y:Object(w.makeChildAppender)(c.l),w:Object(w.makeChildAppender)(c.l),h:Object(w.makeChildAppender)(c.l)})),$t=function(t,e,i){return Object(w.createElementNS)(Q[0],"gx:"+i)};const te=Object(w.makeStructureNS)($,["scale","heading","Icon","hotSpot"]),ee=Object(w.makeStructureNS)($,{Icon:Object(w.makeChildAppender)(function(t,e,i){const n={node:t},r=i[i.length-1].node;let o=Jt[r.namespaceURI],s=Object(w.makeSequence)(e,o);Object(w.pushSerializeAndPop)(n,Qt,w.OBJECT_PROPERTY_NODE_FACTORY,s,i,o),o=Jt[Q[0]],s=Object(w.makeSequence)(e,o),Object(w.pushSerializeAndPop)(n,Qt,$t,s,i,o)}),heading:Object(w.makeChildAppender)(c.l),hotSpot:Object(w.makeChildAppender)(function(t,e){t.setAttribute("x",e.x),t.setAttribute("y",e.y),t.setAttribute("xunits",e.xunits),t.setAttribute("yunits",e.yunits)}),scale:Object(w.makeChildAppender)(we)});const ie=Object(w.makeStructureNS)($,["color","scale"]),ne=Object(w.makeStructureNS)($,{color:Object(w.makeChildAppender)(zt),scale:Object(w.makeChildAppender)(we)});const re=Object(w.makeStructureNS)($,["color","width"]),oe=Object(w.makeStructureNS)($,{color:Object(w.makeChildAppender)(zt),width:Object(w.makeChildAppender)(c.l)});const se={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},ae=function(t,e,i){if(t){const i=e[e.length-1].node;return Object(w.createElementNS)(i.namespaceURI,se[t.getType()])}},le=Object(w.makeSimpleNodeFactory)("Point"),ue=Object(w.makeSimpleNodeFactory)("LineString"),ce=Object(w.makeSimpleNodeFactory)("LinearRing"),he=Object(w.makeSimpleNodeFactory)("Polygon"),de=Object(w.makeStructureNS)($,{LineString:Object(w.makeChildAppender)(Oe),Point:Object(w.makeChildAppender)(Oe),Polygon:Object(w.makeChildAppender)(Ee),GeometryCollection:Object(w.makeChildAppender)(fe)});function fe(t,e,i){const n={node:t},r=e.getType();let o,a;r==f.default.GEOMETRY_COLLECTION?(o=e.getGeometries(),a=ae):r==f.default.MULTI_POINT?(o=e.getPoints(),a=le):r==f.default.MULTI_LINE_STRING?(o=e.getLineStrings(),a=ue):r==f.default.MULTI_POLYGON?(o=e.getPolygons(),a=he):Object(s.a)(!1,39),Object(w.pushSerializeAndPop)(n,de,a,o,i)}const pe=Object(w.makeStructureNS)($,{LinearRing:Object(w.makeChildAppender)(Oe)});function ge(t,e,i){const n={node:t};Object(w.pushSerializeAndPop)(n,pe,ce,[e],i)}const ye=Object(w.makeStructureNS)($,{ExtendedData:Object(w.makeChildAppender)(function(t,e,i){const n={node:t},r=e.names,o=e.values,s=r.length;for(let t=0;t<s;t++)Object(w.pushSerializeAndPop)(n,Yt,Kt,[{name:r[t],value:o[t]}],i)}),MultiGeometry:Object(w.makeChildAppender)(fe),LineString:Object(w.makeChildAppender)(Oe),LinearRing:Object(w.makeChildAppender)(Oe),Point:Object(w.makeChildAppender)(Oe),Polygon:Object(w.makeChildAppender)(Ee),Style:Object(w.makeChildAppender)(function(t,e,i){const n={node:t},r={},o=e.getFill(),s=e.getStroke(),a=e.getImage(),l=e.getText();a instanceof C.default&&(r.IconStyle=a);l&&(r.LabelStyle=l);s&&(r.LineStyle=s);o&&(r.PolyStyle=o);const u=i[i.length-1].node,c=Ie[u.namespaceURI],h=Object(w.makeSequence)(r,c);Object(w.pushSerializeAndPop)(n,Le,w.OBJECT_PROPERTY_NODE_FACTORY,h,i,c)}),address:Object(w.makeChildAppender)(c.n),description:Object(w.makeChildAppender)(c.n),name:Object(w.makeChildAppender)(c.n),open:Object(w.makeChildAppender)(c.i),phoneNumber:Object(w.makeChildAppender)(c.n),styleUrl:Object(w.makeChildAppender)(c.n),visibility:Object(w.makeChildAppender)(c.i)}),me=Object(w.makeStructureNS)($,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),_e=Object(w.makeSimpleNodeFactory)("ExtendedData");function ve(t,e,i){const n={node:t};e.getId()&&t.setAttribute("id",e.getId());const r=e.getProperties(),o={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};o[e.getGeometryName()]=1;const s=Object.keys(r||{}).sort().filter(function(t){return!o[t]});if(s.length>0){const t={names:s,values:Object(w.makeSequence)(r,s)};Object(w.pushSerializeAndPop)(n,ye,_e,[t],i)}const a=e.getStyleFunction();if(a){const t=a(e,0);if(t){const e=Array.isArray(t)?t[0]:t;this.writeStyles_&&(r.Style=e);const i=e.getText();i&&(r.name=i.getText())}}const u=i[i.length-1].node,c=me[u.namespaceURI],h=Object(w.makeSequence)(r,c);Object(w.pushSerializeAndPop)(n,ye,w.OBJECT_PROPERTY_NODE_FACTORY,h,i,c);const d=i[0];let f=e.getGeometry();f&&(f=Object(l.transformWithOptions)(f,!0,d)),Object(w.pushSerializeAndPop)(n,ye,ae,[f],i)}const be=Object(w.makeStructureNS)($,["extrude","tessellate","altitudeMode","coordinates"]),Se=Object(w.makeStructureNS)($,{extrude:Object(w.makeChildAppender)(c.i),tessellate:Object(w.makeChildAppender)(c.i),altitudeMode:Object(w.makeChildAppender)(c.n),coordinates:Object(w.makeChildAppender)(function(t,e,i){const n=i[i.length-1],r=n.layout,o=n.stride;let a;r==d.default.XY||r==d.default.XYM?a=2:r==d.default.XYZ||r==d.default.XYZM?a=3:Object(s.a)(!1,34);const l=e.length;let u="";if(l>0){u+=e[0];for(let t=1;t<a;++t)u+=","+e[t];for(let t=o;t<l;t+=o){u+=" "+e[t];for(let i=1;i<a;++i)u+=","+e[t+i]}}Object(c.n)(t,u)})});function Oe(t,e,i){const n=e.getFlatCoordinates(),r={node:t};r.layout=e.getLayout(),r.stride=e.getStride();const o=e.getProperties();o.coordinates=n;const s=i[i.length-1].node,a=be[s.namespaceURI],l=Object(w.makeSequence)(o,a);Object(w.pushSerializeAndPop)(r,Se,w.OBJECT_PROPERTY_NODE_FACTORY,l,i,a)}const Ce=Object(w.makeStructureNS)($,{outerBoundaryIs:Object(w.makeChildAppender)(ge),innerBoundaryIs:Object(w.makeChildAppender)(ge)}),xe=Object(w.makeSimpleNodeFactory)("innerBoundaryIs"),Te=Object(w.makeSimpleNodeFactory)("outerBoundaryIs");function Ee(t,e,i){const n=e.getLinearRings(),r=n.shift(),o={node:t};Object(w.pushSerializeAndPop)(o,Ce,xe,n,i),Object(w.pushSerializeAndPop)(o,Ce,Te,[r],i)}const Pe=Object(w.makeStructureNS)($,{color:Object(w.makeChildAppender)(zt)}),je=Object(w.makeSimpleNodeFactory)("color");function we(t,e){Object(c.l)(t,Math.round(1e6*e)/1e6)}const Ie=Object(w.makeStructureNS)($,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),Le=Object(w.makeStructureNS)($,{IconStyle:Object(w.makeChildAppender)(function(t,e,i){const n={node:t},r={},o=e.getSrc(),s=e.getSize(),a=e.getImageSize(),l={href:o};if(s){l.w=s[0],l.h=s[1];const t=e.getAnchor(),i=e.getOrigin();if(i&&a&&0!==i[0]&&i[1]!==s[1]&&(l.x=i[0],l.y=a[1]-(i[1]+s[1])),t&&(t[0]!==s[0]/2||t[1]!==s[1]/2)){const e={x:t[0],xunits:x.a.PIXELS,y:s[1]-t[1],yunits:x.a.PIXELS};r.hotSpot=e}}r.Icon=l;const u=e.getScale();1!==u&&(r.scale=u);const c=e.getRotation();0!==c&&(r.heading=c);const h=i[i.length-1].node,d=te[h.namespaceURI],f=Object(w.makeSequence)(r,d);Object(w.pushSerializeAndPop)(n,ee,w.OBJECT_PROPERTY_NODE_FACTORY,f,i,d)}),LabelStyle:Object(w.makeChildAppender)(function(t,e,i){const n={node:t},r={},o=e.getFill();o&&(r.color=o.getColor());const s=e.getScale();s&&1!==s&&(r.scale=s);const a=i[i.length-1].node,l=ie[a.namespaceURI],u=Object(w.makeSequence)(r,l);Object(w.pushSerializeAndPop)(n,ne,w.OBJECT_PROPERTY_NODE_FACTORY,u,i,l)}),LineStyle:Object(w.makeChildAppender)(function(t,e,i){const n={node:t},r={color:e.getColor(),width:e.getWidth()},o=i[i.length-1].node,s=re[o.namespaceURI],a=Object(w.makeSequence)(r,s);Object(w.pushSerializeAndPop)(n,oe,w.OBJECT_PROPERTY_NODE_FACTORY,a,i,s)}),PolyStyle:Object(w.makeChildAppender)(function(t,e,i){const n={node:t};Object(w.pushSerializeAndPop)(n,Pe,je,[e.getColor()],i)})});const Re=Object(w.makeStructureNS)($,["Document","Placemark"]),Ae=Object(w.makeStructureNS)($,{Document:Object(w.makeChildAppender)(function(t,e,i){const n={node:t};Object(w.pushSerializeAndPop)(n,Xt,qt,e,i,void 0,this)}),Placemark:Object(w.makeChildAppender)(ve)});J.prototype.writeFeatures,J.prototype.writeFeaturesNode=function(t,e){e=this.adaptOptions(e);const i=Object(w.createElementNS)($[4],"kml"),n="http://www.w3.org/2000/xmlns/";i.setAttributeNS(n,"xmlns:gx",Q[0]),i.setAttributeNS(n,"xmlns:xsi",w.XML_SCHEMA_INSTANCE_URI),i.setAttributeNS(w.XML_SCHEMA_INSTANCE_URI,"xsi:schemaLocation","http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd");const r={node:i},o={};t.length>1?o.Document=t:1==t.length&&(o.Placemark=t[0]);const s=Re[i.namespaceURI],a=Object(w.makeSequence)(o,s);return Object(w.pushSerializeAndPop)(r,Ae,w.OBJECT_PROPERTY_NODE_FACTORY,a,[e],s,this),i},e.default=J},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(23),o=i(463),s=i.n(o),a=i(33),l=i(103),u=i(19),c=i(5),h=i(41),d=i(58),f=i(71),p=i(76),g=i(39),y=i(36),m=i(87),_=i(110),v=i(51),b=i(276);const S=function(t){a.default.call(this);const e=t||{};this.dataProjection=new _.default({code:"",units:v.default.TILE_PIXELS}),this.featureClass_=e.featureClass?e.featureClass:b.default,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.extent_=null};function O(t,e,i){if(3===t){const t={keys:[],values:[],features:[]},n=i.readVarint()+i.pos;i.readFields(C,t,n),t.length=t.features.length,t.length&&(e[t.name]=t)}}function C(t,e,i){if(15===t)e.version=i.readVarint();else if(1===t)e.name=i.readString();else if(5===t)e.extent=i.readVarint();else if(2===t)e.features.push(i.pos);else if(3===t)e.keys.push(i.readString());else if(4===t){let n=null;const r=i.readVarint()+i.pos;for(;i.pos<r;)n=1===(t=i.readVarint()>>3)?i.readString():2===t?i.readFloat():3===t?i.readDouble():4===t?i.readVarint64():5===t?i.readVarint():6===t?i.readSVarint():7===t?i.readBoolean():null;e.values.push(n)}}function x(t,e,i){if(1==t)e.id=i.readVarint();else if(2==t){const t=i.readVarint()+i.pos;for(;i.pos<t;){const t=e.layer.keys[i.readVarint()],n=e.layer.values[i.readVarint()];e.properties[t]=n}}else 3==t?e.type=i.readVarint():4==t&&(e.geometry=i.pos)}function T(t,e,i){t.pos=e.features[i];const n=t.readVarint()+t.pos,r={layer:e,type:0,properties:{}};return t.readFields(x,r,n),r}Object(n.inherits)(S,a.default),S.prototype.readRawGeometry_=function(t,e,i,n){t.pos=e.geometry;const o=t.readVarint()+t.pos;let s=1,a=0,l=0,u=0,c=0,h=0;for(;t.pos<o;){if(!a){const e=t.readVarint();s=7&e,a=e>>3}a--,1===s||2===s?(l+=t.readSVarint(),u+=t.readSVarint(),1===s&&c>h&&(n.push(c),h=c),i.push(l,u),c+=2):7===s?c>h&&(i.push(i[h],i[h+1]),c+=2):Object(r.a)(!1,59)}c>h&&(n.push(c),h=c)},S.prototype.createFeature_=function(t,e,i){const n=e.type;if(0===n)return null;let r;const o=e.id,s=e.properties;s[this.layerName_]=e.layer.name;const l=[];let _=[];this.readRawGeometry_(t,e,l,_);const v=function(t,e){let i;return 1===t?i=1===e?c.default.POINT:c.default.MULTI_POINT:2===t?i=1===e?c.default.LINE_STRING:c.default.MULTI_LINE_STRING:3===t&&(i=c.default.POLYGON),i}(n,_.length);if(this.featureClass_===b.default)r=new this.featureClass_(v,l,_,s,o);else{let t;if(v==c.default.POLYGON){const e=[];let i=0,n=0;for(let t=0,r=_.length;t<r;++t){const r=_[t];Object(m.a)(l,i,r,2)||(e.push(_.slice(n,t)),n=t),i=r}e.length>1?(_=e,t=new p.default(null)):t=new y.default(null)}else t=v===c.default.POINT?new g.default(null):v===c.default.LINE_STRING?new h.default(null):v===c.default.POLYGON?new y.default(null):v===c.default.MULTI_POINT?new f.default(null):v===c.default.MULTI_LINE_STRING?new d.default(null):null;t.setFlatCoordinates(u.default.XY,l,_),r=new this.featureClass_,this.geometryName_&&r.setGeometryName(this.geometryName_);const e=Object(a.transformWithOptions)(t,!1,this.adaptOptions(i));r.setGeometry(e),r.setId(o),r.setProperties(s)}return r},S.prototype.getLastExtent=function(){return this.extent_},S.prototype.getType=function(){return l.a.ARRAY_BUFFER},S.prototype.readFeatures=function(t,e){const i=this.layers_,n=new s.a(t),r=n.readFields(O,{}),o=[];for(const t in r){if(i&&-1==i.indexOf(t))continue;const e=r[t];for(let t=0,i=e.length;t<i;++t){const i=T(n,e,t);o.push(this.createFeature_(n,i))}this.extent_=e?[0,0,e.extent,e.extent]:null}return o},S.prototype.readProjection=function(t){return this.dataProjection},S.prototype.setLayers=function(t){this.layers_=t},S.prototype.readFeature=function(){},S.prototype.readGeometry=function(){},S.prototype.writeFeature=function(){},S.prototype.writeGeometry=function(){},S.prototype.writeFeatures=function(){},e.default=S},function(t,e){e.read=function(t,e,i,n,r){var o,s,a=8*r-n-1,l=(1<<a)-1,u=l>>1,c=-7,h=i?r-1:0,d=i?-1:1,f=t[e+h];for(h+=d,o=f&(1<<-c)-1,f>>=-c,c+=a;c>0;o=256*o+t[e+h],h+=d,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=n;c>0;s=256*s+t[e+h],h+=d,c-=8);if(0===o)o=1-u;else{if(o===l)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,n),o-=u}return(f?-1:1)*s*Math.pow(2,o-n)},e.write=function(t,e,i,n,r,o){var s,a,l,u=8*o-r-1,c=(1<<u)-1,h=c>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:o-1,p=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),(e+=s+h>=1?d/l:d*Math.pow(2,1-h))*l>=2&&(s++,l/=2),s+h>=c?(a=0,s=c):s+h>=1?(a=(e*l-1)*Math.pow(2,r),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,r),s=0));r>=8;t[i+f]=255&a,f+=p,a/=256,r-=8);for(s=s<<r|a,u+=r;u>0;t[i+f]=255&s,f+=p,s/=256,u-=8);t[i+f-p]|=128*g}},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(12),o=i(38),s=i(33),a=i(85),l=i(19),u=i(41),c=i(39),h=i(36),d=i(11),f=i(9),p=i(0);const g=function(){a.a.call(this),this.dataProjection=Object(f.get)("EPSG:4326")};Object(n.inherits)(g,a.a);const y=[null],m=Object(p.makeStructureNS)(y,{nd:function(t,e){e[e.length-1].ndrefs.push(t.getAttribute("ref"))},tag:b}),_=Object(p.makeStructureNS)(y,{node:function(t,e){const i=e[0],n=e[e.length-1],r=t.getAttribute("id"),a=[parseFloat(t.getAttribute("lon")),parseFloat(t.getAttribute("lat"))];n.nodes[r]=a;const l=Object(p.pushParseAndPop)({tags:{}},v,t,e);if(!Object(d.isEmpty)(l.tags)){const t=new c.default(a);Object(s.transformWithOptions)(t,!1,i);const e=new o.default(t);e.setId(r),e.setProperties(l.tags),n.features.push(e)}},way:function(t,e){const i=t.getAttribute("id"),n=Object(p.pushParseAndPop)({id:i,ndrefs:[],tags:{}},m,t,e);e[e.length-1].ways.push(n)}}),v=Object(p.makeStructureNS)(y,{tag:b});function b(t,e){e[e.length-1].tags[t.getAttribute("k")]=t.getAttribute("v")}g.prototype.readFeatures,g.prototype.readFeaturesFromNode=function(t,e){const i=this.getReadOptions(t,e);if("osm"==t.localName){const e=Object(p.pushParseAndPop)({nodes:{},ways:[],features:[]},_,t,[i]);for(let t=0;t<e.ways.length;t++){const n=e.ways[t],a=[];for(let t=0,i=n.ndrefs.length;t<i;t++){const i=e.nodes[n.ndrefs[t]];Object(r.c)(a,i)}let c;n.ndrefs[0]==n.ndrefs[n.ndrefs.length-1]?(c=new h.default(null)).setFlatCoordinates(l.default.XY,a,[a.length]):(c=new u.default(null)).setFlatCoordinates(l.default.XY,a),Object(s.transformWithOptions)(c,!1,i);const d=new o.default(c);d.setId(n.id),d.setProperties(n.tags),e.features.push(d)}if(e.features)return e.features}return[]},g.prototype.readProjection,g.prototype.writeFeatureNode=function(t,e){},g.prototype.writeFeaturesNode=function(t,e){},g.prototype.writeGeometryNode=function(t,e){},e.default=g},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(38),o=i(33),s=i(158),a=i(41),l=i(58),u=i(71),c=i(76),h=i(39),d=i(36),f=i(9);const p=function(t){const e=t||{};s.a.call(this),this.layerName_=e.layerName,this.layers_=e.layers?e.layers:null,this.dataProjection=Object(f.get)(e.dataProjection?e.dataProjection:"EPSG:4326")};Object(n.inherits)(p,s.a);const g={Point:function(t,e,i){const n=t.coordinates;e&&i&&b(n,e,i);return new h.default(n)},LineString:function(t,e){const i=y(t.arcs,e);return new a.default(i)},Polygon:function(t,e){const i=[];for(let n=0,r=t.arcs.length;n<r;++n)i[n]=y(t.arcs[n],e);return new d.default(i)},MultiPoint:function(t,e,i){const n=t.coordinates;if(e&&i)for(let t=0,r=n.length;t<r;++t)b(n[t],e,i);return new u.default(n)},MultiLineString:function(t,e){const i=[];for(let n=0,r=t.arcs.length;n<r;++n)i[n]=y(t.arcs[n],e);return new l.default(i)},MultiPolygon:function(t,e){const i=[];for(let n=0,r=t.arcs.length;n<r;++n){const r=t.arcs[n],o=[];for(let t=0,i=r.length;t<i;++t)o[t]=y(r[t],e);i[n]=o}return new c.default(i)}};function y(t,e){const i=[];let n,r;for(let o=0,s=t.length;o<s;++o)n=t[o],o>0&&i.pop(),r=n>=0?e[n]:e[~n].slice().reverse(),i.push.apply(i,r);for(let t=0,e=i.length;t<e;++t)i[t]=i[t].slice();return i}function m(t,e,i,n,r,o,s){const a=t.geometries,l=[];for(let t=0,u=a.length;t<u;++t)l[t]=_(a[t],e,i,n,r,o,s);return l}function _(t,e,i,n,s,a,l){let u;const c=t.type,h=g[c];u="Point"===c||"MultiPoint"===c?h(t,i,n):h(t,e);const d=new r.default;d.setGeometry(Object(o.transformWithOptions)(u,!1,l)),void 0!==t.id&&d.setId(t.id);let f=t.properties;return s&&(f||(f={}),f[s]=a),f&&d.setProperties(f),d}function v(t,e,i){let n=0,r=0;for(let o=0,s=t.length;o<s;++o){const s=t[o];n+=s[0],r+=s[1],s[0]=n,s[1]=r,b(s,e,i)}}function b(t,e,i){t[0]=t[0]*e[0]+i[0],t[1]=t[1]*e[1]+i[1]}p.prototype.readFeatures,p.prototype.readFeaturesFromObject=function(t,e){if("Topology"==t.type){const i=t;let n,r=null,o=null;i.transform&&(r=(n=i.transform).scale,o=n.translate);const s=i.arcs;n&&function(t,e,i){for(let n=0,r=t.length;n<r;++n)v(t[n],e,i)}(s,r,o);const a=[],l=i.objects,u=this.layerName_;let c;for(const t in l)this.layers_&&-1==this.layers_.indexOf(t)||("GeometryCollection"===l[t].type?(c=l[t],a.push.apply(a,m(c,s,r,o,u,t,e))):(c=l[t],a.push(_(c,s,r,o,u,t,e))));return a}return[]},p.prototype.readProjection,p.prototype.readProjectionFromObject=function(t){return this.dataProjection},p.prototype.writeFeatureObject=function(t,e){},p.prototype.writeFeaturesObject=function(t,e){},p.prototype.writeGeometryObject=function(t,e){},p.prototype.readGeometryFromObject=function(){},p.prototype.readFeatureFromObject=function(){},e.default=p},function(t,e,i){"use strict";i.r(e),i.d(e,"writeFilter",function(){return G});var n=i(1),r=i(23),o=i(210),s=i(133),a=i(43),l=i(278),u=i(85),c=i(3),h=i(77),d=i(11),f=i(9),p=i(0);const g="feature",y="http://www.w3.org/2000/xmlns/",m="http://www.opengis.net/ogc",_="http://www.opengis.net/wfs",v="http://www.opengis.net/fes",b={"1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"},S=function(t){const e=t||{};this.featureType_=e.featureType,this.featureNS_=e.featureNS,this.gmlFormat_=e.gmlFormat?e.gmlFormat:new s.default,this.schemaLocation_=e.schemaLocation?e.schemaLocation:b["1.1.0"],u.a.call(this)};Object(n.inherits)(S,u.a),S.prototype.getFeatureType=function(){return this.featureType_},S.prototype.setFeatureType=function(t){this.featureType_=t},S.prototype.readFeatures,S.prototype.readFeaturesFromNode=function(t,e){const i={featureType:this.featureType_,featureNS:this.featureNS_};Object(d.assign)(i,this.getReadOptions(t,e||{}));const n=[i];this.gmlFormat_.FEATURE_COLLECTION_PARSERS[a.GMLNS].featureMember=Object(p.makeArrayPusher)(a.default.prototype.readFeaturesInternal);let r=Object(p.pushParseAndPop)([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,t,n,this.gmlFormat_);return r||(r=[]),r},S.prototype.readTransactionResponse=function(t){if(Object(p.isDocument)(t))return this.readTransactionResponseFromDocument(t);if(Object(p.isNode)(t))return this.readTransactionResponseFromNode(t);if("string"==typeof t){const e=Object(p.parse)(t);return this.readTransactionResponseFromDocument(e)}},S.prototype.readFeatureCollectionMetadata=function(t){if(Object(p.isDocument)(t))return this.readFeatureCollectionMetadataFromDocument(t);if(Object(p.isNode)(t))return this.readFeatureCollectionMetadataFromNode(t);if("string"==typeof t){const e=Object(p.parse)(t);return this.readFeatureCollectionMetadataFromDocument(e)}},S.prototype.readFeatureCollectionMetadataFromDocument=function(t){for(let e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFeatureCollectionMetadataFromNode(e)};const O={"http://www.opengis.net/gml":{boundedBy:Object(p.makeObjectPropertySetter)(a.default.prototype.readGeometryElement,"bounds")}};S.prototype.readFeatureCollectionMetadataFromNode=function(t){const e={},i=Object(c.g)(t.getAttribute("numberOfFeatures"));return e.numberOfFeatures=i,Object(p.pushParseAndPop)(e,O,t,[],this.gmlFormat_)};const C={"http://www.opengis.net/wfs":{totalInserted:Object(p.makeObjectPropertySetter)(c.f),totalUpdated:Object(p.makeObjectPropertySetter)(c.f),totalDeleted:Object(p.makeObjectPropertySetter)(c.f)}};const x={"http://www.opengis.net/ogc":{FeatureId:Object(p.makeArrayPusher)(function(t,e){return t.getAttribute("fid")})}};const T={"http://www.opengis.net/wfs":{Feature:function(t,e){Object(p.parseNode)(x,t,e)}}};const E={"http://www.opengis.net/wfs":{TransactionSummary:Object(p.makeObjectPropertySetter)(function(t,e){return Object(p.pushParseAndPop)({},C,t,e)},"transactionSummary"),InsertResults:Object(p.makeObjectPropertySetter)(function(t,e){return Object(p.pushParseAndPop)([],T,t,e)},"insertIds")}};S.prototype.readTransactionResponseFromDocument=function(t){for(let e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readTransactionResponseFromNode(e)},S.prototype.readTransactionResponseFromNode=function(t){return Object(p.pushParseAndPop)({},E,t,[])};const P={"http://www.opengis.net/wfs":{PropertyName:Object(p.makeChildAppender)(c.n)}};function j(t,e,i){const n=Object(p.createElementNS)(m,"Filter"),r=Object(p.createElementNS)(m,"FeatureId");n.appendChild(r),r.setAttribute("fid",e),t.appendChild(n)}function w(t,e){const i=(t=t||g)+":";return 0===e.indexOf(i)?e:i+e}const I={"http://www.opengis.net/wfs":{Insert:Object(p.makeChildAppender)(function(t,e,i){const n=i[i.length-1],r=n.featureType,a=n.featureNS,l=n.gmlVersion,u=Object(p.createElementNS)(a,r);t.appendChild(u),2===l?o.default.prototype.writeFeatureElement(u,e,i):s.default.prototype.writeFeatureElement(u,e,i)}),Update:Object(p.makeChildAppender)(function(t,e,i){const n=i[i.length-1];Object(r.a)(void 0!==e.getId(),27);const o=n.featureType,s=n.featurePrefix,a=n.featureNS,l=w(s,o),u=e.getGeometryName();t.setAttribute("typeName",l),t.setAttributeNS(y,"xmlns:"+s,a);const c=e.getId();if(void 0!==c){const r=e.getKeys(),o=[];for(let t=0,i=r.length;t<i;t++){const i=e.get(r[t]);if(void 0!==i){let e=r[t];i instanceof h.default&&(e=u),o.push({name:e,value:i})}}Object(p.pushSerializeAndPop)({gmlVersion:n.gmlVersion,node:t,hasZ:n.hasZ,srsName:n.srsName},I,Object(p.makeSimpleNodeFactory)("Property"),o,i),j(t,c)}}),Delete:Object(p.makeChildAppender)(function(t,e,i){const n=i[i.length-1];Object(r.a)(void 0!==e.getId(),26);const o=n.featureType,s=n.featurePrefix,a=n.featureNS,l=w(s,o);t.setAttribute("typeName",l),t.setAttributeNS(y,"xmlns:"+s,a);const u=e.getId();void 0!==u&&j(t,u)}),Property:Object(p.makeChildAppender)(function(t,e,i){const n=Object(p.createElementNS)(_,"Name"),r=i[i.length-1].gmlVersion;if(t.appendChild(n),Object(c.n)(n,e.name),void 0!==e.value&&null!==e.value){const n=Object(p.createElementNS)(_,"Value");t.appendChild(n),e.value instanceof h.default?2===r?o.default.prototype.writeGeometryElement(n,e.value,i):s.default.prototype.writeGeometryElement(n,e.value,i):Object(c.n)(n,e.value)}}),Native:Object(p.makeChildAppender)(function(t,e,i){e.vendorId&&t.setAttribute("vendorId",e.vendorId);void 0!==e.safeToIgnore&&t.setAttribute("safeToIgnore",e.safeToIgnore);void 0!==e.value&&Object(c.n)(t,e.value)})}};const L={"http://www.opengis.net/wfs":{Query:Object(p.makeChildAppender)(function(t,e,i){const n=i[i.length-1],r=n.featurePrefix,o=n.featureNS,s=n.propertyNames,a=n.srsName;let l;l=r?w(r,e):e;t.setAttribute("typeName",l),a&&t.setAttribute("srsName",a);o&&t.setAttributeNS(y,"xmlns:"+r,o);const u=Object(d.assign)({},n);u.node=t,Object(p.pushSerializeAndPop)(u,P,Object(p.makeSimpleNodeFactory)("PropertyName"),s,i);const c=n.filter;if(c){const e=Object(p.createElementNS)(m,"Filter");t.appendChild(e),R(e,c,i)}})},"http://www.opengis.net/ogc":{During:Object(p.makeChildAppender)(function(t,e,i){const n=Object(p.createElementNS)(v,"ValueReference");Object(c.n)(n,e.propertyName),t.appendChild(n);const r=Object(p.createElementNS)(a.GMLNS,"TimePeriod");t.appendChild(r);const o=Object(p.createElementNS)(a.GMLNS,"begin");r.appendChild(o),D(o,e.begin);const s=Object(p.createElementNS)(a.GMLNS,"end");r.appendChild(s),D(s,e.end)}),And:Object(p.makeChildAppender)(A),Or:Object(p.makeChildAppender)(A),Not:Object(p.makeChildAppender)(function(t,e,i){const n={node:t},r=e.condition;Object(p.pushSerializeAndPop)(n,L,Object(p.makeSimpleNodeFactory)(r.getTagName()),[r],i)}),BBOX:Object(p.makeChildAppender)(function(t,e,i){i[i.length-1].srsName=e.srsName,k(t,e.geometryName),s.default.prototype.writeGeometryElement(t,e.extent,i)}),Contains:Object(p.makeChildAppender)(function(t,e,i){i[i.length-1].srsName=e.srsName,k(t,e.geometryName),s.default.prototype.writeGeometryElement(t,e.geometry,i)}),Intersects:Object(p.makeChildAppender)(function(t,e,i){i[i.length-1].srsName=e.srsName,k(t,e.geometryName),s.default.prototype.writeGeometryElement(t,e.geometry,i)}),Within:Object(p.makeChildAppender)(function(t,e,i){i[i.length-1].srsName=e.srsName,k(t,e.geometryName),s.default.prototype.writeGeometryElement(t,e.geometry,i)}),PropertyIsEqualTo:Object(p.makeChildAppender)(M),PropertyIsNotEqualTo:Object(p.makeChildAppender)(M),PropertyIsLessThan:Object(p.makeChildAppender)(M),PropertyIsLessThanOrEqualTo:Object(p.makeChildAppender)(M),PropertyIsGreaterThan:Object(p.makeChildAppender)(M),PropertyIsGreaterThanOrEqualTo:Object(p.makeChildAppender)(M),PropertyIsNull:Object(p.makeChildAppender)(function(t,e,i){k(t,e.propertyName)}),PropertyIsBetween:Object(p.makeChildAppender)(function(t,e,i){k(t,e.propertyName);const n=Object(p.createElementNS)(m,"LowerBoundary");t.appendChild(n),N(n,""+e.lowerBoundary);const r=Object(p.createElementNS)(m,"UpperBoundary");t.appendChild(r),N(r,""+e.upperBoundary)}),PropertyIsLike:Object(p.makeChildAppender)(function(t,e,i){t.setAttribute("wildCard",e.wildCard),t.setAttribute("singleChar",e.singleChar),t.setAttribute("escapeChar",e.escapeChar),void 0!==e.matchCase&&t.setAttribute("matchCase",e.matchCase.toString());k(t,e.propertyName),N(t,""+e.pattern)})}};function R(t,e,i){const n={node:t};Object(p.pushSerializeAndPop)(n,L,Object(p.makeSimpleNodeFactory)(e.getTagName()),[e],i)}function A(t,e,i){const n={node:t},r=e.conditions;for(let t=0,e=r.length;t<e;++t){const e=r[t];Object(p.pushSerializeAndPop)(n,L,Object(p.makeSimpleNodeFactory)(e.getTagName()),[e],i)}}function M(t,e,i){void 0!==e.matchCase&&t.setAttribute("matchCase",e.matchCase.toString()),k(t,e.propertyName),N(t,""+e.expression)}function F(t,e,i){const n=Object(p.createElementNS)(m,t);Object(c.n)(n,i),e.appendChild(n)}function k(t,e){F("PropertyName",t,e)}function N(t,e){F("Literal",t,e)}function D(t,e){const i=Object(p.createElementNS)(a.GMLNS,"TimeInstant");t.appendChild(i);const n=Object(p.createElementNS)(a.GMLNS,"timePosition");i.appendChild(n),Object(c.n)(n,e)}function G(t){const e=Object(p.createElementNS)(m,"Filter");return R(e,t,[]),e}S.prototype.writeGetFeature=function(t){const e=Object(p.createElementNS)(_,"GetFeature");let i;if(e.setAttribute("service","WFS"),e.setAttribute("version","1.1.0"),t&&(t.handle&&e.setAttribute("handle",t.handle),t.outputFormat&&e.setAttribute("outputFormat",t.outputFormat),void 0!==t.maxFeatures&&e.setAttribute("maxFeatures",t.maxFeatures),t.resultType&&e.setAttribute("resultType",t.resultType),void 0!==t.startIndex&&e.setAttribute("startIndex",t.startIndex),void 0!==t.count&&e.setAttribute("count",t.count),i=t.filter,t.bbox)){Object(r.a)(t.geometryName,12);const e=Object(l.bbox)(t.geometryName,t.bbox,t.srsName);i=i?Object(l.and)(i,e):e}e.setAttributeNS(p.XML_SCHEMA_INSTANCE_URI,"xsi:schemaLocation",this.schemaLocation_);const n={node:e,srsName:t.srsName,featureNS:t.featureNS?t.featureNS:this.featureNS_,featurePrefix:t.featurePrefix,geometryName:t.geometryName,filter:i,propertyNames:t.propertyNames?t.propertyNames:[]};return Object(r.a)(Array.isArray(t.featureTypes),11),function(t,e,i){const n=i[i.length-1],r=Object(d.assign)({},n);r.node=t,Object(p.pushSerializeAndPop)(r,L,Object(p.makeSimpleNodeFactory)("Query"),e,i)}(e,t.featureTypes,[n]),e},S.prototype.writeTransaction=function(t,e,i,n){const r=[],o=Object(p.createElementNS)(_,"Transaction"),s=n.version?n.version:"1.1.0",a="1.0.0"===s?2:3;let l,u;o.setAttribute("service","WFS"),o.setAttribute("version",s),n&&(l=n.gmlOptions?n.gmlOptions:{},n.handle&&o.setAttribute("handle",n.handle));const c=b[s];o.setAttributeNS(p.XML_SCHEMA_INSTANCE_URI,"xsi:schemaLocation",c);const h=n.featurePrefix?n.featurePrefix:g;return t&&(u={node:o,featureNS:n.featureNS,featureType:n.featureType,featurePrefix:h,gmlVersion:a,hasZ:n.hasZ,srsName:n.srsName},Object(d.assign)(u,l),Object(p.pushSerializeAndPop)(u,I,Object(p.makeSimpleNodeFactory)("Insert"),t,r)),e&&(u={node:o,featureNS:n.featureNS,featureType:n.featureType,featurePrefix:h,gmlVersion:a,hasZ:n.hasZ,srsName:n.srsName},Object(d.assign)(u,l),Object(p.pushSerializeAndPop)(u,I,Object(p.makeSimpleNodeFactory)("Update"),e,r)),i&&Object(p.pushSerializeAndPop)({node:o,featureNS:n.featureNS,featureType:n.featureType,featurePrefix:h,gmlVersion:a,srsName:n.srsName},I,Object(p.makeSimpleNodeFactory)("Delete"),i,r),n.nativeElements&&Object(p.pushSerializeAndPop)({node:o,featureNS:n.featureNS,featureType:n.featureType,featurePrefix:h,gmlVersion:a,srsName:n.srsName},I,Object(p.makeSimpleNodeFactory)("Native"),n.nativeElements,r),o},S.prototype.readProjection,S.prototype.readProjectionFromDocument=function(t){for(let e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readProjectionFromNode(e);return null},S.prototype.readProjectionFromNode=function(t){if(t.firstElementChild&&t.firstElementChild.firstElementChild)for(let e=(t=t.firstElementChild.firstElementChild).firstElementChild;e;e=e.nextElementSibling)if(0!==e.childNodes.length&&(1!==e.childNodes.length||3!==e.firstChild.nodeType)){const t=[{}];return this.gmlFormat_.readGeometryElement(e,t),Object(f.get)(t.pop().srsName)}return null},e.default=S},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(38),o=i(33),s=i(159),a=i(131),l=i(5),u=i(19),c=i(41),h=i(58),d=i(71),f=i(76),p=i(39),g=i(36),y=i(48);const m="EMPTY",_="Z",v="M",b=1,S=2,O=3,C=4,x=5,T=6,E=function(t){this.wkt=t,this.index_=-1};E.prototype.isAlpha_=function(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"},E.prototype.isNumeric_=function(t,e){return t>="0"&&t<="9"||"."==t&&!(void 0!==e&&e)},E.prototype.isWhiteSpace_=function(t){return" "==t||"\t"==t||"\r"==t||"\n"==t},E.prototype.nextChar_=function(){return this.wkt.charAt(++this.index_)},E.prototype.nextToken=function(){const t=this.nextChar_(),e={position:this.index_,value:t};if("("==t)e.type=S;else if(","==t)e.type=x;else if(")"==t)e.type=O;else if(this.isNumeric_(t)||"-"==t)e.type=C,e.value=this.readNumber_();else if(this.isAlpha_(t))e.type=b,e.value=this.readText_();else{if(this.isWhiteSpace_(t))return this.nextToken();if(""!==t)throw new Error("Unexpected character: "+t);e.type=T}return e},E.prototype.readNumber_=function(){let t;const e=this.index_;let i=!1,n=!1;do{"."==t?i=!0:"e"!=t&&"E"!=t||(n=!0),t=this.nextChar_()}while(this.isNumeric_(t,i)||!n&&("e"==t||"E"==t)||n&&("-"==t||"+"==t));return parseFloat(this.wkt.substring(e,this.index_--))},E.prototype.readText_=function(){let t;const e=this.index_;do{t=this.nextChar_()}while(this.isAlpha_(t));return this.wkt.substring(e,this.index_--).toUpperCase()};const P=function(t){this.lexer_=t,this.token_,this.layout_=u.default.XY};P.prototype.consume_=function(){this.token_=this.lexer_.nextToken()},P.prototype.isTokenType=function(t){return this.token_.type==t},P.prototype.match=function(t){const e=this.isTokenType(t);return e&&this.consume_(),e},P.prototype.parse=function(){return this.consume_(),this.parseGeometry_()},P.prototype.parseGeometryLayout_=function(){let t=u.default.XY;const e=this.token_;if(this.isTokenType(b)){const i=e.value;i===_?t=u.default.XYZ:i===v?t=u.default.XYM:"ZM"===i&&(t=u.default.XYZM),t!==u.default.XY&&this.consume_()}return t},P.prototype.parseGeometryCollectionText_=function(){if(this.match(S)){const t=[];do{t.push(this.parseGeometry_())}while(this.match(x));if(this.match(O))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},P.prototype.parsePointText_=function(){if(this.match(S)){const t=this.parsePoint_();if(this.match(O))return t}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())},P.prototype.parseLineStringText_=function(){if(this.match(S)){const t=this.parsePointList_();if(this.match(O))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},P.prototype.parsePolygonText_=function(){if(this.match(S)){const t=this.parseLineStringTextList_();if(this.match(O))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},P.prototype.parseMultiPointText_=function(){if(this.match(S)){let t;if(t=this.token_.type==S?this.parsePointTextList_():this.parsePointList_(),this.match(O))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},P.prototype.parseMultiLineStringText_=function(){if(this.match(S)){const t=this.parseLineStringTextList_();if(this.match(O))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},P.prototype.parseMultiPolygonText_=function(){if(this.match(S)){const t=this.parsePolygonTextList_();if(this.match(O))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},P.prototype.parsePoint_=function(){const t=[],e=this.layout_.length;for(let i=0;i<e;++i){const e=this.token_;if(!this.match(C))break;t.push(e.value)}if(t.length==e)return t;throw new Error(this.formatErrorMessage_())},P.prototype.parsePointList_=function(){const t=[this.parsePoint_()];for(;this.match(x);)t.push(this.parsePoint_());return t},P.prototype.parsePointTextList_=function(){const t=[this.parsePointText_()];for(;this.match(x);)t.push(this.parsePointText_());return t},P.prototype.parseLineStringTextList_=function(){const t=[this.parseLineStringText_()];for(;this.match(x);)t.push(this.parseLineStringText_());return t},P.prototype.parsePolygonTextList_=function(){const t=[this.parsePolygonText_()];for(;this.match(x);)t.push(this.parsePolygonText_());return t},P.prototype.isEmptyGeometry_=function(){const t=this.isTokenType(b)&&this.token_.value==m;return t&&this.consume_(),t},P.prototype.formatErrorMessage_=function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"};const j=function(t){const e=t||{};s.a.call(this),this.splitCollection_=void 0!==e.splitCollection&&e.splitCollection};function w(t){const e=t.getCoordinates();return 0===e.length?"":e.join(" ")}function I(t){const e=t.getCoordinates(),i=[];for(let t=0,n=e.length;t<n;++t)i.push(e[t].join(" "));return i.join(",")}function L(t){const e=[],i=t.getLinearRings();for(let t=0,n=i.length;t<n;++t)e.push("("+I(i[t])+")");return e.join(",")}Object(n.inherits)(j,s.a);const R={Point:w,LineString:I,Polygon:L,MultiPoint:function(t){const e=[],i=t.getPoints();for(let t=0,n=i.length;t<n;++t)e.push("("+w(i[t])+")");return e.join(",")},MultiLineString:function(t){const e=[],i=t.getLineStrings();for(let t=0,n=i.length;t<n;++t)e.push("("+I(i[t])+")");return e.join(",")},MultiPolygon:function(t){const e=[],i=t.getPolygons();for(let t=0,n=i.length;t<n;++t)e.push("("+L(i[t])+")");return e.join(",")},GeometryCollection:function(t){const e=[],i=t.getGeometries();for(let t=0,n=i.length;t<n;++t)e.push(A(i[t]));return e.join(",")}};function A(t){let e=t.getType();const i=(0,R[e])(t);if(e=e.toUpperCase(),t instanceof y.default){const i=function(t){const e=t.getLayout();let i="";return e!==u.default.XYZ&&e!==u.default.XYZM||(i+=_),e!==u.default.XYM&&e!==u.default.XYZM||(i+=v),i}(t);i.length>0&&(e+=" "+i)}return 0===i.length?e+" "+m:e+"("+i+")"}j.prototype.parse_=function(t){const e=new E(t);return new P(e).parse()},j.prototype.readFeature,j.prototype.readFeatureFromText=function(t,e){const i=this.readGeometryFromText(t,e);if(i){const t=new r.default;return t.setGeometry(i),t}return null},j.prototype.readFeatures,j.prototype.readFeaturesFromText=function(t,e){let i=[];const n=this.readGeometryFromText(t,e),o=[];for(let t=0,e=(i=this.splitCollection_&&n.getType()==l.default.GEOMETRY_COLLECTION?n.getGeometriesArray():[n]).length;t<e;++t){const e=new r.default;e.setGeometry(i[t]),o.push(e)}return o},j.prototype.readGeometry,j.prototype.readGeometryFromText=function(t,e){const i=this.parse_(t);return i?Object(o.transformWithOptions)(i,!1,e):null};const M={POINT:p.default,LINESTRING:c.default,POLYGON:g.default,MULTIPOINT:d.default,MULTILINESTRING:h.default,MULTIPOLYGON:f.default},F={POINT:P.prototype.parsePointText_,LINESTRING:P.prototype.parseLineStringText_,POLYGON:P.prototype.parsePolygonText_,MULTIPOINT:P.prototype.parseMultiPointText_,MULTILINESTRING:P.prototype.parseMultiLineStringText_,MULTIPOLYGON:P.prototype.parseMultiPolygonText_};P.prototype.parseGeometry_=function(){const t=this.token_;if(this.match(b)){const e=t.value;if(this.layout_=this.parseGeometryLayout_(),e==l.default.GEOMETRY_COLLECTION.toUpperCase()){const t=this.parseGeometryCollectionText_();return new a.default(t)}{const t=F[e],i=M[e];if(!t||!i)throw new Error("Invalid geometry type: "+e);return new i(t.call(this),this.layout_)}}throw new Error(this.formatErrorMessage_())},j.prototype.writeFeature,j.prototype.writeFeatureText=function(t,e){const i=t.getGeometry();return i?this.writeGeometryText(i,e):""},j.prototype.writeFeatures,j.prototype.writeFeaturesText=function(t,e){if(1==t.length)return this.writeFeatureText(t[0],e);const i=[];for(let e=0,n=t.length;e<n;++e)i.push(t[e].getGeometry());const n=new a.default(i);return this.writeGeometryText(n,e)},j.prototype.writeGeometry,j.prototype.writeGeometryText=function(t,e){return A(Object(o.transformWithOptions)(t,!0,e))},e.default=j},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(161),o=i(162),s=i(3),a=i(0);const l=function(){o.a.call(this),this.version=void 0};Object(n.inherits)(l,o.a);const u=[null,"http://www.opengis.net/wms"],c=Object(a.makeStructureNS)(u,{Service:Object(a.makeObjectPropertySetter)(function(t,e){return Object(a.pushParseAndPop)({},d,t,e)}),Capability:Object(a.makeObjectPropertySetter)(function(t,e){return Object(a.pushParseAndPop)({},h,t,e)})}),h=Object(a.makeStructureNS)(u,{Request:Object(a.makeObjectPropertySetter)(function(t,e){return Object(a.pushParseAndPop)({},b,t,e)}),Exception:Object(a.makeObjectPropertySetter)(function(t,e){return Object(a.pushParseAndPop)([],y,t,e)}),Layer:Object(a.makeObjectPropertySetter)(function(t,e){return Object(a.pushParseAndPop)({},m,t,e)})}),d=Object(a.makeStructureNS)(u,{Name:Object(a.makeObjectPropertySetter)(s.h),Title:Object(a.makeObjectPropertySetter)(s.h),Abstract:Object(a.makeObjectPropertySetter)(s.h),KeywordList:Object(a.makeObjectPropertySetter)(I),OnlineResource:Object(a.makeObjectPropertySetter)(r.a),ContactInformation:Object(a.makeObjectPropertySetter)(function(t,e){return Object(a.pushParseAndPop)({},f,t,e)}),Fees:Object(a.makeObjectPropertySetter)(s.h),AccessConstraints:Object(a.makeObjectPropertySetter)(s.h),LayerLimit:Object(a.makeObjectPropertySetter)(s.f),MaxWidth:Object(a.makeObjectPropertySetter)(s.f),MaxHeight:Object(a.makeObjectPropertySetter)(s.f)}),f=Object(a.makeStructureNS)(u,{ContactPersonPrimary:Object(a.makeObjectPropertySetter)(function(t,e){return Object(a.pushParseAndPop)({},p,t,e)}),ContactPosition:Object(a.makeObjectPropertySetter)(s.h),ContactAddress:Object(a.makeObjectPropertySetter)(function(t,e){return Object(a.pushParseAndPop)({},g,t,e)}),ContactVoiceTelephone:Object(a.makeObjectPropertySetter)(s.h),ContactFacsimileTelephone:Object(a.makeObjectPropertySetter)(s.h),ContactElectronicMailAddress:Object(a.makeObjectPropertySetter)(s.h)}),p=Object(a.makeStructureNS)(u,{ContactPerson:Object(a.makeObjectPropertySetter)(s.h),ContactOrganization:Object(a.makeObjectPropertySetter)(s.h)}),g=Object(a.makeStructureNS)(u,{AddressType:Object(a.makeObjectPropertySetter)(s.h),Address:Object(a.makeObjectPropertySetter)(s.h),City:Object(a.makeObjectPropertySetter)(s.h),StateOrProvince:Object(a.makeObjectPropertySetter)(s.h),PostCode:Object(a.makeObjectPropertySetter)(s.h),Country:Object(a.makeObjectPropertySetter)(s.h)}),y=Object(a.makeStructureNS)(u,{Format:Object(a.makeArrayPusher)(s.h)}),m=Object(a.makeStructureNS)(u,{Name:Object(a.makeObjectPropertySetter)(s.h),Title:Object(a.makeObjectPropertySetter)(s.h),Abstract:Object(a.makeObjectPropertySetter)(s.h),KeywordList:Object(a.makeObjectPropertySetter)(I),CRS:Object(a.makeObjectPropertyPusher)(s.h),EX_GeographicBoundingBox:Object(a.makeObjectPropertySetter)(function(t,e){const i=Object(a.pushParseAndPop)({},v,t,e);if(!i)return;const n=i.westBoundLongitude,r=i.southBoundLatitude,o=i.eastBoundLongitude,s=i.northBoundLatitude;if(void 0===n||void 0===r||void 0===o||void 0===s)return;return[n,r,o,s]}),BoundingBox:Object(a.makeObjectPropertyPusher)(function(t,e){const i=[Object(s.e)(t.getAttribute("minx")),Object(s.e)(t.getAttribute("miny")),Object(s.e)(t.getAttribute("maxx")),Object(s.e)(t.getAttribute("maxy"))],n=[Object(s.e)(t.getAttribute("resx")),Object(s.e)(t.getAttribute("resy"))];return{crs:t.getAttribute("CRS"),extent:i,res:n}}),Dimension:Object(a.makeObjectPropertyPusher)(function(t,e){return{name:t.getAttribute("name"),units:t.getAttribute("units"),unitSymbol:t.getAttribute("unitSymbol"),default:t.getAttribute("default"),multipleValues:Object(s.b)(t.getAttribute("multipleValues")),nearestValue:Object(s.b)(t.getAttribute("nearestValue")),current:Object(s.b)(t.getAttribute("current")),values:Object(s.h)(t)}}),Attribution:Object(a.makeObjectPropertySetter)(function(t,e){return Object(a.pushParseAndPop)({},_,t,e)}),AuthorityURL:Object(a.makeObjectPropertyPusher)(function(t,e){const i=P(t,e);if(i)return i.name=t.getAttribute("name"),i;return}),Identifier:Object(a.makeObjectPropertyPusher)(s.h),MetadataURL:Object(a.makeObjectPropertyPusher)(function(t,e){const i=P(t,e);if(i)return i.type=t.getAttribute("type"),i;return}),DataURL:Object(a.makeObjectPropertyPusher)(P),FeatureListURL:Object(a.makeObjectPropertyPusher)(P),Style:Object(a.makeObjectPropertyPusher)(function(t,e){return Object(a.pushParseAndPop)({},x,t,e)}),MinScaleDenominator:Object(a.makeObjectPropertySetter)(s.d),MaxScaleDenominator:Object(a.makeObjectPropertySetter)(s.d),Layer:Object(a.makeObjectPropertyPusher)(function(t,e){const i=e[e.length-1],n=Object(a.pushParseAndPop)({},m,t,e);if(!n)return;let r=Object(s.b)(t.getAttribute("queryable"));void 0===r&&(r=i.queryable);n.queryable=void 0!==r&&r;let o=Object(s.g)(t.getAttribute("cascaded"));void 0===o&&(o=i.cascaded);n.cascaded=o;let l=Object(s.b)(t.getAttribute("opaque"));void 0===l&&(l=i.opaque);n.opaque=void 0!==l&&l;let u=Object(s.b)(t.getAttribute("noSubsets"));void 0===u&&(u=i.noSubsets);n.noSubsets=void 0!==u&&u;let c=Object(s.e)(t.getAttribute("fixedWidth"));c||(c=i.fixedWidth);n.fixedWidth=c;let h=Object(s.e)(t.getAttribute("fixedHeight"));h||(h=i.fixedHeight);n.fixedHeight=h,["Style","CRS","AuthorityURL"].forEach(function(t){if(t in i){const e=n[t]||[];n[t]=e.concat(i[t])}});return["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"].forEach(function(t){if(!(t in n)){const e=i[t];n[t]=e}}),n})}),_=Object(a.makeStructureNS)(u,{Title:Object(a.makeObjectPropertySetter)(s.h),OnlineResource:Object(a.makeObjectPropertySetter)(r.a),LogoURL:Object(a.makeObjectPropertySetter)(w)}),v=Object(a.makeStructureNS)(u,{westBoundLongitude:Object(a.makeObjectPropertySetter)(s.d),eastBoundLongitude:Object(a.makeObjectPropertySetter)(s.d),southBoundLatitude:Object(a.makeObjectPropertySetter)(s.d),northBoundLatitude:Object(a.makeObjectPropertySetter)(s.d)}),b=Object(a.makeStructureNS)(u,{GetCapabilities:Object(a.makeObjectPropertySetter)(j),GetMap:Object(a.makeObjectPropertySetter)(j),GetFeatureInfo:Object(a.makeObjectPropertySetter)(j)}),S=Object(a.makeStructureNS)(u,{Format:Object(a.makeObjectPropertyPusher)(s.h),DCPType:Object(a.makeObjectPropertyPusher)(function(t,e){return Object(a.pushParseAndPop)({},O,t,e)})}),O=Object(a.makeStructureNS)(u,{HTTP:Object(a.makeObjectPropertySetter)(function(t,e){return Object(a.pushParseAndPop)({},C,t,e)})}),C=Object(a.makeStructureNS)(u,{Get:Object(a.makeObjectPropertySetter)(P),Post:Object(a.makeObjectPropertySetter)(P)}),x=Object(a.makeStructureNS)(u,{Name:Object(a.makeObjectPropertySetter)(s.h),Title:Object(a.makeObjectPropertySetter)(s.h),Abstract:Object(a.makeObjectPropertySetter)(s.h),LegendURL:Object(a.makeObjectPropertyPusher)(w),StyleSheetURL:Object(a.makeObjectPropertySetter)(P),StyleURL:Object(a.makeObjectPropertySetter)(P)}),T=Object(a.makeStructureNS)(u,{Format:Object(a.makeObjectPropertySetter)(s.h),OnlineResource:Object(a.makeObjectPropertySetter)(r.a)}),E=Object(a.makeStructureNS)(u,{Keyword:Object(a.makeArrayPusher)(s.h)});function P(t,e){return Object(a.pushParseAndPop)({},T,t,e)}function j(t,e){return Object(a.pushParseAndPop)({},S,t,e)}function w(t,e){const i=P(t,e);if(i){const e=[Object(s.g)(t.getAttribute("width")),Object(s.g)(t.getAttribute("height"))];return i.size=e,i}}function I(t,e){return Object(a.pushParseAndPop)([],E,t,e)}l.prototype.read,l.prototype.readFromDocument=function(t){for(let e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null},l.prototype.readFromNode=function(t){this.version=t.getAttribute("version").trim();const e=Object(a.pushParseAndPop)({version:this.version},c,t,[]);return e||null},e.default=l},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(12),o=i(210),s=i(85),a=i(11),l=i(0);const u=function(t){const e=t||{};this.featureNS_="http://mapserver.gis.umn.edu/mapserver",this.gmlFormat_=new o.default,this.layers_=e.layers?e.layers:null,s.a.call(this)};Object(n.inherits)(u,s.a);u.prototype.getLayers=function(){return this.layers_},u.prototype.setLayers=function(t){this.layers_=t},u.prototype.readFeatures_=function(t,e){t.setAttribute("namespaceURI",this.featureNS_);const i=t.localName;let n=[];if(0===t.childNodes.length)return n;if("msGMLOutput"==i)for(let i=0,o=t.childNodes.length;i<o;i++){const o=t.childNodes[i];if(o.nodeType!==Node.ELEMENT_NODE)continue;const s=e[0],a="_layer",u=o.localName.replace(a,"");if(this.layers_&&!Object(r.f)(this.layers_,u))continue;const c=u+"_feature";s.featureType=c,s.featureNS=this.featureNS_;const h={};h[c]=Object(l.makeArrayPusher)(this.gmlFormat_.readFeatureElement,this.gmlFormat_);const d=Object(l.makeStructureNS)([s.featureNS,null],h);o.setAttribute("namespaceURI",this.featureNS_);const f=Object(l.pushParseAndPop)([],d,o,e,this.gmlFormat_);f&&Object(r.c)(n,f)}if("FeatureCollection"==i){const e=Object(l.pushParseAndPop)([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,t,[{}],this.gmlFormat_);e&&(n=e)}return n},u.prototype.readFeatures,u.prototype.readFeaturesFromNode=function(t,e){const i={};return e&&Object(a.assign)(i,this.getReadOptions(t,e)),this.readFeatures_(t,[i])},u.prototype.writeFeatureNode=function(t,e){},u.prototype.writeFeaturesNode=function(t,e){},u.prototype.writeGeometryNode=function(t,e){},e.default=u},function(t,e,i){"use strict";i.r(e);var n=i(4),r=i(1),o=i(25),s=i(26),a=i(90),l=i(18),u=i(11),c=i(68),h=i(192),d=i(62);const f="blur",p="gradient",g="radius",y=["#00f","#0ff","#0f0","#ff0","#f00"],m=function(t){const e=t||{},i=Object(u.assign)({},e);delete i.gradient,delete i.radius,delete i.blur,delete i.shadow,delete i.weight,a.default.call(this,i),this.gradient_=null,this.shadow_=void 0!==e.shadow?e.shadow:250,this.circleImage_=void 0,this.styleCache_=null,Object(n.listen)(this,Object(o.getChangeEventType)(p),this.handleGradientChanged_,this),this.setGradient(e.gradient?e.gradient:y),this.setBlur(void 0!==e.blur?e.blur:15),this.setRadius(void 0!==e.radius?e.radius:8),Object(n.listen)(this,Object(o.getChangeEventType)(f),this.handleStyleChanged_,this),Object(n.listen)(this,Object(o.getChangeEventType)(g),this.handleStyleChanged_,this),this.handleStyleChanged_();const r=e.weight?e.weight:"weight";let s;s="string"==typeof r?function(t){return t.get(r)}:r,this.setStyle(function(t,e){const i=s(t),n=void 0!==i?Object(l.a)(i,0,1):1,r=255*n|0;let o=this.styleCache_[r];return o||(o=[new d.default({image:new h.default({opacity:n,src:this.circleImage_})})],this.styleCache_[r]=o),o}.bind(this)),this.setRenderOrder(null),Object(n.listen)(this,c.a.RENDER,this.handleRender_,this)};Object(r.inherits)(m,a.default);m.prototype.createCircle_=function(){const t=this.getRadius(),e=this.getBlur(),i=t+e+1,n=2*i,r=Object(s.a)(n,n);r.shadowOffsetX=r.shadowOffsetY=this.shadow_,r.shadowBlur=e,r.shadowColor="#000",r.beginPath();const o=i-this.shadow_;return r.arc(o,o,t,0,2*Math.PI,!0),r.fill(),r.canvas.toDataURL()},m.prototype.getBlur=function(){return this.get(f)},m.prototype.getGradient=function(){return this.get(p)},m.prototype.getRadius=function(){return this.get(g)},m.prototype.handleGradientChanged_=function(){this.gradient_=function(t){const e=Object(s.a)(1,256),i=e.createLinearGradient(0,0,1,256),n=1/(t.length-1);for(let e=0,r=t.length;e<r;++e)i.addColorStop(e*n,t[e]);return e.fillStyle=i,e.fillRect(0,0,1,256),e.getImageData(0,0,1,256).data}(this.getGradient())},m.prototype.handleStyleChanged_=function(){this.circleImage_=this.createCircle_(),this.styleCache_=new Array(256),this.changed()},m.prototype.handleRender_=function(t){const e=t.context,i=e.canvas,n=e.getImageData(0,0,i.width,i.height),r=n.data;for(let t=0,e=r.length;t<e;t+=4){const e=4*r[t+3];e&&(r[t]=this.gradient_[e],r[t+1]=this.gradient_[e+1],r[t+2]=this.gradient_[e+2])}e.putImageData(n,0,0)},m.prototype.setBlur=function(t){this.set(f,t)},m.prototype.setGradient=function(t){this.set(p,t)},m.prototype.setRadius=function(t){this.set(g,t)},e.default=m},function(t,e,i){"use strict";i.r(e),i.d(e,"RenderType",function(){return c});var n=i(1),r=i(54),o=i(23),s=i(143),a=i(90),l=i(115),u=i(11);const c={IMAGE:"image",HYBRID:"hybrid",VECTOR:"vector"},h=function(t){const e=t||{};let i=e.renderMode||l.a.HYBRID;Object(o.a)(void 0==i||i==l.a.IMAGE||i==l.a.HYBRID||i==l.a.VECTOR,28),e.declutter&&i==l.a.IMAGE&&(i=l.a.HYBRID),e.renderMode=i;const n=Object(u.assign)({},e);delete n.preload,delete n.useInterimTilesOnError,a.default.call(this,n),this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(void 0===e.useInterimTilesOnError||e.useInterimTilesOnError),this.type=r.a.VECTOR_TILE};Object(n.inherits)(h,a.default),h.prototype.getPreload=function(){return this.get(s.a.PRELOAD)},h.prototype.getUseInterimTilesOnError=function(){return this.get(s.a.USE_INTERIM_TILES_ON_ERROR)},h.prototype.setPreload=function(t){this.set(s.a.PRELOAD,t)},h.prototype.setUseInterimTilesOnError=function(t){this.set(s.a.USE_INTERIM_TILES_ON_ERROR,t)},h.prototype.getSource,e.default=h},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(73),o=i(2),s=i(191),a=i(9),l=i(44),u=i(53),c=i(50),h=i(64);const d=function(t){this.hidpi_=void 0!==t.hidpi&&t.hidpi,u.default.call(this,{cacheSize:t.cacheSize,crossOrigin:"anonymous",opaque:!0,projection:Object(a.get)("EPSG:3857"),reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:l.a.LOADING,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:this.hidpi_?2:1,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition}),this.culture_=void 0!==t.culture?t.culture:"en-us",this.maxZoom_=void 0!==t.maxZoom?t.maxZoom:-1,this.apiKey_=t.key,this.imagerySet_=t.imagerySet;const e="https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.imagerySet_+"?uriScheme=https&include=ImageryProviders&key="+this.apiKey_+"&c="+this.culture_;Object(s.a)(e,this.handleImageryMetadataResponse.bind(this),void 0,"jsonp")};Object(n.inherits)(d,u.default);d.prototype.getApiKey=function(){return this.apiKey_},d.prototype.getImagerySet=function(){return this.imagerySet_},d.prototype.handleImageryMetadataResponse=function(t){if(200!=t.statusCode||"OK"!=t.statusDescription||"ValidCredentials"!=t.authenticationResultCode||1!=t.resourceSets.length||1!=t.resourceSets[0].resources.length)return void this.setState(l.a.ERROR);const e=t.resourceSets[0].resources[0],i=-1==this.maxZoom_?e.zoomMax:this.maxZoom_,n=this.getProjection(),s=Object(h.extentFromProjection)(n),u=e.imageWidth==e.imageHeight?e.imageWidth:[e.imageWidth,e.imageHeight],d=Object(h.createXYZ)({extent:s,minZoom:e.zoomMin,maxZoom:i,tileSize:u/(this.hidpi_?2:1)});this.tileGrid=d;const f=this.culture_,p=this.hidpi_;if(this.tileUrlFunction=Object(r.b)(e.imageUrlSubdomains.map(function(t){const i=[0,0,0],n=e.imageUrl.replace("{subdomain}",t).replace("{culture}",f);return function(t,e,r){if(t){Object(c.a)(t[0],t[1],-t[2]-1,i);let e=n;return p&&(e+="&dpi=d1&device=mobile"),e.replace("{quadkey}",Object(c.f)(i))}}})),e.imageryProviders){const t=Object(a.getTransformFromProjections)(Object(a.get)("EPSG:4326"),this.getProjection());this.setAttributions(function(i){const n=[],r=i.viewState.zoom;return e.imageryProviders.map(function(e){let s=!1;const a=e.coverageAreas;for(let e=0,n=a.length;e<n;++e){const n=a[e];if(r>=n.zoomMin&&r<=n.zoomMax){const e=n.bbox,r=[e[1],e[0],e[3],e[2]],a=Object(o.applyTransform)(r,t);if(Object(o.intersects)(a,i.extent)){s=!0;break}}}s&&n.push(e.attribution)}),n.push('<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html">Terms of Use</a>'),n})}this.setState(l.a.READY)},e.default=d},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(11),o=i(44),s=i(141);const a=function(t){this.account_=t.account,this.mapId_=t.map||"",this.config_=t.config||{},this.templateCache_={},s.default.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,maxZoom:void 0!==t.maxZoom?t.maxZoom:18,minZoom:t.minZoom,projection:t.projection,state:o.a.LOADING,wrapX:t.wrapX}),this.initializeMap_()};Object(n.inherits)(a,s.default),a.prototype.getConfig=function(){return this.config_},a.prototype.updateConfig=function(t){Object(r.assign)(this.config_,t),this.initializeMap_()},a.prototype.setConfig=function(t){this.config_=t||{},this.initializeMap_()},a.prototype.initializeMap_=function(){const t=JSON.stringify(this.config_);if(this.templateCache_[t])return void this.applyTemplate_(this.templateCache_[t]);let e="https://"+this.account_+".carto.com/api/v1/map";this.mapId_&&(e+="/named/"+this.mapId_);const i=new XMLHttpRequest;i.addEventListener("load",this.handleInitResponse_.bind(this,t)),i.addEventListener("error",this.handleInitError_.bind(this)),i.open("POST",e),i.setRequestHeader("Content-type","application/json"),i.send(JSON.stringify(this.config_))},a.prototype.handleInitResponse_=function(t,e){const i=e.target;if(!i.status||i.status>=200&&i.status<300){let e;try{e=JSON.parse(i.responseText)}catch(t){return void this.setState(o.a.ERROR)}this.applyTemplate_(e),this.templateCache_[t]=e,this.setState(o.a.READY)}else this.setState(o.a.ERROR)},a.prototype.handleInitError_=function(t){this.setState(o.a.ERROR)},a.prototype.applyTemplate_=function(t){const e="https://"+t.cdn_url.https+"/"+this.account_+"/api/v1/map/"+t.layergroupid+"/{z}/{x}/{y}.png";this.setUrl(e)},e.default=a},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(23),o=i(38),s=i(27),a=i(4),l=i(10),u=i(2),c=i(39),h=i(83);const d=function(t){h.default.call(this,{attributions:t.attributions,extent:t.extent,projection:t.projection,wrapX:t.wrapX}),this.resolution=void 0,this.distance=void 0!==t.distance?t.distance:20,this.features=[],this.geometryFunction=t.geometryFunction||function(t){const e=t.getGeometry();return Object(r.a)(e instanceof c.default,10),e},this.source=t.source,Object(a.listen)(this.source,l.default.CHANGE,this.refresh,this)};Object(n.inherits)(d,h.default),d.prototype.getDistance=function(){return this.distance},d.prototype.getSource=function(){return this.source},d.prototype.loadFeatures=function(t,e,i){this.source.loadFeatures(t,e,i),e!==this.resolution&&(this.clear(),this.resolution=e,this.cluster(),this.addFeatures(this.features))},d.prototype.setDistance=function(t){this.distance=t,this.refresh()},d.prototype.refresh=function(){this.clear(),this.cluster(),this.addFeatures(this.features),h.default.prototype.refresh.call(this)},d.prototype.cluster=function(){if(void 0===this.resolution)return;this.features.length=0;const t=Object(u.createEmpty)(),e=this.distance*this.resolution,i=this.source.getFeatures(),r={};for(let o=0,s=i.length;o<s;o++){const s=i[o];if(!(Object(n.getUid)(s).toString()in r)){const i=this.geometryFunction(s);if(i){const o=i.getCoordinates();Object(u.createOrUpdateFromCoordinate)(o,t),Object(u.buffer)(t,e,t);let s=this.source.getFeaturesInExtent(t);s=s.filter(function(t){const e=Object(n.getUid)(t).toString();return!(e in r)&&(r[e]=!0,!0)}),this.features.push(this.createCluster(s))}}}},d.prototype.createCluster=function(t){const e=[0,0];for(let i=t.length-1;i>=0;--i){const n=this.geometryFunction(t[i]);n?Object(s.add)(e,n.getCoordinates()):t.splice(i,1)}Object(s.scale)(e,1/t.length);const i=new o.default(new c.default(e));return i.set("features",t),i},e.default=d},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(129),o=i(23),s=i(4),a=i(10),l=i(2),u=i(11),c=i(57),h=i(95);const d=function(t){const e=t||{};c.default.call(this,{attributions:e.attributions,projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null,this.hidpi_=void 0===e.hidpi||e.hidpi,this.url_=e.url,this.imageLoadFunction_=void 0!==e.imageLoadFunction?e.imageLoadFunction:c.defaultImageLoadFunction,this.params_=e.params||{},this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==e.ratio?e.ratio:1.5};Object(n.inherits)(d,c.default),d.prototype.getParams=function(){return this.params_},d.prototype.getImageInternal=function(t,e,i,n){if(void 0===this.url_)return null;e=this.findNearestResolution(e),i=this.hidpi_?i:1;const o=this.image_;if(o&&this.renderedRevision_==this.getRevision()&&o.getResolution()==e&&o.getPixelRatio()==i&&Object(l.containsExtent)(o.getExtent(),t))return o;const c={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};Object(u.assign)(c,this.params_);const h=((t=t.slice())[0]+t[2])/2,d=(t[1]+t[3])/2;if(1!=this.ratio_){const e=this.ratio_*Object(l.getWidth)(t)/2,i=this.ratio_*Object(l.getHeight)(t)/2;t[0]=h-e,t[1]=d-i,t[2]=h+e,t[3]=d+i}const f=e/i,p=Math.ceil(Object(l.getWidth)(t)/f),g=Math.ceil(Object(l.getHeight)(t)/f);t[0]=h-f*p/2,t[2]=h+f*p/2,t[1]=d-f*g/2,t[3]=d+f*g/2,this.imageSize_[0]=p,this.imageSize_[1]=g;const y=this.getRequestUrl_(t,this.imageSize_,i,n,c);return this.image_=new r.default(t,e,i,y,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),Object(s.listen)(this.image_,a.default.CHANGE,this.handleImageChange,this),this.image_},d.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},d.prototype.getRequestUrl_=function(t,e,i,n,r){const s=n.getCode().split(":").pop();r.SIZE=e[0]+","+e[1],r.BBOX=t.join(","),r.BBOXSR=s,r.IMAGESR=s,r.DPI=Math.round(90*i);const a=this.url_,l=a.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return l==a&&Object(o.a)(!1,50),Object(h.appendParams)(l,r)},d.prototype.getUrl=function(){return this.url_},d.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},d.prototype.setUrl=function(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())},d.prototype.updateParams=function(t){Object(u.assign)(this.params_,t),this.image_=null,this.changed()},e.default=d},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(129),o=i(4),s=i(10),a=i(2),l=i(11),u=i(57),c=i(95);const h=function(t){u.default.call(this,{projection:t.projection,resolutions:t.resolutions}),this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null,this.displayDpi_=void 0!==t.displayDpi?t.displayDpi:96,this.params_=t.params||{},this.url_=t.url,this.imageLoadFunction_=void 0!==t.imageLoadFunction?t.imageLoadFunction:u.defaultImageLoadFunction,this.hidpi_=void 0===t.hidpi||t.hidpi,this.metersPerUnit_=void 0!==t.metersPerUnit?t.metersPerUnit:1,this.ratio_=void 0!==t.ratio?t.ratio:1,this.useOverlay_=void 0!==t.useOverlay&&t.useOverlay,this.image_=null,this.renderedRevision_=0};Object(n.inherits)(h,u.default),h.prototype.getParams=function(){return this.params_},h.prototype.getImageInternal=function(t,e,i,n){e=this.findNearestResolution(e),i=this.hidpi_?i:1;let l=this.image_;if(l&&this.renderedRevision_==this.getRevision()&&l.getResolution()==e&&l.getPixelRatio()==i&&Object(a.containsExtent)(l.getExtent(),t))return l;1!=this.ratio_&&(t=t.slice(),Object(a.scaleFromCenter)(t,this.ratio_));const u=[Object(a.getWidth)(t)/e*i,Object(a.getHeight)(t)/e*i];if(void 0!==this.url_){const a=this.getUrl(this.url_,this.params_,t,u,n);l=new r.default(t,e,i,a,this.crossOrigin_,this.imageLoadFunction_),Object(o.listen)(l,s.default.CHANGE,this.handleImageChange,this)}else l=null;return this.image_=l,this.renderedRevision_=this.getRevision(),l},h.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},h.prototype.updateParams=function(t){Object(l.assign)(this.params_,t),this.changed()},h.prototype.getUrl=function(t,e,i,n,r){const o=function(t,e,i,n){const r=Object(a.getWidth)(t),o=Object(a.getHeight)(t),s=e[0],l=e[1],u=.0254/n;return l*r>s*o?r*i/(s*u):o*i/(l*u)}(i,n,this.metersPerUnit_,this.displayDpi_),s=Object(a.getCenter)(i),u={OPERATION:this.useOverlay_?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol/source/ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:this.displayDpi_,SETDISPLAYWIDTH:Math.round(n[0]),SETDISPLAYHEIGHT:Math.round(n[1]),SETVIEWSCALE:o,SETVIEWCENTERX:s[0],SETVIEWCENTERY:s[1]};return Object(l.assign)(u,e),Object(c.appendParams)(t,u)},h.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},e.default=h},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(129),o=i(30),s=i(26),a=i(4),l=i(10),u=i(2),c=i(9),h=i(57);const d=function(t){const e=t.imageExtent,i=void 0!==t.crossOrigin?t.crossOrigin:null,n=void 0!==t.imageLoadFunction?t.imageLoadFunction:h.defaultImageLoadFunction;h.default.call(this,{attributions:t.attributions,projection:Object(c.get)(t.projection)}),this.image_=new r.default(e,void 0,1,t.url,i,n),this.imageSize_=t.imageSize?t.imageSize:null,Object(a.listen)(this.image_,l.default.CHANGE,this.handleImageChange,this)};Object(n.inherits)(d,h.default),d.prototype.getImageInternal=function(t,e,i,n){return Object(u.intersects)(t,this.image_.getExtent())?this.image_:null},d.prototype.handleImageChange=function(t){if(this.image_.getState()==o.a.LOADED){const t=this.image_.getExtent(),e=this.image_.getImage();let i,n;this.imageSize_?(i=this.imageSize_[0],n=this.imageSize_[1]):(i=e.width,n=e.height);const r=Object(u.getHeight)(t)/n,o=Math.ceil(Object(u.getWidth)(t)/r);if(o!=i){const t=Object(s.a)(o,n),r=t.canvas;t.drawImage(e,0,0,i,n,0,0,r.width,r.height),this.image_.setImage(r)}}h.default.prototype.handleImageChange.call(this,t)},e.default=d},function(t,e,i){"use strict";i.r(e);var n=i(179),r=i(1),o=i(129),s=i(23),a=i(4),l=i(10),u=i(2),c=i(11),h=i(9),d=i(140),f=i(57),p=i(144),g=i(113),y=i(95);const m=function(t){const e=t||{};f.default.call(this,{attributions:e.attributions,projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null,this.url_=e.url,this.imageLoadFunction_=void 0!==e.imageLoadFunction?e.imageLoadFunction:f.defaultImageLoadFunction,this.params_=e.params||{},this.v13_=!0,this.updateV13_(),this.serverType_=e.serverType,this.hidpi_=void 0===e.hidpi||e.hidpi,this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==e.ratio?e.ratio:1.5};Object(r.inherits)(m,f.default);const _=[101,101];m.prototype.getGetFeatureInfoUrl=function(t,e,i,r){if(void 0===this.url_)return;const o=Object(h.get)(i),s=this.getProjection();s&&s!==o&&(e=Object(d.a)(s,o,t,e),t=Object(h.transform)(t,o,s));const a=Object(u.getForViewAndSize)(t,e,0,_),l={SERVICE:"WMS",VERSION:n.a,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object(c.assign)(l,this.params_,r);const f=Math.floor((t[0]-a[0])/e),p=Math.floor((a[3]-t[1])/e);return l[this.v13_?"I":"X"]=f,l[this.v13_?"J":"Y"]=p,this.getRequestUrl_(a,_,1,s||o,l)},m.prototype.getParams=function(){return this.params_},m.prototype.getImageInternal=function(t,e,i,r){if(void 0===this.url_)return null;e=this.findNearestResolution(e),1==i||this.hidpi_&&void 0!==this.serverType_||(i=1);const s=e/i,h=Object(u.getCenter)(t),d=Math.ceil(Object(u.getWidth)(t)/s),f=Math.ceil(Object(u.getHeight)(t)/s),p=Object(u.getForViewAndSize)(h,s,0,[d,f]),g=Math.ceil(this.ratio_*Object(u.getWidth)(t)/s),y=Math.ceil(this.ratio_*Object(u.getHeight)(t)/s),m=Object(u.getForViewAndSize)(h,s,0,[g,y]),_=this.image_;if(_&&this.renderedRevision_==this.getRevision()&&_.getResolution()==e&&_.getPixelRatio()==i&&Object(u.containsExtent)(_.getExtent(),p))return _;const v={SERVICE:"WMS",VERSION:n.a,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};Object(c.assign)(v,this.params_),this.imageSize_[0]=Math.round(Object(u.getWidth)(m)/s),this.imageSize_[1]=Math.round(Object(u.getHeight)(m)/s);const b=this.getRequestUrl_(m,this.imageSize_,i,r,v);return this.image_=new o.default(m,e,i,b,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),Object(a.listen)(this.image_,l.default.CHANGE,this.handleImageChange,this),this.image_},m.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},m.prototype.getRequestUrl_=function(t,e,i,n,r){if(Object(s.a)(void 0!==this.url_,9),r[this.v13_?"CRS":"SRS"]=n.getCode(),"STYLES"in this.params_||(r.STYLES=""),1!=i)switch(this.serverType_){case p.a.GEOSERVER:const t=90*i+.5|0;"FORMAT_OPTIONS"in r?r.FORMAT_OPTIONS+=";dpi:"+t:r.FORMAT_OPTIONS="dpi:"+t;break;case p.a.MAPSERVER:r.MAP_RESOLUTION=90*i;break;case p.a.CARMENTA_SERVER:case p.a.QGIS:r.DPI=90*i;break;default:Object(s.a)(!1,8)}r.WIDTH=e[0],r.HEIGHT=e[1];const o=n.getAxisOrientation();let a;return a=this.v13_&&"ne"==o.substr(0,2)?[t[1],t[0],t[3],t[2]]:t,r.BBOX=a.join(","),Object(y.appendParams)(this.url_,r)},m.prototype.getUrl=function(){return this.url_},m.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},m.prototype.setUrl=function(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())},m.prototype.updateParams=function(t){Object(c.assign)(this.params_,t),this.updateV13_(),this.image_=null,this.changed()},m.prototype.updateV13_=function(){const t=this.params_.VERSION||n.a;this.v13_=Object(g.a)(t,"1.3")>=0},e.default=m},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(171),o=i(202),s=i(26),a=i(4),l=i(29),u=i(10),c=i(464),h=i(2),d=i(54),f=i(60),p=i(149),g=i(150),y=i(11),m=i(207),_=i(114),v=i(57),b=i(44),S=i(112),O=i(14);const C="beforeoperations",x="afteroperations",T="pixel",E="image",P=function(t,e,i){l.default.call(this,t),this.extent=e.extent,this.resolution=e.viewState.resolution/e.pixelRatio,this.data=i};Object(n.inherits)(P,l.default);const j=function(t){this.worker_=null,this.operationType_=void 0!==t.operationType?t.operationType:T,this.threads_=void 0!==t.threads?t.threads:1,this.renderers_=function(t){const e=t.length,i=new Array(e);for(let n=0;n<e;++n)i[n]=L(t[n]);return i}(t.sources);for(let t=0,e=this.renderers_.length;t<e;++t)Object(a.listen)(this.renderers_[t],u.default.CHANGE,this.changed,this);this.tileQueue_=new o.a(function(){return 1},this.changed.bind(this));const e=this.renderers_.map(function(t){return t.getLayer().getLayerState()});const i={};for(let t=0,r=e.length;t<r;++t)i[Object(n.getUid)(e[t].layer)]=e[t];this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:Object(O.c)(),extent:null,focus:null,index:0,layerStates:i,layerStatesArray:e,pixelRatio:1,pixelToCoordinateTransform:Object(O.c)(),postRenderFunctions:[],size:[0,0],skippedFeatureUids:{},tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{}},v.default.call(this,{}),void 0!==t.operation&&this.setOperation(t.operation,t.lib)};Object(n.inherits)(j,v.default),j.prototype.setOperation=function(t,e){this.worker_=new c.Processor({operation:t,imageOps:this.operationType_===E,queue:1,lib:e,threads:this.threads_}),this.changed()},j.prototype.updateFrameState_=function(t,e,i){const n=Object(y.assign)({},this.frameState_);n.viewState=Object(y.assign)({},n.viewState);const r=Object(h.getCenter)(t);n.extent=t.slice(),n.focus=r,n.size[0]=Math.round(Object(h.getWidth)(t)/e),n.size[1]=Math.round(Object(h.getHeight)(t)/e),n.time=Date.now(),n.animate=!1;const o=n.viewState;return o.center=r,o.projection=i,o.resolution=e,n},j.prototype.allSourcesReady_=function(){let t,e=!0;for(let i=0,n=this.renderers_.length;i<n;++i)if((t=this.renderers_[i].getLayer().getSource()).getState()!==b.a.READY){e=!1;break}return e},j.prototype.getImage=function(t,e,i,n){if(!this.allSourcesReady_())return null;const r=this.updateFrameState_(t,e,n);if(this.requestedFrameState_=r,this.renderedImageCanvas_){const i=this.renderedImageCanvas_.getResolution(),n=this.renderedImageCanvas_.getExtent();e===i&&Object(h.equals)(t,n)||(this.renderedImageCanvas_=null)}return this.renderedImageCanvas_&&this.getRevision()===this.renderedRevision_||this.processSources_(),r.tileQueue.loadMoreTiles(16,16),r.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_},j.prototype.processSources_=function(){const t=this.requestedFrameState_,e=this.renderers_.length,i=new Array(e);for(let n=0;n<e;++n){const e=I(this.renderers_[n],t,t.layerStatesArray[n]);if(!e)return;i[n]=e}const n={};this.dispatchEvent(new P(C,t,n)),this.worker_.process(i,n,this.onWorkerComplete_.bind(this,t))},j.prototype.onWorkerComplete_=function(t,e,i,n){if(e||!i)return;const o=t.extent,a=t.viewState.resolution;if(a!==this.requestedFrameState_.viewState.resolution||!Object(h.equals)(o,this.requestedFrameState_.extent))return;let l;if(this.renderedImageCanvas_)l=this.renderedImageCanvas_.getImage().getContext("2d");else{const t=Math.round(Object(h.getWidth)(o)/a),e=Math.round(Object(h.getHeight)(o)/a);l=Object(s.a)(t,e),this.renderedImageCanvas_=new r.a(o,a,1,l.canvas)}l.putImageData(i,0,0),this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new P(x,t,n))};let w=null;function I(t,e,i){if(!t.prepareFrame(e,i))return null;const n=e.size[0],r=e.size[1];if(w){const t=w.canvas;t.width!==n||t.height!==r?w=Object(s.a)(n,r):w.clearRect(0,0,n,r)}else w=Object(s.a)(n,r);return t.composeFrame(e,i,w),w.getImageData(0,0,n,r)}function L(t){let e=null;return t instanceof S.default?e=function(t){const e=new g.default({source:t});return new _.default(e)}(t):t instanceof v.default?e=function(t){const e=new p.default({source:t});return new m.default(e)}(t):t instanceof g.default?e=new _.default(t):t instanceof f.default&&(t.getType()==d.a.IMAGE||t.getType()==d.a.VECTOR)&&(e=new m.default(t)),e}j.prototype.getImageInternal=function(){return null},e.default=j},function(t,e,i){var n=i(494).newImageData;function r(t){var e=!0;try{new ImageData(10,10)}catch(t){e=!1}function i(t,i,n){return e?new ImageData(t,i,n):{data:t,width:i,height:n}}return function(e){var n,r,o=e.buffers,s=e.meta,a=e.imageOps,l=e.width,u=e.height,c=o.length,h=o[0].byteLength;if(a){var d=new Array(c);for(r=0;r<c;++r)d[r]=i(new Uint8ClampedArray(o[r]),l,u);n=t(d,s).data}else{n=new Uint8ClampedArray(h);var f=new Array(c),p=new Array(c);for(r=0;r<c;++r)f[r]=new Uint8ClampedArray(o[r]),p[r]=[0,0,0,0];for(var g=0;g<h;g+=4){for(var y=0;y<c;++y){var m=f[y];p[y][0]=m[g],p[y][1]=m[g+1],p[y][2]=m[g+2],p[y][3]=m[g+3]}var _=t(p,s);n[g]=_[0],n[g+1]=_[1],n[g+2]=_[2],n[g+3]=_[3]}}return n.buffer}}function o(t,e){var i=Object.keys(t.lib||{}).map(function(e){return"var "+e+" = "+t.lib[e].toString()+";"}).concat(["var __minion__ = ("+r.toString()+")(",t.operation.toString(),");",'self.addEventListener("message", function(event) {',"  var buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),n=new Blob(i,{type:"text/javascript"}),o=URL.createObjectURL(n),s=new Worker(o);return s.addEventListener("message",e),s}function s(t){var e;this._imageOps=!!t.imageOps;var i=[];if(e=0===t.threads?0:this._imageOps?1:t.threads||1)for(var n=0;n<e;++n)i[n]=o(t,this._onWorkerMessage.bind(this,n));else i[0]=function(t,e){var i=r(t.operation);return{postMessage:function(t){setTimeout(function(){e({data:{buffer:i(t),meta:t.meta}})},0)}}}(t,this._onWorkerMessage.bind(this,0));this._workers=i,this._queue=[],this._maxQueueLength=t.queue||1/0,this._running=0,this._dataLookup={},this._job=null}s.prototype.process=function(t,e,i){this._enqueue({inputs:t,meta:e,callback:i}),this._dispatch()},s.prototype.destroy=function(){for(var t in this)this[t]=null;this._destroyed=!0},s.prototype._enqueue=function(t){for(this._queue.push(t);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)},s.prototype._dispatch=function(){if(0===this._running&&this._queue.length>0){var t=this._job=this._queue.shift(),e=t.inputs[0].width,i=t.inputs[0].height,n=t.inputs.map(function(t){return t.data.buffer}),r=this._workers.length;if(this._running=r,1===r)this._workers[0].postMessage({buffers:n,meta:t.meta,imageOps:this._imageOps,width:e,height:i},n);else for(var o=t.inputs[0].data.length,s=4*Math.ceil(o/4/r),a=0;a<r;++a){for(var l=a*s,u=[],c=0,h=n.length;c<h;++c)u.push(n[a].slice(l,l+s));this._workers[a].postMessage({buffers:u,meta:t.meta,imageOps:this._imageOps,width:e,height:i},u)}}},s.prototype._onWorkerMessage=function(t,e){this._destroyed||(this._dataLookup[t]=e.data,--this._running,0===this._running&&this._resolveJob())},s.prototype._resolveJob=function(){var t,e,i=this._job,r=this._workers.length;if(1===r)t=new Uint8ClampedArray(this._dataLookup[0].buffer),e=this._dataLookup[0].meta;else{var o=i.inputs[0].data.length;t=new Uint8ClampedArray(o),e=new Array(o);for(var s=4*Math.ceil(o/4/r),a=0;a<r;++a){var l=this._dataLookup[a].buffer,u=a*s;t.set(new Uint8ClampedArray(l),u),e[a]=this._dataLookup[a].meta}}this._job=null,this._dataLookup={},i.callback(null,n(t,i.inputs[0].width,i.inputs[0].height),e),this._dispatch()},t.exports=s},function(t,e){var i=!0;try{new ImageData(10,10)}catch(t){i=!1}var n=document.createElement("canvas").getContext("2d");e.newImageData=function(t,e,r){if(i)return new ImageData(t,e,r);var o=n.createImageData(e,r);return o.data.set(t),o}},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(359),o=i(141);const s=['Map tiles by <a href="https://stamen.com/">Stamen Design</a>, under <a href="https://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.',r.ATTRIBUTION],a={terrain:{extension:"jpg",opaque:!0},"terrain-background":{extension:"jpg",opaque:!0},"terrain-labels":{extension:"png",opaque:!1},"terrain-lines":{extension:"png",opaque:!1},"toner-background":{extension:"png",opaque:!0},toner:{extension:"png",opaque:!0},"toner-hybrid":{extension:"png",opaque:!1},"toner-labels":{extension:"png",opaque:!1},"toner-lines":{extension:"png",opaque:!1},"toner-lite":{extension:"png",opaque:!0},watercolor:{extension:"jpg",opaque:!0}},l={terrain:{minZoom:4,maxZoom:18},toner:{minZoom:0,maxZoom:20},watercolor:{minZoom:1,maxZoom:16}},u=function(t){const e=t.layer.indexOf("-"),i=-1==e?t.layer:t.layer.slice(0,e),n=l[i],r=a[t.layer],u=void 0!==t.url?t.url:"https://stamen-tiles-{a-d}.a.ssl.fastly.net/"+t.layer+"/{z}/{x}/{y}."+r.extension;o.default.call(this,{attributions:s,cacheSize:t.cacheSize,crossOrigin:"anonymous",maxZoom:void 0!=t.maxZoom?t.maxZoom:n.maxZoom,minZoom:void 0!=t.minZoom?t.minZoom:n.minZoom,opaque:r.opaque,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,url:u,wrapX:t.wrapX})};Object(n.inherits)(u,o.default),e.default=u},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(2),o=i(18),s=i(11),a=i(49),l=i(53),u=i(50),c=i(95);const h=function(t){const e=t||{};l.default.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition}),this.params_=e.params||{},this.tmpExtent_=Object(r.createEmpty)(),this.setKey(this.getKeyForParams_())};Object(n.inherits)(h,l.default),h.prototype.getKeyForParams_=function(){let t=0;const e=[];for(const i in this.params_)e[t++]=i+"-"+this.params_[i];return e.join("/")},h.prototype.getParams=function(){return this.params_},h.prototype.getRequestUrl_=function(t,e,i,n,r,s){const a=this.urls;if(!a)return;const l=r.getCode().split(":").pop();let h;if(s.SIZE=e[0]+","+e[1],s.BBOX=i.join(","),s.BBOXSR=l,s.IMAGESR=l,s.DPI=Math.round(s.DPI?s.DPI*n:90*n),1==a.length)h=a[0];else{h=a[Object(o.d)(Object(u.e)(t),a.length)]}const d=h.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return Object(c.appendParams)(d,s)},h.prototype.getTilePixelRatio=function(t){return t},h.prototype.fixedTileUrlFunction=function(t,e,i){let n=this.getTileGrid();if(n||(n=this.getTileGridForProjection(i)),n.getResolutions().length<=t[0])return;const r=n.getTileCoordExtent(t,this.tmpExtent_);let o=Object(a.toSize)(n.getTileSize(t[0]),this.tmpSize);1!=e&&(o=Object(a.scale)(o,e,this.tmpSize));const l={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return Object(s.assign)(l,this.params_),this.getRequestUrl_(t,o,r,e,i,l)},h.prototype.updateParams=function(t){Object(s.assign)(this.params_,t),this.setKey(this.getKeyForParams_())},e.default=h},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(56),o=i(15),s=i(26),a=i(49),l=i(112),u=i(50);const c=function(t,e,i){r.default.call(this,t,o.a.LOADED),this.tileSize_=e,this.text_=i,this.canvas_=null};Object(n.inherits)(c,r.default),c.prototype.getImage=function(){if(this.canvas_)return this.canvas_;{const t=this.tileSize_,e=Object(s.a)(t[0],t[1]);return e.strokeStyle="black",e.strokeRect(.5,.5,t[0]+.5,t[1]+.5),e.fillStyle="black",e.textAlign="center",e.textBaseline="middle",e.font="24px sans-serif",e.fillText(this.text_,t[0]/2,t[1]/2),this.canvas_=e.canvas,e.canvas}},c.prototype.load=function(){};const h=function(t){l.default.call(this,{opaque:!1,projection:t.projection,tileGrid:t.tileGrid,wrapX:void 0===t.wrapX||t.wrapX})};Object(n.inherits)(h,l.default),h.prototype.getTile=function(t,e,i){const n=Object(u.d)(t,e,i);if(this.tileCache.containsKey(n))return this.tileCache.get(n);{const r=Object(a.toSize)(this.tileGrid.getTileSize(t)),o=[t,e,i],s=this.getTileCoordForTileUrlFunction(o),l=s?this.getTileCoordForTileUrlFunction(s).toString():"",u=new c(o,r,l);return this.tileCache.set(n,u),u}},e.default=h},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(73),o=i(23),s=i(2),a=i(191),l=i(9),u=i(44),c=i(53),h=i(64);const d=function(t){if(this.tileJSON_=null,c.default.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,projection:Object(l.get)("EPSG:3857"),reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:u.a.LOADING,tileLoadFunction:t.tileLoadFunction,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition}),t.url)if(t.jsonp)Object(a.a)(t.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const e=new XMLHttpRequest;e.addEventListener("load",this.onXHRLoad_.bind(this)),e.addEventListener("error",this.onXHRError_.bind(this)),e.open("GET",t.url),e.send()}else t.tileJSON?this.handleTileJSONResponse(t.tileJSON):Object(o.a)(!1,51)};Object(n.inherits)(d,c.default),d.prototype.onXHRLoad_=function(t){const e=t.target;if(!e.status||e.status>=200&&e.status<300){let t;try{t=JSON.parse(e.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(t)}else this.handleTileJSONError()},d.prototype.onXHRError_=function(t){this.handleTileJSONError()},d.prototype.getTileJSON=function(){return this.tileJSON_},d.prototype.handleTileJSONResponse=function(t){const e=Object(l.get)("EPSG:4326"),i=this.getProjection();let n;if(void 0!==t.bounds){const r=Object(l.getTransformFromProjections)(e,i);n=Object(s.applyTransform)(t.bounds,r)}const o=t.minzoom||0,a=t.maxzoom||22,c=Object(h.createXYZ)({extent:Object(h.extentFromProjection)(i),maxZoom:a,minZoom:o});if(this.tileGrid=c,this.tileUrlFunction=Object(r.a)(t.tiles,c),void 0!==t.attribution&&!this.getAttributions()){const i=void 0!==n?n:e.getExtent();this.setAttributions(function(e){return Object(s.intersects)(i,e.extent)?[t.attribution]:null})}this.tileJSON_=t,this.setState(u.a.READY)},d.prototype.handleTileJSONError=function(){this.setState(u.a.ERROR)},e.default=d},function(t,e,i){"use strict";i.r(e);var n=i(179),r=i(1),o=i(23),s=i(2),a=i(11),l=i(18),u=i(9),c=i(140),h=i(49),d=i(53),f=i(144),p=i(50),g=i(113),y=i(95);const m=function(t){const e=t||{},i=e.params||{},n=!("TRANSPARENT"in i)||i.TRANSPARENT;d.default.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,opaque:!n,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition}),this.gutter_=void 0!==e.gutter?e.gutter:0,this.params_=i,this.v13_=!0,this.serverType_=e.serverType,this.hidpi_=void 0===e.hidpi||e.hidpi,this.tmpExtent_=Object(s.createEmpty)(),this.updateV13_(),this.setKey(this.getKeyForParams_())};Object(r.inherits)(m,d.default),m.prototype.getGetFeatureInfoUrl=function(t,e,i,r){const o=Object(u.get)(i),l=this.getProjection();let d=this.getTileGrid();d||(d=this.getTileGridForProjection(o));const f=d.getTileCoordForCoordAndResolution(t,e);if(d.getResolutions().length<=f[0])return;let p=d.getResolution(f[0]),g=d.getTileCoordExtent(f,this.tmpExtent_),y=Object(h.toSize)(d.getTileSize(f[0]),this.tmpSize);const m=this.gutter_;0!==m&&(y=Object(h.buffer)(y,m,this.tmpSize),g=Object(s.buffer)(g,p*m,g)),l&&l!==o&&(p=Object(c.a)(l,o,t,p),g=Object(u.transformExtent)(g,o,l),t=Object(u.transform)(t,o,l));const _={SERVICE:"WMS",VERSION:n.a,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object(a.assign)(_,this.params_,r);const v=Math.floor((t[0]-g[0])/p),b=Math.floor((g[3]-t[1])/p);return _[this.v13_?"I":"X"]=v,_[this.v13_?"J":"Y"]=b,this.getRequestUrl_(f,y,g,1,l||o,_)},m.prototype.getGutterInternal=function(){return this.gutter_},m.prototype.getParams=function(){return this.params_},m.prototype.getRequestUrl_=function(t,e,i,n,r,s){const a=this.urls;if(!a)return;if(s.WIDTH=e[0],s.HEIGHT=e[1],s[this.v13_?"CRS":"SRS"]=r.getCode(),"STYLES"in this.params_||(s.STYLES=""),1!=n)switch(this.serverType_){case f.a.GEOSERVER:const t=90*n+.5|0;"FORMAT_OPTIONS"in s?s.FORMAT_OPTIONS+=";dpi:"+t:s.FORMAT_OPTIONS="dpi:"+t;break;case f.a.MAPSERVER:s.MAP_RESOLUTION=90*n;break;case f.a.CARMENTA_SERVER:case f.a.QGIS:s.DPI=90*n;break;default:Object(o.a)(!1,52)}const u=r.getAxisOrientation(),c=i;if(this.v13_&&"ne"==u.substr(0,2)){let t;t=i[0],c[0]=i[1],c[1]=t,t=i[2],c[2]=i[3],c[3]=t}let h;if(s.BBOX=c.join(","),1==a.length)h=a[0];else{h=a[Object(l.d)(Object(p.e)(t),a.length)]}return Object(y.appendParams)(h,s)},m.prototype.getTilePixelRatio=function(t){return this.hidpi_&&void 0!==this.serverType_?t:1},m.prototype.getKeyForParams_=function(){let t=0;const e=[];for(const i in this.params_)e[t++]=i+"-"+this.params_[i];return e.join("/")},m.prototype.fixedTileUrlFunction=function(t,e,i){let r=this.getTileGrid();if(r||(r=this.getTileGridForProjection(i)),r.getResolutions().length<=t[0])return;1==e||this.hidpi_&&void 0!==this.serverType_||(e=1);const o=r.getResolution(t[0]);let l=r.getTileCoordExtent(t,this.tmpExtent_),u=Object(h.toSize)(r.getTileSize(t[0]),this.tmpSize);const c=this.gutter_;0!==c&&(u=Object(h.buffer)(u,c,this.tmpSize),l=Object(s.buffer)(l,o*c,l)),1!=e&&(u=Object(h.scale)(u,e,this.tmpSize));const d={SERVICE:"WMS",VERSION:n.a,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return Object(a.assign)(d,this.params_),this.getRequestUrl_(t,u,l,e,i,d)},m.prototype.updateParams=function(t){Object(a.assign)(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())},m.prototype.updateV13_=function(){const t=this.params_.VERSION||n.a;this.v13_=Object(g.a)(t,"1.3")>=0},e.default=m},function(t,e,i){"use strict";i.r(e),i.d(e,"CustomTile",function(){return m});var n=i(1),r=i(56),o=i(15),s=i(73),a=i(23),l=i(4),u=i(10),c=i(2),h=i(191),d=i(9),f=i(44),p=i(112),g=i(50),y=i(64);const m=function(t,e,i,n,o,s){r.default.call(this,t,e),this.src_=i,this.extent_=n,this.preemptive_=o,this.grid_=null,this.keys_=null,this.data_=null,this.jsonp_=s};Object(n.inherits)(m,r.default),m.prototype.getImage=function(){return null},m.prototype.getData=function(t){if(!this.grid_||!this.keys_)return null;const e=(t[0]-this.extent_[0])/(this.extent_[2]-this.extent_[0]),i=(t[1]-this.extent_[1])/(this.extent_[3]-this.extent_[1]),n=this.grid_[Math.floor((1-i)*this.grid_.length)];if("string"!=typeof n)return null;let r=n.charCodeAt(Math.floor(e*n.length));r>=93&&r--,r>=35&&r--;let o=null;if((r-=32)in this.keys_){const t=this.keys_[r];o=this.data_&&t in this.data_?this.data_[t]:t}return o},m.prototype.forDataAtCoordinate=function(t,e,i,n){this.state==o.a.IDLE&&!0===n?(Object(l.listenOnce)(this,u.default.CHANGE,function(n){e.call(i,this.getData(t))},this),this.loadInternal_()):!0===n?setTimeout(function(){e.call(i,this.getData(t))}.bind(this),0):e.call(i,this.getData(t))},m.prototype.getKey=function(){return this.src_},m.prototype.handleError_=function(){this.state=o.a.ERROR,this.changed()},m.prototype.handleLoad_=function(t){this.grid_=t.grid,this.keys_=t.keys,this.data_=t.data,this.state=o.a.EMPTY,this.changed()},m.prototype.loadInternal_=function(){if(this.state==o.a.IDLE)if(this.state=o.a.LOADING,this.jsonp_)Object(h.a)(this.src_,this.handleLoad_.bind(this),this.handleError_.bind(this));else{const t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",this.src_),t.send()}},m.prototype.onXHRLoad_=function(t){const e=t.target;if(!e.status||e.status>=200&&e.status<300){let t;try{t=JSON.parse(e.responseText)}catch(t){return void this.handleError_()}this.handleLoad_(t)}else this.handleError_()},m.prototype.onXHRError_=function(t){this.handleError_()},m.prototype.load=function(){this.preemptive_&&this.loadInternal_()};const _=function(t){if(p.default.call(this,{projection:Object(d.get)("EPSG:3857"),state:f.a.LOADING}),this.preemptive_=void 0===t.preemptive||t.preemptive,this.tileUrlFunction_=s.d,this.template_=void 0,this.jsonp_=t.jsonp||!1,t.url)if(this.jsonp_)Object(h.a)(t.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const e=new XMLHttpRequest;e.addEventListener("load",this.onXHRLoad_.bind(this)),e.addEventListener("error",this.onXHRError_.bind(this)),e.open("GET",t.url),e.send()}else t.tileJSON?this.handleTileJSONResponse(t.tileJSON):Object(a.a)(!1,51)};Object(n.inherits)(_,p.default),_.prototype.onXHRLoad_=function(t){const e=t.target;if(!e.status||e.status>=200&&e.status<300){let t;try{t=JSON.parse(e.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(t)}else this.handleTileJSONError()},_.prototype.onXHRError_=function(t){this.handleTileJSONError()},_.prototype.getTemplate=function(){return this.template_},_.prototype.forDataAtCoordinateAndResolution=function(t,e,i,n){if(this.tileGrid){const r=this.tileGrid.getTileCoordForCoordAndResolution(t,e);this.getTile(r[0],r[1],r[2],1,this.getProjection()).forDataAtCoordinate(t,i,null,n)}else!0===n?setTimeout(function(){i(null)},0):i(null)},_.prototype.handleTileJSONError=function(){this.setState(f.a.ERROR)},_.prototype.handleTileJSONResponse=function(t){const e=Object(d.get)("EPSG:4326"),i=this.getProjection();let n;if(void 0!==t.bounds){const r=Object(d.getTransformFromProjections)(e,i);n=Object(c.applyTransform)(t.bounds,r)}const r=t.minzoom||0,o=t.maxzoom||22,a=Object(y.createXYZ)({extent:Object(y.extentFromProjection)(i),maxZoom:o,minZoom:r});this.tileGrid=a,this.template_=t.template;const l=t.grids;if(l){if(this.tileUrlFunction_=Object(s.a)(l,a),void 0!==t.attribution){const i=void 0!==n?n:e.getExtent();this.setAttributions(function(e){return Object(c.intersects)(i,e.extent)?[t.attribution]:null})}this.setState(f.a.READY)}else this.setState(f.a.ERROR)},_.prototype.getTile=function(t,e,i,n,r){const s=Object(g.d)(t,e,i);if(this.tileCache.containsKey(s))return this.tileCache.get(s);{const a=[t,e,i],l=this.getTileCoordForTileUrlFunction(a,r),u=this.tileUrlFunction_(l,n,r),c=new m(a,void 0!==u?o.a.IDLE:o.a.EMPTY,void 0!==u?u:"",this.tileGrid.getTileCoordExtent(a),this.preemptive_,this.jsonp_);return this.tileCache.set(s,c),c}},_.prototype.useTile=function(t,e,i){const n=Object(g.d)(t,e,i);this.tileCache.containsKey(n)&&this.tileCache.get(n)},e.default=_},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(15),o=i(242),s=i(237),a=i(49),l=i(127),u=i(50),c=i(64);const h=function(t){const e=t.projection||"EPSG:3857",i=t.extent||Object(c.extentFromProjection)(e),n=t.tileGrid||Object(c.createXYZ)({extent:i,maxZoom:t.maxZoom||22,minZoom:t.minZoom,tileSize:t.tileSize||512});l.default.call(this,{attributions:t.attributions,cacheSize:void 0!==t.cacheSize?t.cacheSize:128,extent:i,opaque:!1,projection:e,state:t.state,tileGrid:n,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:o.b,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition}),this.format_=t.format?t.format:null,this.sourceTiles_={},this.overlaps_=void 0==t.overlaps||t.overlaps,this.tileClass=t.tileClass?t.tileClass:s.default,this.tileGrids_={}};Object(n.inherits)(h,l.default),h.prototype.getOverlaps=function(){return this.overlaps_},h.prototype.clear=function(){this.tileCache.clear(),this.sourceTiles_={}},h.prototype.getTile=function(t,e,i,n,s){const a=Object(u.d)(t,e,i);if(this.tileCache.containsKey(a))return this.tileCache.get(a);{const l=[t,e,i],u=this.getTileCoordForTileUrlFunction(l,s),c=new o.a(l,null!==u?r.a.IDLE:r.a.EMPTY,this.getRevision(),this.format_,this.tileLoadFunction,u,this.tileUrlFunction,this.tileGrid,this.getTileGridForProjection(s),this.sourceTiles_,n,s,this.tileClass,this.handleTileChange.bind(this),l[0]);return this.tileCache.set(a,c),c}},h.prototype.getTileGridForProjection=function(t){const e=t.getCode();let i=this.tileGrids_[e];if(!i){const n=this.tileGrid;i=this.tileGrids_[e]=Object(c.createForProjection)(t,void 0,n?n.getTileSize(n.getMinZoom()):void 0)}return i},h.prototype.getTilePixelRatio=function(t){return t},h.prototype.getTilePixelSize=function(t,e,i){const n=this.getTileGridForProjection(i),r=Object(a.toSize)(n.getTileSize(t),this.tmpSize);return[Math.round(r[0]*e),Math.round(r[1]*e)]},e.default=h},function(t,e,i){"use strict";i.r(e),i.d(e,"CustomTile",function(){return y});var n=i(155),r=i(1),o=i(151),s=i(15),a=i(73),l=i(23),u=i(26),c=i(2),h=i(49),d=i(53),f=i(101);const p="default",g="truncated",y=function(t,e,i,n,r,s,a){o.default.call(this,e,i,n,r,s,a),this.zoomifyImage_=null,this.tileSize_=Object(h.toSize)(t.getTileSize(e[0]))};Object(r.inherits)(y,o.default),y.prototype.getImage=function(){if(this.zoomifyImage_)return this.zoomifyImage_;const t=o.default.prototype.getImage.call(this);if(this.state==s.a.LOADED){const e=this.tileSize_;if(t.width==e[0]&&t.height==e[1])return this.zoomifyImage_=t,t;{const i=Object(u.a)(e[0],e[1]);return i.drawImage(t,0,0),this.zoomifyImage_=i.canvas,i.canvas}}return t};const m=function(t){const e=t||{},i=e.size,r=void 0!==e.tierSizeCalculation?e.tierSizeCalculation:p,o=i[0],s=i[1],u=e.extent||[0,-i[1],i[0],0],h=[],m=e.tileSize||n.b;let _=m;switch(r){case p:for(;o>_||s>_;)h.push([Math.ceil(o/_),Math.ceil(s/_)]),_+=_;break;case g:let t=o,e=s;for(;t>_||e>_;)h.push([Math.ceil(t/_),Math.ceil(e/_)]),t>>=1,e>>=1;break;default:Object(l.a)(!1,53)}h.push([1,1]),h.reverse();const v=[1],b=[0];for(let t=1,e=h.length;t<e;t++)v.push(1<<t),b.push(h[t-1][0]*h[t-1][1]+b[t-1]);v.reverse();const S=new f.default({tileSize:m,extent:u,origin:Object(c.getTopLeft)(u),resolutions:v});let O=e.url;O&&-1==O.indexOf("{TileGroup}")&&-1==O.indexOf("{tileIndex}")&&(O+="{TileGroup}/{z}-{x}-{y}.jpg");const C=Object(a.c)(O);const x=Object(a.b)(C.map(function(t){return function(e,i,n){if(e){const i=e[0],n=e[1],r=-e[2]-1,o=n+r*h[i][0],s=S.getTileSize(i),a={z:i,x:n,y:r,tileIndex:o,TileGroup:"TileGroup"+((o+b[i])/s|0)};return t.replace(/\{(\w+?)\}/g,function(t,e){return a[e]})}}})),T=y.bind(null,S);d.default.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:T,tileGrid:S,tileUrlFunction:x,transition:e.transition})};Object(r.inherits)(m,d.default),e.default=m},function(t,e,i){"use strict";i.r(e);var n=i(201);i.d(e,"AssertionError",function(){return n.a});var r=i(42);i.d(e,"Collection",function(){return r.default});var o=i(117);i.d(e,"Disposable",function(){return o.a});var s=i(38);i.d(e,"Feature",function(){return s.default});var a=i(334);i.d(e,"Geolocation",function(){return a.default});var l=i(335);i.d(e,"Graticule",function(){return l.default});var u=i(129);i.d(e,"Image",function(){return u.default});var c=i(122);i.d(e,"ImageBase",function(){return c.a});var h=i(171);i.d(e,"ImageCanvas",function(){return h.a});var d=i(151);i.d(e,"ImageTile",function(){return d.default});var f=i(224);i.d(e,"Kinetic",function(){return f.default});var p=i(225);i.d(e,"Map",function(){return p.default});var g=i(170);i.d(e,"MapBrowserEvent",function(){return g.default});var y=i(265);i.d(e,"MapBrowserEventHandler",function(){return y.a});var m=i(78);i.d(e,"MapBrowserPointerEvent",function(){return m.default});var _=i(132);i.d(e,"MapEvent",function(){return _.a});var v=i(25);i.d(e,"Object",function(){return v.default});var b=i(137);i.d(e,"Observable",function(){return b.default});var S=i(236);i.d(e,"Overlay",function(){return S.default});var O=i(152);i.d(e,"PluggableMap",function(){return O.default});var C=i(56);i.d(e,"Tile",function(){return C.default});var x=i(203);i.d(e,"TileCache",function(){return x.a});var T=i(202);i.d(e,"TileQueue",function(){return T.a});var E=i(130);i.d(e,"TileRange",function(){return E.b});var P=i(242);i.d(e,"VectorImageTile",function(){return P.a});var j=i(237);i.d(e,"VectorTile",function(){return j.default});var w=i(200);i.d(e,"View",function(){return w.default});var I=i(287);i.d(e,"WebGLMap",function(){return I.default});var L=i(1);i.d(e,"getUid",function(){return L.getUid}),i.d(e,"inherits",function(){return L.inherits}),i.d(e,"VERSION",function(){return L.VERSION})},function(t,e,i){"use strict";i.r(e),i.d(e,"register",function(){return s});var n=i(9),r=i(134),o=i(110);function s(t){const e=Object.keys(t.defs),i=e.length;let s,a;for(s=0;s<i;++s){const i=e[s];if(!Object(n.get)(i)){const e=t.defs(i);Object(n.addProjection)(new o.default({code:i,axisOrientation:e.axis,metersPerUnit:e.to_meter,units:e.units}))}}for(s=0;s<i;++s){const o=e[s],l=Object(n.get)(o);for(a=0;a<i;++a){const i=e[a],s=Object(n.get)(i);if(!Object(r.c)(o,i))if(t.defs[o]===t.defs[i])Object(n.addEquivalentProjections)([l,s]);else{const e=t(o,i);Object(n.addCoordinateTransforms)(l,s,e.forward,e.inverse)}}}}},function(t,e,i){"use strict";i.r(e),i.d(e,"toContext",function(){return s});var n=i(47),r=i(14),o=i(185);function s(t,e){const i=t.canvas,s=e||{},a=s.pixelRatio||n.DEVICE_PIXEL_RATIO,l=s.size;l&&(i.width=l[0]*a,i.height=l[1]*a,i.style.width=l[0]+"px",i.style.height=l[1]+"px");const u=[0,0,i.width,i.height],c=Object(r.h)(Object(r.c)(),a,a);return new o.default(t,a,u,c,0)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpenStreetLayerType=e.ArcGISLayerType=e.GoogleLayerType=e.TiandituType=e.OpenStreetLayer=e.OpenStreetMapSource=e.ArcGISLayer=e.ArcGISMapSource=e.GoogleLayer=e.GoogleMapSource=e.TianDiTu=e.TiandituMapSource=e.GaoDeLayer=e.GaodeMapSource=e.BaiDuLayer=e.BaiduMapSource=e.GdbpLayer=e.MapLayerTileSource=e.TileLayer_mapgis=e.TileLayerSource=e.CacheTileLayer=e.CacheTileLayerSource=e.MapDocTileLayer=e.MapDocTileSource=void 0;var n=i(507),r=i(381),o=i(535),s=i(536),a=i(537);e.MapDocTileSource=n.MapDocTileSource,e.MapDocTileLayer=n.MapDocTileLayer,e.CacheTileLayerSource=r.CacheTileLayerSource,e.CacheTileLayer=r.CacheTileLayer,e.TileLayerSource=o.TileLayerSource,e.TileLayer_mapgis=o.TileLayer_mapgis,e.MapLayerTileSource=s.MapLayerTileSource,e.GdbpLayer=s.GdbpLayer,e.BaiduMapSource=a.BaiduMapSource,e.BaiDuLayer=a.BaiDuLayer,e.GaodeMapSource=a.GaodeMapSource,e.GaoDeLayer=a.GaoDeLayer,e.TiandituMapSource=a.TiandituMapSource,e.TianDiTu=a.TianDiTu,e.GoogleMapSource=a.GoogleMapSource,e.GoogleLayer=a.GoogleLayer,e.ArcGISMapSource=a.ArcGISMapSource,e.ArcGISLayer=a.ArcGISLayer,e.OpenStreetMapSource=a.OpenStreetMapSource,e.OpenStreetLayer=a.OpenStreetLayer,e.TiandituType=a.TiandituType,e.GoogleLayerType=a.GoogleLayerType,e.ArcGISLayerType=a.ArcGISLayerType,e.OpenStreetLayerType=a.OpenStreetLayerType},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapDocTileLayer=e.MapDocTileSource=void 0;var n=f(i(75)),r=i(6),o=i(21),s=f(i(53)),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(2)),l=f(i(101)),u=i(1),c=i(11),h=i(95),d=f(i(150));function f(t){return t&&t.__esModule?t:{default:t}}var p=function(t){var e=void 0!==t?t:{};s.default.call(this,{attributions:e.attributions,logo:e.logo,opaque:e.opaque,state:void 0!==e.state?e.state:void 0,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,crossOrigin:void 0!==e.crossOrigin?e.crossOrigin:null}),this.ip=void 0!==e.ip?e.ip:"127.0.0.1",this.port=void 0!==e.port?e.port:"6163",this.name=void 0!==e.name?e.name:null,this.maxResolution=void 0!==e.maxResolution?e.maxResolution:null;var i=void 0!==e.projection?e.projection:null,n=[-180,-90,180,90];null!=i&&(n=i.getExtent()),this.extent=void 0!==e.extent?e.extent:n,this.maxZoom=void 0!==e.maxZoom?e.maxZoom:16,this.tileSize=void 0!==e.tileSize?e.tileSize:256,this.resolutions=this.getResolutions(),this.origin=void 0!==e.origin?e.origin:a.getTopLeft(this.extent),this.rlt=Math.random(),this.f=void 0!==e.f?e.f:"png",this.layers=void 0!=e.layers?e.layers:null,this.filters=void 0!=e.filters?e.filters:null,this.style=void 0!=e.style?e.style:null,this.proj=void 0!=e.proj?e.proj:null,this.guid=void 0!==e.guid?e.guid:(0,o.newGuid)(),this.cache=!1,this.tileGrid=new l.default({origin:this.origin,resolutions:this.resolutions,tileSize:this.tileSize}),this.tileUrlFunction=void 0!==e.tileUrlFunction?e.tileUrlFunction:this.tileUrlFunctionExtend,this.url_="http://"+this.ip+":"+this.port+"/igs/rest/mrms/docs/"+this.name};(0,u.inherits)(p,s.default),p.prototype.getResolutions=function(){if(null==this.maxResolution){var t=a.getWidth(this.extent),e=a.getHeight(this.extent);this.maxResolution=(t>=e?e:t)/this.tileSize}for(var i=new Array(this.maxZoom),n=0;n<this.maxZoom;++n)i[n]=this.maxResolution/Math.pow(2,n);return i},p.prototype.tileUrlFunctionExtend=function(t,e,i){if(null!=this.tileGrid){var r=this.tileGrid.getTileRangeForExtentAndZ(this.extent,t[0],r);if(!r.contains(t))return}null!=this.maxResolution&&(this.maxResolution,Math.pow(2,t[0]));var o={f:this.f,cache:!1,rlt:this.rlt,guid:this.guid};null!=this.style&&(o.style=(0,n.default)(this.style)),null!=this.proj&&(o.proj=(0,n.default)(this.proj)),null!=this.layers&&(o.layers=this.layers),null!=this.filters&&(o.filters=this.filters);var s={minX:t[1],maxX:t[1],minY:t[2],maxY:t[2]},a=this.tileGrid.getTileRangeExtent(t[0],s,null);return o.w=this.tileSize,o.h=this.tileSize,o.bbox=a.join(","),(0,h.appendParams)(this.url_,o)},e.MapDocTileSource=p,r.Zondy.Source.MapDocTileSource=p;var g=function(t,e,i){var n=void 0!==i?i:{};n.layerName=t,n.name=e,n.source=n.source?n.source:new p(n);var r=(0,c.assign)({},n);r.maxResolution=1/0,d.default.call(this,r),this.options={},(0,c.assign)(this.options,n)};(0,u.inherits)(g,d.default),g.prototype.refresh=function(){this.setSource(null);var t=this.options.source.guid;(0,c.assign)(this.options,{guid:t}),this.options.source=new p(this.options),this.setSource(this.options.source)},g.prototype.getStyle=function(){return void 0!==this.options.style?this.options.style:null},g.prototype.setStyle=function(t){void 0!==t&&null!==t&&(0,c.assign)(this.options,{style:t})},g.prototype.setLayerStatus=function(t,e){if(null!=t&&null!=e){var i=e+":"+t;(0,c.assign)(this.options,{layers:i})}},g.prototype.setFilters=function(t){null!=t&&""!=t.toString()&&(0,c.assign)(this.options,{filters:t})},e.MapDocTileLayer=g,r.Zondy.Map.MapDocTileLayer=g},function(t,e,i){var n=i(80),r=n.JSON||(n.JSON={stringify:JSON.stringify});t.exports=function(t){return r.stringify.apply(r,arguments)}},function(t,e,i){i(510);var n=i(80).Object;t.exports=function(t,e,i){return n.defineProperty(t,e,i)}},function(t,e,i){var n=i(135);n(n.S+n.F*!i(166),"Object",{defineProperty:i(164).f})},function(t,e,i){i(512);var n=i(80).Object;t.exports=function(t,e){return n.getOwnPropertyDescriptor(t,e)}},function(t,e,i){var n=i(181),r=i(296).f;i(298)("getOwnPropertyDescriptor",function(){return function(t,e){return r(n(t),e)}})},function(t,e,i){var n=i(218);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},function(t,e,i){t.exports={default:i(515),__esModule:!0}},function(t,e,i){i(366),t.exports=i(80).Object.getOwnPropertySymbols},function(t,e,i){var n=i(248)("meta"),r=i(165),o=i(182),s=i(164).f,a=0,l=Object.isExtensible||function(){return!0},u=!i(217)(function(){return l(Object.preventExtensions({}))}),c=function(t){s(t,n,{value:{i:"O"+ ++a,w:{}}})},h=t.exports={KEY:n,NEED:!1,fastKey:function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,n)){if(!l(t))return"F";if(!e)return"E";c(t)}return t[n].i},getWeak:function(t,e){if(!o(t,n)){if(!l(t))return!0;if(!e)return!1;c(t)}return t[n].w},onFreeze:function(t){return u&&h.NEED&&l(t)&&!o(t,n)&&c(t),t}}},function(t,e,i){var n=i(302),r=i(370),o=i(297);t.exports=function(t){var e=n(t),i=r.f;if(i)for(var s,a=i(t),l=o.f,u=0;a.length>u;)l.call(t,s=a[u++])&&e.push(s);return e}},function(t,e,i){var n=i(181),r=i(369),o=i(519);t.exports=function(t){return function(e,i,s){var a,l=n(e),u=r(l.length),c=o(s,u);if(t&&i!=i){for(;u>c;)if((a=l[c++])!=a)return!0}else for(;u>c;c++)if((t||c in l)&&l[c]===i)return t||c||0;return!t&&-1}}},function(t,e,i){var n=i(303),r=Math.max,o=Math.min;t.exports=function(t,e){return(t=n(t))<0?r(t+e,0):o(t,e)}},function(t,e,i){var n=i(218);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e,i){var n=i(164),r=i(146),o=i(302);t.exports=i(166)?Object.defineProperties:function(t,e){r(t);for(var i,s=o(e),a=s.length,l=0;a>l;)n.f(t,i=s[l++],e[i]);return t}},function(t,e,i){i(523);var n=i(80).Object;t.exports=function(t){return n.getOwnPropertyNames(t)}},function(t,e,i){i(298)("getOwnPropertyNames",function(){return i(372).f})},function(t,e,i){t.exports={default:i(525),__esModule:!0}},function(t,e,i){i(375),i(379),t.exports=i(300).f("iterator")},function(t,e,i){var n=i(303),r=i(295);t.exports=function(t){return function(e,i){var o,s,a=String(r(e)),l=n(i),u=a.length;return l<0||l>=u?t?"":void 0:(o=a.charCodeAt(l))<55296||o>56319||l+1===u||(s=a.charCodeAt(l+1))<56320||s>57343?t?a.charAt(l):o:t?a.slice(l,l+2):s-56320+(o-55296<<10)+65536}}},function(t,e,i){"use strict";var n=i(306),r=i(247),o=i(249),s={};i(180)(s,i(106)("iterator"),function(){return this}),t.exports=function(t,e,i){t.prototype=n(s,{next:r(1,i)}),o(t,e+" Iterator")}},function(t,e,i){"use strict";var n=i(529),r=i(530),o=i(219),s=i(181);t.exports=i(376)(Array,"Array",function(t,e){this._t=s(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,i=this._i++;return!t||i>=t.length?(this._t=void 0,r(1)):r(0,"keys"==e?i:"values"==e?t[i]:[i,t[i]])},"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,i){t.exports={default:i(532),__esModule:!0}},function(t,e,i){i(366),i(380),i(533),i(534),t.exports=i(80).Symbol},function(t,e,i){i(301)("asyncIterator")},function(t,e,i){i(301)("observable")},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TileLayer_mapgis=e.TileLayerSource=void 0;var n=i(6),r=(i(21),h(i(53))),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(2)),s=h(i(101)),a=i(1),l=i(11),u=h(i(150)),c=i(381);function h(t){return t&&t.__esModule?t:{default:t}}var d=function(t){var e=t||{};r.default.call(this,{attributions:e.attributions,logo:e.logo,opaque:e.opaque,projection:e.projection,state:void 0!==e.state?e.state:void 0,tilePixelRatio:e.tilePixelRatio,wrapX:void 0!==e.wrapX&&e.wrapX,crossOrigin:void 0!==e.crossOrigin?e.crossOrigin:null}),this.ip=void 0!==e.ip?e.ip:"127.0.0.1",this.port=void 0!==e.port?e.port:"6163",this.name=void 0!==e.name?e.name:null,this.maxResolution=void 0!==e.maxResolution?e.maxResolution:null;var i=void 0!==e.projection?e.projection:null,n=[-180,-90,180,90];null!=i&&(n=i.getExtent()),this.extent=void 0!==e.extent?e.extent:n,this.maxZoom=void 0!==e.maxZoom?e.maxZoom:16,this.tileOriginType=void 0!==e.tileOriginType?e.tileOriginType:"leftTop",this.tileSize=void 0!==e.tileSize?e.tileSize:256,this.resolutions=void 0!==e.resolutions?e.resolutions:this.getResolutions(),this.origin=void 0!==e.origin?e.origin:o.getTopLeft(this.extent),this.tileGrid=new s.default({origin:this.origin,resolutions:this.resolutions,tileSize:this.tileSize}),this.tileUrlFunction=void 0!=e.tileUrlFunction?e.tileUrlFunction:this.tileUrlFunctionExtend};(0,a.inherits)(d,r.default),d.prototype.getResolutions=function(){if(null==this.maxResolution){var t=o.getWidth(this.extent),e=o.getHeight(this.extent);this.maxResolution=(t>=e?e:t)/this.tileSize}for(var i=new Array(this.maxZoom),n=0;n<this.maxZoom;++n)i[n]=this.maxResolution/Math.pow(2,n);return i},d.prototype.tileUrlFunctionExtend=function(t,e,i){if(null!=this.tileGrid){var n=this.tileGrid.getTileRangeForExtentAndZ(this.extent,t[0],n);if(!n.contains(t))return}var r="http://"+this.ip+":"+this.port+"/igs/rest/mrms/tile/"+this.name+"/{z}/{y}/{x}?size="+this.tileSize,o=(this.extent[3]-this.extent[1])/2+this.extent[1];if("lefttop"==this.tileOriginType.toLowerCase()||this.origin[1]>=o)var s=t[0],a=t[1],l=-(t[2]+1);else{s=t[0],a=t[1],l=t[2];if(a>=Math.pow(2,s)||l>=Math.pow(2,s))return}return r.replace("{x}",a.toString()).replace("{y}",l.toString()).replace("{z}",s.toString())},e.TileLayerSource=d,n.Zondy.Source.TileLayerSource=d;var f=function(t,e,i){var r=i||{};(0,l.assign)(r,{layerName:t}),(0,l.assign)(r,{name:e});var o=(0,l.assign)({},r);(o.maxResolution=1/0,u.default.call(this,o),this.isAutoConfig=void 0===r.isAutoConfig||null==r.isAutoConfig||r.isAutoConfig,this.cache=void 0!==r.cache&&r.cache,this.source=void 0!==r.source?r.source:null,null==this.source)&&(this.isAutoConfig?new n.Zondy.Service.GetMapInfoService({ip:r.ip,port:r.port,mapName:e,layerObj:this,paraObj:r}).GetMapInfo(function(t){t=t.result;var e=(0,l.assign)({},this.paraObj);e.name=t.name,e.extent=[t.xMin,t.yMin,t.xMax,t.yMax],e.tileOriginType=t.originType,e.resolutions=t.resolutions,e.tileSize=t.tileWidth,e.origin=[t.originX,t.originY],e.maxZoom=t.endLevel,"dtile"==t.type.toLowerCase()&&(this.layerObj.cache=!0),t.xMax-t.xMin<=1e-6&&t.yMax-t.yMin<=1e-6?alert("获取数据范围失败！"):(this.layerObj.cache?this.layerObj.source=new c.CacheTileLayerSource(e):this.layerObj.source=new d(e),this.layerObj.setSource(this.layerObj.source))},function(){alert("请求失败！")},null):(this.cache?this.source=new c.CacheTileLayerSource(r):this.source=new d(r),this.setSource(this.source)));(0,l.assign)(this,r)};(0,a.inherits)(f,u.default),e.TileLayer_mapgis=f,n.Zondy.Map.TileLayer=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GdbpLayer=e.MapLayerTileSource=void 0;var n=f(i(75)),r=i(6),o=i(21),s=f(i(53)),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(2)),l=f(i(101)),u=i(1),c=i(11),h=i(95),d=f(i(150));function f(t){return t&&t.__esModule?t:{default:t}}var p=function(t){var e=void 0!==t?t:{};if(s.default.call(this,{attributions:e.attributions,logo:e.logo,opaque:e.opaque,state:void 0!==e.state?e.state:void 0,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,crossOrigin:void 0!==e.crossOrigin?e.crossOrigin:null}),this.ip=void 0!==e.ip?e.ip:"127.0.0.1",this.port=void 0!==e.port?e.port:"6163",this.gdbps=void 0!==e.gdbps?e.gdbps:null,null!=this.gdbps){this.maxResolution=void 0!==e.maxResolution?e.maxResolution:null;var i=void 0!==e.projection?e.projection:null,n=[-180,-90,180,90];null!=i&&(n=i.getExtent()),this.extent=void 0!==e.extent?e.extent:n,this.maxZoom=void 0!==e.maxZoom?e.maxZoom:16,this.tileSize=void 0!==e.tileSize?e.tileSize:256,this.resolutions=this.getResolutions(),this.origin=void 0!==e.origin?e.origin:a.getTopLeft(this.extent),this.rlt=Math.random(),this.f=void 0!==e.f?e.f:"png",this.filters=void 0!=e.filters?e.filters:null,this.style=void 0!=e.style?e.style:null,this.guid=void 0!==e.guid?e.guid:(0,o.newGuid)(),this.tileGrid=new l.default({origin:this.origin,resolutions:this.resolutions,tileSize:this.tileSize}),this.tileUrlFunction=void 0!==e.tileUrlFunction?e.tileUrlFunction:this.tileUrlFunctionExtend,this.url_="http://"+this.ip+":"+this.port+"/igs/rest/mrms/layers"}else alert("当前没有赋值要显示的矢量图层！")};(0,u.inherits)(p,s.default),p.prototype.getResolutions=function(){if(null==this.maxResolution){var t=a.getWidth(this.extent),e=a.getHeight(this.extent);this.maxResolution=(t>=e?e:t)/this.tileSize}for(var i=new Array(this.maxZoom),n=0;n<this.maxZoom;++n)i[n]=this.maxResolution/Math.pow(2,n);return i},p.prototype.tileUrlFunctionExtend=function(t,e,i){if(null!=this.tileGrid){var r=this.tileGrid.getTileRangeForExtentAndZ(this.extent,t[0],r);if(!r.contains(t))return}null!=this.maxResolution&&(this.maxResolution,Math.pow(2,t[0]));var o={f:this.f,rlt:this.rlt,guid:this.guid};null!=this.gdbps&&""!=this.gdbps&&(0,c.assign)(o,{gdbps:this.gdbps.join(",")}),null!=this.style&&(0,c.assign)(o,{style:(0,n.default)(this.style)}),null!=this.filters&&(0,c.assign)(o,{filters:this.filters});var s={minX:t[1],maxX:t[1],minY:t[2],maxY:t[2]},a=this.tileGrid.getTileRangeExtent(t[0],s,null);return o.w=this.tileSize,o.h=this.tileSize,o.bbox=a.join(","),(0,h.appendParams)(this.url_,o)},e.MapLayerTileSource=p,r.Zondy.Source.MapLayerTileSource=p;var g=function(t,e,i){var n=i||{};(0,c.assign)(n,{layerName:t}),(0,c.assign)(n,{gdbps:e}),(0,c.assign)(n,{source:n.source?n.source:new p(n)}),d.default.call(this,n),this.options={},(0,c.assign)(this.options,n)};(0,u.inherits)(g,d.default),g.prototype.refresh=function(){this.setSource(null);var t=this.options.source.guid;(0,c.assign)(this.options,{guid:t}),void 0!==this.style&&null!==this.style&&(0,c.assign)(this.options,{style:this.style}),void 0!==this.filters&&null!==this.filters&&(0,c.assign)(this.options,{filters:this.filters}),this.options.source=new p(this.options),this.setSource(this.options.source)},g.prototype.getStyle=function(){return void 0!==this.options.style?this.options.style:null},g.prototype.setStyle=function(t){void 0!==t&&null!==t&&(this.style=t,(0,c.assign)(this.options,{style:t}))},g.prototype.setFilters=function(t){null!=t&&""!=t.toString()&&(this.filters=t,(0,c.assign)(this.options,{filters:t}))},e.GdbpLayer=g,r.Zondy.Map.GdbpLayer=g},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpenStreetLayerType=e.ArcGISLayerType=e.GoogleLayerType=e.TiandituType=e.OpenStreetLayer=e.OpenStreetMapSource=e.ArcGISLayer=e.ArcGISMapSource=e.GoogleLayer=e.GoogleMapSource=e.TianDiTu=e.TiandituMapSource=e.GaoDeLayer=e.GaodeMapSource=e.BaiDuLayer=e.BaiduMapSource=void 0;var n=i(6),r=(i(21),h(i(53))),o=c(i(2)),s=h(i(101)),a=i(1),l=h(i(150)),u=c(i(9));function c(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function h(t){return t&&t.__esModule?t:{default:t}}var d=function(t){var e=void 0!==t?t:{};r.default.call(this,{attributions:e.attributions,logo:e.logo,opaque:e.opaque,projection:e.projection,state:void 0!==e.state?e.state:void 0,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,crossOrigin:void 0!==e.crossOrigin?e.crossOrigin:null}),this.maxResolution=void 0!==e.maxResolution?e.maxResolution:null;var i=void 0!==e.projection?e.projection:null;this.tileExtent=[-180,-90,180,90],this.tileExtent=null!=i?i.getExtent():[-20037508.34,-20037508.34,20037508.34,20037508.34],this.extent=void 0!==e.extent?e.extent:this.tileExtent,this.origin=void 0!==e.origin?e.origin:[0,0],this.maxZoom=void 0!==e.maxZoom?e.maxZoom:16,this.tileSize=void 0!==e.tileSize?e.tileSize:256,this.resolutions=this.getResolutions(),this.tileGrid=new s.default({origin:this.origin,resolutions:this.resolutions,tileSize:this.tileSize}),this.tileUrlFunction=void 0!==e.tileUrlFunction?e.tileUrlFunction:this.tileUrlFunctionExtend};(0,a.inherits)(d,r.default),d.prototype.getResolutions=function(){if(null==this.maxResolution){var t=o.getWidth(this.tileExtent),e=o.getHeight(this.tileExtent);this.maxResolution=(t>=e?e:t)/this.tileSize}for(var i=new Array(this.maxZoom),n=0;n<this.maxZoom;++n)i[n]=this.maxResolution/Math.pow(2,n);return i},d.prototype.tileUrlFunctionExtend=function(t,e,i){if(null!=this.tileGrid){var n=this.tileGrid.getTileRangeForExtentAndZ(this.extent,t[0],n);if(!n.contains(t))return}var r=t[0],o=t[1],s=t[2];return"http://online2.map.bdimg.com/tile/?qt=tile&x={x}&y={y}&z={z}&styles=pl&udt=20141219&scaler=1".replace("{z}",r.toString()).replace("{y}",s.toString()).replace("{x}",o.toString())},e.BaiduMapSource=d,n.Zondy.Source.BaiduMapSource=d;var f=function(t){var e=void 0!==t?t:{};l.default.call(this,e),void 0==e.source&&(this.source=new d(e),this.setSource(this.source))};(0,a.inherits)(f,l.default),e.BaiDuLayer=f,n.Zondy.Map.BaiDuLayer=f;var p=function(t){var e=void 0!==t?t:{};r.default.call(this,{attributions:e.attributions,logo:e.logo,opaque:e.opaque,projection:e.projection,state:void 0!==e.state?e.state:void 0,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,crossOrigin:void 0!==e.crossOrigin?e.crossOrigin:null}),this.maxResolution=null;var i=void 0!==e.projection?e.projection:null;this.tileExtent=[-180,-90,180,90],this.tileExtent=null!=i?i.getExtent():[-20037508.34,-20037508.34,20037508.34,20037508.34],this.extent=void 0!==e.extent?e.extent:this.tileExtent,this.origin=void 0!==e.origin?e.origin:o.getTopLeft(this.extent),this.maxZoom=void 0!==e.maxZoom&&e.maxZoom<=18?e.maxZoom:18,this.tileSize=void 0!==e.tileSize?e.tileSize:256,this.resolutions=this.getResolutions(),this.tileGrid=new s.default({origin:this.origin,resolutions:this.resolutions,tileSize:this.tileSize}),this.tileUrlFunction=void 0!==e.tileUrlFunction?e.tileUrlFunction:this.tileUrlFunctionExtend};(0,a.inherits)(p,r.default),p.prototype.getResolutions=function(){if(null==this.maxResolution){var t=o.getWidth(this.tileExtent),e=o.getHeight(this.tileExtent);this.maxResolution=(t>=e?e:t)/this.tileSize}for(var i=new Array(this.maxZoom),n=0;n<this.maxZoom;++n)i[n]=this.maxResolution/Math.pow(2,n);return i},p.prototype.tileUrlFunctionExtend=function(t,e,i){if(null!=this.tileGrid){var n=this.tileGrid.getTileRangeForExtentAndZ(this.extent,t[0],n);if(!n.contains(t))return}var r=["http://webrd01.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=7&z={z}&y={y}&x={x}","http://webrd02.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=7&z={z}&y={y}&x={x}","http://webrd03.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=7&z={z}&y={y}&x={x}","http://webrd04.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=7&z={z}&y={y}&x={x}"],o=t[0],s=t[1],a=-(t[2]+1);return r[Math.round(Math.random()*(r.length-1))].replace("{z}",o.toString()).replace("{y}",a.toString()).replace("{x}",s.toString())},e.GaodeMapSource=p,n.Zondy.Source.GaodeMapSource=p;var g=function(t){var e=void 0!==t?t:{};l.default.call(this,e),void 0==e.source&&(this.source=new p(e),this.setSource(this.source))};(0,a.inherits)(g,l.default),e.GaoDeLayer=g,n.Zondy.Map.GaoDeLayer=g;var y=function(t){var e=void 0!==t?t:{};r.default.call(this,{attributions:e.attributions,logo:e.logo,opaque:e.opaque,projection:e.projection,state:void 0!==e.state?e.state:void 0,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,crossOrigin:void 0!==e.crossOrigin?e.crossOrigin:null}),this.layerType=void 0!==e.layerType?e.layerType:n.Zondy.Enum.Map.TiandituType.VEC,this.ip=void 0!==e.ip?e.ip:null,this.port=void 0!==e.port?e.port:null,this.maxResolution=null;var i=void 0!==e.projection?e.projection:null;this.tileExtent=[-180,-90,180,90],null!=i&&(this.tileExtent=i.getExtent()),this.extent=void 0!==e.extent?e.extent:this.tileExtent,this.origin=void 0!==e.origin?e.origin:o.getBottomLeft(this.extent),this.maxZoom=void 0!==e.maxZoom&&e.maxZoom<=18?e.maxZoom:18,this.tileSize=void 0!==e.tileSize?e.tileSize:256,this.resolutions=this.getResolutions(),this.tileGrid=new s.default({origin:this.origin,resolutions:this.resolutions,tileSize:this.tileSize}),this.tileUrlFunction=void 0!==e.tileUrlFunction?e.tileUrlFunction:this.tileUrlFunctionExtend};(0,a.inherits)(y,r.default),y.prototype.getResolutions=function(){if(null==this.maxResolution){var t=o.getWidth(this.tileExtent),e=o.getHeight(this.tileExtent);this.maxResolution=(t<=e?e:t)/this.tileSize}for(var i=new Array(this.maxZoom),n=0;n<this.maxZoom;++n)i[n]=this.maxResolution/Math.pow(2,n);return i},y.prototype.tileUrlFunctionExtend=function(t,e,i){if(null!=this.tileGrid){var r=this.tileGrid.getTileRangeForExtentAndZ(this.extent,t[0],r);if(!r.contains(t))return}var o="";switch(this.layerType){case n.Zondy.Enum.Map.TiandituType.VEC:case n.Zondy.Enum.TiandituType.VEC:o="http://t"+Math.round(7*Math.random())+".tianditu.cn/vec_c/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=vec&STYLE=default&TILEMATRIXSET=c&FORMAT=tiles&TILECOL={x}&TILEROW={y}&TILEMATRIX={z}";break;case n.Zondy.Enum.Map.TiandituType.IMG:case n.Zondy.Enum.TiandituType.IMG:o="http://t"+Math.round(7*Math.random())+".tianditu.cn/img_c/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=img&STYLE=default&TILEMATRIXSET=c&FORMAT=tiles&TILECOL={x}&TILEROW={y}&TILEMATRIX={z}";break;case n.Zondy.Enum.Map.TiandituType.CVA:case n.Zondy.Enum.TiandituType.CVA:o="http://t"+Math.round(7*Math.random())+".tianditu.cn/cva_c/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=cva&STYLE=default&TILEMATRIXSET=c&FORMAT=tiles&TILECOL={x}&TILEROW={y}&TILEMATRIX={z}";break;case n.Zondy.Enum.Map.TiandituType.CIA:case n.Zondy.Enum.TiandituType.CIA:o="http://t"+Math.round(7*Math.random())+".tianditu.cn/cia_c/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=cia&STYLE=default&TILEMATRIXSET=c&FORMAT=tiles&TILECOL={x}&TILEROW={y}&TILEMATRIX={z}";break;case n.Zondy.Enum.Map.TiandituType.VEC_IGS:case n.Zondy.Enum.TiandituType.VEC_IGS:o="http://"+this.ip+":"+this.port+"/igs/rest/cts/tianditu/vector/{x}/{y}/{z}";break;case n.Zondy.Enum.Map.TiandituType.IMG_IGS:case n.Zondy.Enum.TiandituType.IMG_IGS:o="http://"+this.ip+":"+this.port+"/igs/rest/cts/tianditu/raster/{x}/{y}/{z}";break;case n.Zondy.Enum.Map.TiandituType.CVA_IGS:case n.Zondy.Enum.TiandituType.CVA_IGS:o="http://"+this.ip+":"+this.port+"/igs/rest/cts/tianditu/vectorAnno/{x}/{y}/{z}";break;case n.Zondy.Enum.Map.TiandituType.CIA_IGS:case n.Zondy.Enum.TiandituType.CIA_IGS:o="http://"+this.ip+":"+this.port+"/igs/rest/cts/tianditu/rasterAnno/{x}/{y}/{z}"}var s=t[0],a=t[1],l=parseInt(Math.pow(2,s-1)-1-t[2]);return o.replace("{x}",a.toString()).replace("{y}",l.toString()).replace("{z}",s.toString())},e.TiandituMapSource=y,n.Zondy.Source.TiandituMapSource=y;var m=function(t){var e=void 0!==t?t:{};l.default.call(this,e),void 0==e.source&&(this.source=new y(e),this.setSource(this.source))};(0,a.inherits)(m,l.default),e.TianDiTu=m,n.Zondy.Map.TianDiTu=m;var _=function(t){var e=void 0!==t?t:{};r.default.call(this,{attributions:e.attributions,logo:e.logo,opaque:e.opaque,projection:e.projection,state:void 0!==e.state?e.state:void 0,wrapX:e.wrapX,tilePixelRatio:e.tilePixelRatio,crossOrigin:void 0!==e.crossOrigin?e.crossOrigin:null}),this.ip=void 0!==e.ip?e.ip:null,this.port=void 0!==e.port?e.port:null,this.layerType=void 0!==e.layerType?e.layerType:n.Zondy.Enum.Map.GoogleLayerType.VEC,this.maxResolution=null;var i=void 0!==e.projection?e.projection:null;this.tileExtent=[-20037508.3427892,-20037508.3427892,20037508.3427892,20037508.3427892],null!=i&&(this.tileExtent=i.getExtent()),this.extent=void 0!==e.extent?e.extent:this.tileExtent,this.origin=void 0!==e.origin?e.origin:o.getTopLeft(this.extent),this.maxZoom=void 0!==e.maxZoom&&e.maxZoom<=24?e.maxZoom:24,this.tileSize=void 0!==e.tileSize?e.tileSize:256,this.resolutions=this.getResolutions(),this.baseURL=void 0!==e.baseURL?e.baseURL:this.getBaseURL(),this.tileGrid=new s.default({origin:this.origin,resolutions:this.resolutions,tileSize:this.tileSize}),this.tileUrlFunction=void 0!==e.tileUrlFunction?e.tileUrlFunction:this.tileUrlFunctionExtend};(0,a.inherits)(_,r.default),_.prototype.getBaseURL=function(){var t="";switch(this.layerType){case n.Zondy.Enum.Map.GoogleLayerType.VEC:case n.Zondy.Enum.GoogleLayerType.VEC:t="http://mt"+Math.round(3*Math.random())+".google.cn/vt/lyrs=m@207000000&hl=zh-CN&gl=CN&src=app&s=Galile";break;case n.Zondy.Enum.Map.GoogleLayerType.RASTER:case n.Zondy.Enum.GoogleLayerType.RASTER:t="http://mt"+Math.round(3*Math.random())+".google.cn/vt?lyrs=s@173&hl=zh-Hans-CN&gl=CN&token=63145";break;case n.Zondy.Enum.Map.GoogleLayerType.ROAD:case n.Zondy.Enum.GoogleLayerType.ROAD:t="http://mt"+Math.round(3*Math.random())+".google.cn/vt/imgtp=png32&lyrs=h@248000000,highlight:0x342eaef8dd85f26f:0x39c2c9ac6c582210@1%7Cstyle:maps&hl=zh-CN&gl=CN&src=app&s=Galileo";break;case n.Zondy.Enum.Map.GoogleLayerType.TERRAIN:case n.Zondy.Enum.GoogleLayerType.TERRAIN:t="http://mt"+Math.round(3*Math.random())+".google.cn/vt?lyrs=t&scale=1";break;case n.Zondy.Enum.Map.GoogleLayerType.VEC_IGS:case n.Zondy.Enum.GoogleLayerType.VEC_IGS:t="http://"+this.ip+":"+this.port+"/igs/rest/cts/google/vector/";break;case n.Zondy.Enum.Map.GoogleLayerType.RASTER_IGS:case n.Zondy.Enum.GoogleLayerType.RASTER_IGS:t="http://"+this.ip+":"+this.port+"/igs/rest/cts/google/raster/";break;case n.Zondy.Enum.Map.GoogleLayerType.ROAD_IGS:case n.Zondy.Enum.GoogleLayerType.ROAD_IGS:t="http://"+this.ip+":"+this.port+"/igs/rest/cts/google/road/";break;case n.Zondy.Enum.Map.GoogleLayerType.TERRAIN_IGS:case n.Zondy.Enum.GoogleLayerType.TERRAIN_IGS:t="http://"+this.ip+":"+this.port+"/igs/rest/cts/google/terrain/"}return t},_.prototype.getResolutions=function(){if(null==this.maxResolution){var t=o.getWidth(this.tileExtent),e=o.getHeight(this.tileExtent);this.maxResolution=(t<=e?e:t)/this.tileSize}for(var i=new Array(this.maxZoom),n=0;n<this.maxZoom;++n)i[n]=this.maxResolution/Math.pow(2,n);return i},_.prototype.tileUrlFunctionExtend=function(t,e,i){if(null!=this.tileGrid){var r=this.tileGrid.getTileRangeForExtentAndZ(this.extent,t[0],r);if(!r.contains(t))return}var o="";switch(this.layerType){case n.Zondy.Enum.Map.GoogleLayerType.VEC:case n.Zondy.Enum.GoogleLayerType.VEC:case n.Zondy.Enum.Map.GoogleLayerType.RASTER:case n.Zondy.Enum.GoogleLayerType.RASTER:case n.Zondy.Enum.Map.GoogleLayerType.ROAD:case n.Zondy.Enum.GoogleLayerType.ROAD:case n.Zondy.Enum.Map.GoogleLayerType.TERRAIN:case n.Zondy.Enum.GoogleLayerType.TERRAIN:o=this.baseURL+"&x={x}&y={y}&z={z}";break;case n.Zondy.Enum.Map.GoogleLayerType.VEC_IGS:case n.Zondy.Enum.GoogleLayerType.VEC_IGS:case n.Zondy.Enum.Map.GoogleLayerType.RASTER_IGS:case n.Zondy.Enum.GoogleLayerType.RASTER_IGS:case n.Zondy.Enum.Map.GoogleLayerType.ROAD_IGS:case n.Zondy.Enum.GoogleLayerType.ROAD_IGS:case n.Zondy.Enum.Map.GoogleLayerType.TERRAIN_IGS:case n.Zondy.Enum.GoogleLayerType.TERRAIN_IGS:o=this.baseURL+"{x}/{y}/{z}"}var s=t[0],a=t[1],l=-(t[2]+1);return o.replace("{x}",a.toString()).replace("{y}",l.toString()).replace("{z}",s.toString())},e.GoogleMapSource=_,n.Zondy.Source.GoogleMapSource=_;var v=function(t){var e=void 0!==t?t:{};l.default.call(this,e),void 0==e.source&&(this.source=new _(e),this.setSource(this.source))};(0,a.inherits)(v,l.default),e.GoogleLayer=v,n.Zondy.Map.GoogleLayer=v;var b=function(t){var e=void 0!==t?t:{};r.default.call(this,{attributions:e.attributions,logo:e.logo,opaque:e.opaque,projection:e.projection,state:void 0!==e.state?e.state:void 0,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,crossOrigin:void 0!==e.crossOrigin?e.crossOrigin:null}),this.layerType=void 0!==e.layerType?e.layerType:n.Zondy.Enum.Map.ArcGISLayerType.WorldTerrainBase,this.maxResolution=null;var i=void 0!==e.projection?e.projection:this.initProjection();this.tileExtent=[-20037508.3427892,-20037508.3427892,20037508.3427892,20037508.3427892],null!=i&&(this.tileExtent=i.getExtent()),this.extent=void 0!==e.extent?e.extent:this.tileExtent,this.origin=void 0!==e.origin?e.origin:o.getBottomLeft(this.extent),this.maxZoom=void 0!==e.maxZoom?e.maxZoom<=20?e.maxZoom:20:this.initMaxZoom(),this.tileSize=void 0!==e.tileSize?e.tileSize:this.initTileSize(),this.resolutions=this.getResolutions(),this.baseURL=void 0!==e.baseURL?e.baseURL:"http://services.arcgisonline.com/ArcGIS/rest/services/",this.tileGrid=new s.default({origin:this.origin,resolutions:this.resolutions,tileSize:this.tileSize}),this.tileUrlFunction=void 0!==e.tileUrlFunction?e.tileUrlFunction:this.tileUrlFunctionExtend};(0,a.inherits)(b,r.default),b.prototype.initTileSize=function(){var t=256;switch(this.layerType){case n.Zondy.Enum.Map.ArcGISLayerType.ImageryWorld2D:case n.Zondy.Enum.ArcGISLayerType.ImageryWorld2D:case n.Zondy.Enum.Map.ArcGISLayerType.StreetMapWorld2D:case n.Zondy.Enum.ArcGISLayerType.StreetMapWorld2D:case n.Zondy.Enum.Map.ArcGISLayerType.TopoUS2D:case n.Zondy.Enum.ArcGISLayerType.TopoUS2D:t=512;break;default:t=256}return t},b.prototype.initProjection=function(){var t=null;switch(this.layerType){case n.Zondy.Enum.Map.ArcGISLayerType.ImageryWorld2D:case n.Zondy.Enum.ArcGISLayerType.ImageryWorld2D:case n.Zondy.Enum.Map.ArcGISLayerType.StreetMapWorld2D:case n.Zondy.Enum.ArcGISLayerType.StreetMapWorld2D:case n.Zondy.Enum.Map.ArcGISLayerType.TopoUS2D:case n.Zondy.Enum.ArcGISLayerType.TopoUS2D:t=u.get("EPSG:4326");break;default:t=u.get("EPSG:3857")}return t},b.prototype.initMaxZoom=function(){var t=null;switch(this.layerType){case n.Zondy.Enum.Map.ArcGISLayerType.ImageryWorld2D:case n.Zondy.Enum.ArcGISLayerType.ImageryWorld2D:case n.Zondy.Enum.Map.ArcGISLayerType.StreetMapWorld2D:case n.Zondy.Enum.ArcGISLayerType.StreetMapWorld2D:case n.Zondy.Enum.Map.ArcGISLayerType.USATopoMaps:case n.Zondy.Enum.ArcGISLayerType.USATopoMaps:t=16;break;case n.Zondy.Enum.Map.ArcGISLayerType.TopoUS2D:case n.Zondy.Enum.ArcGISLayerType.TopoUS2D:case n.Zondy.Enum.Map.ArcGISLayerType.WorldShadedRelief:case n.Zondy.Enum.ArcGISLayerType.WorldShadedRelief:case n.Zondy.Enum.Map.ArcGISLayerType.WorldTerrainBase:case n.Zondy.Enum.ArcGISLayerType.WorldTerrainBase:t=14;break;case n.Zondy.Enum.Map.ArcGISLayerType.WorldPhysical:case n.Zondy.Enum.ArcGISLayerType.WorldPhysical:t=9;break;case n.Zondy.Enum.Map.ArcGISLayerType.WorldStreet:case n.Zondy.Enum.ArcGISLayerType.WorldStreet:case n.Zondy.Enum.Map.ArcGISLayerType.WorldTopo:case n.Zondy.Enum.ArcGISLayerType.WorldTopo:case n.Zondy.Enum.Map.ArcGISLayerType.WorldImagery:case n.Zondy.Enum.ArcGISLayerType.WorldImagery:t=20;break;case n.Zondy.Enum.Map.ArcGISLayerType.NatGeoWorldMap:case n.Zondy.Enum.ArcGISLayerType.NatGeoWorldMap:case n.Zondy.Enum.Map.ArcGISLayerType.OceanBasemap:case n.Zondy.Enum.ArcGISLayerType.OceanBasemap:t=17}return t},b.prototype.getResolutions=function(){if(null==this.maxResolution){var t=o.getWidth(this.tileExtent),e=o.getHeight(this.tileExtent);this.maxResolution=(t>=e?e:t)/this.tileSize}for(var i=new Array(this.maxZoom),n=0;n<this.maxZoom;++n)i[n]=this.maxResolution/Math.pow(2,n);return i},b.prototype.tileUrlFunctionExtend=function(t,e,i){if(null!=this.tileGrid){var n=this.tileGrid.getTileRangeForExtentAndZ(this.extent,t[0],n);if(!n.contains(t))return}var r=this.baseURL+this.layerType+"/MapServer/tile/{z}/{y}/{x}.jpg",o=t[0],s=t[1],a=Math.pow(2,o)-1-t[2];return r.replace("{x}",s.toString()).replace("{y}",a.toString()).replace("{z}",o.toString())},e.ArcGISMapSource=b,n.Zondy.Source.ArcGISMapSource=b;var S=function(t){var e=void 0!==t?t:{};l.default.call(this,e),void 0==e.source&&(this.source=new b(e),this.setSource(this.source))};(0,a.inherits)(S,l.default),e.ArcGISLayer=S,n.Zondy.Map.ArcGISLayer=S;var O=function(t){var e=void 0!==t?t:{};r.default.call(this,{attributions:e.attributions,logo:e.logo,opaque:e.opaque,projection:e.projection,state:void 0!==e.state?e.state:void 0,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,crossOrigin:void 0!==e.crossOrigin?e.crossOrigin:null}),this.layerType=void 0!==e.layerType?e.layerType:n.Zondy.Enum.Map.OpenStreetLayerType.OSM,this.maxResolution=null;var i=void 0!==e.projection?e.projection:u.get("EPSG:3857");this.tileExtent=[-20037508.3427892,-20037508.3427892,20037508.3427892,20037508.3427892],null!=i&&(this.tileExtent=i.getExtent()),this.extent=void 0!==e.extent?e.extent:this.tileExtent,this.origin=void 0!==e.origin?e.origin:o.getBottomLeft(this.extent),this.maxZoom=void 0!==e.maxZoom&&e.maxZoom<=20?e.maxZoom:20,this.tileSize=void 0!==e.tileSize?e.tileSize:256,this.resolutions=this.getResolutions(),this.baseURL=void 0!==e.baseURL?e.baseURL:this.GetUrlFormat(),this.tileGrid=new s.default({origin:this.origin,resolutions:this.resolutions,tileSize:this.tileSize}),this.tileUrlFunction=void 0!==e.tileUrlFunction?e.tileUrlFunction:this.tileUrlFunctionExtend};(0,a.inherits)(O,r.default),O.prototype.GetUrlFormat=function(){var t=null;switch(this.layerType){case n.Zondy.Enum.Map.OpenStreetLayerType.LandScape:case n.Zondy.Enum.OpenStreetLayerType.LandScape:t="http://"+"abc"[Math.round(2*Math.random())]+".tile3.opencyclemap.org/landscape/{z}/{x}/{y}.png";break;case n.Zondy.Enum.Map.OpenStreetLayerType.CYCLE:case n.Zondy.Enum.OpenStreetLayerType.CYCLE:t="http://"+"abc"[Math.round(2*Math.random())]+".tile.opencyclemap.org/cycle/{z}/{x}/{y}.png";break;case n.Zondy.Enum.Map.OpenStreetLayerType.CycleTransport:case n.Zondy.Enum.OpenStreetLayerType.CycleTransport:t="http://"+"abc"[Math.round(2*Math.random())]+".tile2.opencyclemap.org/transport/{z}/{x}/{y}.png";break;case n.Zondy.Enum.Map.OpenStreetLayerType.OSM:case n.Zondy.Enum.OpenStreetLayerType.OSM:t="http://"+"abc"[Math.round(2*Math.random())]+".tile.openstreetmap.org/{z}/{x}/{y}.png";break;case n.Zondy.Enum.Map.OpenStreetLayerType.OSM_HYB:case n.Zondy.Enum.OpenStreetLayerType.OSM_HYB:t="http://otile"+(Math.round(2*Math.random())+1)+".mqcdn.com/tiles/1.0.0/hyb/{z}/{x}/{y}.png";break;case n.Zondy.Enum.Map.OpenStreetLayerType.OSM_Quest:case n.Zondy.Enum.OpenStreetLayerType.OSM_Quest:t="http://otile"+(Math.round(2*Math.random())+1)+".mqcdn.com/tiles/1.0.0/osm/{z}/{x}/{y}.png";break;case n.Zondy.Enum.Map.OpenStreetLayerType.OSM_Q_SAT:case n.Zondy.Enum.OpenStreetLayerType.OSM_Q_SAT:t="http://otile"+(Math.round(2*Math.random())+1)+".mqcdn.com/tiles/1.0.0/sat/{z}/{x}/{y}.jpg"}return t},O.prototype.getResolutions=function(){if(null==this.maxResolution){var t=o.getWidth(this.tileExtent),e=o.getHeight(this.tileExtent);this.maxResolution=(t>=e?e:t)/this.tileSize}for(var i=new Array(this.maxZoom),n=0;n<this.maxZoom;++n)i[n]=this.maxResolution/Math.pow(2,n);return i},O.prototype.tileUrlFunctionExtend=function(t,e,i){if(null!=this.tileGrid){var n=this.tileGrid.getTileRangeForExtentAndZ(this.extent,t[0],n);if(!n.contains(t))return}var r=t[0],o=t[1],s=Math.pow(2,r)-1-t[2];return this.baseURL.replace("{x}",o.toString()).replace("{y}",s.toString()).replace("{z}",r.toString())},e.OpenStreetMapSource=O,n.Zondy.Source.OpenStreetMapSource=O;var C=function(t){var e=void 0!==t?t:{};l.default.call(this,e),void 0==e.source&&(this.source=new O(e),this.setSource(this.source))};(0,a.inherits)(C,l.default),e.OpenStreetLayer=C,n.Zondy.Map.OpenStreetLayer=C;var x={VEC:"vec",IMG:"img",CVA:"cva",CIA:"cia",VEC_IGS:"vec_igs",IMG_IGS:"img_igs",CVA_IGS:"cva_igs",CIA_IGS:"cia_igs"};e.TiandituType=x,n.Zondy.Enum.Map.TiandituType=n.Zondy.Enum.TiandituType=x;var T={VEC:"vector",RASTER:"raster",ROAD:"road",TERRAIN:"terrain",VEC_IGS:"vector_igs",RASTER_IGS:"raster_igs",ROAD_IGS:"road_igs",TERRAIN_IGS:"terrain_igs"};e.GoogleLayerType=T,n.Zondy.Enum.Map.GoogleLayerType=n.Zondy.Enum.GoogleLayerType=T;var E={ImageryWorld2D:"ESRI_Imagery_World_2D",StreetMapWorld2D:"ESRI_StreetMap_World_2D",TopoUS2D:"NGS_Topo_US_2D",WorldImagery:"World_Imagery",WorldPhysical:"World_Physical_Map",WorldShadedRelief:"World_Shaded_Relief",WorldStreet:"World_Street_Map",WorldTerrainBase:"World_Terrain_Base",WorldTopo:"World_Topo_Map",NatGeoWorldMap:"NatGeo_World_Map",OceanBasemap:"Ocean_Basemap",USATopoMaps:"USA_Topo_Maps"};e.ArcGISLayerType=E,n.Zondy.Enum.Map.ArcGISLayerType=n.Zondy.Enum.ArcGISLayerType=E;var P={LandScape:"landscape",CYCLE:"cycle",CycleTransport:"transport",OSM:"openstreetmap",OSM_HYB:"hyb",OSM_Quest:"mapquest",OSM_Q_SAT:"OSM_sat"};e.OpenStreetLayerType=P,n.Zondy.Enum.Map.OpenStreetLayerType=n.Zondy.Enum.OpenStreetLayerType=P},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MilstdParams=e.EnumMilstdType=e.MilStdDragPan=e.MilStdModifyTool=e.MilStdDrawTool=e.MilStd=e.Drag=e.ZDOverviewMap=e.PolygonJSON=void 0;var n=i(539),r=i(540),o=i(541),s=i(542);e.PolygonJSON=n.PolygonJSON,e.ZDOverviewMap=r.ZDOverviewMap,e.Drag=o.Drag,e.MilStd=s.MilStd,e.MilStdDrawTool=s.MilStdDrawTool,e.MilStdModifyTool=s.MilStdModifyTool,e.MilStdDragPan=s.MilStdDragPan,e.EnumMilstdType=s.EnumMilstdType,e.MilstdParams=s.MilstdParams},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PolygonJSON=void 0;var n=i(6),r=i(11),o=d(i(38)),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(2)),a=d(i(25)),l=d(i(36)),u=d(i(19)),c=d(i(58)),h=d(i(71));function d(t){return t&&t.__esModule?t:{default:t}}var f=function(t){var e=void 0!==t?t:{};(0,r.assign)(this,e)};f.prototype.read=function(t,e){if(void 0===t)return null;var i=null;return null!==(i="string"==typeof t?JSON.parse(t):t)?this.parseVectors(i):void 0},f.prototype.parseVectors=function(t){if(void 0===t||void 0===t.SFEleArray)return null;if(0==t.SFEleArray.length)return null;for(var e=new Array,i=0,n=t.SFEleArray.length;i<n;i++){var r=t.SFEleArray[i],s=this.parseAttribute(t.AttStruct,r.AttValue),a=this.parseGeometry(r.fGeom,r.ftype),l=new o.default;l.setGeometry(a),l.setId(r.FID.toString()),l.setProperties(s),e[i]=l}return e},f.prototype.parseBound=function(t){return void 0===t?null:s.createOrUpdate(t.xmin,t.ymin,t.xmax,t.ymax)},f.prototype.parseAttribute=function(t,e){if(void 0===t||void 0===e)return null;if(t.FldName.length!=e.length)return null;for(var i=new a.default,n=0,r=t.FldName.length;n<r;n++)i.set(t.FldName[n],e[n]);return i},f.prototype.parseGeometry=function(t,e){var i=null;switch("Unknow"==e&&(e=t.PntGeom.length>0?1:t.LinGeom.length>0?2:3),e){case 1:i=this.parseGPoint(t.PntGeom);break;case 2:i=this.parseGLine(t.LinGeom);break;case 3:i=this.parseGRegion(t.RegGeom)}return i},f.prototype.parseGRegion=function(t){if(void 0===t||void 0===t.length||0==t.length)return null;for(var e=0,i=new Array,n=0;n<t.length;n++){var r=t[n];if(void 0===r||void 0===r.Rings)return null;for(var o=0,s=r.Rings.length;o<s;o++){for(var a=r.Rings[o],c=new Array,h=a.Arcs[0].Dots,d=0,f=h.length;d<f;d++)c[d]=[h[d].x,h[d].y];i[e++]=c}}return new l.default(i,u.default.XY)},f.prototype.parseGLine=function(t){if(void 0===t||void 0===t.length||0==t.length)return null;var e=[];if(!t)return null;if(0===t.length)return null;for(var i=0,n=t.length;i<n;i++){for(var r=new Array,o=t[i].Line.Arcs[0].Dots,s=0,a=o.length;s<a;s++)r[s]=[o[s].x,o[s].y];e[i]=r}return new c.default(e)},f.prototype.parseGPoint=function(t){if(void 0===t||void 0===t.length||0==t.length)return null;for(var e=[],i=null,n=0,r=t.length;n<r;n++)i=t[n].Dot,e[n]=[i.x,i.y];return new h.default(e,u.default.XY)},e.PolygonJSON=f,n.Zondy.Format.PolygonJSON=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ZDOverviewMap=void 0;var n=i(6),r=i(1),o=u(i(245)),s=u(i(200)),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(4)),l=u(i(10));function u(t){return t&&t.__esModule?t:{default:t}}var c=function(t){var e=void 0!==t?t:{};o.default.call(this,e),this.cursor_="move",this.previousCursor_=void 0,this.mouseDown=!1,this.positionBox=null,this.preMousePos=null,this.startPos=null,this.endPos=null,this.SetBoxStyle("#999999",.5),this.collapsed_||this.ConnectEventHandle()};(0,r.inherits)(c,o.default),c.prototype.InitView=function(t,e){this.ovmap_.setView(new s.default({center:t,projection:e}))},c.prototype.ConnectEventHandle=function(){var t=this.boxOverlay_.getElement();void 0!==t&&null!=t&&(a.listen(t,l.default.MOUSEMOVE,this.handleMouseEnter,this),a.listen(t,l.default.MOUSEOUT,this.handleMouseLeave,this))},c.prototype.SetBoxStyle=function(t,e){if(void 0!==this.boxOverlay_&&null!=this.boxOverlay_){var i=this.boxOverlay_.getElement();i.style.backgroundColor=t,i.style.opacity=e}},c.prototype.DisConnectEventHandle=function(){var t=this.boxOverlay_.getElement();void 0!==t&&null!=t&&(a.unlisten(t,l.default.MOUSEMOVE,this.handleMouseEnter,this),a.unlisten(t,l.default.MOUSEOUT,this.handleMouseLeave,this))},c.prototype.ConvertPixelToNumber=function(t){if(void 0!==t&&null!=t){var e=t.indexOf("px");if(e>0)return Number(t.slice(0,e))}return Number(t)},c.prototype.handleMouseDown=function(t){this.mouseDown=!0;var e=this.ConvertPixelToNumber(t.target.parentNode.style.bottom),i=this.ConvertPixelToNumber(t.target.parentNode.style.left);this.positionBox=[e,i],this.preMousePos=[t.clientX,t.clientY],this.startPos=[t.clientX,t.clientY]},c.prototype.handleMouseMove=function(t){if(void 0!==this.positionBox&&null!=this.positionBox&&1==this.mouseDown){var e=t.clientX-this.preMousePos[0],i=t.clientY-this.preMousePos[1];this.positionBox[0]-=i,this.positionBox[1]+=e,t.target.parentNode.style.bottom=this.positionBox[0]+"px",t.target.parentNode.style.left=this.positionBox[1]+"px",this.preMousePos=[t.clientX,t.clientY]}},c.prototype.handleMouseUp=function(t){if(null!=this.startPos){this.mouseDown=!1,this.endPos=[t.clientX,t.clientY];var e=this.getMap().getView(),i=this.ovmap_.getView(),n=(this.endPos[0]-this.startPos[0])*i.getResolution(),r=(this.endPos[1]-this.startPos[1])*i.getResolution(),o=e.getCenter(),s=[o[0]+n,o[1]-r];e.setCenter(s),this.startPos=null,this.endPos=null}},c.prototype.handleMouseEnter=function(t){t.target.style.cursor!=this.cursor_&&(this.previousCursor_=t.target.style.cursor,t.target.style.cursor=this.cursor_);var e=this.boxOverlay_.getElement();void 0!==e&&null!=e&&(a.listen(e,l.default.MOUSEDOWN,this.handleMouseDown,this),a.listen(e,l.default.MOUSEMOVE,this.handleMouseMove,this),a.listen(e,l.default.MOUSEUP,this.handleMouseUp,this))},c.prototype.handleMouseLeave=function(t){this.handleMouseUp(t),void 0!==this.previousCursor_&&(t.target.style.cursor=this.previousCursor_,this.previousCursor_=void 0);var e=this.boxOverlay_.getElement();void 0!==e&&null!=e&&(a.unlisten(e,l.default.MOUSEDOWN,this.handleMouseDown,this),a.unlisten(e,l.default.MOUSEMOVE,this.handleMouseMove,this),a.unlisten(e,l.default.MOUSEUP,this.handleMouseUp,this))},c.prototype.handleToggle_=function(){o.default.prototype.handleToggle_.apply(this),this.collapsed_?this.DisConnectEventHandle():this.ConnectEventHandle()},e.ZDOverviewMap=c,n.Zondy.Control.OverviewMap=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Drag=void 0;var n,r=i(6),o=i(1),s=i(28),a=(n=s)&&n.__esModule?n:{default:n};var l=function t(e){a.default.call(this,{handleDownEvent:t.prototype.handleDownEvent,handleDragEvent:t.prototype.handleDragEvent,handleMoveEvent:t.prototype.handleMoveEvent,handleUpEvent:t.prototype.handleUpEvent}),this.coordinate_=null,this.cursor_="pointer",this.feature_=null,this.previousCursor_=void 0};(0,o.inherits)(l,a.default),l.prototype.handleDownEvent=function(t){var e=t.map.forEachFeatureAtPixel(t.pixel,function(t,e){return t});return e&&(this.coordinate_=t.coordinate,this.feature_=e),!!e},l.prototype.handleDragEvent=function(t){t.map.forEachFeatureAtPixel(t.pixel,function(t,e){return t});var e=t.coordinate[0]-this.coordinate_[0],i=t.coordinate[1]-this.coordinate_[1];this.feature_.getGeometry().translate(e,i),this.coordinate_[0]=t.coordinate[0],this.coordinate_[1]=t.coordinate[1]},l.prototype.handleMoveEvent=function(t){if(this.cursor_){var e=t.map.forEachFeatureAtPixel(t.pixel,function(t,e){return t}),i=t.map.getTargetElement();e?i.style.cursor!=this.cursor_&&(this.previousCursor_=i.style.cursor,i.style.cursor=this.cursor_):void 0!==this.previousCursor_&&(i.style.cursor=this.previousCursor_,this.previousCursor_=void 0)}},l.prototype.handleUpEvent=function(t){return this.coordinate_=null,this.feature_=null,!1},e.Drag=l,r.Zondy.GeomInteraction.Drag=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MilStdDragPan=e.MilStdModifyTool=e.MilStdDrawTool=e.MilstdParams=e.EnumMilstdType=e.MilStd=void 0;i(6),i(21);var n=i(1),r=R(i(58)),o=R(i(36)),s=R(i(41)),a=R(i(131)),l=R(i(29)),u=R(i(91)),c=R(i(96)),h=i(62),d=R(h),f=R(i(90)),p=R(i(83)),g=R(i(137)),y=R(i(199)),m=R(i(10)),_=L(i(4)),v=R(i(28)),b=R(i(123)),S=R(i(42)),O=R(i(52)),C=R(i(38)),x=R(i(39)),T=L(i(2)),E=R(i(78)),P=R(i(32)),j=R(i(34)),w=L(i(27)),I=R(i(5));function L(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function R(t){return t&&t.__esModule?t:{default:t}}var A=window.MilStd=window.MilStd||{};A.commonFun=A.commonFun||{},A.Arrow=A.Arrow||{},A.Flag=A.Flag||{},A.Compass=A.Compass||{},A.Bezier=A.Bezier||{},A.event=A.event||{},A.tool=A.tool||{},A.enum={ZERO_TOLERANCE:1e-4};var M={ArrowCross:"ArrowCross",CircleClosedangle:"CircleClosedangle",Closedangle:"Closedangle",DoubleClosedangle:"DoubleClosedangle",Fourstar:"Fourstar",Rhombus:"Rhombus",SameDirectionClosedangle:"SameDirectionClosedangle",Triangle:"Triangle",Vane:"Vane",SimpleArrow:"SimpleArrow",DoubleArrow:"DoubleArrow",StraightArrow:"StraightArrow",SingleLineArrow:"SingleLineArrow",TriangleFlag:"TriangleFlag",RectFlag:"RectFlag",CurveFlag:"CurveFlag",Bezier:"Bezier",BezierLine:"BezierLine",AssemblyArea:"AssemblyArea"},F=function(t){t&&(this.headHeightFactor=void 0!==t.headHeightFactor&&null!=t.headHeightFactor?t.headHeightFactor:.2,this.headWidthFactor=void 0!==t.headWidthFactor&&null!=t.headWidthFactor?t.headWidthFactor:.5,this.neckHeightFactor=void 0!==t.neckHeightFactor&&null!=t.neckHeightFactor?t.neckHeightFactor:.8,this.neckWidthFactor=void 0!==t.neckWidthFactor&&null!=t.neckWidthFactor?t.neckWidthFactor:.2,this.tailWidthFactor=void 0!==t.tailWidthFactor&&null!=t.tailWidthFactor?t.tailWidthFactor:.1,this.hasSwallowTail=void 0===t.hasSwallowTail||null==t.hasSwallowTail||t.hasSwallowTail,this.swallowTailFactor=void 0!==t.swallowTailFactor&&null!=t.swallowTailFactor?t.swallowTailFactor:.5,this.curveFitMethod=void 0!==t.curveFitMethod&&null!=t.curveFitMethod?t.curveFitMethod:"useBSplieFit",this.maxVertices=void 0!==t.maxVertices&&null!=t.maxVertices?t.maxVertices:20)};A.commonFun.CalLengthOfTwoPoints=function(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))},A.commonFun.wholeDistance=function(t){var e=0;if(null!=t&&t.length>1)for(var i=0;i<t.length-1;i++)e+=A.commonFun.CalLengthOfTwoPoints(t[i],t[i+1]);return e},A.commonFun.getAzimuthAngle=function(t,e){var i=0,n=Math.asin(Math.abs(e[1]-t[1])/A.commonFun.CalLengthOfTwoPoints(t,e));return e[1]>=t[1]&&e[0]>=t[0]?n+Math.PI:e[1]>=t[1]&&e[0]<t[0]?2*Math.PI-n:e[1]<t[1]&&e[0]<t[0]?n:(e[1]<t[1]&&e[0]>=t[0]&&(i=Math.PI-n),i)},A.commonFun.getThirdPoint=function(t,e,i,n,r){var o=A.commonFun.getAzimuthAngle(t,e),s=0;s="left"==r.toLowerCase()?o+i:o-i;var a=n*Math.cos(s),l=n*Math.sin(s);return[e[0]+a,e[1]+l]},A.commonFun.getAngleOfThreePoints=function(t,e,i){var n=A.commonFun.getAzimuthAngle(e,t)-A.commonFun.getAzimuthAngle(e,i);return n<0&&(n+=2*Math.PI),n},A.commonFun.getFactorial=function(t){for(var e=1,i=1;i<=t;i++)e*=i;return e},A.commonFun.getBinomialFactor=function(t,e){return A.commonFun.getFactorial(t)/(A.commonFun.getFactorial(e)*A.commonFun.getFactorial(t-e))},A.commonFun.getQuadricBSplineFactor=function(t,e){return 0==t?Math.pow(e-1,2)/2:1==t?(-2*Math.pow(e,2)+2*e+1)/2:2==t?Math.pow(e,2)/2:0},A.commonFun.getBSplineFFactor=function(t,e,i){if(2==e)return A.commonFun.getQuadricBSplineFactor(t,i);for(var n=0,r=A.commonFun.getFactorial(e),o=0;o<=e-t;o++){n+=(o%2==0?1:-1)*A.commonFun.getBinomialFactor(e+1,o)*Math.pow(i+e-t-o,e)}return n/r},A.commonFun.getSide=function(t,e,i){var n=(e[1]-t[1])*(i[0]-t[0])-(i[1]-t[1])*(e[0]-t[0]);return n>0?"left":n<0?"right":null},A.commonFun.getMidPoint=function(t,e){var i=new Array,n=(t[0]+e[0])/2,r=(t[1]+e[1])/2;return i.push(n),i.push(r),i},A.commonFun.getBezierPoints=function(t){if(t.length<=2)return t;for(var e=new Array,i=t.length-1,n=0;n<=1;n+=.01){for(var r=0,o=0,s=0;s<=i;s++){var a=A.commonFun.getBinomialFactor(i,s),l=Math.pow(n,s),u=Math.pow(1-n,i-s);r+=a*l*u*t[s][0],o+=a*l*u*t[s][1]}e.push([r,o])}return e.push(t[i]),e},A.commonFun.getBSplinePoints=function(t,e){if(t.length<=2||t.length<=e)return t;var i=new Array,n=t.length-e-1;i.push(t[0]);for(var r=0;r<=n;r++)for(var o=0;o<=1;o+=.05){for(var s=0,a=0,l=0;l<=e;l++){var u=A.commonFun.getBSplineFFactor(l,e,o);s+=u*t[r+l][0],a+=u*t[r+l][1]}i.push([s,a])}return i.push(t[t.length-1]),i},A.commonFun.geomEquals=function(t,e){var i=!1;return null!=t&&(i=e[0]==t[0]&&e[1]==t[1]||null==e[0]&&null==e[1]&&null==t[0]&&null==t[1]),i},A.commonFun.CreateNewVertices=function(t){if(null!=t&&t.length>=2){var e=Math.max(t[0][0],t[1][0]),i=[Math.min(t[0][0],t[1][0]),Math.max(t[0][1],t[1][1])],n=[e,Math.min(t[0][1],t[1][1])];t.splice(0,1,i),t.splice(1,1,n)}},A.Arrow.getArrowFromVert=function(t,e,i){var n=null;if(null!=t&&t.length>=2){var s=null;switch(e){case"SimpleArrow":case"StraightArrow":s=A.Arrow.getSimpleArrowPnts(t,i.hasSwallowTail,i.swallowTailFactor,i.curveFitMethod,i.headHeightFactor,i.headWidthFactor,i.neckHeightFactor,i.neckWidthFactor,i.tailWidthFactor),n=new o.default([s]);break;case"DoubleArrow":s=A.Arrow.getDoubleArrowPnts(t,i.headHeightFactor,i.headWidthFactor,i.neckHeightFactor,i.neckWidthFactor),n=new o.default([s]);break;case"SingleLineArrow":s=A.Arrow.getSLArrowPnts(t,i.headHeightFactor,i.headWidthFactor),n=new r.default(s)}}return n},A.Arrow.getSimpleArrowPnts=function(t,e,i,n,r,o,s,a,l){if(t.length<2)return t;var u=A.Arrow.getArrowHeadPoints(t,r,o,s,a),c=u[0],h=u[4],d=A.Arrow.getArrowBodyPoints(t,c,h,l,1,1),f=A.Arrow.getArrowTailPoints(t,l,e,i),p=f[0],g=(f.length,f[1]),y=3==f.length?f[2]:f[1],m=d.length,_=d.slice(0,Math.ceil(m/2)),v=d.slice(Math.ceil(m/2));_.push(c),v.push(h),_.reverse(),_.push(p),v.reverse(),v.push(y);var b=null,S=null;"useBezierFit"==n?(b=A.commonFun.getBezierPoints(_),S=A.commonFun.getBezierPoints(v)):(b=A.commonFun.getBSplinePoints(_,2),S=A.commonFun.getBSplinePoints(v,2)),null!=g&&(b.push(g),S.push(g)),b.reverse();for(var O=0;O<u.length;O++)b.push(u[O]);for(var C=0;C<S.length;C++)b.push(S[C]);return b},A.Arrow.getSLArrowPnts=function(t,e,i){if(t.length<2)return null;var n=A.Arrow.getArrowHeadPointsForSLine(t,e,i),r=A.commonFun.getBezierPoints(t),o=new Array;return o.push(n),o.push(r),o},A.Arrow.isCounterClockwise=function(t){if(t.length<3)return 0;var e=t[0],i=t[1],n=t[2];return(i[0]-e[0])*(n[1]-i[1])-(i[1]-e[1])*(n[0]-i[0])},A.Arrow.getDoubleArrowPnts=function(t,e,i,n,r){var o=null,s=t.length;if(s>=3&&!A.commonFun.geomEquals(t[s-1],t[s-2])){var a=t[0],l=t[1],u=t[2],c=null;3==s?(c=A.Arrow.getTempPnt4(a,l,u),t.push(c)):c=t[3],A.Arrow.isCounterClockwise(t)<0&&(a=t[1],l=t[0],u=t[3],c=t[2]);var h=A.commonFun.getMidPoint(a,l),d=A.Arrow.getArrowPoints(a,h,c,"left",e,i,n,r),f=A.Arrow.getArrowPoints(h,l,u,"right",e,i,n,r),p=d.length,g=Math.ceil((p-5)/2);o=d.slice(0,g);var y=d.slice(g,g+5),m=d.slice(g+5),_=f.slice(0,g),v=f.slice(g,g+5),b=f.slice(g+5);o=A.commonFun.getBezierPoints(o);for(var S=0;S<_.length;S++)m.push(_[S]);var O=A.commonFun.getBezierPoints(m);b=A.commonFun.getBezierPoints(b);for(S=0;S<y.length;S++)o.push(y[S]);for(S=0;S<O.length;S++)o.push(O[S]);for(S=0;S<v.length;S++)o.push(v[S]);for(S=0;S<b.length;S++)o.push(b[S]);o.length>0&&(A.commonFun.geomEquals(o[0],o[o.length-1])||o.push(o[0]))}return o},A.Arrow.getArrowHeadPoints=function(t,e,i,n,r){if(t.length<2)return t;var o=A.commonFun.wholeDistance(t)*e,s=o*i,a=o*r,l=t.length,u=[t[l-1][0],t[l-1][1]],c=A.commonFun.CalLengthOfTwoPoints(u,t[l-2]),h=(o=o>c?c:o)*n,d=A.commonFun.getThirdPoint(t[l-2],u,0,o,"left"),f=A.commonFun.getThirdPoint(t[l-2],u,0,h,"left"),p=A.commonFun.getThirdPoint(u,d,1.5*Math.PI,s,"right"),g=A.commonFun.getThirdPoint(u,f,1.5*Math.PI,a,"right"),y=A.commonFun.getThirdPoint(u,d,1.5*Math.PI,s,"left"),m=A.commonFun.getThirdPoint(u,f,1.5*Math.PI,a,"left"),_=new Array;return _.push(g),_.push(p),_.push(u),_.push(y),_.push(m),_},A.Arrow.getArrowHeadPointsForSLine=function(t,e,i){if(t.length<2)return t;var n=A.commonFun.CalLengthOfTwoPoints(t[0],t[1])*e,r=n*i,o=t.length,s=t[o-1],a=A.commonFun.CalLengthOfTwoPoints(s,t[o-2]);n=n>a?a:n;var l=A.commonFun.getThirdPoint(t[o-2],s,0,n,"left"),u=A.commonFun.getThirdPoint(s,l,1.5*Math.PI,r,"right"),c=A.commonFun.getThirdPoint(s,l,1.5*Math.PI,r,"left"),h=new Array;return h.push(u),h.push(s),h.push(c),h},A.Arrow.getArrowBodyPoints=function(t,e,i,n,r,o){if(t.length<2)return t;for(var s=A.commonFun.wholeDistance(t),a=A.commonFun.wholeDistance(t)*n,l=a-A.commonFun.CalLengthOfTwoPoints(e,i)/2,u=0,c=new Array,h=new Array,d=1;d<t.length-1;d++){var f=A.commonFun.getAngleOfThreePoints(t[d-1],t[d],t[d+1])/2,p=(a-(u+=A.commonFun.CalLengthOfTwoPoints(t[d-1],t[d]))/s*l)/Math.sin(f);c.push(A.commonFun.getThirdPoint(t[d-1],t[d],f,p*r,"right")),h.push(A.commonFun.getThirdPoint(t[d-1],t[d],Math.PI-f,p*o,"left"))}for(var g=0;g<h.length;g++)c.push(h[g]);return c},A.Arrow.getArrowTailPoints=function(t,e,i,n){if(t.length<2)return t;var r=A.commonFun.wholeDistance(t)*e,o=new Array,s=A.commonFun.getThirdPoint(t[1],t[0],1.5*Math.PI,r,"right"),a=A.commonFun.getThirdPoint(t[1],t[0],1.5*Math.PI,r,"left");if(i){var l=r*n,u=A.commonFun.getThirdPoint(t[1],t[0],0,l,"left");return o.push(s),o.push(u),o.push(a),o}return o.push(s),o.push(a),o},A.Arrow.getArrowPoints=function(t,e,i,n,r,o,s,a){var l=A.commonFun.getMidPoint(t,e),u=A.commonFun.CalLengthOfTwoPoints(l,i),c=A.commonFun.getThirdPoint(i,l,0,.3*u,"left"),h=A.commonFun.getThirdPoint(i,l,0,.5*u,"left"),d=A.commonFun.getThirdPoint(i,l,0,.7*u,"left");c=A.commonFun.getThirdPoint(l,c,1.5*Math.PI,u/4,n),h=A.commonFun.getThirdPoint(l,h,1.5*Math.PI,u/4,n),d=A.commonFun.getThirdPoint(l,d,1.5*Math.PI,u/4,n);var f=new Array;f.push(l),f.push(c),f.push(h),f.push(d),f.push(i);var p=A.Arrow.getArrowHeadPoints(f,r,o,s,a),g=p[0],y=p[4],m=A.commonFun.CalLengthOfTwoPoints(t,e)/A.commonFun.wholeDistance(f)/2,_="left"==n?1:.01,v="left"==n?.01:1,b=A.Arrow.getArrowBodyPoints(f,g,y,m,_,v),S=b.length,O=b.slice(0,Math.ceil(S/2)),C=b.slice(Math.ceil(S/2));O.push(g),C.push(y),O.reverse(),O.push(t),C.reverse(),C.push(e),O.reverse();for(var x=0;x<p.length;x++)O.push(p[x]);for(x=0;x<C.length;x++)O.push(C[x]);return O},A.Arrow.getTempPnt4=function(t,e,i){var n=null,r=A.commonFun.getMidPoint(t,e),o=A.commonFun.CalLengthOfTwoPoints(r,i),s=A.commonFun.getAngleOfThreePoints(t,r,i),a=0,l=0;return s<Math.PI/2?(a=o*Math.sin(s),l=o*Math.cos(s),n=A.commonFun.getThirdPoint(t,r,1.5*Math.PI,a,"left"),A.commonFun.getThirdPoint(r,n,1.5*Math.PI,l,"right")):s>=Math.PI/2&&s<Math.PI?(a=o*Math.sin(Math.PI-s),l=o*Math.cos(Math.PI-s),n=A.commonFun.getThirdPoint(t,r,1.5*Math.PI,a,"left"),A.commonFun.getThirdPoint(r,n,1.5*Math.PI,l,"left")):s>=Math.PI&&s<1.5*Math.PI?(a=o*Math.sin(s-Math.PI),l=o*Math.cos(s-Math.PI),n=A.commonFun.getThirdPoint(t,r,1.5*Math.PI,a,"right"),A.commonFun.getThirdPoint(r,n,1.5*Math.PI,l,"right")):(a=o*Math.sin(2*Math.PI-s),l=o*Math.cos(2*Math.PI-s),n=A.commonFun.getThirdPoint(t,r,1.5*Math.PI,a,"right"),A.commonFun.getThirdPoint(r,n,1.5*Math.PI,l,"left"))},A.Flag.getFlagFromVert=function(t,e){var i=new Array;A.commonFun.CreateNewVertices(t);var n=new Array;if(null!=t&&t.length>=2){n.push(t[0]),n.push(t[1]);var r=null;switch(e){case"TriangleFlag":r=this.GetTriangleFlagDots(n);break;case"RectFlag":r=this.GetRectFlagDots(n);break;case"CurveFlag":r=this.GetCurveFlagDots(n)}var a=new o.default([r[0]]),l=new s.default(r[1]);i.push(a),i.push(l)}return i},A.Flag.GetTriangleFlagDots=function(t){A.commonFun.CreateNewVertices(t);var e=new Array,i=t.length;if(i>=2&&!A.commonFun.geomEquals(t[i-1],t[i-2])){var n=t[0],r=t[1],o=[n[0],r[1]],s=A.commonFun.getMidPoint(n,o),a=[r[0],s[1]],l=new Array;l.push(s),l.push(n),l.push(a),l.push(s);var u=new Array;u.push(o),u.push(s),e.push(l),e.push(u)}return e},A.Flag.GetRectFlagDots=function(t){A.commonFun.CreateNewVertices(t);var e=new Array,i=t.length;if(i>=2&&!A.commonFun.geomEquals(t[i-1],t[i-2])){var n=t[0],r=t[1],o=[n[0],r[1]],s=A.commonFun.getMidPoint(n,o),a=[r[0],s[1]],l=[r[0],n[1]],u=new Array;u.push(s),u.push(n),u.push(l),u.push(a),u.push(s);var c=new Array;c.push(o),c.push(s),e.push(u),e.push(c)}return e},A.Flag.GetCurveFlagDots=function(t){A.commonFun.CreateNewVertices(t);var e=new Array,i=t.length;if(i>=2&&!A.commonFun.geomEquals(t[i-1],t[i-2])){var n=t[0],r=t[1],o=[n[0],r[1]],s=A.commonFun.getMidPoint(n,o),a=[r[0],s[1]],l=[r[0],n[1]],u=A.commonFun.CalLengthOfTwoPoints(n,s)/2,c=A.commonFun.CalLengthOfTwoPoints(n,l),h=A.commonFun.getThirdPoint(l,n,0,c/4,"left"),d=A.commonFun.getThirdPoint(n,h,1.5*Math.PI,u,"right");h=A.commonFun.getThirdPoint(l,n,0,c/4*3,"left");var f=A.commonFun.getThirdPoint(n,h,1.5*Math.PI,u,"left");h=A.commonFun.getThirdPoint(a,s,0,c/4,"left");var p=A.commonFun.getThirdPoint(s,h,1.5*Math.PI,u,"right");h=A.commonFun.getThirdPoint(a,s,0,c/4*3,"left");var g=A.commonFun.getThirdPoint(s,h,1.5*Math.PI,u,"left"),y=new Array;y.push(n),y.push(d),y.push(f),y.push(l);var m=A.commonFun.getBezierPoints(y),_=new Array;_.push(s),_.push(p),_.push(g),_.push(a);var v=A.commonFun.getBezierPoints(_),b=new Array;b.push(s);for(var S=0;S<m.length;S++)b.push(m[S]);v.reverse();for(S=0;S<v.length;S++)b.push(v[S]);var O=new Array;O.push(o),O.push(s),e.push(b),e.push(O)}return e},A.Compass.getCompassFromVert=function(t,e){A.commonFun.CreateNewVertices(t);var i=new Array;if(null!=t&&t.length>=2){i.push(t[0]),i.push(t[1]);var n=null;switch(e){case"ArrowCross":n=this.GetArrowCrossDots(i);break;case"CircleClosedangle":n=this.GetCircleClosedangleDots(i);break;case"Closedangle":n=this.GetClosedangleDots(i);break;case"DoubleClosedangle":n=this.GetDoubleClosedangleDots(i);break;case"Fourstar":n=this.GetFourstarDots(i);break;case"Rhombus":n=this.GetRhombusDots(i);break;case"SameDirectionClosedangle":n=this.GetSameDirectionClosedangleDots(i);break;case"Triangle":n=this.GetTriangleDots(i);break;case"Vane":n=this.GetVaneDots(i)}var s=new Array,a=new Array;if(null!=n&&n.length>0){for(var l=0;l<n.length;l++)switch(e){case"ArrowCross":case"DoubleClosedangle":case"CircleClosedangle":case"Rhombus":case"SameDirectionClosedangle":l==n.length-1?a.push(n[l][0]):s.push(n[l][0]);break;case"Closedangle":case"Fourstar":l%2==0?s.push(n[l][0]):a.push(n[l][0]);break;case"Triangle":1==l||4==l?a.push(n[l][0]):s.push(n[l][0]);break;case"Vane":l==n.length-1?s.push(n[l][0]):a.push(n[l][0])}var u=new Array,c=new r.default(s);u.push(c);var h=new o.default(a);u.push(h)}return u}},A.Compass.GetArrowCrossDots=function(t){if(null==t||t.length<2)return null;var e=Math.abs(t[1][0]-t[0][0]),i=Math.abs(t[1][1]-t[0][1]),n=new Array,r=[t[0][0]+e/32*15,t[0][1]-i/16*1];n.push(r);var o=[t[0][0]+e/32*15,t[0][1]];n.push(o);var s=[t[0][0]+e/32*17,t[0][1]-i/16*1];n.push(s);var a=[t[0][0]+e/32*17,t[0][1]];n.push(a);var l=new Array,u=[t[0][0],t[0][1]-i/32*15];l.push(u);var c=[t[0][0]+e/128*3,t[0][1]-i/32*17];l.push(c);var h=[t[0][0]+e/128*6,t[0][1]-i/32*15];l.push(h);var d=[t[0][0]+e/128*9,t[0][1]-i/32*17];l.push(d);var f=[t[0][0]+e/128*12,t[0][1]-i/32*15];l.push(f);var p=new Array,g=[t[0][0]+e,t[0][1]-i/32*15],y=[t[0][0]+e/16*15,t[0][1]-i/32*15],m=[t[0][0]+e/16*15,t[0][1]-i/32*17],_=[t[0][0]+e,t[0][1]-i/32*17],v=[t[0][0]+e/16*15,t[0][1]-i/2],b=[t[0][0]+e/50*48,t[0][1]-i/2];p.push(g),p.push(y),p.push(v),p.push(b),p.push(v),p.push(m),p.push(_);var S=[t[0][0]+e/2,t[1][1]+i/32],O=[t[0][0]+e/2+e/32,t[1][1]+i/32+i/64],C=[t[0][0]+e/2+e/32-2*e/32,t[1][1]+i/32+i/64],x=[t[0][0]+e/2,t[1][1]+i/32+i/32],T=[t[0][0]+e/2,t[1][1]+i/32-i/32],E=[t[0][0]+e/2+e/32,t[1][1]+i/32+i/64-i/32],P=[t[0][0]+e/2+e/32-e/16,t[1][1]+i/32+i/64-i/32],j=new Array;j.push(O),j.push(x),j.push(C),j.push(S),j.push(E),j.push(T),j.push(P);var w=A.commonFun.getBSplinePoints(j,2),I=new Array,L=[t[0][0]+e/2,t[0][1]-i/16*2];I.push(L);var R=[t[0][0]+e/32*18,t[0][1]-i/16*4];I.push(R);var M=[t[0][0]+e/32*17,t[0][1]-i/16*4];I.push(M);var F=[t[0][0]+e/32*17,t[0][1]-i/32*15];I.push(F);var k=[t[0][0]+e/16*12,t[0][1]-i/32*15];I.push(k);var N=[t[0][0]+e/16*12,t[0][1]-i/32*14];I.push(N);var D=[t[0][0]+e/16*14,t[0][1]-i/2];I.push(D);var G=[t[0][0]+e/16*12,t[0][1]-i/32*18];I.push(G);var B=[t[0][0]+e/16*12,t[0][1]-i/32*17];I.push(B);var U=[t[0][0]+e/32*17,t[0][1]-i/32*17];I.push(U);var V=[t[0][0]+e/32*17,t[0][1]-i/16*12];I.push(V);var Z=[t[0][0]+e/32*18,t[0][1]-i/16*12];I.push(Z);var W=[t[0][0]+e/2,t[0][1]-i/16*14];I.push(W);var H=[t[0][0]+e/32*14,t[0][1]-i/16*12];I.push(H);var z=[t[0][0]+e/32*15,t[0][1]-i/16*12];I.push(z);var Y=[t[0][0]+e/32*15,t[0][1]-i/32*17];I.push(Y);var X=[t[0][0]+e/16*4,t[0][1]-i/32*17];I.push(X);var q=[t[0][0]+e/16*4,t[0][1]-i/32*18];I.push(q);var K=[t[0][0]+e/16*2,t[0][1]-i/2];I.push(K);var J=[t[0][0]+e/16*4,t[0][1]-i/32*14];I.push(J);var Q=[t[0][0]+e/16*4,t[0][1]-i/32*15];I.push(Q);var $=[t[0][0]+e/32*15,t[0][1]-i/32*15];I.push($);var tt=[t[0][0]+e/32*15,t[0][1]-i/16*4];I.push(tt);var et=[t[0][0]+e/32*14,t[0][1]-i/16*4];I.push(et),I.push(L);for(var it=new Array,nt=0;nt<5;nt++)it[nt]=new Array;return it[0].push(n),it[1].push(l),it[2].push(p),it[3].push(w),it[4].push(I),it},A.Compass.GetCircleClosedangleDots=function(t){if(null==t||t.length<2)return null;var e,i,n,r,o=Math.abs(t[1][0]-t[0][0]),s=Math.abs(t[1][1]-t[0][1]),a=new Array;e=[t[0][0]+o/32*15,t[0][1]-s/16],a.push(e),i=[t[0][0]+o/32*15,t[0][1]],a.push(i),n=[t[0][0]+o/32*17,t[0][1]-s/16],a.push(n),r=[t[0][0]+o/32*17,t[0][1]],a.push(r);var l,u,c,h,d,f=new Array;l=[t[0][0]+o/2,t[0][1]-s/16*2],f.push(l),u=[t[0][0]+o/64*15,t[0][1]-s],f.push(u),c=[t[0][0]+o/32*15,t[0][1]-s/32*28],f.push(c),h=[t[0][0]+o/32*17,t[0][1]-s/32*28],f.push(h),d=[t[0][0]+o/64*49,t[0][1]-s],f.push(d),f.push(l);var p,g,y=new Array,m=t[0][0]+o/2-s/20*9,_=t[0][0]+o/2+s/20*9;p=[m,t[0][1]-s/16*9],g=[_,t[0][1]-s/16*9],y.push(p),y.push(g);var v,b,S,O=0,C=0,x=0,T=0,E=new Array,P=0;for(v=[t[0][0]+o/2,t[0][1]-s/16*9],b=[t[0][0]+o/2,t[0][1]-s/5*1],S=A.commonFun.CalLengthOfTwoPoints(v,b);P<500;)O=Math.sin(2*Math.PI*P/500),C=Math.cos(2*Math.PI*P/500),x=v[0]+S*O,T=v[1]+S*C,E.push([x,T]),++P;E.push(E[0]);for(var j=new Array,w=0;w<4;w++)j[w]=new Array;return j[0].push(a),j[1].push(y),j[2].push(E),j[3].push(f),j},A.Compass.GetClosedangleDots=function(t){if(null==t||t.length<2)return null;var e=new Array,i=Math.abs(t[1][0]-t[0][0]),n=Math.abs(t[1][1]-t[0][1]),r=[t[0][0]+i/2,t[0][1]];e.push(r);var o=[t[0][0]+i,t[0][1]-n];e.push(o);var s=[t[0][0]+i/2,t[0][1]-n/4*3];e.push(s);var a=new Array,l=[t[0][0]+i/2,t[0][1]];a.push(l);var u=[t[0][0],t[0][1]-n];a.push(u);var c=[t[0][0]+i/2,t[0][1]-n/4*3];a.push(c);for(var h=new Array,d=0;d<2;d++)h[d]=new Array;return h[0].push(e),h[1].push(a),h},A.Compass.GetDoubleClosedangleDots=function(t){if(null==t||t.length<2)return null;var e,i,n,r,o=Math.abs(t[1][0]-t[0][0]),s=Math.abs(t[1][1]-t[0][1]),a=new Array;e=[t[0][0]+o/32*15,t[0][1]-s/16],a.push(e),i=[t[0][0]+o/32*15,t[0][1]],a.push(i),n=[t[0][0]+o/32*17,t[0][1]-s/16],a.push(n),r=[t[0][0]+o/32*17,t[0][1]],a.push(r);var l,u,c,h,d,f=new Array;l=[t[0][0]+o/2,t[0][1]-s/16*2],f.push(l),u=[t[0][0],t[0][1]-s/10*7],f.push(u),c=[t[0][0]+o/32*13,t[0][1]-s/32*18],f.push(c),h=[t[0][0]+o/32*19,t[0][1]-s/32*18],f.push(h),d=[t[0][0]+o,t[0][1]-s/10*7],f.push(d),f.push(l);var p,g,y,m,_=new Array;p=[t[0][0],t[0][1]-s/10*3],_.push(p),g=[t[0][0]+o/2,t[0][1]-s/8*7],_.push(g),y=[t[0][0]+o,t[0][1]-s/10*3],_.push(y),m=[t[0][0]+o/2,t[0][1]-s/10*7],_.push(m),_.push(p);var v=[t[0][0]+o/2,t[1][1]+s/32],b=[t[0][0]+o/2+o/32,t[1][1]+s/32+s/64],S=[t[0][0]+o/2+o/32-2*o/32,t[1][1]+s/32+s/64],O=[t[0][0]+o/2,t[1][1]+s/32+s/32],C=[t[0][0]+o/2,t[1][1]+s/32-s/32],x=[t[0][0]+o/2+o/32,t[1][1]+s/32+s/64-s/32],T=[t[0][0]+o/2+o/32-o/16,t[1][1]+s/32+s/64-s/32],E=new Array;E.push(b),E.push(O),E.push(S),E.push(v),E.push(x),E.push(C),E.push(T);for(var P=A.commonFun.getBSplinePoints(E,2),j=new Array,w=0;w<4;w++)j[w]=new Array;return j[0].push(a),j[1].push(P),j[2].push(_),j[3].push(f),j},A.Compass.GetFourstarDots=function(t){if(null==t||t.length<2)return null;var e,i,n,r,o=Math.abs(t[1][0]-t[0][0]),s=Math.abs(t[1][1]-t[0][1]),a=new Array;e=[t[0][0]+o/2,t[0][1]],a.push(e),i=[t[0][0]+o/2,t[0][1]-s],a.push(i),n=[t[0][0]+o/8*3,t[0][1]-s/8*5],a.push(n),r=[t[0][0]+o/8*5,t[0][1]-s/8*3],a.push(r),a.push(e);var l,u,c=new Array;l=[t[0][0],t[0][1]-s/2],c.push(l),u=[t[0][0]+o,t[0][1]-s/2],c.push(u),c.push(r),c.push(n),c.push(l);var h,d,f=new Array;f.push(l),f.push(u),h=[t[0][0]+o/8*5,t[0][1]-s/8*5],f.push(h),d=[t[0][0]+o/8*3,t[0][1]-s/8*3],f.push(d),f.push(l);var p=new Array;p.push(e),p.push(i),p.push(h),p.push(d);for(var g=new Array,y=0;y<4;y++)g[y]=new Array;return g[0].push(a),g[1].push(c),g[2].push(f),g[3].push(p),g},A.Compass.GetRhombusDots=function(t){if(null==t||t.length<2)return null;var e,i,n,r,o,s,a,l,u=Math.abs(t[1][0]-t[0][0]),c=Math.abs(t[1][1]-t[0][1]),h=new Array,d=new Array,f=new Array;e=[t[0][0]+u/2,t[0][1]-c/16*2],h.push(e),i=[t[0][0],t[0][1]-c/16*9],h.push(i),n=[t[0][0]+u,t[0][1]-c/16*9],h.push(n),h.push(e),r=[t[0][0]+u/2,t[1][1]],d.push(n),d.push(r),d.push(i),d.push(n),o=[t[0][0]+u/32*13,t[0][1]-c/16*1],f.push(o),s=[t[0][0]+u/32*13,t[0][1]],f.push(s),a=[t[0][0]+u/32*19,t[0][1]-c/16*1],f.push(a),l=[t[0][0]+u/32*19,t[0][1]],f.push(l);for(var p=new Array,g=0;g<3;g++)p[g]=new Array;return p[0].push(h),p[1].push(f),p[2].push(d),p},A.Compass.GetSameDirectionClosedangleDots=function(t){if(null==t||t.length<2)return null;var e=Math.abs(t[1][0]-t[0][0]),i=Math.abs(t[1][1]-t[0][1]),n=[t[0][0]+e/32*15,t[0][1]],r=[t[0][0],t[0][1]-i/16*13],o=[t[0][0]+e/32*15,t[0][1]-i/16*11],s=[t[0][0]+e/16*15,t[0][1]-i/16*13],a=new Array;a.push(n),a.push(r),a.push(o),a.push(s),a.push(n);var l=[t[0][0]+e/32*17,t[0][1]-i/32*1],u=[t[0][0]+e/16,t[0][1]-i/32*27],c=[t[0][0]+e/32*17,t[0][1]-i/16*12],h=[t[0][0]+e,t[0][1]-i/32*27],d=new Array;d.push(l),d.push(u),d.push(c),d.push(h);var f=[t[0][0]+e/32*14,t[0][1]-i],p=[t[0][0]+e/32*14,t[0][1]-i/16*15],g=[t[0][0]+e/32*18,t[0][1]-i],y=[t[0][0]+e/32*18,t[0][1]-i/16*15],m=new Array;m.push(f),m.push(p),m.push(g),m.push(y);for(var _=new Array,v=0;v<3;v++)_[v]=new Array;return _[0].push(a),_[1].push(m),_[2].push(d),_},A.Compass.GetTriangleDots=function(t){if(null==t||t.length<2)return null;var e=Math.abs(t[1][0]-t[0][0]),i=Math.abs(t[1][1]-t[0][1]),n=new Array,r=[t[0][0]+e/32*13,t[0][1]-i/16*1];n.push(r);var o=[t[0][0]+e/32*13,t[0][1]];n.push(o);var s=[t[0][0]+e/32*19,t[0][1]-i/16*1];n.push(s);var a=[t[0][0]+e/32*19,t[0][1]];n.push(a);var l=new Array,u=[t[0][0]+e/2,t[0][1]-i/16*2];l.push(u);var c=[t[0][0],t[0][1]-i/32*17];l.push(c);var h=[t[0][0]+e/2,t[0][1]-i/32*17];l.push(h);var d=new Array,f=[t[0][0]+e/2,t[0][1]-i/16*2];d.push(f);var p=[t[0][0]+e,t[0][1]-i/32*17];d.push(p);var g=[t[0][0]+e/2,t[0][1]-i/32*17];d.push(g);var y=new Array,m=[t[0][0],t[0][1]-i/32*18];y.push(m);var _=[t[0][0]+e,t[0][1]-i/32*18];y.push(_);var v=new Array,b=[t[0][0]+e/2,t[0][1]-i];v.push(b);var S=[t[0][0],t[0][1]-i/32*19];v.push(S);var O=[t[0][0]+e/2,t[0][1]-i/32*19];v.push(O);var C=[t[0][0]+e,t[0][1]-i/32*19],x=new Array;x.push(O),x.push(C),x.push(b);for(var T=new Array,E=0;E<6;E++)T[E]=new Array;return T[0].push(n),T[1].push(l),T[2].push(d),T[3].push(y),T[4].push(v),T[5].push(x),T},A.Compass.GetVaneDots=function(t){if(null==t||t.length<2)return null;var e,i,n,r,o=Math.abs(t[1][0]-t[0][0]),s=Math.abs(t[1][1]-t[0][1]),a=new Array,l=new Array;e=[t[0][0]+o/2,t[0][1]],i=[t[0][0],t[0][1]-s/8],n=[t[0][0]+o/2,t[0][1]-s/8*2],r=[t[0][0]+o,t[0][1]-s/8],a.push(e),a.push(i),a.push(n),l.push(e),l.push(n),l.push(r),l.push(e);var u=[t[0][0]+o/14*6,t[0][1]-s/8*2],c=[t[0][0]+o/14*6,t[0][1]-s],h=[t[0][0]+o/28*13,t[0][1]-s/35*34],d=[t[0][0]+o/28*15,t[0][1]-s/35*34],f=[t[0][0]+o/14*8,t[0][1]-s],p=[t[0][0]+o/14*8,t[0][1]-s/8*2],g=new Array;g.push(u),g.push(c),g.push(h),g.push(d),g.push(f),g.push(p);var y=new Array,m=[t[0][0]+o/14*6,t[0][1]-s/36*21];y.push(m);var _=[t[0][0]+o/14*2,t[0][1]-s/36*22];y.push(_);var v=[t[0][0]+o/14*2,t[0][1]-s/36*23];y.push(v);var b=[t[0][0]+o/14*6,t[0][1]-s/36*22];y.push(b);var S=new Array,O=[t[0][0]+o/14*6,t[0][1]-s/36*23],C=[t[0][0]+o/14*2,t[0][1]-s/36*24],x=[t[0][0]+o/14*2,t[0][1]-s/36*25],T=[t[0][0]+o/14*6,t[0][1]-s/36*24];S.push(O),S.push(C),S.push(x),S.push(T);var E=new Array,P=[t[0][0]+o/14*6,t[0][1]-s/36*25],j=[t[0][0]+o/14*2,t[0][1]-s/36*26],w=[t[0][0]+o/14*2,t[0][1]-s/36*27],I=[t[0][0]+o/14*6,t[0][1]-s/36*26];E.push(P),E.push(j),E.push(w),E.push(I);var L=new Array,R=[t[0][0]+o/14*6,t[0][1]-s/36*27],A=[t[0][0]+o/14*2,t[0][1]-s/36*28],M=[t[0][0]+o/14*2,t[0][1]-s/36*29],F=[t[0][0]+o/14*6,t[0][1]-s/36*28];L.push(R),L.push(A),L.push(M),L.push(F);var k=new Array,N=[t[0][0]+o/14*8,t[0][1]-s/36*21],D=[t[0][0]+o/14*12,t[0][1]-s/36*22],G=[t[0][0]+o/14*12,t[0][1]-s/36*23],B=[t[0][0]+o/14*8,t[0][1]-s/36*22];k.push(N),k.push(D),k.push(G),k.push(B);var U=new Array,V=[t[0][0]+o/14*8,t[0][1]-s/36*23],Z=[t[0][0]+o/14*12,t[0][1]-s/36*24],W=[t[0][0]+o/14*12,t[0][1]-s/36*25],H=[t[0][0]+o/14*8,t[0][1]-s/36*24];U.push(V),U.push(Z),U.push(W),U.push(H);var z=new Array,Y=[t[0][0]+o/14*8,t[0][1]-s/36*25],X=[t[0][0]+o/14*12,t[0][1]-s/36*26],q=[t[0][0]+o/14*12,t[0][1]-s/36*27],K=[t[0][0]+o/14*8,t[0][1]-s/36*26];z.push(Y),z.push(X),z.push(q),z.push(K);var J=new Array,Q=[t[0][0]+o/14*8,t[0][1]-s/36*27],$=[t[0][0]+o/14*12,t[0][1]-s/36*28],tt=[t[0][0]+o/14*12,t[0][1]-s/36*29],et=[t[0][0]+o/14*8,t[0][1]-s/36*28];J.push(Q),J.push($),J.push(tt),J.push(et);for(var it=new Array,nt=0;nt<11;nt++)it[nt]=new Array;return it[0].push(a),it[1].push(g),it[2].push(y),it[3].push(S),it[4].push(E),it[5].push(L),it[6].push(k),it[7].push(U),it[8].push(z),it[9].push(J),it[10].push(l),it},A.Bezier.getBezierFromVert=function(t,e){var i=null;if("BezierLine"==e){var n=A.commonFun.getBSplinePoints(t,2);i=new s.default(n)}else if("Bezier"==e){t.push(t[0]);n=A.commonFun.getBSplinePoints(t,2);t.pop(t[t.length-1]),i=new o.default([n])}else if("AssemblyArea"==e){n=A.Bezier.GetAssemblyAreaDots(t);i=new o.default([n])}return i},A.Bezier.GetAssemblyAreaDots=function(t){var e=null,i=null,n=0,r=null,o=null,s=null,a=null,l=null,u=null,c=null,h=null,d=null,f=null,p=t.length;return p>=2&&t[p-1]!=t[p-2]&&(e=t[0],i=t[1],n=A.commonFun.CalLengthOfTwoPoints(e,i),r=A.commonFun.getMidPoint(e,i),o=A.commonFun.getThirdPoint(e,r,1.5*Math.PI,n/4.5,"right"),s=A.commonFun.getThirdPoint(e,i,0,.8*n,"left"),a=A.commonFun.getThirdPoint(e,s,1.5*Math.PI,n/5,"left"),l=A.commonFun.getThirdPoint(e,i,0,.45*n,"left"),u=A.commonFun.getThirdPoint(e,l,1.5*Math.PI,n/10,"left"),c=A.commonFun.getThirdPoint(e,i,0,.15*n,"left"),h=A.commonFun.getThirdPoint(e,c,1.5*Math.PI,n/7,"left"),d=new Array,(f=new Array).push(e,o,i,h,u,a),d=A.Bezier.getAdvancedBezierPoints(f)),d},A.Bezier.getAdvancedBezierPoints=function(t){var e=0,i=0,n=0,r=0,o=0,s=(t=t.slice()).length;t.push(t[0]);for(var a=new Array,l=0;l<s;)a.push(A.commonFun.getMidPoint(t[l],t[l+1])),++l;a.push(a[0]),t.push(t[1]);var u=new Array;for(l=0;l<s;)e=A.commonFun.CalLengthOfTwoPoints(t[l],t[l+1]),i=A.commonFun.CalLengthOfTwoPoints(t[l+1],t[l+2]),n=A.commonFun.CalLengthOfTwoPoints(a[l],a[l+1])*e/(e+i),u.push(A.commonFun.getThirdPoint(a[l+1],a[l],0,n,"left")),++l;var c=new Array;for(l=0;l<s;)r=t[l+1][0]-u[l][0],o=t[l+1][1]-u[l][1],c.push([a[l][0]+r,a[l][1]+o]),c.push(t[l+1]),c.push([a[l+1][0]+r,a[l+1][1]+o]),++l;var h=new Array,d=c.slice();for(d.push(c[0],c[1]),l=1;l<d.length;)h=h.concat(A.commonFun.getBezierPoints(d.slice(l,l+4))),l+=3;return h},A.MilStdGeomtry=function(t,e,i,n){(a.default.call(this,[]),void 0!==t&&null!=t)&&(void 0!==n&&null==n&&a.default.call(this,n),this.vertices=t,this.milStdType=e,this.milStdParams=void 0!==i&&null!=i?i:new A.MilstdParams,this.milStdType!=A.EnumMilstdType.TriangleFlag&&this.milStdType!=A.EnumMilstdType.RectFlag&&this.milStdType!=A.EnumMilstdType.CurveFlag&&this.milStdType!=A.EnumMilstdType.ArrowCross&&this.milStdType!=A.EnumMilstdType.CircleClosedangle&&this.milStdType!=A.EnumMilstdType.Closedangle&&this.milStdType!=A.EnumMilstdType.DoubleClosedangle&&this.milStdType!=A.EnumMilstdType.Fourstar&&this.milStdType!=A.EnumMilstdType.Rhombus&&this.milStdType!=A.EnumMilstdType.SameDirectionClosedangle&&this.milStdType!=A.EnumMilstdType.Triangle&&this.milStdType!=A.EnumMilstdType.Vane&&this.milStdType!=A.EnumMilstdType.AssemblyArea||(this.milStdParams.maxVertices=2),this.milStdType==A.EnumMilstdType.DoubleArrow&&(void 0!=i.maxVertices&&i.maxVertices<=4&&i.maxVertices>=3?this.milStdParams.maxVertices=i.maxVertices:this.milStdParams.maxVertices=4))},(0,n.inherits)(A.MilStdGeomtry,a.default),A.MilStdGeomtry.prototype.Create=function(){if("DoubleArrow"==this.milStdType){if(this.vertices.length<3)return}else if(this.vertices.length<2)return;switch(this.milStdType){case A.EnumMilstdType.SimpleArrow:case A.EnumMilstdType.StraightArrow:case A.EnumMilstdType.DoubleArrow:case A.EnumMilstdType.SingleLineArrow:var t=A.Arrow.getArrowFromVert(this.vertices,this.milStdType,this.milStdParams);this.setGeometriesArray([t]);break;case A.EnumMilstdType.TriangleFlag:case A.EnumMilstdType.RectFlag:case A.EnumMilstdType.CurveFlag:var e=A.Flag.getFlagFromVert(this.vertices,this.milStdType);this.setGeometriesArray(e);break;case A.EnumMilstdType.ArrowCross:case A.EnumMilstdType.CircleClosedangle:case A.EnumMilstdType.Closedangle:case A.EnumMilstdType.DoubleClosedangle:case A.EnumMilstdType.Fourstar:case A.EnumMilstdType.Rhombus:case A.EnumMilstdType.SameDirectionClosedangle:case A.EnumMilstdType.Triangle:case A.EnumMilstdType.Vane:e=A.Compass.getCompassFromVert(this.vertices,this.milStdType);this.setGeometriesArray(e);break;case A.EnumMilstdType.Bezier:case A.EnumMilstdType.BezierLine:case A.EnumMilstdType.AssemblyArea:t=A.Compass.getBezierFromVert(this.vertices,this.milStdType);this.setGeometriesArray([t])}},A.MilStdGeomtry.prototype.Update=function(t,e){if("DoubleArrow"==this.milStdType){if(t.length<3)return}else if(t.length<2)return;switch(e||(this.vertices=t),this.milStdType){case A.EnumMilstdType.SimpleArrow:case A.EnumMilstdType.StraightArrow:case A.EnumMilstdType.DoubleArrow:case A.EnumMilstdType.SingleLineArrow:var i=A.Arrow.getArrowFromVert(t,this.milStdType,this.milStdParams);this.setGeometriesArray([i]);break;case A.EnumMilstdType.TriangleFlag:case A.EnumMilstdType.RectFlag:case A.EnumMilstdType.CurveFlag:var n=A.Flag.getFlagFromVert(t,this.milStdType);this.setGeometriesArray(n);break;case A.EnumMilstdType.ArrowCross:case A.EnumMilstdType.CircleClosedangle:case A.EnumMilstdType.Closedangle:case A.EnumMilstdType.DoubleClosedangle:case A.EnumMilstdType.Fourstar:case A.EnumMilstdType.Rhombus:case A.EnumMilstdType.SameDirectionClosedangle:case A.EnumMilstdType.Triangle:case A.EnumMilstdType.Vane:n=A.Compass.getCompassFromVert(t,this.milStdType);this.setGeometriesArray(n);break;case A.EnumMilstdType.Bezier:case A.EnumMilstdType.BezierLine:case A.EnumMilstdType.AssemblyArea:i=A.Bezier.getBezierFromVert(t,this.milStdType);this.setGeometriesArray([i])}},A.event.MilStdDrawEvent=function(t,e){l.default.call(this,t),this.feature=void 0!==e?e:null},(0,n.inherits)(A.event.MilStdDrawEvent,l.default),A.event.MilStdDrawEvent.DRAW_START="draw_start",A.event.MilStdDrawEvent.DRAW_END="draw_end",A.event.MilStdDrawEvent.MODIFY_FEATURE_END="modify_one_feature";var k=function(t){g.default.call(this,[]),this.vertices=null,this.milStdGeom=null,this.feature=null,this.milStdType=null,this.milStdParams=null,this.mapViewport=null,this.dbClickZoomEvent=null,this.map=void 0!==t?t:null,this.featureName=null;var e=new u.default({color:"#000000",width:1.25}),i=new c.default({color:"rgba(0,0,0,0.5)"});this.style=new d.default({fill:i,stroke:e});var n=new f.default({source:new p.default({useSpatialIndex:!1,wrapX:!1})});this.featureOverLay=n,this.featureOverLay.setStyle(this.style),this.setMap(t),this.featureOverLay.on("postcompose",function(t){t.context.shadowBlur=25,t.context.shadowColor="black"})};(0,n.inherits)(k,g.default),k.prototype.setMap=function(t){void 0!==t&&null!=t&&(this.map=t,this.mapViewport=this.map.getViewport())},k.prototype.ShieldDBClickZoomEvent=function(t){for(var e=t.getInteractions(),i=0,n=e.getLength();i<n;i++){var r=e.item(i);if(r instanceof y.default){this.dbClickZoomEvent=r,e.remove(r);break}}},k.prototype.UnShieldDBClickZoomEvent=function(t){null!=this.dbClickZoomEvent&&(t.getInteractions().push(this.dbClickZoomEvent),this.dbClickZoomEvent=null)},k.prototype.activate=function(t,e,i){this.deactivate(),this.ShieldDBClickZoomEvent(this.map),_.listen(this.mapViewport,m.default.CLICK,this.drawStartHandle,this),this.milStdType=t,this.milStdParams=e,this.featureName=void 0!==i&&null!=i?i:"draw",this.featureOverLay.setMap(this.map)},k.prototype.deactivate=function(){this.disconnectEventHandlers(),this.featureOverLay.setMap(null),this.vertices=[],this.milStdGeom=null,this.feature=null,this.UnShieldDBClickZoomEvent(this.map)},k.prototype.drawStartHandle=function(t){var e=this.map.getCoordinateFromPixel([t.clientX,t.clientY]);this.vertices.push(e),this.milStdGeom=new A.MilStdGeomtry(this.vertices,this.milStdType,this.milStdParams),this.featureOverLay.getSource().addFeature(new C.default(new x.default(e))),_.unlisten(this.mapViewport,m.default.CLICK,this.drawStartHandle,this),_.listen(this.mapViewport,m.default.CLICK,this.drawContinueHandle,this),_.listen(this.mapViewport,m.default.DBLCLICK,this.drawEndHandle,this),_.listen(this.mapViewport,m.default.MOUSEMOVE,this.mouseMoveHandle,this)},k.prototype.drawContinueHandle=function(t){var e=this.map.getCoordinateFromPixel([t.clientX,t.clientY]);A.commonFun.CalLengthOfTwoPoints(e,this.vertices[this.vertices.length-1])<A.enum.ZERO_TOLERANCE||(this.vertices.push(e),this.milStdGeom.Update(this.vertices.slice(0),!1),null==this.feature?(this.feature=new C.default(this.milStdGeom),this.featureOverLay.getSource().addFeature(this.feature)):this.feature.setGeometry(this.milStdGeom),this.vertices.length==this.milStdGeom.milStdParams.maxVertices&&this.drawEndHandle(t))},k.prototype.drawEndHandle=function(t){this.disconnectEventHandlers(),t.preventDefault(),this.clear()},k.prototype.mouseMoveHandle=function(t){var e=this.map.getCoordinateFromPixel([t.clientX,t.clientY]);if(!(A.commonFun.CalLengthOfTwoPoints(e,this.vertices[this.vertices.length-1])<A.enum.ZERO_TOLERANCE)){var i=this.vertices.concat([e]);this.milStdGeom.Update(i,!0),null==this.feature?(this.feature=new C.default(this.milStdGeom),this.featureOverLay.getSource().addFeature(this.feature)):this.feature.setGeometry(this.milStdGeom)}},k.prototype.disconnectEventHandlers=function(){_.unlisten(this.mapViewport,m.default.CLICK,this.drawStartHandle,this),_.unlisten(this.mapViewport,m.default.CLICK,this.drawContinueHandle,this),_.unlisten(this.mapViewport,m.default.MOUSEMOVE,this.mouseMoveHandle,this),_.unlisten(this.mapViewport,m.default.DBLCLICK,this.drawEndHandle,this)},k.prototype.clear=function(t){this.feature.name=this.featureName,this.dispatchEvent(new A.event.MilStdDrawEvent(A.event.MilStdDrawEvent.DRAW_END,this.feature)),this.featureOverLay.getSource().removeFeature(this.feature),this.UnShieldDBClickZoomEvent(this.map),this.featureOverLay.setMap(null),this.vertices=[],this.milStdGeom=null,this.feature=null};var N=function t(e,i){var n=void 0!==i?i:{};v.default.call(this,{handleDownEvent:t.handleDownEvent_,handleDragEvent:t.handleDragEvent_,handleEvent:t.handleEvent,handleUpEvent:t.handleUpEvent_,handleMoveEvent:t.handleMoveEvent}),this.map_=e,this.vertexFeature_=null,this.lastPixel_=[0,0],this.rBush_=new b.default,this.pixelTolerance_=void 0!==n.pixelTolerance&&null!=n.pixelTolerance?n.pixelTolerance:10,this.snappedToVertex_=!1,this.dragSegments_=null,this.oldVerticesFeature=new S.default,this.overlay_=new f.default({source:new p.default({useSpatialIndex:!1,wrapX:!!n.wrapX}),updateWhileAnimating:!0,updateWhileInteracting:!0});var r=void 0!=n.style?n.style:t.getDefaultStyleFunction();this.overlay_.setStyle(r),this.setMap(this.map_),this.SEGMENT_WRITERS_={Polygon:this.writeVerticeGeometry,MultiLineString:this.writeVerticeGeometry,LineString:this.writeVerticeGeometry},this.selectTool=null,this.features_=void 0!==n.features?n.features:null,this.cursor_="pointer",this.previousCursor_=void 0};(0,n.inherits)(N,v.default),N.prototype.activate=function(){if(null==this.selectTool&&(this.selectTool=new ol.interaction.Select({wrapX:!1})),void 0!==this.map_&&null!=this.map_){for(var t=this.map_.getInteractions(),e=0,i=t.getLength();e<i;e++){var n=t.item(e);(n instanceof ol.interaction.Select||n instanceof N)&&t.remove(n)}this.map_.addInteraction(this.selectTool),this.map_.addInteraction(this),_.listen(this.map_,"dblclick",this.modifyEndHandle,this),this.features_=this.selectTool.getFeatures(),this.features_.forEach(this.addFeature_,this),_.listen(this.features_,O.default.ADD,this.handleFeatureAdd_,this),_.listen(this.features_,O.default.REMOVE,this.handleFeatureRemove_,this),k.prototype.ShieldDBClickZoomEvent(this.map_)}},N.prototype.deactivate=function(){void 0!==this.map_&&null!=this.map_&&(k.prototype.UnShieldDBClickZoomEvent(this.map_),this.map_.removeInteraction(this.selectTool),this.map_.removeInteraction(this))},N.prototype.disconnectEventHandlers=function(){void 0!==this.map_&&null!=this.map_&&(_.unlisten(this.map_,"dblclick",this.modifyEndHandle,this),this.map_.removeInteraction(this.selectTool),this.map_.removeInteraction(this)),_.unlisten(this.features_,O.default.ADD,this.handleFeatureAdd_,this),_.unlisten(this.features_,O.default.REMOVE,this.handleFeatureRemove_,this)},N.prototype.modifyEndHandle=function(t){this.disconnectEventHandlers(),void 0!==this.oldVerticesFeature&&null!=this.oldVerticesFeature&&(this.clearOverLayer(this.overlay_),this.oldVerticesFeature.clear())},N.prototype.addFeature_=function(t){var e=t.getGeometry(),i=null;if(e instanceof x.default&&(i=e),i=e instanceof a.default?e.geometries_[0]:e,void 0!==this.SEGMENT_WRITERS_[i.getType()]&&(this.SEGMENT_WRITERS_[i.getType()].call(this,t),this.oldVerticesFeature.clear(),this.clearOverLayer(this.overlay_),void 0!==e.vertices&&null!=e.vertices))for(var n=0;n<e.vertices.length;n++){var r=new C.default(new x.default(e.vertices[n]));this.overlay_.getSource().addFeature(r),this.oldVerticesFeature.push(r)}var o=this.getMap();void 0!==o&&null!=o&&this.handlePointerAtPixel(this.lastPixel_,o)},N.prototype.clearOverLayer=function(t){void 0!==t&&null!=t&&t.getSource().clear()},N.prototype.setMap=function(t){this.overlay_.setMap(t),v.default.prototype.setMap.call(this,t)},N.prototype.handleFeatureAdd_=function(t){var e=t.element;this.addFeature_(e)},N.prototype.handleFeatureRemove_=function(t){var e=t.element;void 0!==e&&null!=e&&this.dispatchEvent(new A.event.MilStdDrawEvent(A.event.MilStdDrawEvent.MODIFY_FEATURE_END,e));var i,n=this.rBush_,r=[];for(n.forEachInExtent(e.getGeometry().getExtent(),function(t){e===t.feature&&r.push(t)}),i=r.length-1;i>=0;--i)n.remove(r[i]);this.clearOverLayer(this.overlay_),this.oldVerticesFeature.clear(),this.vertexFeature_=null},N.prototype.writeVerticeGeometry=function(t){var e,i,n,r,o=t.getGeometry().vertices;for(i=0,n=o.length;i<n;++i)r={feature:t,depth:[i],index:i,segment:[e=o[i],e]},this.rBush_.insert(T.boundingExtent(r.segment),r)},N.prototype.createOrUpdateVertexFeature_=function(t){var e=this.vertexFeature_;if(null==e)e=new C.default(new x.default(t)),this.vertexFeature_=e,this.overlay_.getSource().addFeature(e);else{var i=e.getGeometry();i.setCoordinates(t),e.setGeometry(i)}return e},N.prototype.redrawVertices=function(t,e){if(void 0!==this.oldVerticesFeature&&null!=this.oldVerticesFeature){var i=this.oldVerticesFeature.item(t);i.setGeometry(new x.default(e)),this.oldVerticesFeature.setAt(t,i)}},N.handleDownEvent_=function(t){this.handlePointerAtPixel(t.pixel,t.map),this.dragSegments_=[];var e=this.vertexFeature_;if(null!=e)for(var i=e.getGeometry().getCoordinates(),n=T.boundingExtent([i]),r=this.rBush_.getInExtent(n),o=0,s=r.length;o<s;++o){var a=r[o],l=a.segment;w.equals(l[0],i)?this.dragSegments_.push([a,0]):w.equals(l[1],i)&&this.dragSegments_.push([a,1])}return null!=this.vertexFeature_},N.handleMoveEvent=function(t){if(this.cursor_){var e=t.map.forEachFeatureAtPixel(t.pixel,function(t,e){return t}),i=t.map.getTargetElement();e?i.style.cursor!=this.cursor_&&(this.previousCursor_=i.style.cursor,i.style.cursor=this.cursor_):void 0!==this.previousCursor_&&(i.style.cursor=this.previousCursor_,this.previousCursor_=void 0)}},N.handleDragEvent_=function(t){for(var e=t.coordinate,i=0,n=this.dragSegments_.length;i<n;++i){var r=this.dragSegments_[i],o=r[0],s=(r[1],o.index),a=o.feature,l=a.getGeometry();if(l.getType()==I.default.GEOMETRY_COLLECTION){for(;e.length<a.getGeometry().geometries_[0].getStride();)e.push(0);var u=l.vertices;if(l.milStdType==A.EnumMilstdType.TriangleFlag||l.milStdType==A.EnumMilstdType.RectFlag||l.milStdType==A.EnumMilstdType.CurveFlag||l.milStdType==A.EnumMilstdType.ArrowCross||l.milStdType==A.EnumMilstdType.CircleClosedangle||l.milStdType==A.EnumMilstdType.Closedangle||l.milStdType==A.EnumMilstdType.DoubleClosedangle||l.milStdType==A.EnumMilstdType.Fourstar||l.milStdType==A.EnumMilstdType.Rhombus||l.milStdType==A.EnumMilstdType.SameDirectionClosedangle||l.milStdType==A.EnumMilstdType.Triangle||l.milStdType==A.EnumMilstdType.Vane)if(0==s){if(e[0]-u[1][0]>=0||e[1]-u[1][1]<=0)return}else if(1==s&&(e[0]-u[0][0]<=0||e[1]-u[0][1]>=0))return;this.updateFeature(o,e,!0);break}this.createOrUpdateVertexFeature_(e)}},N.handleUpEvent_=function(t){for(var e,i=t.coordinate,n=this.dragSegments_.length-1;n>=0;--n){e=this.dragSegments_[n][0],this.rBush_.update(T.boundingExtent(e.segment),e);var r=e.feature.getGeometry(),o=r.vertices;if(r.milStdType==A.EnumMilstdType.TriangleFlag||r.milStdType==A.EnumMilstdType.RectFlag||r.milStdType==A.EnumMilstdType.CurveFlag||r.milStdType==A.EnumMilstdType.ArrowCross||r.milStdType==A.EnumMilstdType.CircleClosedangle||r.milStdType==A.EnumMilstdType.Closedangle||r.milStdType==A.EnumMilstdType.DoubleClosedangle||r.milStdType==A.EnumMilstdType.Fourstar||r.milStdType==A.EnumMilstdType.Rhombus||r.milStdType==A.EnumMilstdType.SameDirectionClosedangle||r.milStdType==A.EnumMilstdType.Triangle||r.milStdType==A.EnumMilstdType.Vane)if(0==e.index){if(i[0]-o[1][0]>=0||i[1]-o[1][1]<=0)return!1}else if(1==e.index&&(i[0]-o[0][0]<=0||i[1]-o[0][1]>=0))return!1;this.updateFeature(e,t.coordinate,!0)}return!1},N.prototype.updateFeature=function(t,e,i){var n=t.feature.getGeometry(),r=n.vertices;if(r[t.index]=e,n.Update(r,i),t.feature.setGeometry(n),null!=this.vertexFeature_){var o=this.vertexFeature_.getGeometry();o.setCoordinates(e),this.vertexFeature_.setGeometry(o)}this.redrawVertices(t.index,e),this.rBush_.remove(t);var s=t.segment;s[0]=s[1]=e,t.segment=s,this.rBush_.insert(T.boundingExtent(t.segment),t)},N.handleEvent=function(t){return!(t instanceof E.default)||(t.map.getView().getHints()[j.default.INTERACTING]||t.type!=P.default.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(t),v.default.handleEvent.call(this,t)&&!0)},N.prototype.handlePointerMove_=function(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel(t.pixel,t.map)},N.prototype.handlePointerAtPixel=function(t,e){var i=e.getCoordinateFromPixel(t),n=e.getCoordinateFromPixel([t[0]-this.pixelTolerance_,t[1]+this.pixelTolerance_]),r=e.getCoordinateFromPixel([t[0]+this.pixelTolerance_,t[1]-this.pixelTolerance_]),o=T.boundingExtent([n,r]),s=this.rBush_.getInExtent(o);if(s.length>0){s.sort(function(t,e){return w.squaredDistanceToSegment(i,t.segment)-w.squaredDistanceToSegment(i,e.segment)});var a=s[0].segment,l=e.getPixelFromCoordinate(a[0]),u=e.getPixelFromCoordinate(a[1]),c=w.squaredDistance(t,l),h=w.squaredDistance(t,u),d=Math.sqrt(Math.min(c,h));return this.snappedToVertex_=d<=this.pixelTolerance_,void(this.snappedToVertex_&&this.createOrUpdateVertexFeature_(a[0]))}null!=this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},N.getDefaultStyleFunction=function(){var t=(0,h.createEditingStyle)();return function(e,i){return t[I.default.POINT]}};var D=function t(e){v.default.call(this,{handleDownEvent:t.prototype.handleDownEvent,handleDragEvent:t.prototype.handleDragEvent,handleMoveEvent:t.prototype.handleMoveEvent,handleUpEvent:t.prototype.handleUpEvent}),this.map_=void 0!==e&&null!=e?e:null,this.coordinate_=null,this.feature_=null,this.cursor_="move",this.previousCursor_=void 0};(0,n.inherits)(D,v.default),D.prototype.activate=function(){if(void 0!==this.map_&&null!=this.map_){for(var t=this.map_.getInteractions(),e=t.getLength()-1;e>=0;e--){var i=t.item(e);i instanceof D&&t.remove(i)}this.map_.addInteraction(this),k.prototype.ShieldDBClickZoomEvent(this.map_),_.listen(this.map_,"dblclick",this.modifyEndHandle,this)}},D.prototype.deactivate=function(){if(void 0!==this.map_&&null!=this.map_){k.prototype.UnShieldDBClickZoomEvent(this.map_);for(var t=this.map_.getInteractions(),e=t.getLength()-1;e>=0;e--){var i=t.item(e);i instanceof D&&t.remove(i)}}},D.prototype.modifyEndHandle=function(t){void 0!==this.map_&&null!=this.map_&&(_.unlisten(this.map_,"dblclick",this.modifyEndHandle,this),this.setActive(!1))},D.prototype.handleDownEvent=function(t){var e=t.map.forEachFeatureAtPixel(t.pixel,function(t,e){return t});return e&&(this.coordinate_=t.coordinate,this.feature_=e),!!e},D.prototype.handleDragEvent=function(t){t.map.forEachFeatureAtPixel(t.pixel,function(t,e){return t});var e=t.coordinate[0]-this.coordinate_[0],i=t.coordinate[1]-this.coordinate_[1],n=this.feature_.getGeometry();if(n.translate(e,i),void 0!==n.vertices&&null!=n.vertices)for(var r=n.vertices,o=0,s=r.length;o<s;o++)w.add(r[o],[e,i]);this.coordinate_[0]=t.coordinate[0],this.coordinate_[1]=t.coordinate[1]},D.prototype.handleMoveEvent=function(t){if(this.cursor_){var e=t.map.forEachFeatureAtPixel(t.pixel,function(t,e){return t}),i=t.map.getTargetElement();e?i.style.cursor!=this.cursor_&&(this.previousCursor_=i.style.cursor,i.style.cursor=this.cursor_):void 0!==this.previousCursor_&&(i.style.cursor=this.previousCursor_,this.previousCursor_=void 0)}},D.prototype.handleUpEvent=function(t){return t.map.getTargetElement().style.cursor="default",void 0!==this.feature_&&null!=this.feature_&&this.dispatchEvent(new A.event.MilStdDrawEvent(A.event.MilStdDrawEvent.MODIFY_FEATURE_END,this.feature_)),this.coordinate_=null,this.feature_=null,!1},e.MilStd=A,e.EnumMilstdType=M,A.EnumMilstdType=M,e.MilstdParams=F,A.MilstdParams=F,e.MilStdDrawTool=k,A.tool.MilStdDrawTool=k,e.MilStdModifyTool=N,A.ModifyTool=N,e.MilStdDragPan=D,A.DragPan=D},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.rankSymbolThemeLayer=e.RankSymbolThemeLayer=e.CRankSymbolThemeSource=e.graphThemeLayer=e.GraphThemeLayer=e.CGraphThemeSource=e.randomThemeLayer=e.RandomThemeLayer=e.CRandomThemeSource=e.simpleThemeLayer=e.SimpleThemeLayer=e.CSimpleThemeSource=e.uniqueThemeLayer=e.UniqueThemeLayer=e.CUniqueThemeSource=e.rangeThemeLayer=e.RangeThemeLayer=e.CRangeThemeSource=e.ThemeStyle=void 0;var n=i(544),r=i(382),o=i(555),s=i(556),a=i(557),l=i(409),u=i(558);e.ThemeStyle=n.ThemeStyle,e.CRangeThemeSource=r.CRangeThemeSource,e.RangeThemeLayer=r.RangeThemeLayer,e.rangeThemeLayer=r.rangeThemeLayer,e.CUniqueThemeSource=o.CUniqueThemeSource,e.UniqueThemeLayer=o.UniqueThemeLayer,e.uniqueThemeLayer=o.uniqueThemeLayer,e.CSimpleThemeSource=s.CSimpleThemeSource,e.SimpleThemeLayer=s.SimpleThemeLayer,e.simpleThemeLayer=s.simpleThemeLayer,e.CRandomThemeSource=a.CRandomThemeSource,e.RandomThemeLayer=a.RandomThemeLayer,e.randomThemeLayer=a.randomThemeLayer,e.CGraphThemeSource=l.CGraphThemeSource,e.GraphThemeLayer=l.GraphThemeLayer,e.graphThemeLayer=l.graphThemeLayer,e.CRankSymbolThemeSource=u.CRankSymbolThemeSource,e.RankSymbolThemeLayer=u.RankSymbolThemeLayer,e.rankSymbolThemeLayer=u.rankSymbolThemeLayer},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ThemeStyle=void 0;var n,r=i(8),o=(n=r)&&n.__esModule?n:{default:n},s=i(6),a=i(21);var l=function t(e){(0,o.default)(this,t),e=e||{},this.fill=!0,this.fillColor="#000000",this.fillOpacity=1,this.stroke=!1,this.strokeColor="#000000",this.strokeOpacity=1,this.strokeWidth=1,this.strokeLinecap="butt",this.strokeLineJoin="miter",this.strokeDashstyle="solid",this.pointRadius=6,this.shadowBlur=0,this.shadowColor="#000000",this.shadowOffsetX=0,this.shadowOffsetY=0,this.label="",this.labelRect=!1,this.fontColor="",this.fontSize=12,this.fontStyle="normal",this.fontVariant="normal",this.fontWeight="normal",this.fontFamily="arial,sans-serif",this.labelPosition="top",this.labelAlign="center",this.labelBaseline="middle",this.labelXOffset=0,this.labelYOffset=0,(0,a.extend)(this,e)};e.ThemeStyle=l,s.Zondy.Client.ThemeStyle=l},function(t,e,i){i(546),t.exports=i(80).Object.getPrototypeOf},function(t,e,i){var n=i(378),r=i(377);i(298)("getPrototypeOf",function(){return function(t){return r(n(t))}})},function(t,e,i){t.exports={default:i(548),__esModule:!0}},function(t,e,i){i(549),t.exports=i(80).Object.setPrototypeOf},function(t,e,i){var n=i(135);n(n.S,"Object",{setPrototypeOf:i(550).set})},function(t,e,i){var n=i(165),r=i(146),o=function(t,e){if(r(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{(n=i(216)(Function.call,i(296).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,i){return o(t,i),e?t.__proto__=i:n(t,i),t}}({},!1):void 0),check:o}},function(t,e,i){t.exports={default:i(552),__esModule:!0}},function(t,e,i){i(553);var n=i(80).Object;t.exports=function(t,e){return n.create(t,e)}},function(t,e,i){var n=i(135);n(n.S,"Object",{create:i(306)})},function(t,e,i){"use strict";e.__esModule=!0;var n,r=i(292),o=(n=r)&&n.__esModule?n:{default:n};e.default=function(t,e,i){return e in t?(0,o.default)(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.uniqueThemeLayer=e.UniqueThemeLayer=e.CUniqueThemeSource=void 0;var n=p(i(13)),r=p(i(8)),o=p(i(20)),s=p(i(16)),a=p(i(17)),l=i(6),u=i(382),c=i(1),h=i(21),d=p(i(149)),f=p(i(28));function p(t){return t&&t.__esModule?t:{default:t}}var g=function(t){function e(t,i){return(0,r.default)(this,e),(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,i))}return(0,a.default)(e,t),(0,o.default)(e,[{key:"getStyleByData",value:function(t){var e=this,i=t,n=(0,h.copyAttributesWithClip)({},e.style),r=e.styleGroups,o=!1,s=null,a=e.styleGroups&&e.styleGroups.length>0;if(e.themeField&&a&&i.attributes){var l=e.themeField,u=i.attributes;for(var c in u)if(l===c){o=!0,s=u[c];break}}if(o&&a)for(var d=0,f=r.length;d<f;d++)if(s.toString()===r[d].value.toString()){var p=r[d].style;n=(0,h.copyAttributesWithClip)(n,p)}return n}}]),e}(u.CRangeThemeSource);e.CUniqueThemeSource=g,l.Zondy.Source.CUniqueThemeSource=g;var y=function(t,e){var i=void 0!==e?e:{};delete i.source;var n=new g(t,i);d.default.call(this,i),this.setSource(n),this.pointerInteraction=null};(0,c.inherits)(y,d.default),y.prototype.setOptions=function(t){var e=this.getSource();void 0!=e&&e.constructor==g&&(e.style=void 0!=t.style?t.style:e.style,e.isHoverAble=void 0!=t.isHoverAble?t.isHoverAble:e.isHoverAble,e.highlightStyle=void 0!=t.highlightStyle?t.highlightStyle:e.highlightStyle,e.themeField=void 0!=t.themeField?t.themeField:e.themeField,e.styleGroups=void 0!=t.styleGroups?t.styleGroups:e.styleGroups)},y.prototype.addFeatures=function(t){var e=this.getSource();if(void 0!==e&&e.constructor==g&&(e.addFeatures(t),null!=this.values_.map&&(e.isHoverAble||e.isClickAble))){var i=this.values_.map;null==this.pointerInteraction&&(this.pointerInteraction=new f.default,i.addInteraction(this.pointerInteraction)),e.isHoverAble&&(this.pointerInteraction.handleMoveEvent_=function(t){e&&e.fire("mousemove",t)}),e.isClickAble&&(this.pointerInteraction.handleDownEvent_=function(t){e&&e.fire("click",t)})}},y.prototype.removeFromMap=function(){var t=this.values_.map,e=this.getSource();void 0!=this.pointerInteraction&&(e.isHoverAble||e.isClickAble)&&t.removeInteraction(this.pointerInteraction),e.destroy(),this.setSource(null),t.removeLayer(this)},e.UniqueThemeLayer=y;var m=e.uniqueThemeLayer=function(t,e){return new y(t,e)};l.Zondy.Map.uniqueThemeLayer=m},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.simpleThemeLayer=e.SimpleThemeLayer=e.CSimpleThemeSource=void 0;var n=y(i(13)),r=y(i(8)),o=y(i(20)),s=y(i(16)),a=y(i(17)),l=i(6),u=i(1),c=i(307),h=i(21),d=i(221),f=i(108),p=y(i(149)),g=(i(11),y(i(28)));function y(t){return t&&t.__esModule?t:{default:t}}var m=function(t){function e(t,i){(0,r.default)(this,e);var o=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,i));return o.style=i.style,o}return(0,a.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.style=null,c.CGeoFeatureSource.prototype.destroy.apply(this,arguments)}},{key:"createThematicFeature",value:function(t){var e=this.getStyleByData(t),i={};i.nodesClipPixel=this.nodesClipPixel,i.isHoverAble=this.isHoverAble,i.isMultiHover=this.isMultiHover,i.isClickAble=this.isClickAble,i.highlightStyle=f.ShapeFactory.transformStyle(this.highlightStyle);for(var n=new d.ThemeVector(t,this,f.ShapeFactory.transformStyle(e),i),r=0;r<n.shapes.length;r++)this.renderer.addShape(n.shapes[r]);return n}},{key:"getColor",value:function(){for(var t="0,1,2,3,4,5,6,7,8,9,a,b,c,d,e,f".split(","),e="#",i=0;i<6;i++)e+=t[Math.floor(16*Math.random())];return e}},{key:"getStyleByData",value:function(t){var e=(0,h.copyAttributesWithClip)({},this.style);return null==e.fillColor&&(e.fillColor=this.getColor()),this.style=e,e}},{key:"canvasFunctionInternal_",value:function(t,e,i,n,r){return c.CGeoFeatureSource.prototype.canvasFunctionInternal_.apply(this,arguments)}}]),e}(c.CGeoFeatureSource);e.CSimpleThemeSource=m,l.Zondy.Source.CSimpleThemeSource=m;var _=function(t,e){var i=void 0!==e?e:{};delete i.source;var n=new m(t,i);p.default.call(this,i),this.setSource(n),this.pointerInteraction=null};(0,u.inherits)(_,p.default),_.prototype.setOptions=function(t){var e=this.getSource();void 0!=e&&e.constructor==m&&(e.style=void 0!=t.style?t.style:e.style,e.isHoverAble=void 0!=t.isHoverAble?t.isHoverAble:e.isHoverAble,e.highlightStyle=void 0!=t.highlightStyle?t.highlightStyle:e.highlightStyle)},_.prototype.addFeatures=function(t){var e=this.getSource();if(void 0!==e&&e.constructor==m&&(e.addFeatures(t),null!=this.values_.map&&(e.isHoverAble||e.isClickAble))){var i=this.values_.map;null==this.pointerInteraction&&(this.pointerInteraction=new g.default,i.addInteraction(this.pointerInteraction)),e.isHoverAble&&(this.pointerInteraction.handleMoveEvent_=function(t){e&&e.fire("mousemove",t)}),e.isClickAble&&(this.pointerInteraction.handleDownEvent_=function(t){e&&e.fire("click",t)})}},_.prototype.removeFromMap=function(){var t=this.values_.map,e=this.getSource();void 0!=this.pointerInteraction&&(e.isHoverAble||e.isClickAble)&&t.removeInteraction(this.pointerInteraction),e.destroy(),this.setSource(null),t.removeLayer(this)},e.SimpleThemeLayer=_;var v=e.simpleThemeLayer=function(t,e){return new _(t,e)};l.Zondy.Map.simpleThemeLayer=v},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.randomThemeLayer=e.RandomThemeLayer=e.CRandomThemeSource=void 0;var n=b(i(13)),r=b(i(8)),o=b(i(20)),s=b(i(16)),a=b(i(17)),l=i(6),u=i(1),c=i(307),h=i(21),d=i(221),f=i(108),p=i(196),g=b(i(149)),y=(i(11),b(i(28))),m=b(i(65)),_=i(25),v=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(4));function b(t){return t&&t.__esModule?t:{default:t}}var S=function(t){function e(t,i){(0,r.default)(this,e);var o=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,i));return o.style=i.style,o.keepStyle=!0,o.currentZoom=o.map.getView().getZoom(),v.listen(o.map.getView(),(0,_.getChangeEventType)(m.default.RESOLUTION),o.handleZoomChanged_,o),o}return(0,a.default)(e,t),(0,o.default)(e,[{key:"handleZoomChanged_",value:function(t){var e=this.map.getView().getZoom();Math.abs(e-this.currentZoom)>=.5&&(this.currentZoom=e,this.keepStyle=!1)}},{key:"destroy",value:function(){this.style=null,this.keepStyle=null,v.unlisten(this.map.getView(),(0,_.getChangeEventType)(m.default.RESOLUTION),this.handleZoomChanged_,this),c.CGeoFeatureSource.prototype.destroy.apply(this,arguments)}},{key:"redrawThematicFeatures",value:function(t){var e=this.renderer.getHoverOne(),i=null;e&&e.refDataID&&(i=e.refDataID),this.renderer.clearAll();for(var n=this.features,r=this.cache,o=this.cacheFields,s=this.map.getView().getZoom(),a=this.maxCacheCount,l=new p.Rectangle(t[0],t[1],t[2],t[3]),u=0,c=n.length;u<c;u++){var h=n[u],d=h.bound;if(!l||l.intersectsBounds(d)){var f,g=h.FID+"_zoom_"+s.toString();if(r[g]&&this.keepStyle)r[g].updateAndAddShapes();else{if((f=this.createThematicFeature(n[u])).getShapesCount()<1)continue;if(r[g]=f,o.push(g),o.length>a){var y=o[0];o.splice(0,1),delete r[y]}}}}if(this.renderer.render(),i&&this.isHoverAble&&this.isMultiHover){var m=this.getShapesByFeatureID(i);this.renderer.updateHoverShapes(m)}this.keepStyle=!0}},{key:"getColor",value:function(){for(var t="0,1,2,3,4,5,6,7,8,9,a,b,c,d,e,f".split(","),e="#",i=0;i<6;i++)e+=t[Math.floor(16*Math.random())];return e}},{key:"getStyleByData",value:function(t){var e=(0,h.copyAttributesWithClip)({},this.style);return e.fillColor=this.getColor(),e}},{key:"createThematicFeature",value:function(t){var e=this.getStyleByData(t),i={};i.nodesClipPixel=this.nodesClipPixel,i.isHoverAble=this.isHoverAble,i.isMultiHover=this.isMultiHover,i.isClickAble=this.isClickAble,i.highlightStyle=f.ShapeFactory.transformStyle(this.highlightStyle);for(var n=new d.ThemeVector(t,this,f.ShapeFactory.transformStyle(e),i),r=0;r<n.shapes.length;r++)this.renderer.addShape(n.shapes[r]);return n}},{key:"canvasFunctionInternal_",value:function(t,e,i,n,r){return c.CGeoFeatureSource.prototype.canvasFunctionInternal_.apply(this,arguments)}}]),e}(c.CGeoFeatureSource);e.CRandomThemeSource=S,l.Zondy.Source.CRandomThemeSource=S;var O=function(t,e){var i=void 0!==e?e:{};delete i.source;var n=new S(t,i);g.default.call(this,i),this.setSource(n),this.pointerInteraction=null};(0,u.inherits)(O,g.default),O.prototype.setOptions=function(t){var e=this.getSource();void 0!=e&&e.constructor==S&&(e.style=void 0!=t.style?t.style:e.style,e.isHoverAble=void 0!=t.isHoverAble?t.isHoverAble:e.isHoverAble,e.highlightStyle=void 0!=t.highlightStyle?t.highlightStyle:e.highlightStyle)},O.prototype.addFeatures=function(t){var e=this.getSource();if(void 0!==e&&e.constructor==S&&(e.addFeatures(t),null!=this.values_.map&&(e.isHoverAble||e.isClickAble))){var i=this.values_.map;null==this.pointerInteraction&&(this.pointerInteraction=new y.default,i.addInteraction(this.pointerInteraction)),e.isHoverAble&&(this.pointerInteraction.handleMoveEvent_=function(t){e&&e.fire("mousemove",t)}),e.isClickAble&&(this.pointerInteraction.handleDownEvent_=function(t){e&&e.fire("click",t)})}},O.prototype.removeFromMap=function(){var t=this.values_.map,e=this.getSource();void 0!=this.pointerInteraction&&(e.isHoverAble||e.isClickAble)&&t.removeInteraction(this.pointerInteraction),e.destroy(),this.setSource(null),t.removeLayer(this)},e.RandomThemeLayer=O;var C=e.randomThemeLayer=function(t,e){return new O(t,e)};l.Zondy.Map.randomThemeLayer=C},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.rankSymbolThemeLayer=e.RankSymbolThemeLayer=e.CRankSymbolThemeSource=void 0;var n=g(i(13)),r=g(i(8)),o=g(i(20)),s=g(i(16)),a=g(i(17)),l=i(6),u=i(195),c=i(409),h=i(1),d=g(i(28)),f=g(i(149)),p=i(21);function g(t){return t&&t.__esModule?t:{default:t}}var y=function(t){function e(t,i,o){(0,r.default)(this,e);var a=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,null,o));return a.symbolType=i,a.symbolSetting=o&&o.symbolSetting?o.symbolSetting:{},a}return(0,a.default)(e,t),(0,o.default)(e,[{key:"setSymbolType",value:function(t){this.symbolType=t,this.change()}},{key:"createThematicFeature",value:function(t){var e,i=this;return u.Theme[i.symbolType]&&i.themeFields&&i.symbolSetting&&(e=new u.Theme[i.symbolType](t,i,[i.themeFields],i.symbolSetting,null,i.options)),!!e&&(e.assembleShapes(),e)}}]),e}(c.CGraphThemeSource);e.CRankSymbolThemeSource=y;var m=function(t,e,i){var n=void 0!==i?i:{};delete n.source;var r=new y(t,e,n);f.default.call(this,n),this.setSource(r),this.pointerInteraction=null};(0,h.inherits)(m,f.default),m.prototype.setOptions=function(t){var e=this.getSource();void 0!=e&&e.constructor==y&&(t&&t.symbolType&&(e.symbolType=t.symbolType),e.themeFields=t&&t.themeFields?t.themeFields:null,e.symbolSetting=t&&t.symbolSetting?t.symbolSetting:{},e.options={isOverLay:!0,fitZoom:-1,isHoverAble:void 0===t.isHoverAble||t.isHoverAble,calGravity:!1},(0,p.copy)(e.options,t))},m.prototype.addFeatures=function(t){var e=this.getSource();if(void 0!==e&&e.constructor==y&&(e.addFeatures(t),null!=this.values_.map&&null!=e.options&&e.options.isHoverAble)){var i=this.values_.map;null==this.pointerInteraction&&(this.pointerInteraction=new d.default,i.addInteraction(this.pointerInteraction)),this.pointerInteraction.handleMoveEvent_=function(t){e&&e.fire("mousemove",t)}}},m.prototype.removeFromMap=function(){var t=this.values_.map,e=this.getSource();void 0!=this.pointerInteraction&&e.options.isHoverAble&&t.removeInteraction(this.pointerInteraction),e.destroy(),this.setSource(null),t.removeLayer(this)},e.RankSymbolThemeLayer=m;var _=e.rankSymbolThemeLayer=function(t,e,i){return new m(t,e,i)};l.Zondy.Map.rankSymbolThemeLayer=_},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createCanvasContext2D=e.mixin=e.merge=e.DeepMerge=e.ChineseToUtf8=e.getTopAnalysisResult=e.bindAsEventListener=e.bind=e.newGuid=e.cloneObject=e.copyAttributesWithClip=e.copyAttributes=e.transformResult=e.toJSON=e.isInTheSameDomain=e.supportCanvas=e.isSupportCanvas=e.getBrowser=e.Browser=e.IS_GECKO=e.getParameters=e.urlAppend=e.getWFParameterString=e.getParameterString=e.applyDefaults=e.modifyDOMElement=e.indexOf=e.removeItem=e.isElement=e.getElement=e.reset=e.copyExcluce=e.copy=e.extendDeep=e.isArray=e.extend=e.WebGraphicsInfo=e.VectCls=e.Tangram=e.Rectangle=e.PolyLine=e.Polygon=e.Point2D=e.MultiPolygon=e.LablePntInfo=e.LabelRegInfo=e.LabelLinInfo=e.GRegion=e.GPoint=e.GLine=e.FeatureSet=e.FeatureGraphicBase=e.FeatureGeometry=e.Feature=e.LayerStatusType=e.MapType=e.CItemType=e.CLinStyleMakeType=e.CLinJointType=e.CLinHeadType=e.CLinAdjustType=e.NetElemType=e.NetAnalyType=e.ISShowArc=e.EightDirType=e.LineConstrain=e.LabelSpreadType=e.RepeatType=e.LabelPntType=e.LabelRegType=e.LabelLinType=e.FontShape=e.FeatureType=e.VectClsType=e.XClsType=e.DynShowStyle=e.DynNoteLableType=e.CRegionInfo=e.CPointInfo=e.CLineInfo=e.Circle=e.CGDBInfo=e.CDynNoteInfo=e.CDisplayStyleExtend=e.CDisplayStyle=e.CAttDataRow=e.CAttStruct=e.Zondy=e.Arc=e.AnyLine=void 0;var n=i(318),r=i(560),o=i(6),s=i(259),a=i(561),l=i(562),u=i(416),c=i(411),h=i(417),d=i(563),f=i(260),p=i(320),g=i(321),y=i(412),m=i(410),_=i(109),v=i(407),b=i(315),S=i(258),O=i(184),C=i(317),x=i(316),T=i(319),E=i(414),P=i(415),j=i(413),w=i(564),I=i(100),L=i(322),R=i(418),A=i(196),M=i(183),F=i(419),k=i(408),N=i(21);e.AnyLine=n.AnyLine,e.Arc=r.Arc,e.Zondy=o.Zondy,e.CAttStruct=s.CAttStruct,e.CAttDataRow=a.CAttDataRow,e.CDisplayStyle=l.CDisplayStyle,e.CDisplayStyleExtend=u.CDisplayStyleExtend,e.CDynNoteInfo=c.CDynNoteInfo,e.CGDBInfo=h.CGDBInfo,e.Circle=d.Circle,e.CLineInfo=f.CLineInfo,e.CPointInfo=p.CPointInfo,e.CRegionInfo=g.CRegionInfo,e.DynNoteLableType=y.DynNoteLableType,e.DynShowStyle=m.DynShowStyle,e.XClsType=_.XClsType,e.VectClsType=_.VectClsType,e.FeatureType=_.FeatureType,e.FontShape=_.FontShape,e.LabelLinType=_.LabelLinType,e.LabelRegType=_.LabelRegType,e.LabelPntType=_.LabelPntType,e.RepeatType=_.RepeatType,e.LabelSpreadType=_.LabelSpreadType,e.LineConstrain=_.LineConstrain,e.EightDirType=_.EightDirType,e.ISShowArc=_.ISShowArc,e.NetAnalyType=_.NetAnalyType,e.NetElemType=_.NetElemType,e.CLinAdjustType=_.CLinAdjustType,e.CLinHeadType=_.CLinHeadType,e.CLinJointType=_.CLinJointType,e.CLinStyleMakeType=_.CLinStyleMakeType,e.CItemType=_.CItemType,e.MapType=_.MapType,e.LayerStatusType=_.LayerStatusType,e.Feature=v.Feature,e.FeatureGeometry=b.FeatureGeometry,e.FeatureGraphicBase=S.FeatureGraphicBase,e.FeatureSet=O.FeatureSet,e.GLine=C.GLine,e.GPoint=x.GPoint,e.GRegion=T.GRegion,e.LabelLinInfo=E.LabelLinInfo,e.LabelRegInfo=P.LabelRegInfo,e.LablePntInfo=j.LablePntInfo,e.MultiPolygon=w.MultiPolygon,e.Point2D=I.Point2D,e.Polygon=L.Polygon,e.PolyLine=R.PolyLine,e.Rectangle=A.Rectangle,e.Tangram=M.Tangram,e.VectCls=F.VectCls,e.WebGraphicsInfo=k.WebGraphicsInfo,e.extend=N.extend,e.isArray=N.isArray,e.extendDeep=N.extendDeep,e.copy=N.copy,e.copyExcluce=N.copyExcluce,e.reset=N.reset,e.getElement=N.getElement,e.isElement=N.isElement,e.removeItem=N.removeItem,e.indexOf=N.indexOf,e.modifyDOMElement=N.modifyDOMElement,e.applyDefaults=N.applyDefaults,e.getParameterString=N.getParameterString,e.getWFParameterString=N.getWFParameterString,e.urlAppend=N.urlAppend,e.getParameters=N.getParameters,e.IS_GECKO=N.IS_GECKO,e.Browser=N.Browser,e.getBrowser=N.getBrowser,e.isSupportCanvas=N.isSupportCanvas,e.supportCanvas=N.supportCanvas,e.isInTheSameDomain=N.isInTheSameDomain,e.toJSON=N.toJSON,e.transformResult=N.transformResult,e.copyAttributes=N.copyAttributes,e.copyAttributesWithClip=N.copyAttributesWithClip,e.cloneObject=N.cloneObject,e.newGuid=N.newGuid,e.bind=N.bind,e.bindAsEventListener=N.bindAsEventListener,e.getTopAnalysisResult=N.getTopAnalysisResult,e.ChineseToUtf8=N.ChineseToUtf8,e.DeepMerge=N.DeepMerge,e.merge=N.merge,e.mixin=N.mixin,e.createCanvasContext2D=N.createCanvasContext2D},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Arc=void 0;var n=i(6),r=i(21),o=function(t,e){this.ArcID=0;var i=void 0!==e?e:{};(0,r.extend)(this,i),this.Dots=void 0!==t&&null!=t?t:null};e.Arc=o,n.Zondy.Object.Arc=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CAttDataRow=void 0;var n=i(6),r=i(21),o=function(t,e,i){var n=void 0!==i?i:{};(0,r.extend)(this,n),this.FID=void 0!==e?e:0,this.Values=void 0!==t?t:null};e.CAttDataRow=o,n.Zondy.Object.CAttDataRow=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CDisplayStyle=void 0;var n=i(6),r=i(21),o=(i(410),function(t){var e=void 0!==t?t:{};(0,r.extend)(this,e),this.AnnSizeFixed=void 0!==e.AnnSizeFixed&&e.AnnSizeFixed,this.DriverQuality=void 0!==e.DriverQuality?e.DriverQuality:0,this.DynProjFlag=void 0!==e.DynProjFlag&&e.DynProjFlag,this.FollowScale=void 0!==e.FollowScale&&e.FollowScale,this.LinPenWidFixed=void 0!==e.LinPenWidFixed&&e.LinPenWidFixed,this.LinSizeFixed=void 0!==e.LinSizeFixed&&e.LinSizeFixed,this.PntPenWidFixed=void 0!==e.PntPenWidFixed&&e.PntPenWidFixed,this.PntSizeFixed=void 0!==e.PntSizeFixed&&e.PntSizeFixed,this.RegPenWidFixed=void 0!==e.RegPenWidFixed&&e.RegPenWidFixed,this.RegSizeFixed=void 0!==e.RegSizeFixed&&e.RegSizeFixed,this.ShowCoordPnt=void 0!==e.ShowCoordPnt&&e.ShowCoordPnt,this.ShowElemRect=void 0!==e.ShowElemRect&&e.ShowElemRect,this.ShowStyle=void 0!==e.ShowStyle?e.ShowStyle:null,this.SymbleShow=void 0!==e.SymbleShow&&e.SymbleShow});e.CDisplayStyle=o,n.Zondy.Object.CDisplayStyle=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Circle=void 0;var n=c(i(13)),r=c(i(8)),o=c(i(20)),s=c(i(16)),a=c(i(17)),l=i(6),u=(i(21),i(183));i(100);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t,i,o){(0,r.default)(this,e);var a=o||{},l=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,a));return l.point=void 0!==t&&null!=t?t:null,l.radious=void 0!==i&&null!=i?i:null,l}return(0,a.default)(e,t),(0,o.default)(e,[{key:"setByOL",value:function(t){if(void 0!==t&&null!=t){var e=t.getCenter(),i=t.getRadius();this.point=new l.Zondy.Object.Point2D(e[0],e[1]),this.radious=i}}},{key:"toString",value:function(){return null==this.point||0==this.point.length||null==this.radious?"":this.point.x+","+this.point.y+","+this.radious}},{key:"getGeometryType",value:function(){return"Circle"}}]),e}(u.Tangram);e.Circle=h,l.Zondy.Object.Circle=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MultiPolygon=void 0;var n=h(i(13)),r=h(i(8)),o=h(i(20)),s=h(i(16)),a=h(i(17)),l=i(183),u=i(100),c=i(322);function h(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(t,i){(0,r.default)(this,e);var o=i||{},a=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,o));return a.polygonArr=void 0!==t&&null!=t&&Array.isArray(t)?t:new Array,a}return(0,a.default)(e,t),(0,o.default)(e,[{key:"setByOL",value:function(t){if(void 0!==t&&null!=t){this.polygonArr=[];for(var e=t.getLinearRingCount(),i=t.getLinearRings(),n=0;n<e;n++){for(var r=i[n].getCoordinates(),o=r.length,s=[],a=0;a<o;a++)s[a]=new u.Point2D(r[a][0],r[a][1]);this.polygonArr[n]=new c.Polygon(s)}}}},{key:"toString",value:function(){if(void 0===this.polygonArr||null==this.polygonArr||0==this.polygonArr.length)return"";for(var t="",e=0;e<this.polygonArr.length;e++)t+=this.polygonArr[e].toString()+";";return t.substring(0,t.length-1)}},{key:"getGeometryType",value:function(){return"multiPolygon"}}]),e}(l.Tangram);e.MultiPolygon=d,Zondy.Object.MultiPolygon=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SlopLineParam=e.NetAnalysisExtent=e.NetAnalyse=e.MeshingParam=e.ContourRegionInfo=e.ContourZValue=e.ContourParam=e.ContourNoteParam=void 0;var n=i(420),r=i(421),o=i(423),s=i(424),a=i(425),l=i(566),u=i(567),c=i(422);e.ContourNoteParam=n.ContourNoteParam,e.ContourParam=r.ContourParam,e.ContourZValue=o.ContourZValue,e.ContourRegionInfo=s.ContourRegionInfo,e.MeshingParam=a.MeshingParam,e.NetAnalyse=l.NetAnalyse,e.NetAnalysisExtent=u.NetAnalysisExtent,e.SlopLineParam=c.SlopLineParam},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NetAnalyse=void 0;var n=i(6),r=i(21),o=function(t){var e=void 0!==t?t:{};(0,r.extend)(this,e),this.netCls=void 0!==e.netCls?e.netCls:null,this.flagPosStr=void 0!==e.flagPosStr?e.flagPosStr:null,this.barrierPosStr=void 0!==e.barrierPosStr?e.barrierPosStr:null,this.weight=void 0!==e.weight?e.weight:null,this.mode=void 0!==e.mode?e.mode:null,this.isTour=void 0!==e.isTour&&e.isTour,this.isTravel=void 0!==e.isTravel&&e.isTravel,this.usedTWgt=void 0!==e.usedTWgt&&e.usedTWgt,this.turnWgt=void 0!==e.turnWgt?e.turnWgt:null,this.roadName=void 0!==e.roadName?e.roadName:"name"};e.NetAnalyse=o,n.Zondy.Object.NetAnalyse=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NetAnalysisExtent=void 0;var n=d(i(75)),r=d(i(13)),o=d(i(8)),s=d(i(20)),a=d(i(16)),l=d(i(17)),u=i(6),c=(i(21),i(148)),h=i(67);function d(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t){(0,o.default)(this,e);var i=t||{},n=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,i));return n.netClsUrl=void 0!==i.netClsUrl?i.netClsUrl:null,n.flagPosStr=void 0!==i.flagPosStr?i.flagPosStr:null,n.analyTp=void 0!==i.analyTp?i.analyTp:"UserMode",n.weight=void 0!==i.weight?i.weight:",Weight1,Weight1",n.outFormat=void 0!==i.outFormat?i.outFormat:"JSON",n.elementType=void 0!==i.elementType?i.elementType:2,n.nearDis=void 0!==i.nearDis?i.nearDis:.001,n.barrierPosStr=void 0!==i.barrierPosStr?i.barrierPosStr:null,n.roadName=void 0!==i.roadName?i.roadName:"name",n.baseUrl="igs/rest/netAnaly",n}return(0,l.default)(e,t),(0,s.default)(e,[{key:"getNetInfo",value:function(t,e,i,n){null!=t&&void 0!=t||(t="weight"),this.partUrl="netClsInfo?netCls="+this.netClsUrl+"&type="+t;var r=this.getFullUrl();new h.IgsServiceBase(r,{eventListeners:{scope:this,processCompleted:e,processFailed:i}}).processAsync()}},{key:"addNetFlag",value:function(t,e,i,r,o){var s={};null!=r&&"POST"==r.toUpperCase()?(s.dotVal=t,this.partUrl="netClsFlag?netCls="+this.netClsUrl+"&type="+this.elementType+"&nearDis="+this.nearDis):this.partUrl="netClsFlag?netCls="+this.netClsUrl+"&type="+this.elementType+"&value="+t+"&nearDis="+this.nearDis;var a=this.getFullUrl(),l=new h.IgsServiceBase(a,{eventListeners:{scope:this,processCompleted:e,processFailed:i}});null!=r&&"POST"==r.toUpperCase()?l.processAsync({method:"POST",data:(0,n.default)(s),headers:{"Content-Type":"text/plain;charset=UTF-8"}}):l.processAsync()}},{key:"netAnalyse",value:function(t,e,i,r){this.partUrl="netAnalyse";var o=this.getFullUrl();new h.IgsServiceBase(o,{eventListeners:{scope:this,processCompleted:e,processFailed:i}}).processAsync({method:"POST",data:(0,n.default)(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"comNetAnalyse",value:function(t,e,i,r){this.partUrl="comNetAnalyse";var o=this.getFullUrl();new h.IgsServiceBase(o,{eventListeners:{scope:this,processCompleted:e,processFailed:i}}).processAsync({method:"POST",data:(0,n.default)(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"pluNetAnalyse",value:function(t,e,i,r){this.partUrl="pluNetAnalyse";var o=this.getFullUrl();new h.IgsServiceBase(o,{eventListeners:{scope:this,processCompleted:e,processFailed:i}}).processAsync({method:"POST",data:(0,n.default)(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]),e}(c.ServiceBase);e.NetAnalysisExtent=f,u.Zondy.Service.NetAnalysisExtent=f},function(t,e,i){i(380),i(375),i(379),i(569),i(580),i(581),t.exports=i(80).Promise},function(t,e,i){"use strict";var n,r,o,s,a=i(250),l=i(105),u=i(216),c=i(431),h=i(135),d=i(165),f=i(246),p=i(570),g=i(571),y=i(432),m=i(323).set,_=i(576)(),v=i(324),b=i(433),S=i(434),O=l.TypeError,C=l.process,x=l.Promise,T="process"==c(C),E=function(){},P=r=v.f,j=!!function(){try{var t=x.resolve(1),e=(t.constructor={})[i(106)("species")]=function(t){t(E,E)};return(T||"function"==typeof PromiseRejectionEvent)&&t.then(E)instanceof e}catch(t){}}(),w=function(t){var e;return!(!d(t)||"function"!=typeof(e=t.then))&&e},I=function(t,e){if(!t._n){t._n=!0;var i=t._c;_(function(){for(var n=t._v,r=1==t._s,o=0,s=function(e){var i,o,s=r?e.ok:e.fail,a=e.resolve,l=e.reject,u=e.domain;try{s?(r||(2==t._h&&A(t),t._h=1),!0===s?i=n:(u&&u.enter(),i=s(n),u&&u.exit()),i===e.promise?l(O("Promise-chain cycle")):(o=w(i))?o.call(i,a,l):a(i)):l(n)}catch(t){l(t)}};i.length>o;)s(i[o++]);t._c=[],t._n=!1,e&&!t._h&&L(t)})}},L=function(t){m.call(l,function(){var e,i,n,r=t._v,o=R(t);if(o&&(e=b(function(){T?C.emit("unhandledRejection",r,t):(i=l.onunhandledrejection)?i({promise:t,reason:r}):(n=l.console)&&n.error&&n.error("Unhandled promise rejection",r)}),t._h=T||R(t)?2:1),t._a=void 0,o&&e.e)throw e.v})},R=function(t){return 1!==t._h&&0===(t._a||t._c).length},A=function(t){m.call(l,function(){var e;T?C.emit("rejectionHandled",t):(e=l.onrejectionhandled)&&e({promise:t,reason:t._v})})},M=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),I(e,!0))},F=function(t){var e,i=this;if(!i._d){i._d=!0,i=i._w||i;try{if(i===t)throw O("Promise can't be resolved itself");(e=w(t))?_(function(){var n={_w:i,_d:!1};try{e.call(t,u(F,n,1),u(M,n,1))}catch(t){M.call(n,t)}}):(i._v=t,i._s=1,I(i,!1))}catch(t){M.call({_w:i,_d:!1},t)}}};j||(x=function(t){p(this,x,"Promise","_h"),f(t),n.call(this);try{t(u(F,this,1),u(M,this,1))}catch(t){M.call(this,t)}},(n=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=i(577)(x.prototype,{then:function(t,e){var i=P(y(this,x));return i.ok="function"!=typeof t||t,i.fail="function"==typeof e&&e,i.domain=T?C.domain:void 0,this._c.push(i),this._a&&this._a.push(i),this._s&&I(this,!1),i.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new n;this.promise=t,this.resolve=u(F,t,1),this.reject=u(M,t,1)},v.f=P=function(t){return t===x||t===s?new o(t):r(t)}),h(h.G+h.W+h.F*!j,{Promise:x}),i(249)(x,"Promise"),i(578)("Promise"),s=i(80).Promise,h(h.S+h.F*!j,"Promise",{reject:function(t){var e=P(this);return(0,e.reject)(t),e.promise}}),h(h.S+h.F*(a||!j),"Promise",{resolve:function(t){return S(a&&this===s?x:this,t)}}),h(h.S+h.F*!(j&&i(579)(function(t){x.all(t).catch(E)})),"Promise",{all:function(t){var e=this,i=P(e),n=i.resolve,r=i.reject,o=b(function(){var i=[],o=0,s=1;g(t,!1,function(t){var a=o++,l=!1;i.push(void 0),s++,e.resolve(t).then(function(t){l||(l=!0,i[a]=t,--s||n(i))},r)}),--s||n(i)});return o.e&&r(o.v),i.promise},race:function(t){var e=this,i=P(e),n=i.reject,r=b(function(){g(t,!1,function(t){e.resolve(t).then(i.resolve,n)})});return r.e&&n(r.v),i.promise}})},function(t,e){t.exports=function(t,e,i,n){if(!(t instanceof e)||void 0!==n&&n in t)throw TypeError(i+": incorrect invocation!");return t}},function(t,e,i){var n=i(216),r=i(572),o=i(573),s=i(146),a=i(369),l=i(574),u={},c={};(e=t.exports=function(t,e,i,h,d){var f,p,g,y,m=d?function(){return t}:l(t),_=n(i,h,e?2:1),v=0;if("function"!=typeof m)throw TypeError(t+" is not iterable!");if(o(m)){for(f=a(t.length);f>v;v++)if((y=e?_(s(p=t[v])[0],p[1]):_(t[v]))===u||y===c)return y}else for(g=m.call(t);!(p=g.next()).done;)if((y=r(g,_,p.value,e))===u||y===c)return y}).BREAK=u,e.RETURN=c},function(t,e,i){var n=i(146);t.exports=function(t,e,i,r){try{return r?e(n(i)[0],i[1]):e(i)}catch(e){var o=t.return;throw void 0!==o&&n(o.call(t)),e}}},function(t,e,i){var n=i(219),r=i(106)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(n.Array===t||o[r]===t)}},function(t,e,i){var n=i(431),r=i(106)("iterator"),o=i(219);t.exports=i(80).getIteratorMethod=function(t){if(void 0!=t)return t[r]||t["@@iterator"]||o[n(t)]}},function(t,e){t.exports=function(t,e,i){var n=void 0===i;switch(e.length){case 0:return n?t():t.call(i);case 1:return n?t(e[0]):t.call(i,e[0]);case 2:return n?t(e[0],e[1]):t.call(i,e[0],e[1]);case 3:return n?t(e[0],e[1],e[2]):t.call(i,e[0],e[1],e[2]);case 4:return n?t(e[0],e[1],e[2],e[3]):t.call(i,e[0],e[1],e[2],e[3])}return t.apply(i,e)}},function(t,e,i){var n=i(105),r=i(323).set,o=n.MutationObserver||n.WebKitMutationObserver,s=n.process,a=n.Promise,l="process"==i(218)(s);t.exports=function(){var t,e,i,u=function(){var n,r;for(l&&(n=s.domain)&&n.exit();t;){r=t.fn,t=t.next;try{r()}catch(n){throw t?i():e=void 0,n}}e=void 0,n&&n.enter()};if(l)i=function(){s.nextTick(u)};else if(!o||n.navigator&&n.navigator.standalone)if(a&&a.resolve){var c=a.resolve();i=function(){c.then(u)}}else i=function(){r.call(n,u)};else{var h=!0,d=document.createTextNode("");new o(u).observe(d,{characterData:!0}),i=function(){d.data=h=!h}}return function(n){var r={fn:n,next:void 0};e&&(e.next=r),t||(t=r,i()),e=r}}},function(t,e,i){var n=i(180);t.exports=function(t,e,i){for(var r in e)i&&t[r]?t[r]=e[r]:n(t,r,e[r]);return t}},function(t,e,i){"use strict";var n=i(105),r=i(80),o=i(164),s=i(166),a=i(106)("species");t.exports=function(t){var e="function"==typeof r[t]?r[t]:n[t];s&&e&&!e[a]&&o.f(e,a,{configurable:!0,get:function(){return this}})}},function(t,e,i){var n=i(106)("iterator"),r=!1;try{var o=[7][n]();o.return=function(){r=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!r)return!1;var i=!1;try{var o=[7],s=o[n]();s.next=function(){return{done:i=!0}},o[n]=function(){return s},t(o)}catch(t){}return i}},function(t,e,i){"use strict";var n=i(135),r=i(80),o=i(105),s=i(432),a=i(434);n(n.P+n.R,"Promise",{finally:function(t){var e=s(this,r.Promise||o.Promise),i="function"==typeof t;return this.then(i?function(i){return a(e,t()).then(function(){return i})}:t,i?function(i){return a(e,t()).then(function(){throw i})}:t)}})},function(t,e,i){"use strict";var n=i(135),r=i(324),o=i(433);n(n.S,"Promise",{try:function(t){var e=r.f(this),i=o(t);return(i.e?e.reject:e.resolve)(i.v),e.promise}})},function(t,e,i){"use strict";var n,r=i(583),o=(n=r)&&n.__esModule?n:{default:n};window.Promise=o.default},function(t,e,i){"use strict";var n,r,o,s=l(i(584)),a=l(i(136));function l(t){return t&&t.__esModule?t:{default:t}}o=function(){var t=setTimeout;function e(){}function i(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,u._immediateFn(function(){var i=1===t._state?e.onFulfilled:e.onRejected;if(null!==i){var o;try{o=i(t._value)}catch(t){return void r(e.promise,t)}n(e.promise,o)}else(1===t._state?n:r)(e.promise,t._value)})):t._deferreds.push(e)}function n(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"===(void 0===e?"undefined":(0,a.default)(e))||"function"==typeof e)){var i=e.then;if(e instanceof u)return t._state=3,t._value=e,void o(t);if("function"==typeof i)return void l((n=i,s=e,function(){n.apply(s,arguments)}),t)}t._state=1,t._value=e,o(t)}catch(e){r(t,e)}var n,s}function r(t,e){t._state=2,t._value=e,o(t)}function o(t){2===t._state&&0===t._deferreds.length&&u._immediateFn(function(){t._handled||u._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;e<n;e++)i(t,t._deferreds[e]);t._deferreds=null}function l(t,e){var i=!1;try{t(function(t){i||(i=!0,n(e,t))},function(t){i||(i=!0,r(e,t))})}catch(t){if(i)return;i=!0,r(e,t)}}function u(t){if(!(this instanceof u))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(t,this)}var c=u.prototype;return c.catch=function(t){return this.then(null,t)},c.then=function(t,n){var r=new this.constructor(e);return i(this,new function(t,e,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=i}(t,n,r)),r},u.all=function(t){return new u(function(e,i){if(!t||void 0===t.length)throw new TypeError("Promise.all accepts an array");var n=Array.prototype.slice.call(t);if(0===n.length)return e([]);var r=n.length;function o(t,s){try{if(s&&("object"===(void 0===s?"undefined":(0,a.default)(s))||"function"==typeof s)){var l=s.then;if("function"==typeof l)return void l.call(s,function(e){o(t,e)},i)}n[t]=s,0==--r&&e(n)}catch(t){i(t)}}for(var s=0;s<n.length;s++)o(s,n[s])})},u.resolve=function(t){return t&&"object"===(void 0===t?"undefined":(0,a.default)(t))&&t.constructor===u?t:new u(function(e){e(t)})},u.reject=function(t){return new u(function(e,i){i(t)})},u.race=function(t){return new u(function(e,i){for(var n=0,r=t.length;n<r;n++)t[n].then(e,i)})},u._immediateFn="function"==typeof s.default&&function(t){(0,s.default)(t)}||function(e){t(e,0)},u._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},u},"object"===(0,a.default)(e)&&void 0!==t?t.exports=o():void 0===(r="function"==typeof(n=o)?n.call(e,i,e,t):n)||(t.exports=r)},function(t,e,i){t.exports={default:i(585),__esModule:!0}},function(t,e,i){i(586),t.exports=i(80).setImmediate},function(t,e,i){var n=i(135),r=i(323);n(n.G+n.B,{setImmediate:r.set,clearImmediate:r.clear})},function(t,e,i){"use strict";var n=o(i(430)),r=o(i(374));function o(t){return t&&t.__esModule?t:{default:t}}!function(e){if(e.__disableNativeFetch||!e.fetch){u.prototype.append=function(t,e){t=a(t),e=l(e);var i=this.map[t];i||(i=[],this.map[t]=i),i.push(e)},u.prototype.delete=function(t){delete this.map[a(t)]},u.prototype.get=function(t){var e=this.map[a(t)];return e?e[0]:null},u.prototype.getAll=function(t){return this.map[a(t)]||[]},u.prototype.has=function(t){return this.map.hasOwnProperty(a(t))},u.prototype.set=function(t,e){this.map[a(t)]=[l(e)]},u.prototype.forEach=function(t,e){(0,r.default)(this.map).forEach(function(i){this.map[i].forEach(function(n){t.call(e,n,i,this)},this)},this)};var i={blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e},o=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];p.prototype.clone=function(){return new p(this)},f.call(p.prototype),f.call(y.prototype),y.prototype.clone=function(){return new y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new u(this.headers),url:this.url})},y.error=function(){var t=new y(null,{status:0,statusText:""});return t.type="error",t};var s=[301,302,303,307,308];y.redirect=function(t,e){if(-1===s.indexOf(e))throw new RangeError("Invalid status code");return new y(null,{status:e,headers:{location:t}})},e.Headers=u,e.Request=p,e.Response=y,e.fetch=function(t,e){return new n.default(function(n,r){var o;o=p.prototype.isPrototypeOf(t)&&!e?t:new p(t,e);var s=new XMLHttpRequest;var a=!1;function l(){if(4===s.readyState){var t=1223===s.status?204:s.status;if(t<100||t>599){if(a)return;return a=!0,void r(new TypeError("Network request failed"))}var e={status:t,statusText:s.statusText,headers:function(t){var e=new u;return t.getAllResponseHeaders().trim().split("\n").forEach(function(t){var i=t.trim().split(":"),n=i.shift().trim(),r=i.join(":").trim();e.append(n,r)}),e}(s),url:"responseURL"in s?s.responseURL:/^X-Request-URL:/m.test(s.getAllResponseHeaders())?s.getResponseHeader("X-Request-URL"):void 0},i="response"in s?s.response:s.responseText;a||(a=!0,n(new y(i,e)))}}s.onreadystatechange=l,s.onload=l,s.onerror=function(){a||(a=!0,r(new TypeError("Network request failed")))},s.open(o.method,o.url,!0);try{"include"===o.credentials&&("withCredentials"in s?s.withCredentials=!0:console&&console.warn&&console.warn("withCredentials is not supported, you can ignore this warning"))}catch(t){console&&console.warn&&console.warn("set withCredentials error:"+t)}"responseType"in s&&i.blob&&(s.responseType="blob"),o.headers.forEach(function(t,e){s.setRequestHeader(e,t)}),s.send(void 0===o._bodyInit?null:o._bodyInit)})},e.fetch.polyfill=!0,void 0!==t&&t.exports&&(t.exports=e.fetch)}function a(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function l(t){return"string"!=typeof t&&(t=String(t)),t}function u(t){this.map={},t instanceof u?t.forEach(function(t,e){this.append(e,t)},this):t&&(0,r.default)(t).forEach(function(e){this.append(e,t[e])},this)}function c(t){if(t.bodyUsed)return n.default.reject(new TypeError("Already read"));t.bodyUsed=!0}function h(t){return new n.default(function(e,i){t.onload=function(){e(t.result)},t.onerror=function(){i(t.error)}})}function d(t){var e=new FileReader;return e.readAsArrayBuffer(t),h(e)}function f(){return this.bodyUsed=!1,this._initBody=function(t,e){if(this._bodyInit=t,"string"==typeof t)this._bodyText=t;else if(i.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t,this._options=e;else if(i.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(t){if(!i.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t))throw new Error("unsupported BodyInit type")}else this._bodyText=""},i.blob?(this.blob=function(){var t=c(this);if(t)return t;if(this._bodyBlob)return n.default.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return n.default.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(d)},this.text=function(){var t,e,i,r,o,s,a,l=c(this);if(l)return l;if(this._bodyBlob)return t=this._bodyBlob,e=this._options,i=new FileReader,r=e.headers.map["content-type"]?e.headers.map["content-type"].toString():"",o=/charset\=[0-9a-zA-Z\-\_]*;?/,s=t.type.match(o)||r.match(o),a=[t],s&&a.push(s[0].replace(/^charset\=/,"").replace(/;$/,"")),i.readAsText.apply(i,a),h(i);if(this._bodyFormData)throw new Error("could not read FormData body as text");return n.default.resolve(this._bodyText)}):this.text=function(){var t=c(this);return t||n.default.resolve(this._bodyText)},i.formData&&(this.formData=function(){return this.text().then(g)}),this.json=function(){return this.text().then(JSON.parse)},this}function p(t,e){var i,n,r=(e=e||{}).body;if(p.prototype.isPrototypeOf(t)){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new u(t.headers)),this.method=t.method,this.mode=t.mode,r||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=t;if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new u(e.headers)),this.method=(i=e.method||this.method||"GET",n=i.toUpperCase(),o.indexOf(n)>-1?n:i),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r,e)}function g(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var i=t.split("="),n=i.shift().replace(/\+/g," "),r=i.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(r))}}),e}function y(t,e){e||(e={}),this._initBody(t,e),this.type="default",this.status=e.status,this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText,this.headers=e.headers instanceof u?e.headers:new u(e.headers),this.url=e.url||""}}("undefined"!=typeof self?self:void 0)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.JSONFormat=e.IgsServiceBase=e.FetchRequest=e.RequestTimeout=e.CORS=e.Events=e.CommonServiceBase=void 0;var n=i(426),r=i(427),o=i(429),s=i(67),a=i(428);e.CommonServiceBase=n.CommonServiceBase,e.Events=r.Events,e.CORS=o.CORS,e.RequestTimeout=o.RequestTimeout,e.FetchRequest=o.FetchRequest,e.IgsServiceBase=s.IgsServiceBase,e.JSONFormat=a.JSONFormat},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VectorLayer=e.TileLayer=e.CatalogService=e.MapDoc=e.GDBInfo=e.ColorInfo=void 0;var n=i(590),r=i(435),o=i(591),s=i(222),a=i(592),l=i(593);e.ColorInfo=n.ColorInfo,e.GDBInfo=r.GDBInfo,e.MapDoc=o.MapDoc,e.CatalogService=s.CatalogService,e.TileLayer=a.TileLayer,e.VectorLayer=l.VectorLayer},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ColorInfo=void 0;var n=c(i(13)),r=c(i(8)),o=c(i(20)),s=c(i(16)),a=c(i(17)),l=i(222),u=i(67);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){(0,r.default)(this,e);var i=t||{},o=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,i));return o.SystemLibID=void 0!==i.SystemLibID?i.SystemLibID:0,o.ColorNO=void 0!==i.ColorNO?i.ColorNO:6,o.Red=void 0!==i.Red?i.Red:0,o.Green=void 0!==i.Green?i.Green:0,o.Blue=void 0!==i.Blue?i.Blue:0,o.addNew=void 0!==i.addNew&&i.BladdNewue,o}return(0,a.default)(e,t),(0,o.default)(e,[{key:"getColorNO",value:function(t,e,i){var n=this;null!=t&&void 0!==t&&(void 0!==t.SystemLibID&&(n.SystemLibID=t.SystemLibID),void 0!==t.Red&&(n.Red=t.Red),void 0!==t.Green&&(n.Green=t.Green),void 0!==t.Blue&&(n.Blue=t.Blue),void 0!==t.addNew&&(n.addNew=t.addNew)),n.partUrl="ColorLib/getColorNO?f=json&libID="+n.SystemLibID+"&r="+n.Red+"&g="+n.Green+"&b="+n.Blue+"&addNew="+n.addNew;var r=n.getFullUrl();new u.IgsServiceBase(r,{eventListeners:{scope:n,processCompleted:e,processFailed:i}}).processAsync()}},{key:"getColorRGB",value:function(t,e,i){var n=this;null!=t&&void 0!==t&&(void 0!==t.SystemLibID&&(n.SystemLibID=t.SystemLibID),void 0!==t.ColorNO&&(n.ColorNO=t.ColorNO)),n.partUrl="ColorLib/getColorRGB?f=json&libID="+n.SystemLibID+"&colorNO="+n.ColorNO;var r=n.getFullUrl();new u.IgsServiceBase(r,{eventListeners:{scope:n,processCompleted:e,processFailed:i}}).processAsync()}}]),e}(l.CatalogService);e.ColorInfo=h,Zondy.Catalog.ColorInfo=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapDoc=void 0;var n=f(i(75)),r=f(i(13)),o=f(i(8)),s=f(i(20)),a=f(i(16)),l=f(i(17)),u=i(6),c=i(21),h=i(222),d=i(67);function f(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function e(t){(0,o.default)(this,e);var i=t||{},n=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,i));return n.docName=void 0!==i.docName?i.docName:null,n.mapIndex=void 0!==i.mapIndex?i.mapIndex:0,n.layerID=void 0!==i.layerID?i.layerID:0,n.version=void 0!==i.version?i.version:2,n.include=void 0!==i.include?i.include:"{includeDetails:true,includeSubs:false}",n.returnFullStyle=void 0!==i.returnFullStyle&&i.returnFullStyle,n.guid=void 0!==i.guid?i.guid:(0,c.newGuid)(),n}return(0,l.default)(e,t),(0,s.default)(e,[{key:"getMapDocList",value:function(t,e){this.partUrl="docs?v="+this.version+"&f=json";var i=this.getFullUrl();new d.IgsServiceBase(i,{eventListeners:{scope:this,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getMapDocInfo",value:function(t,e,i,n,r){var o=this;if("boolean"==typeof r&&(o.returnFullStyle=r),"boolean"==typeof e||"boolean"==typeof subs){var s={includeDetails:"boolean"!=typeof e||e,includeSubs:"boolean"==typeof subs&&subs};o.include=(0,c.toJSON)(s)}o.partUrl="docs/"+o.docName+"?include="+o.include+"&returnFullStyle="+o.returnFullStyle+"&guid="+o.guid+"&f=json";var a=o.getFullUrl();new d.IgsServiceBase(a,{eventListeners:{scope:o,processCompleted:t,processFailed:n}}).processAsync()}},{key:"getMapInfo",value:function(t,e,i,n){var r=this;"boolean"==typeof e&&(r.returnFullStyle=e),r.partUrl="docs/"+r.docName+"/"+r.mapIndex+"?returnFullStyle="+r.returnFullStyle+"&guid="+r.guid+"&f=json";var o=r.getFullUrl();new d.IgsServiceBase(o,{eventListeners:{scope:r,processCompleted:t,processFailed:n}}).processAsync()}},{key:"getLayerInfo",value:function(t,e){var i=this;i.partUrl="docs/"+i.docName+"/"+i.mapIndex+"/"+i.layerID+"?returnFullStyle="+i.returnFullStyle+"&guid="+i.guid+"&f=json";var n=i.getFullUrl();new d.IgsServiceBase(n,{eventListeners:{scope:i,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getLayersInfo",value:function(t,e){var i=this;i.partUrl="docs/"+i.docName+"/"+i.mapIndex+"/layers?f=json";var n=i.getFullUrl();new d.IgsServiceBase(n,{eventListeners:{scope:i,processCompleted:t,processFailed:e}}).processAsync()}},{key:"deleteLayer",value:function(t,e){var i=this;i.partUrl="docs/"+i.docName+"/"+i.mapIndex+"/layers/delete?layerIDs="+i.layerID+"&guid="+i.guid+"&f=json";var n=i.getFullUrl();new d.IgsServiceBase(n,{eventListeners:{scope:i,processCompleted:t,processFailed:e}}).processAsync()}},{key:"addLayer",value:function(t,e,i){var r=this;r.partUrl="docs/"+r.docName+"/"+r.mapIndex+"/layers/add?guid="+r.guid+"&f=json";var o=r.getFullUrl();new d.IgsServiceBase(o,{eventListeners:{scope:r,processCompleted:e,processFailed:i}}).processAsync({method:"POST",data:(0,n.default)(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"changeIndex",value:function(t,e,i){var r=this;r.partUrl="docs/"+r.docName+"/"+r.mapIndex+"/layers/index?guid="+r.guid+"&f=json";var o=r.getFullUrl();new d.IgsServiceBase(o,{eventListeners:{scope:r,processCompleted:e,processFailed:i}}).processAsync({method:"POST",data:(0,n.default)(t),header:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"getLegendInfo",value:function(t,e,i,n){this.partUrl="legendInfo/"+this.docName+"?f=json&layerIndexes="+t+"&fields="+e;var r=this.getFullUrl();new d.IgsServiceBase(r,{eventListeners:{scope:this,processCompleted:i,processFailed:n}}).processAsync()}}]),e}(h.CatalogService);e.MapDoc=p,u.Zondy.Catalog.MapDoc=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TileLayer=void 0;var n=c(i(13)),r=c(i(8)),o=c(i(20)),s=c(i(16)),a=c(i(17)),l=i(222),u=i(67);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){(0,r.default)(this,e);var i=t||{},o=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,i));return o.tileName=void 0!==i.tileName?i.tileName:null,o.version=void 0!==i.version?i.version:"2.0",o}return(0,a.default)(e,t),(0,o.default)(e,[{key:"getTileList",value:function(t,e){var i=this;i.partUrl="tiles?f=json",this.version&&("2.0"==i.version?i.partUrl+="&v=2":i.partUrl+="&v="+i.version);var n=i.getFullUrl();new u.IgsServiceBase(n,{eventListeners:{scope:i,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getTileInfo",value:function(t,e){var i=this;i.partUrl="tiles/"+i.tileName+"?f=json",i.version&&(i.partUrl+="&v="+i.version);var n=i.getFullUrl();new u.IgsServiceBase(n,{eventListeners:{scope:i,processCompleted:t,processFailed:e}}).processAsync()}}]),e}(l.CatalogService);e.TileLayer=h,Zondy.Catalog.TileLayer=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VectorLayer=void 0;var n=f(i(75)),r=f(i(13)),o=f(i(8)),s=f(i(20)),a=f(i(16)),l=f(i(17)),u=i(21),c=i(435),h=i(67),d=(i(419),i(259));function f(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function e(t){(0,o.default)(this,e);var i=t||{};return(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,i))}return(0,l.default)(e,t),(0,s.default)(e,[{key:"getSfclsList",value:function(t,e){var i=this;"mapgislocal"==i.serverName.toLowerCase()?i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/sfcls?containAll="+i.containAll+"&f=json":i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/sfcls?user="+i.User+"&psw="+i.Password+"&containAll="+this.containAll+"&f=json";var n=i.getFullUrl();new h.IgsServiceBase(n,{eventListeners:{scope:i,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getAclsList",value:function(t,e){var i=this;"mapgislocal"==i.serverName.toLowerCase()?i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/acls?containAll="+i.containAll+"&f=json":i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/acls?user="+i.User+"&psw="+i.Password+"&containAll="+i.containAll+"&f=json";var n=i.getFullUrl();new h.IgsServiceBase(n,{eventListeners:{scope:i,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getOclsList",value:function(t,e){var i=this;"mapgislocal"==i.serverName.toLowerCase()?i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/ocls?containAll="+i.containAll+"&f=json":i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/ocls?user="+i.User+"&psw="+i.Password+"&containAll="+i.containAll+"&f=json";var n=i.getFullUrl();new h.IgsServiceBase(n,{eventListeners:{scope:i,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getNclsList",value:function(t,e){var i=this;"mapgislocal"==i.serverName.toLowerCase()?i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/ncls?containAll="+i.containAll+"&f=json":i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/ncls?user="+thmeis.User+"&psw="+i.Password+"&containAll="+i.containAll+"&f=json";var n=i.getFullUrl();new h.IgsServiceBase(n,{eventListeners:{scope:i,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getRdsList",value:function(t,e){var i=this;"mapgislocal"==i.serverName.toLowerCase()?i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/rds?containAll="+i.containAll+"&f=json":i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/rds?user="+i.User+"&psw="+i.Password+"&containAll="+i.containAll+"&f=json";var n=i.getFullUrl();new h.IgsServiceBase(n,{eventListeners:{scope:i,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getDsSfclsList",value:function(t,e){var i=this;"mapgislocal"==i.serverName.toLowerCase()?i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/"+i.dsName+"/sfcls?f=json":i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/"+i.dsName+"/sfcls?user="+i.User+"&psw="+i.Password+"&f=json";var n=i.getFullUrl();new h.IgsServiceBase(n,{eventListeners:{scope:i,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getDsAclsList",value:function(t,e){var i=this;"mapgislocal"==i.serverName.toLowerCase()?i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/"+i.dsName+"/acls?f=json":i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/"+i.dsName+"/acls?user="+i.User+"&psw="+i.Password+"&f=json";var n=i.getFullUrl();new h.IgsServiceBase(n,{eventListeners:{scope:i,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getDsOclsList",value:function(t,e){var i=this;"mapgislocal"==i.serverName.toLowerCase()?i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/"+i.dsName+"/ocls?f=json":i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/"+i.dsName+"/ocls?user="+i.User+"&psw="+i.Password+"&f=json";var n=i.getFullUrl();new h.IgsServiceBase(n,{eventListeners:{scope:i,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getDsNclsList",value:function(t,e){var i=this;"mapgislocal"==i.serverName.toLowerCase()?i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/"+i.dsName+"/ncls?f=json":i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/"+i.dsName+"/ncls?user="+i.User+"&psw="+i.Password+"&f=json";var n=i.getFullUrl();new h.IgsServiceBase(n,{eventListeners:{scope:i,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getRdsListInRcs",value:function(t,e){var i=this;"mapgislocal"==i.serverName.toLowerCase()?i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/"+i.rcsName+"/rds?f=json":i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/"+i.rcsName+"/rds?user="+i.User+"&psw="+i.Password+"&f=json";var n=i.getFullUrl();new h.IgsServiceBase(n,{eventListeners:{scope:i,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getLayerList",value:function(t,e,i){var n=this;"mapgislocal"==n.serverName.toLowerCase()?n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+t+"?containAll="+n.containAll+"&f=json":n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+t+"?user="+n.User+"&psw="+n.Password+"&containAll="+n.containAll+"&f=json";var r=n.getFullUrl();new h.IgsServiceBase(r,{eventListeners:{scope:n,processCompleted:e,processFailed:i}}).processAsync()}},{key:"getLayerListInDS",value:function(t,e,i){var n=this;"mapgislocal"==n.serverName.toLowerCase()?n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.dsName+"/"+t+"?f=json":n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+n.dsName+"/"+t+"?user="+n.User+"&psw="+n.Password+"&f=json";var r=n.getFullUrl();new h.IgsServiceBase(r,{eventListeners:{scope:n,processCompleted:e,processFailed:i}}).processAsync()}},{key:"getLayerInfo",value:function(t,e,i){this.partUrl="layerinfo?gdbpUrl="+t+"&f=json";var n=this.getFullUrl();new h.IgsServiceBase(n,{eventListeners:{scope:this,processCompleted:e,processFailed:i}}).processAsync()}},{key:"CreateVectCls",value:function(t,e,i){var r=this;if(null!=(t=null!=t?t:null)&&null!=r.serverName&&null!=r.gdbName){null!=r.User&&null!=r.Password?r.partUrl="datasource/"+r.User+":"+r.Password+"@":r.partUrl="datasource/",null==t.clsName&&(t.clsName=(0,u.newGuid)()),r.partUrl+=r.serverName+"/"+r.gdbName+"/"+t.clsType+"/"+t.clsName+"/create?geoType="+t.geoType+"&srefName="+t.srefName+"&dsName="+t.dsName+"&f=json",null==t.attStruct&&(t.attStruct=new d.CAttStruct);var o=r.getFullUrl();new h.IgsServiceBase(o,{eventListeners:{scope:r,processCompleted:e,processFailed:i}}).processAsync({method:"POST",data:(0,n.default)(t.attStruct),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}},{key:"deleteXCls",value:function(t,e,i,n){var r=this;if(null!=r.serverName&&null!=r.gdbName&&null!=t&&null!=e){r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/"+t+"/"+e+"/delete?f=json";var o=r.getFullUrl();new h.IgsServiceBase(o,{eventListeners:{scope:r,processCompleted:i,processFailed:n}}).processAsync()}}}]),e}(c.GDBInfo);e.VectorLayer=p,Zondy.Catalog.VectorLayer=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryServiceBase=e.QueryParameterBase=e.QueryParameter=e.QueryLayerFeature=e.QueryFeatureStruct=e.QueryFeatureRule=e.QueryDocFeature=e.QueryByLayerParameter=e.ObjClsQueryParameter=e.ObjClsQuery=e.MultiGeoQueryParameter=e.MultiGeoQuery=e.EditServiceBase=e.EditLayerFeature=e.EditDocFeature=void 0;var n=i(595),r=i(596),o=i(325),s=i(597),a=i(438),l=i(598),u=i(439),c=i(599),h=i(600),d=i(437),f=i(326),p=i(601),g=i(261),y=i(436),m=i(223);e.EditDocFeature=n.EditDocFeature,e.EditLayerFeature=r.EditLayerFeature,e.EditServiceBase=o.EditServiceBase,e.MultiGeoQuery=s.MultiGeoQuery,e.MultiGeoQueryParameter=a.MultiGeoQueryParameter,e.ObjClsQuery=l.ObjClsQuery,e.ObjClsQueryParameter=u.ObjClsQueryParameter,e.QueryByLayerParameter=c.QueryByLayerParameter,e.QueryDocFeature=h.QueryDocFeature,e.QueryFeatureRule=d.QueryFeatureRule,e.QueryFeatureStruct=f.QueryFeatureStruct,e.QueryLayerFeature=p.QueryLayerFeature,e.QueryParameter=g.QueryParameter,e.QueryParameterBase=y.QueryParameterBase,e.QueryServiceBase=m.QueryServiceBase},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EditDocFeature=void 0;var n=d(i(75)),r=d(i(13)),o=d(i(8)),s=d(i(20)),a=d(i(16)),l=d(i(17)),u=i(6),c=i(325),h=i(67);i(184);function d(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t,i,n){(0,o.default)(this,e);var s=n||{},l=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,s));return l.docName=void 0!==t?t:null,l.mapIndex=0,l.layerIndex=void 0!==i?i:0,l}return(0,l.default)(e,t),(0,s.default)(e,[{key:"add",value:function(t,e,i){var r=this;if(void 0!==t){r.partUrl="docs/"+r.docName+"/"+r.mapIndex+"/"+r.layerIndex+"/addFeatures?f="+r.f+"&guid="+r.guid;var o=r.getFullUrl();new h.IgsServiceBase(o,{eventListeners:{scope:r,processCompleted:e,processFailed:i}}).processAsync({method:"POST",data:(0,n.default)(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}},{key:"update",value:function(t,e,i){var r=this;if(void 0!==t){r.partUrl="docs/"+r.docName+"/"+r.mapIndex+"/"+r.layerIndex+"/updateFeatures?f="+r.f+"&guid="+r.guid;var o=r.getFullUrl();new h.IgsServiceBase(o,{eventListeners:{scope:r,processCompleted:e,processFailed:i}}).processAsync({method:"POST",data:(0,n.default)(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}},{key:"deletes",value:function(t,e,i){var n=this;if(void 0!==t){n.partUrl="docs/"+n.docName+"/"+n.mapIndex+"/"+n.layerIndex+"/deleteFeatures?f="+n.f+"&objectIds="+t+"&guid="+n.guid;var r=n.getFullUrl();new h.IgsServiceBase(r,{eventListeners:{scope:n,processCompleted:e,processFailed:i}}).processAsync()}}}]),e}(c.EditServiceBase);e.EditDocFeature=f,u.Zondy.Service.EditDocFeature=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EditLayerFeature=void 0;var n=d(i(75)),r=d(i(13)),o=d(i(8)),s=d(i(20)),a=d(i(16)),l=d(i(17)),u=i(6),c=i(325),h=i(67);i(184);function d(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t,i){(0,o.default)(this,e);var n=i||{},s=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,n));return s.gdbp=void 0!==t?t:null,s}return(0,l.default)(e,t),(0,s.default)(e,[{key:"add",value:function(t,e,i){var r=this;if(void 0!==t){r.partUrl="layer/addFeatures?f="+r.f+"&gdbp="+r.gdbp+"&guid="+r.guid;var o=r.getFullUrl();new h.IgsServiceBase(o,{eventListeners:{scope:r,processCompleted:e,processFailed:i}}).processAsync({method:"POST",data:(0,n.default)(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}},{key:"update",value:function(t,e,i,r){var o=this;if(void 0!==t){o.partUrl="layer/updateFeatures?f="+o.f+"&gdbp="+o.gdbp+"&guid="+o.guid;var s=o.getFullUrl();new h.IgsServiceBase(s,{eventListeners:{scope:o,processCompleted:e,processFailed:i}}).processAsync({method:"POST",data:(0,n.default)(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}},{key:"deletes",value:function(t,e,i,n){var r=this;if(void 0!==t){r.partUrl="layer/deleteFeatures?f="+r.f+"&objectIds="+t+"&gdbp="+r.gdbp+"&guid="+r.guid;var o=r.getFullUrl();new h.IgsServiceBase(o,{eventListeners:{scope:r,processCompleted:e,processFailed:i}}).processAsync()}}}]),e}(c.EditServiceBase);e.EditLayerFeature=f,u.Zondy.Service.EditLayerFeature=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MultiGeoQuery=void 0;var n=p(i(75)),r=p(i(13)),o=p(i(8)),s=p(i(20)),a=p(i(16)),l=p(i(17)),u=i(6),c=(i(21),i(184)),h=i(223),d=i(438),f=i(67);function p(t){return t&&t.__esModule?t:{default:t}}var g=function(t){function e(t,i,n,s){(0,o.default)(this,e);var l=s||{},u=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,l));return u.queryParam=t,u.mapName=i,u.mapIndex=0,u.layerIndex=n,u.baseUrl="igs/rest/extend/MultiGeo",u.partUrl="docs/"+u.mapName+"/"+u.mapIndex.toString()+"/"+u.layerIndex+"/Geoquery",u.partUrl+=t.getParameterURL(),u}return(0,l.default)(e,t),(0,s.default)(e,[{key:"processResult",value:function(t){var e=null;if(null!=t.result.ItemArray&&t.result.ItemArray.length>0)for(var i=0;i<t.result.ItemArray.length;i++)null==e&&(e=new c.FeatureSet);this.resultCallBack(e)}},{key:"query",value:function(t,e,i){if(null!=this.queryParam&&this.queryParam instanceof d.MultiGeoQueryParameter){var r=null;"point"==this.queryParam.geometryType?r={pointArr:this.queryParam.geometry}:"line"==this.queryParam.geometryType?r={lineArr:this.queryParam.geometry}:"polygon"==this.queryParam.geometryType&&(r={PolygonObjs:this.queryParam.geometry});var o=this.getFullUrl();new f.IgsServiceBase(o,{eventListeners:{scope:this,processCompleted:t,processFailed:e}}).processAsync({method:"POST",data:(0,n.default)(r),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}}]),e}(h.QueryServiceBase);e.MultiGeoQuery=g,u.Zondy.Service.MultiGeoQuery=g},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ObjClsQuery=void 0;var n=d(i(13)),r=d(i(8)),o=d(i(20)),s=d(i(16)),a=d(i(17)),l=i(6),u=i(223),c=i(439),h=i(67);function d(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t,i,o){(0,r.default)(this,e);var a=o||{},l=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,a));return l.queryParam=t,l.gdbp=i,l.baseUrl="igs/rest/extend/dxlcz",l.partUrl="objlayer/query?gdbp="+i,l.partUrl+=t.getParameterURL(),l}return(0,a.default)(e,t),(0,o.default)(e,[{key:"query",value:function(t,e,i){if(null!=this.queryParam&&this.queryParam instanceof c.ObjClsQueryParameter){var n=this.getFullUrl();new h.IgsServiceBase(n,{eventListeners:{scope:this,processCompleted:t,processFailed:e}}).processAsync()}}}]),e}(u.QueryServiceBase);e.ObjClsQuery=f,l.Zondy.Service.ObjClsQuery=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryByLayerParameter=void 0;var n=h(i(13)),r=h(i(8)),o=h(i(20)),s=h(i(16)),a=h(i(46)),l=h(i(17)),u=i(6),c=i(261);i(326);function h(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(t,i){(0,r.default)(this,e);var o=i||{},a=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,o));return a.gdbp=void 0!==t?encodeURI(t):null,a}return(0,l.default)(e,t),(0,o.default)(e,[{key:"getParameterURL",value:function(){return(0,a.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"getParameterURL",this).call(this)+"&gdbp="+this.gdbp}},{key:"getParameterObject",value:function(){var t=(0,a.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"getParameterObject",this).call(this,this);return t.gdbp=this.gdbp,t}}]),e}(c.QueryParameter);e.QueryByLayerParameter=d,u.Zondy.Service.QueryByLayerParameter=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryDocFeature=void 0;var n=u(i(13)),r=u(i(8)),o=u(i(16)),s=u(i(17)),a=i(6),l=i(223);i(261);function u(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function e(t,i,s,a){(0,r.default)(this,e);var l=a||{},u=(0,o.default)(this,(e.__proto__||(0,n.default)(e)).call(this,l));return u.queryParam=t,u.docName=i,u.layerIndex=s,u.mapIndex=0,u.partUrl="docs/"+u.docName+"/"+u.mapIndex.toString()+"/"+u.layerIndex.toString()+"/query",u}return(0,s.default)(e,t),e}(l.QueryServiceBase);e.QueryDocFeature=c,a.Zondy.Service.QueryDocFeature=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryLayerFeature=void 0;var n=l(i(13)),r=l(i(8)),o=l(i(16)),s=l(i(17)),a=i(6);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t,i){(0,r.default)(this,e);var s=i||{},a=(0,o.default)(this,(e.__proto__||(0,n.default)(e)).call(this,s));return a.queryParam=t,a.partUrl="layer/query",a}return(0,s.default)(e,t),e}(i(223).QueryServiceBase);e.QueryLayerFeature=u,a.Zondy.Service.QueryLayerFeature=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProjectBySRID=e.ProjectByLayer=e.ProjectBase=e.OverlayByPolygon=e.OverlayByLayer=e.OverlayBase=e.NetAnalysis=e.FeatureBuffBySingleRing=e.FeatureBuffByMultiplyRing=e.FeatureBuffBase=e.ContourAnalyse=e.ClipByPolygon=e.ClipByLayer=e.ClipByCircle=e.ClipBase=e.ClassBufferBySingleRing=e.ClassBufferByMultiplyRing=e.ClassBufferBase=e.AnalysisBase=void 0;var n=i(167),r=i(327),o=i(603),s=i(604),a=i(262),l=i(605),u=i(606),c=i(607),h=i(608),d=i(328),f=i(609),p=i(610),g=i(611),y=i(329),m=i(612),_=i(613),v=i(330),b=i(614),S=i(615);e.AnalysisBase=n.AnalysisBase,e.ClassBufferBase=r.ClassBufferBase,e.ClassBufferByMultiplyRing=o.ClassBufferByMultiplyRing,e.ClassBufferBySingleRing=s.ClassBufferBySingleRing,e.ClipBase=a.ClipBase,e.ClipByCircle=l.ClipByCircle,e.ClipByLayer=u.ClipByLayer,e.ClipByPolygon=c.ClipByPolygon,e.ContourAnalyse=h.ContourAnalyse,e.FeatureBuffBase=d.FeatureBuffBase,e.FeatureBuffByMultiplyRing=f.FeatureBuffByMultiplyRing,e.FeatureBuffBySingleRing=p.FeatureBuffBySingleRing,e.NetAnalysis=g.NetAnalysis,e.OverlayBase=y.OverlayBase,e.OverlayByLayer=m.OverlayByLayer,e.OverlayByPolygon=_.OverlayByPolygon,e.ProjectBase=v.ProjectBase,e.ProjectByLayer=b.ProjectByLayer,e.ProjectBySRID=S.ProjectBySRID},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ClassBufferByMultiplyRing=void 0;var n=l(i(13)),r=l(i(8)),o=l(i(16)),s=l(i(17)),a=i(6);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t){(0,r.default)(this,e);var i=t||{},s=(0,o.default)(this,(e.__proto__||(0,n.default)(e)).call(this,i));return s.flowID="600232",s.radiusStr=void 0!==i.radiusStr?i.radiusStr:"2,4,8,10",s}return(0,s.default)(e,t),e}(i(327).ClassBufferBase);e.ClassBufferByMultiplyRing=u,a.Zondy.Service.ClassBufferByMultiplyRing=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ClassBufferBySingleRing=void 0;var n=l(i(13)),r=l(i(8)),o=l(i(16)),s=l(i(17)),a=i(6);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t){(0,r.default)(this,e);var i=t||{},s=(0,o.default)(this,(e.__proto__||(0,n.default)(e)).call(this,i));return s.leftRad=void 0!==i.leftRad?i.leftRad:.001,s.rightRad=void 0!==i.rightRad?i.rightRad:.001,s.isByAtt=void 0===i.isByAtt||i.isByAtt,s.fldName=void 0!==i.fldName?i.fldName:null,s.dynPrjRad=void 0!==i.dynPrjRad?i.dynPrjRad:0,s.flowID="600231",s}return(0,s.default)(e,t),e}(i(327).ClassBufferBase);e.ClassBufferBySingleRing=u,a.Zondy.Service.ClassBufferBySingleRing=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ClipByCircle=void 0;var n=l(i(13)),r=l(i(8)),o=l(i(16)),s=l(i(17)),a=i(6);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t){(0,r.default)(this,e);var i=t||{},s=(0,o.default)(this,(e.__proto__||(0,n.default)(e)).call(this,i));return s.srcInfo=void 0!==i.srcInfo?i.srcInfo:null,s.center=void 0!==i.center?i.center:null,s.radius=void 0!==i.radius?i.radius:null,s.step=void 0!==i.step?i.step:.001,s.flowID="600229",s}return(0,s.default)(e,t),e}(i(262).ClipBase);e.ClipByCircle=u,a.Zondy.Service.ClipByCircle=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ClipByLayer=void 0;var n=l(i(13)),r=l(i(8)),o=l(i(16)),s=l(i(17)),a=i(6);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t){(0,r.default)(this,e);var i=t||{},s=(0,o.default)(this,(e.__proto__||(0,n.default)(e)).call(this,i));return s.srcInfo1=void 0!==i.srcInfo1?i.srcInfo1:null,s.srcInfo2=void 0!==i.srcInfo2?i.srcInfo2:null,s.flowID="600230",s}return(0,s.default)(e,t),e}(i(262).ClipBase);e.ClipByLayer=u,a.Zondy.Service.ClipByLayer=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ClipByPolygon=void 0;var n=l(i(13)),r=l(i(8)),o=l(i(16)),s=l(i(17)),a=i(6);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t){(0,r.default)(this,e);var i=t||{},s=(0,o.default)(this,(e.__proto__||(0,n.default)(e)).call(this,i));return s.srcInfo=void 0!==i.srcInfo?i.srcInfo:null,s.strPos=void 0!==i.strPos?i.strPos:null,s.flowID="600228",s}return(0,s.default)(e,t),e}(i(262).ClipBase);e.ClipByPolygon=u,a.Zondy.Service.ClipByPolygon=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContourAnalyse=void 0;var n=u(i(13)),r=u(i(8)),o=u(i(16)),s=u(i(17)),a=i(6),l=(i(21),i(167));i(67),i(425),i(421);function u(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function e(t){(0,r.default)(this,e);var i=t||{},s=(0,o.default)(this,(e.__proto__||(0,n.default)(e)).call(this,i));return s.flowID="600320",s.linSfclsURL=void 0!==i.linSfclsURL?i.linSfclsURL:null,s.regSfclsURL=void 0!==i.regSfclsURL?i.regSfclsURL:null,s.annoClsURL=void 0!==i.annoClsURL?i.annoClsURL:null,s.meshingParam=void 0!==i.meshingParam?i.meshingParam:null,s.contourParam=void 0!==i.contourParam?i.contourParam:null,s}return(0,s.default)(e,t),e}(l.AnalysisBase);e.ContourAnalyse=c,a.Zondy.Service.ContourAnalyse=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FeatureBuffByMultiplyRing=void 0;var n=l(i(13)),r=l(i(8)),o=l(i(16)),s=l(i(17)),a=i(6);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t){(0,r.default)(this,e);var i=t||{},s=(0,o.default)(this,(e.__proto__||(0,n.default)(e)).call(this,i));return s.radiusStr=void 0!==i.radiusStr?i.radiusStr:"0.003,0.002,0.001",s.flowID="600239",s}return(0,s.default)(e,t),e}(i(328).FeatureBuffBase);e.FeatureBuffByMultiplyRing=u,a.Zondy.Service.FeatureBuffByMultiplyRing=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FeatureBuffBySingleRing=void 0;var n=l(i(13)),r=l(i(8)),o=l(i(16)),s=l(i(17)),a=i(6);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t){(0,r.default)(this,e);var i=t||{},s=(0,o.default)(this,(e.__proto__||(0,n.default)(e)).call(this,i));return s.leftRad=void 0!==i.leftRad?i.leftRad:.001,s.rightRad=void 0!==i.rightRad?i.rightRad:.001,s.flowID="600238",s}return(0,s.default)(e,t),e}(i(328).FeatureBuffBase);e.FeatureBuffBySingleRing=u,a.Zondy.Service.FeatureBuffBySingleRing=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NetAnalysis=void 0;var n=c(i(13)),r=c(i(8)),o=c(i(16)),s=c(i(17)),a=i(6),l=i(167),u=i(109);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){(0,r.default)(this,e);var i=t||{},s=(0,o.default)(this,(e.__proto__||(0,n.default)(e)).call(this,i));return s.netClsUrl=void 0!==i.netClsUrl?i.netClsUrl:null,s.flagPosStr=void 0!==i.flagPosStr?i.flagPosStr:null,s.barrierPosStr=void 0!==i.barrierPosStr?i.barrierPosStr:null,s.analyType=void 0!==i.analyType?i.analyType:u.NetAnalyType.UserMode,s.weight=void 0!==i.weight?i.weight:",Weight1,Weight1",s.elementType=void 0!==i.elementType?i.elementType:u.NetElemType.Edge,s.nearDis=void 0!==i.nearDis?i.nearDis:.001,s.outFormat=void 0!==i.outFormat?i.outFormat:"json",s.flowID="600233",s}return(0,s.default)(e,t),e}(l.AnalysisBase);e.NetAnalysis=h,a.Zondy.Service.NetAnalysis=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OverlayByLayer=void 0;var n=l(i(13)),r=l(i(8)),o=l(i(16)),s=l(i(17)),a=i(6);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t){(0,r.default)(this,e);var i=t||{},s=(0,o.default)(this,(e.__proto__||(0,n.default)(e)).call(this,i));return s.srcInfo2=void 0!==i.srcInfo2?i.srcInfo2:null,s.flowID="600227",s}return(0,s.default)(e,t),e}(i(329).OverlayBase);e.OverlayByLayer=u,a.Zondy.Service.OverlayByLayer=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OverlayByPolygon=void 0;var n=l(i(13)),r=l(i(8)),o=l(i(16)),s=l(i(17)),a=i(6);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t){(0,r.default)(this,e);var i=t||{},s=(0,o.default)(this,(e.__proto__||(0,n.default)(e)).call(this,i));return s.strGRegionXML=void 0!==i.strGRegionXML?i.strGRegionXML:null,s.inFormat=void 0!==i.inFormat?i.inFormat:"json",s.flowID="600237",s}return(0,s.default)(e,t),e}(i(329).OverlayBase);e.OverlayByPolygon=u,a.Zondy.Service.OverlayByPolygon=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProjectByLayer=void 0;var n=c(i(13)),r=c(i(8)),o=c(i(16)),s=c(i(17)),a=i(6),l=i(330),u=i(21);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t,i){(0,r.default)(this,e);var s=i||{};(0,u.extend)(s,t);var a=(0,o.default)(this,(e.__proto__||(0,n.default)(e)).call(this,s));return a.flowID="600235",a}return(0,s.default)(e,t),e}(l.ProjectBase);e.ProjectByLayer=h,a.Zondy.Service.ProjectByLayer=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProjectBySRID=void 0;var n=c(i(13)),r=c(i(8)),o=c(i(16)),s=c(i(17)),a=i(6),l=i(330),u=i(21);i(263);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t,i){(0,r.default)(this,e);var s=i||{};(0,u.extend)(s,t);var a=(0,o.default)(this,(e.__proto__||(0,n.default)(e)).call(this,s));return a.flowID="600234",a.srID=void 0!==s.srID?s.srID:32,a}return(0,s.default)(e,t),e}(l.ProjectBase);e.ProjectBySRID=h,a.Zondy.Service.ProjectBySRID=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TopAnalysis=e.Smooth=e.ProjectRang=e.ProjectDots=e.GeometryAnalysisBase=e.CProjectParam=e.CProjectBySRSID=e.CalServiceBase=e.CalPolyLineLength=e.CalArea=void 0;var n=i(617),r=i(618),o=i(331),s=i(332),a=i(263),l=i(197),u=i(619),c=i(620),h=i(621),d=i(622);e.CalArea=n.CalArea,e.CalPolyLineLength=r.CalPolyLineLength,e.CalServiceBase=o.CalServiceBase,e.CProjectBySRSID=s.CProjectBySRSID,e.CProjectParam=a.CProjectParam,e.GeometryAnalysisBase=l.GeometryAnalysisBase,e.ProjectDots=u.ProjectDots,e.ProjectRang=c.ProjectRang,e.Smooth=h.Smooth,e.TopAnalysis=d.TopAnalysis},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CalArea=void 0;var n=c(i(13)),r=c(i(8)),o=c(i(16)),s=c(i(17)),a=i(6),l=i(331),u=i(21);i(100);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t,i){(0,r.default)(this,e);var s=i||{};(0,u.extend)(s,{dots:t});var a=(0,o.default)(this,(e.__proto__||(0,n.default)(e)).call(this,s));return a.partUrl="geomservice/calArea?f=json",a}return(0,s.default)(e,t),e}(l.CalServiceBase);e.CalArea=h,a.Zondy.Service.CalArea=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CalPolyLineLength=void 0;var n=c(i(13)),r=c(i(8)),o=c(i(16)),s=c(i(17)),a=i(6),l=i(331),u=i(21);i(100);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t,i){(0,r.default)(this,e);var s=i||{};(0,u.extend)(s,{dots:t});var a=(0,o.default)(this,(e.__proto__||(0,n.default)(e)).call(this,s));return a.partUrl="geomservice/calLength?f=json",a}return(0,s.default)(e,t),e}(l.CalServiceBase);e.CalPolyLineLength=h,a.Zondy.Service.CalPolyLineLength=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProjectDots=void 0;var n=d(i(75)),r=d(i(13)),o=d(i(8)),s=d(i(20)),a=d(i(16)),l=d(i(17)),u=i(6),c=i(197),h=(i(100),i(263),i(67));function d(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t,i,n,s){(0,o.default)(this,e);var l=s||{},u=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,l));return u.InputDots=t,u.SrcProjParam=i,u.DesProjParm=n,u}return(0,l.default)(e,t),(0,s.default)(e,[{key:"execute",value:function(t,e){this.partUrl="geomservice/projectdots?f=json";var i={};i.InputDots=this.InputDots,i.SrcProjParam=this.SrcProjParam,i.DesProjParm=this.DesProjParm;var r=this.getFullUrl();new h.IgsServiceBase(r,{eventListeners:{scope:this,processCompleted:t,processFailed:e}}).processAsync({method:"POST",data:(0,n.default)(i),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]),e}(c.GeometryAnalysisBase);e.ProjectDots=f,u.Zondy.Service.ProjectDots=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProjectRang=void 0;var n=h(i(13)),r=h(i(8)),o=h(i(20)),s=h(i(16)),a=h(i(17)),l=i(6),u=i(197),c=i(67);function h(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(t){(0,r.default)(this,e);var i=t||{},o=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,i));return o.gdbsvrName=void 0!==i.gdbsvrName?i.gdbsvrName:"MapGISLocal",o.gdbName=void 0!==i.gdbName?i.gdbName:null,o.srefID=void 0!==i.srefID?i.srefID:0,o.desfID=void 0!==i.desfID?i.desfID:0,o.userName=void 0!==i.userName?i.userName:null,o.password=void 0!==i.password?i.password:null,o}return(0,a.default)(e,t),(0,o.default)(e,[{key:"execute",value:function(t,e,i){var n="";t&&(n=t.xmin+"$"+t.ymin+"$"+t.xmax+"$"+t.ymax),null==this.userName||null==this.password?this.partUrl="geomservice/"+this.gdbsvrName+"/"+this.gdbName+"/"+this.srefID+"/"+this.desfID+"?f=json&rang="+n:this.partUrl="geomservice/"+this.gdbsvrName+"/"+this.gdbName+"/"+this.srefID+"/"+this.desfID+"?f=json&rang="+n+"&userName="+this.userName+"&password="+this.password;var r=this.getFullUrl();new c.IgsServiceBase(r,{eventListeners:{scope:this,processCompleted:e,processFailed:i}}).processAsync()}}]),e}(u.GeometryAnalysisBase);e.ProjectRang=d,l.Zondy.Service.ProjectRang=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Smooth=void 0;var n=d(i(75)),r=d(i(13)),o=d(i(8)),s=d(i(20)),a=d(i(16)),l=d(i(17)),u=i(6),c=i(197),h=(i(100),i(67));function d(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t){(0,o.default)(this,e);var i=t||{},n=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,i));return n.type=void 0!==i.type?i.type:0,n.step=void 0!==i.step?i.step:1,n}return(0,l.default)(e,t),(0,s.default)(e,[{key:"setType",value:function(t){this.type=t}},{key:"setStep",value:function(t){this.step=t}},{key:"execute",value:function(t,e,i){if(2==this.type){if(t.length<4)return void alert("当前选中的为三次Beizer样条，最少需四个点")}else if(t.length<3)return void alert("当前选中的类型最少需三个点");this.partUrl="geomservice/smooth?f=json&type="+this.type+"&step="+this.step;var r=this.getFullUrl();new h.IgsServiceBase(r,{eventListeners:{scope:this,processCompleted:e,processFailed:i}}).processAsync({method:"POST",data:(0,n.default)(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]),e}(c.GeometryAnalysisBase);e.Smooth=f,u.Zondy.Service.Smooth=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TopAnalysis=void 0;var n=f(i(75)),r=f(i(13)),o=f(i(8)),s=f(i(20)),a=f(i(16)),l=f(i(17)),u=i(6),c=i(197),h=(i(100),i(67)),d=(i(316),i(317),i(319),i(21));function f(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function e(t){(0,o.default)(this,e);var i=t||{},n=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,i));return n.pnt=void 0!==i.pnt?i.pnt:null,n.line=void 0!==i.line?i.line:null,n.reg=void 0!==i.reg?i.reg:null,n.nearDis=void 0!==i.nearDis?i.nearDis:.01,n.relativeObj=void 0!==i.relativeObj?i.relativeObj:null,n.p_onSuccess=void 0!==i.p_onSuccess?i.p_onSuccess:null,n}return(0,l.default)(e,t),(0,s.default)(e,[{key:"setPnt",value:function(t){this.pnt=t}},{key:"setLine",value:function(t){this.line=t}},{key:"setReg",value:function(t){this.reg=t}},{key:"setRelativeObj",value:function(t){this.relativeObj=t}},{key:"onGetRltSuccess",value:function(t){var e=(0,d.getTopAnalysisResult)(t);this.p_onSuccess(e)}},{key:"execute",value:function(t,e){(o=this).p_onSuccess=t;var i={};i.NearDis=this.nearDis,i.Pnt=this.pnt,i.Line=this.line,i.Reg=this.reg,i.RelativeObj=this.relativeObj,o.partUrl="geomservice/topanalysis?f=json";var r=o.getFullUrl(),o=this;new h.IgsServiceBase(r,{eventListeners:{scope:o,processCompleted:o.onGetRltSuccess,processFailed:e}}).processAsync({method:"POST",data:(0,n.default)(i),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]),e}(c.GeometryAnalysisBase);e.TopAnalysis=p,u.Zondy.Service.TopAnalysis=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapServiceBase=e.GetTileImageService=e.GetMapInfoService=e.GetMapImageService=e.GetLayerImageService=e.GetDocImageService=void 0;var n=i(624),r=i(625),o=i(626),s=i(627),a=i(628),l=i(198);e.GetDocImageService=n.GetDocImageService,e.GetLayerImageService=r.GetLayerImageService,e.GetMapImageService=o.GetMapImageService,e.GetMapInfoService=s.GetMapInfoService,e.GetTileImageService=a.GetTileImageService,e.MapServiceBase=l.MapServiceBase},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GetDocImageService=void 0;var n=d(i(75)),r=d(i(13)),o=d(i(8)),s=d(i(20)),a=d(i(16)),l=d(i(17)),u=i(6),c=i(198),h=(i(332),i(21));function d(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t){(0,o.default)(this,e);var i=t||{},n=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,i));return n.docName=void 0!==i.docName?i.docName:null,n.cache=void 0!==i.cache&&i.cache,n.cache?(n.level=void 0!==i.level?i.level:0,n.row=void 0!==i.row?i.row:0,n.col=void 0!==i.col?i.col:0,n.update=void 0!==i.update&&i.update):(n.layers=void 0!==i.layers?i.layers:null,n.style=void 0!==i.style?i.style:null,n.picType=void 0!==i.picType?i.picType:"gif",n.bbox=void 0!==i.bbox?i.bbox:null,n.filters=void 0!==i.filters?i.filters:null,n.picWidth=void 0!==i.picWidth?i.picWidth:512,n.picHeight=void 0!==i.picHeight?i.picHeight:512,n.proj=void 0!==i.proj?i.proj:null,n.guid=void 0!==i.guid?i.guid:(0,h.newGuid)()),n}return(0,l.default)(e,t),(0,s.default)(e,[{key:"GetMapImage",value:function(){return this.docName?(1==this.cache?this.partUrl="docs/"+this.docName+"?cache="+this.cache.toString()+"&level="+this.level+"&row="+this.row+"&col="+this.col+"&update="+this.update.toString():(this.partUrl="docs/"+this.docName+"?",null!=this.bbox&&(this.partUrl+="bbox="+this.bbox),null!=this.picWidth&&(this.partUrl+="&w="+this.picWidth),null!=this.picHeight&&(this.partUrl+="&h="+this.picHeight),null!=this.layers&&(this.partUrl+="&layers="+this.layers),null!=this.filters&&(this.partUrl+="&filters="+encodeURI(this.filters)),null!=this.style&&(this.partUrl+="&style="+(0,n.default)(this.style)),null!=this.proj&&(this.partUrl+="&proj="+(0,n.default)(this.proj)),null!=this.picType&&(this.partUrl+="&f="+this.picType),null!=this.guid&&(this.partUrl+="&guid="+this.guid)),this.getFullUrl()):null}}]),e}(c.MapServiceBase);e.GetDocImageService=f,u.Zondy.Service.GetDocImageService=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GetLayerImageService=void 0;var n=h(i(75)),r=h(i(13)),o=h(i(8)),s=h(i(20)),a=h(i(16)),l=h(i(17)),u=i(6),c=i(198);i(416);function h(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(t){(0,o.default)(this,e);var i=t||{},n=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,i));return n.gdbps=void 0!==i.gdbps?i.gdbps:null,n.picType=void 0!==i.picType?i.picType:"gif",n.style=void 0!==i.style?i.style:null,n.bbox=void 0!==i.bbox?i.bbox:null,n.filters=void 0!==i.filters?i.filters:null,n.picWidth=void 0!==i.picWidth?i.picWidth:512,n.picHeight=void 0!==i.picHeight?i.picHeight:512,n}return(0,l.default)(e,t),(0,s.default)(e,[{key:"GetLayerImage",value:function(){if(null!=this.gdbps&&null!=this.picWidth&&null!=this.picHeight){this.partUrl="layers?f="+this.picType,this.partUrl+="&gdbps=",this.gdbps.split(",");var t=new Array;t=this.gdbps.split(",");for(var e=0;e<t.length;e++)this.partUrl+=t[e],e<t.length-1&&(this.partUrl+=",");return null!=this.style&&(this.partUrl+="&style="+(0,n.default)(this.style)),null!=this.filters&&(this.partUrl+="&filters="+this.filters),null!=this.bbox&&(this.partUrl+="&bbox="+this.bbox),this.partUrl+="&w="+this.picWidth,this.partUrl+="&h="+this.picHeight,this.getFullUrl()}return null}}]),e}(c.MapServiceBase);e.GetLayerImageService=d,u.Zondy.Service.GetLayerImageService=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GetMapImageService=void 0;var n=h(i(13)),r=h(i(8)),o=h(i(20)),s=h(i(16)),a=h(i(17)),l=i(6),u=i(198),c=i(109);function h(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(t){(0,r.default)(this,e);var i=t||{},o=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,i));return o.mapName=void 0!==i.mapName?i.mapName:null,o.mapType=void 0!==i.mapType?i.mapType:c.MapType.Doc,o.mapType==c.MapType.Tile?(o.level=void 0!==i.level?i.level:0,o.row=void 0!==i.row?i.row:0,o.col=void 0!==i.col?i.col:0):(o.picType=void 0!==i.picType?i.picType:"gif",o.picWidth=void 0!==i.picWidth?i.picWidth:512,o.picHeight=void 0!==i.picHeight?i.picHeight:512,o.xmin=void 0!==i.xmin?i.xmin:null,o.xmax=void 0!==i.xmax?i.xmax:null,o.ymin=void 0!==i.ymin?i.ymin:null,o.ymax=void 0!==i.ymax?i.ymax:null),o}return(0,a.default)(e,t),(0,o.default)(e,[{key:"GetImage",value:function(){return this.mapName?(this.mapType==c.MapType.Tile?this.partUrl="tile/"+this.mapName+"?lvl="+this.level+"&row="+this.row+"&col="+this.col:(this.partUrl="map/"+this.mapName+"?width="+this.picWidth+"&height="+this.picHeight+"&f="+this.picType,null!=this.xmin&&null!=this.xmax&&null!=this.ymin&&null!=this.ymax&&(this.partUrl+="&xmin="+this.xmin+"&ymin="+this.ymin+"&xmax="+this.xmax+"&ymax="+this.ymax)),this.getFullUrl()):null}}]),e}(u.MapServiceBase);e.GetMapImageService=d,l.Zondy.Service.GetMapImageService=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GetMapInfoService=void 0;var n=d(i(13)),r=d(i(8)),o=d(i(20)),s=d(i(16)),a=d(i(17)),l=i(6),u=i(198),c=i(67),h=i(21);function d(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t){(0,r.default)(this,e);var i=t||{},o=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,i));return o.mapName=void 0!==i.mapName?i.mapName:null,o.guid=void 0!==i.guid?i.guid:(0,h.newGuid)(),o.token=i.token,o.type=i.type,o}return(0,a.default)(e,t),(0,o.default)(e,[{key:"GetMapInfo",value:function(t,e,i){var n=this;if(void 0!==n.mapName){n.partUrl="info/"+this.mapName;var r=[];n.guid&&r.push("guid="+n.guid),this.token&&r.push("token="+n.token),this.type&&r.push("type="+n.type),r.length>0&&(n.partUrl+="?"+r.join("&"));var o=n.getFullUrl();new c.IgsServiceBase(o,{eventListeners:{scope:n,processCompleted:t,processFailed:e}}).processAsync()}}}]),e}(u.MapServiceBase);e.GetMapInfoService=f,l.Zondy.Service.GetMapInfoService=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GetTileImageService=void 0;var n=u(i(13)),r=u(i(8)),o=u(i(20)),s=u(i(16)),a=u(i(17)),l=i(6);function u(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function e(t){(0,r.default)(this,e);var i=t||{},o=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,i));return o.hdfName=void 0!==i.hdfName?i.hdfName:null,o.level=void 0!==i.level?i.level:0,o.row=void 0!==i.row?i.row:0,o.col=void 0!==i.col?i.col:0,o}return(0,a.default)(e,t),(0,o.default)(e,[{key:"GetTileImage",value:function(){return void 0!==this.hdfName?(this.partUrl="tile/"+this.hdfName+"/"+this.level+"/"+this.row+"/"+this.col,this.getFullUrl()):null}}]),e}(i(198).MapServiceBase);e.GetTileImageService=c,l.Zondy.Service.GetTileImageService=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ThemesInfo=e.ThemeOper=e.ItemValue=e.FolderInfoAttribute=e.FolderInfo=e.ExpInfo=e.CUniqueThemeInfo=e.CUniqueTheme=e.CThemeInfo=e.CTheme=e.CSimpleTheme=e.CRegInfo=e.CRangeThemeInfo=e.CRangeTheme=e.CRandomTheme=e.CPntInfo=e.CMultiClassTheme=e.CLinInfo=e.CGraduatedSymbolTheme=e.CFourColorTheme=e.CDotDensityTheme=e.CChartType=e.CChartThemeRepresentInfo=e.CChartThemeInfo=e.CChartTheme=e.CChartLabelFormat=e.CAnnInfo=e.CAllOtherDataItemInfoSource=void 0;var n=i(440),r=i(441),o=i(442),s=i(443),a=i(445),l=i(448),u=i(444),c=i(449),h=i(450),d=i(451),f=i(446),p=i(452),g=i(264),y=i(454),m=i(455),_=i(456),v=i(447),b=i(457),S=i(128),O=i(168),C=i(458),x=i(459),T=i(453),E=i(460),P=i(333),j=i(630),w=i(631),I=i(461);e.CAllOtherDataItemInfoSource=n.CAllOtherDataItemInfoSource,e.CAnnInfo=r.CAnnInfo,e.CChartLabelFormat=o.CChartLabelFormat,e.CChartTheme=s.CChartTheme,e.CChartThemeInfo=a.CChartThemeInfo,e.CChartThemeRepresentInfo=l.CChartThemeRepresentInfo,e.CChartType=u.CChartType,e.CDotDensityTheme=c.CDotDensityTheme,e.CFourColorTheme=h.CFourColorTheme,e.CGraduatedSymbolTheme=d.CGraduatedSymbolTheme,e.CLinInfo=f.CLinInfo,e.CMultiClassTheme=p.CMultiClassTheme,e.CPntInfo=g.CPntInfo,e.CRandomTheme=y.CRandomTheme,e.CRangeTheme=m.CRangeTheme,e.CRangeThemeInfo=_.CRangeThemeInfo,e.CRegInfo=v.CRegInfo,e.CSimpleTheme=b.CSimpleTheme,e.CTheme=S.CTheme,e.CThemeInfo=O.CThemeInfo,e.CUniqueTheme=C.CUniqueTheme,e.CUniqueThemeInfo=x.CUniqueThemeInfo,e.ExpInfo=T.ExpInfo,e.FolderInfo=E.FolderInfo,e.FolderInfoAttribute=P.FolderInfoAttribute,e.ItemValue=j.ItemValue,e.ThemeOper=w.ThemeOper,e.ThemesInfo=I.ThemesInfo},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ItemValue=void 0;var n=i(6),r=i(21),o=i(109),s=function(t,e,i,n){var s=void 0!==n?n:{};(0,r.extend)(this,s),this.StartValue=void 0!==t?t:"",this.EndValue=void 0!==e?e:"",this.ClassItemType=void 0!==i?i:o.CItemType.RangeTheme};e.ItemValue=s,n.Zondy.Object.Theme.ItemValue=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ThemeOper=void 0;var n=T(i(75)),r=T(i(13)),o=T(i(8)),s=T(i(20)),a=T(i(16)),l=T(i(17)),u=i(6),c=i(148),h=i(21),d=i(67),f=i(452),p=i(457),g=i(443),y=i(451),m=i(449),_=i(454),v=i(450),b=i(458),S=i(455),O=i(333),C=i(460),x=i(461);function T(t){return t&&t.__esModule?t:{default:t}}var E=function(t){function e(t,i){(0,o.default)(this,e),(i=i||{}).baseUrl="igs/rest/theme";var n=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,i));return n.guid=null!=t?t:(0,h.newGuid)(),n.p_onSuccess=void 0!==i.p_onSuccess?i.p_onSuccess:null,n}return(0,l.default)(e,t),(0,s.default)(e,[{key:"onGetThemesInfoSuccess",value:function(t){var e=new C.FolderInfo;if((0,h.extendDeep)(e,t.result),null!=e&&null!=e.attribute&&e.attribute.length>0){for(var i=[],n=null,r=0;r<e.attribute.length;r++)if(i[r]=new x.ThemesInfo,null!=e.attribute[r]&&(i[r].LayerName=e.attribute[r].name,null!=(n=JSON.parse(e.attribute[r].value))&&n.length>0)){i[r].ThemeArr=[];for(var o=0;o<n.length;o++){switch(n[o].name){case"CMultiClassTheme":i[r].ThemeArr[o]=new f.CMultiClassTheme;break;case"CSimpleTheme":i[r].ThemeArr[o]=new p.CSimpleTheme;break;case"CChartTheme":i[r].ThemeArr[o]=new g.CChartTheme;break;case"CGraduatedSymbolTheme":i[r].ThemeArr[o]=new y.CGraduatedSymbolTheme;break;case"CDotDensityTheme":i[r].ThemeArr[o]=new m.CDotDensityTheme;break;case"CRandomTheme":i[r].ThemeArr[o]=new _.CRandomTheme;break;case"CFourColorTheme":i[r].ThemeArr[o]=new v.CFourColorTheme;break;case"CUniqueTheme":i[r].ThemeArr[o]=new b.CUniqueTheme;break;case"CRangeTheme":i[r].ThemeArr[o]=new S.CRangeTheme}(0,h.extendDeep)(i[r].ThemeArr[o],JSON.parse(n[o].value))}}null!=this.p_onSuccess&&"function"==typeof this.p_onSuccess&&this.p_onSuccess(i)}}},{key:"getThemesInfo",value:function(t,e,i,n){var r=this;r.p_onSuccess=i;var o=Math.random();r.partUrl=t+"/get?idxArr="+e+"&r="+o+"&guid="+r.guid;var s=r.getFullUrl();new d.IgsServiceBase(s,{eventListeners:{scope:r,processCompleted:r.onGetThemesInfoSuccess,processFailed:n}}).processAsync()}},{key:"removeThemesInfo",value:function(t,e,i,n){var r=Math.random();this.partUrl=t+"/remove?idxArr="+e+"&r="+r+"&guid="+this.guid;var o=this.getFullUrl();new d.IgsServiceBase(o,{eventListeners:{scope:this,processCompleted:i,processFailed:n}}).processAsync()}},{key:"updateThemesInfo",value:function(t,e,i,r,o){Math.random();this.partUrl=t+"/update?idxArr="+e+"&guid="+this.guid;var s=this.getFullUrl(),a=new C.FolderInfo;if(null!=i&&i.length>0){a.name="ThemeInfo",a.attribute=[];for(var l=0;l<i.length;l++)if(a.attribute[l]=new O.FolderInfoAttribute,a.attribute[l].name=i[l].LayerName,null!=i[l].ThemeArr&&i[l].ThemeArr.length>0){for(var u=[],c=0;c<i[l].ThemeArr.length;c++)null!=i[l].ThemeArr[c]&&(u[c]=new O.FolderInfoAttribute(i[l].ThemeArr[c].Type,(0,n.default)(i[l].ThemeArr[c])));a.attribute[l].value=(0,n.default)(u)}}new d.IgsServiceBase(s,{eventListeners:{scope:this,processCompleted:r,processFailed:o}}).processAsync({method:"POST",data:(0,n.default)(a),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"addThemesInfo",value:function(t,e,i,r,o){Math.random();this.partUrl=t+"/add?idxArr="+e+"&guid="+this.guid;var s=this.getFullUrl(),a=new C.FolderInfo;if(null!=i&&i.length>0){a.name="ThemeInfo",a.attribute=[];for(var l=0;l<i.length;l++)if(a.attribute[l]=new O.FolderInfoAttribute,a.attribute[l].name=i[l].LayerName,null!=i[l].ThemeArr&&i[l].ThemeArr.length>0){for(var u=[],c=0;c<i[l].ThemeArr.length;c++)null!=i[l].ThemeArr[c]&&(u[c]=new O.FolderInfoAttribute(i[l].ThemeArr[c].Type,(0,n.default)(i[l].ThemeArr[c])));a.attribute[l].value=(0,n.default)(u)}}new d.IgsServiceBase(s,{eventListeners:{scope:this,processCompleted:r,processFailed:o}}).processAsync({method:"POST",data:(0,n.default)(a),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]),e}(c.ServiceBase);e.ThemeOper=E,u.Zondy.Service.ThemeOper=E},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SUtil=e.LevelRendererVector=e.Util=e.Transformable=e.Storage=e.SmicText=e.SmicStar=e.SmicSector=e.SmicRing=e.SmicRectangle=e.SmicPolygon=e.SmicPoint=e.SmicIsogon=e.SmicImage=e.SmicEllipse=e.SmicCircle=e.SmicBrokenLine=e.Shape=e.PaintLayer=e.Painter=e.Matrix=e.Math=e.Http=e.Handler=e.Group=e.Eventful=e.LevelRendererEvent=e.Env=e.Easing=e.LevelRendererCurve=e.Config=e.ComputeBoundingBox=e.Color=e.Clip=e.Area=e.Animator=e.Animation=e.Render=e.LevelRenderer=e.FeatureTheme=e.Sector=e.FeatureRectangle=e.FeaturePolygon=e.Point=e.FeatureLine=e.Label=e.Image=e.FeatureCircle=e.ShapeParameters=e.ShapeFactory=e.ThemeVector=e.Ring=e.RankSymbol=e.OverlayPoint=e.Pie=e.Line=e.Graph=e.OverlayCircle=e.Bar3D=e.Bar=void 0;var n=i(633),r=i(634),o=i(635),s=i(169),a=i(636),l=i(637),u=i(638),c=i(462),h=i(639),d=i(221),f=i(640),p=i(641);e.Bar=n.Bar,e.Bar3D=r.Bar3D,e.OverlayCircle=o.Circle,e.Graph=s.Graph,e.Line=a.Line,e.Pie=l.Pie,e.OverlayPoint=u.Point,e.RankSymbol=c.RankSymbol,e.Ring=h.Ring,e.ThemeVector=d.ThemeVector,e.ShapeFactory=f.ShapeFactory,e.ShapeParameters=f.ShapeParameters,e.FeatureCircle=f.FeatureCircle,e.Image=f.Image,e.Label=f.Label,e.FeatureLine=f.FeatureLine,e.Point=f.Point,e.FeaturePolygon=f.FeaturePolygon,e.FeatureRectangle=f.FeatureRectangle,e.Sector=f.Sector,e.FeatureTheme=f.FeatureTheme,e.LevelRenderer=p.LevelRenderer,e.Render=p.Render,e.Animation=p.Animation,e.Animator=p.Animator,e.Area=p.Area,e.Clip=p.Clip,e.Color=p.Color,e.ComputeBoundingBox=p.ComputeBoundingBox,e.Config=p.Config,e.LevelRendererCurve=p.LevelRendererCurve,e.Easing=p.Easing,e.Env=p.Env,e.LevelRendererEvent=p.LevelRendererEvent,e.Eventful=p.Eventful,e.Group=p.Group,e.Handler=p.Handler,e.Http=p.Http,e.Math=p.Math,e.Matrix=p.Matrix,e.Painter=p.Painter,e.PaintLayer=p.PaintLayer,e.Shape=p.Shape,e.SmicBrokenLine=p.SmicBrokenLine,e.SmicCircle=p.SmicCircle,e.SmicEllipse=p.SmicEllipse,e.SmicImage=p.SmicImage,e.SmicIsogon=p.SmicIsogon,e.SmicPoint=p.SmicPoint,e.SmicPolygon=p.SmicPolygon,e.SmicRectangle=p.SmicRectangle,e.SmicRing=p.SmicRing,e.SmicSector=p.SmicSector,e.SmicStar=p.SmicStar,e.SmicText=p.SmicText,e.Storage=p.Storage,e.Transformable=p.Transformable,e.Util=p.Util,e.LevelRendererVector=p.LevelRendererVector,e.SUtil=p.SUtil},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Bar=void 0;var n=p(i(13)),r=p(i(8)),o=p(i(20)),s=p(i(16)),a=p(i(46)),l=p(i(17)),u=i(6),c=i(21),h=i(108),d=i(255),f=i(308);function p(t){return t&&t.__esModule?t:{default:t}}var g=function(t){function e(t,i,o,a,l,u){(0,r.default)(this,e);var c=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,i,o,a,l,u));return c.CLASS_NAME="Zondy.Feature.Theme.Bar",c}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){(0,a.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t={showShadow:!0,shadowBlur:8,shadowColor:"rgba(100,100,100,0.8)",shadowOffsetX:2,shadowOffsetY:2},e=this.setting;if(void 0!==e.barLinearGradient&&(e.barLinearGradient=[["#00FF00","#00CD00"],["#00CCFF","#5E87A2"],["#00FF66","#669985"],["#CCFF00","#94A25E"],["#FF9900","#A2945E"]]),e.dataViewBoxParameter||(void 0===e.useAxis||e.useAxis?e.dataViewBoxParameter=[45,15,15,15]:e.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var i=this.DVBCodomain;this.DVBUnitValue=(i[1]-i[0])/this.DVBHeight;var n=this.dataViewBox,r=this.dataValues;if(!(r.length<1)){for(var o=0,s=r.length;o<s;o++)if(r[o]<i[0]||r[o]>i[1])return;var a=this.calculateXShapeInfo();if(a){var l=a.xPositions,u=a.width;(void 0===e.useBackground||e.useBackground)&&this.shapes.push(h.ShapeFactory.Background(this.shapeFactory,this.chartBox,e)),(void 0===e.useAxis||e.useAxis)&&(this.shapes=this.shapes.concat(h.ShapeFactory.GraphAxis(this.shapeFactory,n,e,a)));for(var f=0;f<r.length;f++){var p=n[1]-(r[f]-i[0])/this.DVBUnitValue,g=[[l[f]-u/2,n[1]-1],[l[f]+u/2,n[1]-1],[l[f]+u/2,p],[l[f]-u/2,p]],y=new d.Polygon(g);if(void 0===e.showShadow||e.showShadow){if(e.barShadowStyle){var m=e.barShadowStyle;m.shadowBlur&&(t.shadowBlur=m.shadowBlur),m.shadowColor&&(t.shadowColor=m.shadowColor),m.shadowOffsetX&&(t.shadowOffsetX=m.shadowOffsetX),m.shadowOffsetY&&(t.shadowOffsetY=m.shadowOffsetY)}y.style={},(0,c.copyAttributesWithClip)(y.style,t)}y.refDataID=this.data.FID,y.dataInfo={field:this.fields[f],value:r[f]},void 0!==e.barHoverAble&&(y.hoverable=e.barHoverAble),void 0!==e.barClickAble&&(y.clickable=e.barClickAble),this.shapes.push(this.shapeFactory.createShape(y))}this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var t,e=this.dataViewBox,i=this.setting,n=this.dataValues.length;if(n<1)return null;var r=[],o=0,s=this.DVBWidth;if(i.xShapeBlank&&i.xShapeBlank.length&&3==i.xShapeBlank.length){var a=s-((t=i.xShapeBlank)[0]+t[2]+(n-1)*t[1]);if(a<=n)return null;o=a/n}else t=[o=s/(2*n+1),o,o];for(var l=0,u=0;u<n;u++)0==u?l=t[0]+o/2:l+=o+t[1],r.push(e[0]+l);return{xPositions:r,width:o}}},{key:"resetLinearGradient",value:function(){if(this.RelativeCoordinate)for(var t=this.shapes.length,e=this.setting.barLinearGradient,i=-1,n=0;n<t;n++){var r=this.shapes[n];if("Zondy.LevelRenderer.Shape.SmicPolygon"===r.CLASS_NAME){var o=r.style,s=this.location[0]+o.pointList[0][0],a=this.location[0]+o.pointList[1][0];++i>=e.length&&(i%=e.length);var l=e[i][0],u=e[i][1],c=(new f.Color).getLinearGradient(s,0,a,0,[[0,l],[1,u]]);r.style.color=c}}}}]),e}(i(169).Graph);e.Bar=g,u.Zondy.Theme.Bar=g},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Bar3D=void 0;var n=f(i(13)),r=f(i(8)),o=f(i(20)),s=f(i(16)),a=f(i(46)),l=f(i(17)),u=i(6),c=i(21),h=i(108),d=i(255);function f(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function e(t,i,o,a,l,u){(0,r.default)(this,e);var c=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,i,o,a,l,u));return c.CLASS_NAME="Zondy.Feature.Theme.Bar3D",c}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){(0,a.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t=this.setting;if(t.dataViewBoxParameter||(void 0===t.useAxis||t.useAxis?t.dataViewBoxParameter=[45,25,20,20]:t.dataViewBoxParameter=[5,5,5,5]),t.axisUseArrow=void 0===t.axisUseArrow||t.axisUseArrow,t.axisXLabelsOffset=void 0!==t.axisXLabelsOffset?t.axisXLabelsOffset:[-10,10],this.initBaseParameter()){var e=this.DVBCodomain;this.DVBUnitValue=(e[1]-e[0])/this.DVBHeight;var i=this.dataViewBox,n=this.dataValues;if(!(n.length<1)){for(var r=0,o=n.length;r<o;r++)if(n[r]<e[0]||n[r]>e[1])return;var s=this.calculateXShapeInfo();if(s){var a=s.xPositions,l=s.width;(void 0===t.useBackground||t.useBackground)&&this.shapes.push(h.ShapeFactory.Background(this.shapeFactory,this.chartBox,t)),(!t.axis3DParameter||isNaN(t.axis3DParameter)||t.axis3DParameter<15)&&(t.axis3DParameter=20),(void 0===t.useAxis||t.useAxis)&&(this.shapes=this.shapes.concat(h.ShapeFactory.GraphAxis(this.shapeFactory,i,t,s)));for(var u=t.bar3DParameter&&!isNaN(t.bar3DParameter)?t.bar3DParameter:10,f=0;f<n.length;f++){var p=i[1]-(n[f]-e[0])/this.DVBUnitValue,g=a[f]-l/2,y=a[f]+l/2,m=[[g,p],[y,p],[y-u,p+u],[g-u,p+u]],_=[[y,p],[y-u,p+u],[y-u,i[1]+u],[y,i[1]]],v=[[g-u,i[1]+u],[y-u,i[1]+u],[y-u,p+u],[g-u,p+u]];u<=0&&(v=[[g,i[1]],[y,i[1]],[y,p],[g,p]]);var b=new d.Polygon(m),S=new d.Polygon(_),O=new d.Polygon(v);t.barSideStyle=t.barSideStyle?t.barSideStyle:t.barFaceStyle,t.barSideStyleByFields=t.barSideStyleByFields?t.barSideStyleByFields:t.barFaceStyleByFields,t.barSideStyleByCodomain=t.barSideStyleByCodomain?t.barSideStyleByCodomain:t.barFaceStyleByCodomain,t.barTopStyle=t.barTopStyle?t.barTopStyle:t.barFaceStyle,t.barTopStyleByFields=t.barTopStyleByFields?t.barTopStyleByFields:t.barFaceStyleByFields,t.barTopStyleByCodomain=t.barTopStyleByCodomain?t.barTopStyleByCodomain:t.barFaceStyleByCodomain,O.style=h.ShapeFactory.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},t.barFaceStyle,t.barFaceStyleByFields,t.barFaceStyleByCodomain,f,n[f]),S.style=h.ShapeFactory.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},t.barSideStyle,t.barSideStyleByFields,t.barSideStyleByCodomain,f,n[f]),b.style=h.ShapeFactory.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},t.barTopStyle,t.barTopStyleByFields,t.barTopStyleByCodomain,f,n[f]),t.barSideHoverStyle=t.barSideHoverStyle?t.barSideHoverStyle:t.barFaceHoverStyle,t.barTopHoverStyle=t.barTopHoverStyle?t.barTopHoverStyle:t.barFaceHoverStyle,O.highlightStyle=h.ShapeFactory.ShapeStyleTool({stroke:!0},t.barFaceHoverStyle),S.highlightStyle=h.ShapeFactory.ShapeStyleTool({stroke:!0},t.barSideHoverStyle),b.highlightStyle=h.ShapeFactory.ShapeStyleTool({stroke:!0},t.barTopHoverStyle),b.refDataID=S.refDataID=O.refDataID=this.data.FID,b.isHoverByRefDataID=S.isHoverByRefDataID=O.isHoverByRefDataID=!0,b.refDataHoverGroup=S.refDataHoverGroup=O.refDataHoverGroup=(0,c.newGuid)(),b.dataInfo=S.dataInfo=O.dataInfo={field:this.fields[f],value:n[f]},void 0!==t.barHoverAble&&(b.hoverable=S.hoverable=O.hoverable=t.barHoverAble),void 0!==t.barClickAble&&(b.clickable=S.clickable=O.clickable=t.barClickAble),this.shapes.push(this.shapeFactory.createShape(S)),this.shapes.push(this.shapeFactory.createShape(b)),this.shapes.push(this.shapeFactory.createShape(O))}this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var t,e=this.dataViewBox,i=this.setting,n=this.dataValues.length;if(n<1)return null;var r=[],o=0,s=this.DVBWidth;if(i.xShapeBlank&&i.xShapeBlank.length&&3==i.xShapeBlank.length){var a=s-((t=i.xShapeBlank)[0]+t[2]+(n-1)*t[1]);if(a<=n)return null;o=a/n}else t=[o=s/(2*n+1),o,o];for(var l=0,u=0;u<n;u++)0==u?l=t[0]+o/2:l+=o+t[1],r.push(e[0]+l);return{xPositions:r,width:o}}}]),e}(i(169).Graph);e.Bar3D=p,u.Zondy.Theme.Bar3D=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Circle=void 0;var n=f(i(13)),r=f(i(8)),o=f(i(20)),s=f(i(16)),a=f(i(46)),l=f(i(17)),u=i(6),c=i(195),h=i(312),d=i(108);function f(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function e(t,i,o,a,l,u){(0,r.default)(this,e);var c=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,i,o,a,l,u));return c.CLASS_NAME="Zondy.Feature.Theme.Circle",c}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){(0,a.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){if(!this.setting)return!1;var t=this.setting;if(!t.codomain)return!1;var e=void 0===t.decimalNumber||isNaN(t.decimalNumber)?-1:t.decimalNumber,i=c.Theme.getDataValues(this.data,this.fields,e);this.dataValues=i||[];var n=this.dataValues;t.maxR||(t.maxR=100),t.minR||(t.minR=0);var r=this.DVBCodomain;r&&r[1]-r[0]>0?this.DVBUnitValue=t.maxR/(r[1]-r[0]):this.DVBUnitValue=t.maxR;var o=this.DVBUnitValue,s=n[0]*o+t.minR;if(this.width=2*s,this.height=2*s,this.initBaseParameter()&&(!r||!(n[0]<r[0]||n[0]>r[1]))){var a=this.DVBCenterPoint,l=new h.Circle(a[0],a[1],s);l.style=d.ShapeFactory.ShapeStyleTool(null,t.circleStyle,null,null,0),void 0!==t.fillColor?l.style.fillColor=t.fillColor:l.style.fillColor="#ff9277",l.highlightStyle=d.ShapeFactory.ShapeStyleTool(null,t.circleHoverStyle),void 0!==t.circleHoverAble&&(l.hoverable=t.circleHoverAble),void 0!==t.circleClickAble&&(l.clickable=t.circleClickAble),l.refDataID=this.data.FID,l.dataInfo={field:this.fields[0],r:s,value:n[0]},this.shapes.push(this.shapeFactory.createShape(l)),this.shapesConvertToRelativeCoordinate()}}}]),e}(i(462).RankSymbol);e.Circle=p,u.Zondy.Theme.Circle=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Line=void 0;var n=f(i(13)),r=f(i(8)),o=f(i(20)),s=f(i(16)),a=f(i(46)),l=f(i(17)),u=i(6),c=i(108),h=i(254),d=i(311);function f(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function e(t,i,o,a,l,u){(0,r.default)(this,e);var c=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,i,o,a,l,u));return c.CLASS_NAME="Zondy.Feature.Theme.Line",c}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){(0,a.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t=this.setting;if(t.dataViewBoxParameter||(void 0===t.useAxis||t.useAxis?t.dataViewBoxParameter=[45,15,15,15]:t.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var e=this.dataViewBox,i=this.DVBCodomain;this.DVBUnitValue=(i[1]-i[0])/this.DVBHeight;var n=this.DVBUnitValue,r=this.dataValues;if(!(r.length<1)){var o=this.calculateXShapeInfo();if(o){var s,a,l=o.xPositions;(void 0===t.useBackground||t.useBackground)&&this.shapes.push(c.ShapeFactory.Background(this.shapeFactory,this.chartBox,t)),this.shapes=this.shapes.concat(c.ShapeFactory.GraphAxis(this.shapeFactory,e,t,o));for(var u=[],f=[],p=0,g=r.length;p<g;p++){if(r[p]<i[0]||r[p]>i[1])return null;s=l[p],a=e[1]-(r[p]-i[0])/n;var y=new h.Point(s,a);y.style=c.ShapeFactory.ShapeStyleTool({fillColor:"#ee9900"},t.pointStyle,t.pointStyleByFields,t.pointStyleByCodomain,p,r[p]),y.highlightStyle=c.ShapeFactory.ShapeStyleTool(null,t.pointHoverStyle),void 0!==t.pointHoverAble&&(y.hoverable=t.pointHoverAble),void 0!==t.pointClickAble&&(y.clickable=t.pointClickAble),y.refDataID=this.data.FID,y.dataInfo={field:this.fields[p],value:r[p]},f.push(this.shapeFactory.createShape(y));var m=[s,a];u.push(m)}var _=new d.Line(u);_.style=c.ShapeFactory.ShapeStyleTool({strokeColor:"#ee9900"},t.lineStyle),_.clickable=!1,_.hoverable=!1;var v=this.shapeFactory.createShape(_);this.shapes.push(v),this.shapes=this.shapes.concat(f),this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var t,e=this.dataViewBox,i=this.setting,n=this.dataValues.length;if(n<1)return null;var r=[],o=this.DVBWidth,s=0;if(i.xShapeBlank&&i.xShapeBlank.length&&2==i.xShapeBlank.length){var a=o-((t=i.xShapeBlank)[0]+t[1]);if(a<=n)return null;s=a/(n-1)}else t=[s=o/(n+1),s,s];for(var l=0,u=0;u<n;u++)0==u?l=t[0]:l+=s,r.push(e[0]+l);return{xPositions:r,width:0}}}]),e}(i(169).Graph);e.Line=p,u.Zondy.Theme.Line=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Pie=void 0;var n=d(i(13)),r=d(i(8)),o=d(i(20)),s=d(i(16)),a=d(i(46)),l=d(i(17)),u=i(6),c=i(108),h=i(256);function d(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t,i,o,a,l,u){(0,r.default)(this,e);var c=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,i,o,a,l,u));return c.CLASS_NAME="Zondy.Feature.Theme.Pie",c}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){(0,a.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t=this.setting,e=[{fillColor:"#ff9277"},{fillColor:"#dddd00"},{fillColor:"#ffc877"},{fillColor:"#bbe3ff"},{fillColor:"#d5ffbb"},{fillColor:"#bbbbff"},{fillColor:"#ddb000"},{fillColor:"#b0dd00"},{fillColor:"#e2bbff"},{fillColor:"#ffbbe3"},{fillColor:"#ff7777"},{fillColor:"#ff9900"},{fillColor:"#83dd00"},{fillColor:"#77e3ff"},{fillColor:"#778fff"},{fillColor:"#c877ff"},{fillColor:"#ff77ab"},{fillColor:"#ff6600"},{fillColor:"#aa8800"},{fillColor:"#77c7ff"},{fillColor:"#ad77ff"},{fillColor:"#ff77ff"},{fillColor:"#dd0083"},{fillColor:"#777700"},{fillColor:"#00aa00"},{fillColor:"#0088aa"},{fillColor:"#8400dd"},{fillColor:"#aa0088"},{fillColor:"#dd0000"},{fillColor:"#772e00"}];if(this.initBaseParameter()){t.useBackground&&this.shapes.push(c.ShapeFactory.Background(this.shapeFactory,this.chartBox,t));var i=this.dataValues;if(!(i.length<1)){for(var n=this.DVBCodomain,r=0;r<i.length;r++)if(i[r]<n[0]||i[r]>n[1])return;for(var o=0,s=0;s<i.length;s++)o+=Math.abs(i[s]);this.DVBUnitValue=360/o;for(var a=this.DVBUnitValue,l=this.DVBCenterPoint,u=0,d=0,f=u,p=this.DVBHeight<this.DVBWidth?this.DVBHeight/2:this.DVBWidth/2,g=0;g<i.length;g++){var y=Math.abs(i[g]);(d=0===g?u+y*a:g===y.length-1?f:u+y*a)-u>=360&&(d=359.9999999);var m=new h.Sector(l[0],l[1],p,u,d);if(void 0===t.sectorStyleByFields){var _=g%e.length;m.style=c.ShapeFactory.ShapeStyleTool(null,t.sectorStyle,e,null,_)}else m.style=c.ShapeFactory.ShapeStyleTool(null,t.sectorStyle,t.sectorStyleByFields,t.sectorStyleByCodomain,g,i[g]);m.highlightStyle=c.ShapeFactory.ShapeStyleTool(null,t.sectorHoverStyle),void 0!==t.sectorHoverAble&&(m.hoverable=t.sectorHoverAble),void 0!==t.sectorClickAble&&(m.clickable=t.sectorClickAble),m.refDataID=this.data.FID,m.dataInfo={field:this.fields[g],value:i[g]},this.shapes.push(this.shapeFactory.createShape(m)),u=d}this.shapesConvertToRelativeCoordinate()}}}}]),e}(i(169).Graph);e.Pie=f,u.Zondy.Theme.Pie=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Point=void 0;var n=d(i(13)),r=d(i(8)),o=d(i(20)),s=d(i(16)),a=d(i(46)),l=d(i(17)),u=i(6),c=i(108),h=i(254);function d(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t,i,o,a,l,u){(0,r.default)(this,e);var c=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,i,o,a,l,u));return c.CLASS_NAME="Zondy.Feature.Theme.Point",c}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){(0,a.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t=this.setting;if(t.dataViewBoxParameter||(void 0===t.useAxis||t.useAxis?t.dataViewBoxParameter=[45,15,15,15]:t.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var e=this.dataViewBox,i=this.DVBCodomain;this.DVBUnitValue=(i[1]-i[0])/this.DVBHeight;var n=this.DVBUnitValue,r=this.dataValues,o=this.calculateXShapeInfo();if(o){var s,a,l=o.xPositions;(void 0===t.useBackground||t.useBackground)&&this.shapes.push(c.ShapeFactory.Background(this.shapeFactory,this.chartBox,t)),this.shapes=this.shapes.concat(c.ShapeFactory.GraphAxis(this.shapeFactory,e,t,o));for(var u=0,d=r.length;u<d;u++){if(r[u]<i[0]||r[u]>i[1])return null;s=l[u],a=e[1]-(r[u]-i[0])/n;var f=new h.Point(s,a);f.style=c.ShapeFactory.ShapeStyleTool({fillColor:"#ee9900"},t.pointStyle,t.pointStyleByFields,t.pointStyleByCodomain,u,r[u]),f.highlightStyle=c.ShapeFactory.ShapeStyleTool(null,t.pointHoverStyle),void 0!==t.pointHoverAble&&(f.hoverable=t.pointHoverAble),void 0!==t.pointClickAble&&(f.clickable=t.pointClickAble),f.refDataID=this.data.FID,f.dataInfo={field:this.fields[u],value:r[u]},this.shapes.push(this.shapeFactory.createShape(f))}this.shapesConvertToRelativeCoordinate()}}}},{key:"calculateXShapeInfo",value:function(){var t,e=this.dataViewBox,i=this.setting,n=this.dataValues.length;if(n<1)return null;var r=[],o=this.DVBWidth,s=0;if(i.xShapeBlank&&i.xShapeBlank.length&&2==i.xShapeBlank.length){var a=o-((t=i.xShapeBlank)[0]+t[1]);if(a<=n)return null;s=a/(n-1)}else t=[s=o/(n+1),s,s];for(var l=0,u=0;u<n;u++)0==u?l=t[0]:l+=s,r.push(e[0]+l);return{xPositions:r,width:0}}}]),e}(i(169).Graph);e.Point=f,u.Zondy.Theme.Point=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Ring=void 0;var n=d(i(13)),r=d(i(8)),o=d(i(20)),s=d(i(16)),a=d(i(46)),l=d(i(17)),u=i(6),c=i(108),h=i(256);function d(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t,i,o,a,l,u){(0,r.default)(this,e);var c=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t,i,o,a,l,u));return c.CLASS_NAME="Zondy.Feature.Theme.Ring",c}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){(0,a.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){if(this.initBaseParameter()){var t=[{fillColor:"#ff9277"},{fillColor:"#dddd00"},{fillColor:"#ffc877"},{fillColor:"#bbe3ff"},{fillColor:"#d5ffbb"},{fillColor:"#bbbbff"},{fillColor:"#ddb000"},{fillColor:"#b0dd00"},{fillColor:"#e2bbff"},{fillColor:"#ffbbe3"},{fillColor:"#ff7777"},{fillColor:"#ff9900"},{fillColor:"#83dd00"},{fillColor:"#77e3ff"},{fillColor:"#778fff"},{fillColor:"#c877ff"},{fillColor:"#ff77ab"},{fillColor:"#ff6600"},{fillColor:"#aa8800"},{fillColor:"#77c7ff"},{fillColor:"#ad77ff"},{fillColor:"#ff77ff"},{fillColor:"#dd0083"},{fillColor:"#777700"},{fillColor:"#00aa00"},{fillColor:"#0088aa"},{fillColor:"#8400dd"},{fillColor:"#aa0088"},{fillColor:"#dd0000"},{fillColor:"#772e00"}],e=this.setting;e.useBackground&&this.shapes.push(c.ShapeFactory.Background(this.shapeFactory,this.chartBox,e));var i=this.dataValues;if(!(i.length<1)){for(var n=this.DVBCodomain,r=0;r<i.length;r++)if(i[r]<n[0]||i[r]>n[1])return;for(var o=0,s=0;s<i.length;s++)o+=Math.abs(i[s]);this.DVBUnitValue=360/o;for(var a=this.DVBUnitValue,l=this.DVBCenterPoint,u=0,d=0,f=u,p=this.DVBHeight<this.DVBWidth?this.DVBHeight/2:this.DVBWidth/2,g=e.innerRingRadius>=0&&e.innerRingRadius<p,y=void 0!==e.innerRingRadius&&!isNaN(e.innerRingRadius)&&g?e.innerRingRadius:0,m=0;m<i.length;m++){var _=Math.abs(i[m]);d=0===m?u+_*a:m===_.length-1?f:u+_*a;var v=new h.Sector(l[0],l[1],p,u,d,y);if(void 0===e.sectorStyleByFields){var b=m%t.length;v.style=c.ShapeFactory.ShapeStyleTool(null,e.sectorStyle,t,null,b)}else v.style=c.ShapeFactory.ShapeStyleTool(null,e.sectorStyle,e.sectorStyleByFields,e.sectorStyleByCodomain,m,i[m]);v.highlightStyle=c.ShapeFactory.ShapeStyleTool(null,e.sectorHoverStyle),void 0!==e.sectorHoverAble&&(v.hoverable=e.sectorHoverAble),void 0!==e.sectorClickAble&&(v.clickable=e.sectorClickAble),v.refDataID=this.data.FID,v.dataInfo={field:this.fields[m],value:i[m]},this.shapes.push(this.shapeFactory.createShape(v)),u=d}this.shapesConvertToRelativeCoordinate()}}}}]),e}(i(169).Graph);e.Ring=f,u.Zondy.Theme.Ring=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FeatureTheme=e.Sector=e.FeatureRectangle=e.FeaturePolygon=e.Point=e.FeatureLine=e.Label=e.Image=e.FeatureCircle=e.ShapeParameters=e.ShapeFactory=void 0;var n=i(108),r=i(147),o=i(312),s=i(402),a=i(401),l=i(311),u=i(254),c=i(255),h=i(400),d=i(256),f=i(195);e.ShapeFactory=n.ShapeFactory,e.ShapeParameters=r.ShapeParameters,e.FeatureCircle=o.Circle,e.Image=s.Image,e.Label=a.Label,e.FeatureLine=l.Line,e.Point=u.Point,e.FeaturePolygon=c.Polygon,e.FeatureRectangle=h.Rectangle,e.Sector=d.Sector,e.FeatureTheme=f.Theme},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SUtil=e.LevelRendererVector=e.Util=e.Transformable=e.Storage=e.SmicText=e.SmicStar=e.SmicSector=e.SmicRing=e.SmicRectangle=e.SmicPolygon=e.SmicPoint=e.SmicIsogon=e.SmicImage=e.SmicEllipse=e.SmicCircle=e.SmicBrokenLine=e.Shape=e.PaintLayer=e.Painter=e.Matrix=e.Math=e.Http=e.Handler=e.Group=e.Eventful=e.LevelRendererEvent=e.Env=e.Easing=e.LevelRendererCurve=e.Config=e.ComputeBoundingBox=e.Color=e.Clip=e.Area=e.Animator=e.Animation=e.Render=e.LevelRenderer=void 0;var n=i(384),r=i(385),o=i(397),s=i(388),a=i(398),l=i(308),u=i(389),c=i(309),h=i(252),d=i(399),f=i(390),p=i(391),g=i(220),y=i(387),m=i(396),_=i(392),v=i(393),b=i(394),S=i(395),O=i(107),C=i(314),x=i(404),T=i(642),E=i(310),P=i(643),j=i(313),w=i(257),I=i(405),L=i(644),R=i(406),A=i(645),M=i(403),F=i(386),k=i(251),N=i(194),D=i(253),G=i(116);e.LevelRenderer=n.LevelRenderer,e.Render=r.Render,e.Animation=o.Animation,e.Animator=o.Animator,e.Area=s.Area,e.Clip=a.Clip,e.Color=l.Color,e.ComputeBoundingBox=u.ComputeBoundingBox,e.Config=c.Config,e.LevelRendererCurve=h.Curve,e.Easing=d.Easing,e.Env=f.Env,e.LevelRendererEvent=p.Event,e.Eventful=g.Eventful,e.Group=y.Group,e.Handler=m.Handler,e.Http=_.Http,e.Math=v.Math,e.Matrix=b.Matrix,e.Painter=S.Painter,e.PaintLayer=S.PaintLayer,e.Shape=O.Shape,e.SmicBrokenLine=C.SmicBrokenLine,e.SmicCircle=x.SmicCircle,e.SmicEllipse=T.SmicEllipse,e.SmicImage=E.SmicImage,e.SmicIsogon=P.SmicIsogon,e.SmicPoint=j.SmicPoint,e.SmicPolygon=w.SmicPolygon,e.SmicRectangle=I.SmicRectangle,e.SmicRing=L.SmicRing,e.SmicSector=R.SmicSector,e.SmicStar=A.SmicStar,e.SmicText=M.SmicText,e.Storage=F.Storage,e.Transformable=k.Transformable,e.Util=N.Util,e.LevelRendererVector=D.Vector,e.SUtil=G.SUtil},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicEllipse=void 0;var n=c(i(13)),r=c(i(8)),o=c(i(20)),s=c(i(16)),a=c(i(46)),l=c(i(17)),u=i(6);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){(0,r.default)(this,e);var i=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t));return i.type="smicellipse",i.refOriginalPosition&&2===i.refOriginalPosition.length||(i.refOriginalPosition=[0,0]),i.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicEllipse",i}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.type=null,(0,a.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var i=this.refOriginalPosition,n=.5522848,r=e.x+i[0],o=e.y+i[1],s=e.a,a=e.b,l=s*n,u=a*n;t.moveTo(r-s,o),t.bezierCurveTo(r-s,o-u,r-l,o-a,r,o-a),t.bezierCurveTo(r+l,o-a,r+s,o-u,r+s,o),t.bezierCurveTo(r+s,o+u,r+l,o+a,r,o+a),t.bezierCurveTo(r-l,o+a,r-s,o+u,r-s,o),t.closePath()}},{key:"getRect",value:function(t){if(t.__rect)return t.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,i=this.refOriginalPosition;return e="stroke"==t.brushType||"fill"==t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(t.x+i[0]-t.a-e/2),y:Math.round(t.x+i[1]-t.b-e/2),width:2*t.a+e,height:2*t.b+e},t.__rect}}]),e}(i(107).Shape);e.SmicEllipse=h,u.Zondy.LevelRenderer.SmicEllipse=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicIsogon=void 0;var n=d(i(13)),r=d(i(8)),o=d(i(20)),s=d(i(16)),a=d(i(46)),l=d(i(17)),u=i(6),c=i(107),h=i(116);function d(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t){(0,r.default)(this,e);var i=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t));return i.type="smicisogon",i.refOriginalPosition&&2===i.refOriginalPosition.length||(i.refOriginalPosition=[0,0]),i.CLASS_NAME="Zondy.LevelRenderer.SmicIsogon",i}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.type=null,(0,a.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var i=this.refOriginalPosition,n=h.SUtil.Util_math.sin,r=h.SUtil.Util_math.cos,o=Math.PI,s=e.n;if(s&&!(s<2)){var a=e.x+i[0],l=e.y+i[1],u=e.r,c=2*o/s,d=-o/2,f=a+u*r(d),p=l+u*n(d);d+=c;var g=e.pointList=[];g.push([f,p]);for(var y=0,m=s-1;y<m;y++)g.push([a+u*r(d),l+u*n(d)]),d+=c;g.push([f,p]),t.moveTo(g[0][0],g[0][1]);for(var _=0;_<g.length;_++)t.lineTo(g[_][0],g[_][1]);t.closePath()}}},{key:"getRect",value:function(t){if(t.__rect)return t.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,i=this.refOriginalPosition;return e="stroke"==t.brushType||"fill"==t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(t.x+i[0]-t.r-e/2),y:Math.round(t.y+i[1]-t.r-e/2),width:2*t.r+e,height:2*t.r+e},t.__rect}}]),e}(c.Shape);e.SmicIsogon=f,u.Zondy.LevelRenderer.SmicIsogon=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicRing=void 0;var n=c(i(13)),r=c(i(8)),o=c(i(20)),s=c(i(16)),a=c(i(46)),l=c(i(17)),u=i(6);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){(0,r.default)(this,e);var i=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t));return i.type="smicring",i.refOriginalPosition&&2===i.refOriginalPosition.length||(i.refOriginalPosition=[0,0]),i.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicRing",i}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.type=null,(0,a.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var i=this.refOriginalPosition;t.arc(e.x+i[0],e.y+i[1],e.r,0,2*Math.PI,!1),t.moveTo(e.x+i[0]+e.r0,e.y+i[1]),t.arc(e.x+i[0],e.y+i[1],e.r0,0,2*Math.PI,!0)}},{key:"getRect",value:function(t){if(t.__rect)return t.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,i=this.refOriginalPosition;return e="stroke"==t.brushType||"fill"==t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(t.x+i[0]-t.r-e/2),y:Math.round(t.y+i[1]-t.r-e/2),width:2*t.r+e,height:2*t.r+e},t.__rect}}]),e}(i(107).Shape);e.SmicRing=h,u.Zondy.LevelRenderer.SmicRing=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicStar=void 0;var n=d(i(13)),r=d(i(8)),o=d(i(20)),s=d(i(16)),a=d(i(46)),l=d(i(17)),u=i(6),c=i(107),h=i(116);function d(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t){(0,r.default)(this,e);var i=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t));return i.type="smicstar",i.refOriginalPosition&&2===i.refOriginalPosition.length||(i.refOriginalPosition=[0,0]),i.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicStar",i}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.type=null,(0,a.default)(e.prototype.__proto__||(0,n.default)(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var i=this.refOriginalPosition,n=e.n;if(n&&!(n<2)){var r=h.SUtil.Util_math.sin,o=h.SUtil.Util_math.cos,s=Math.PI,a=e.x+i[0],l=e.y+i[1],u=e.r,c=e.r0;null==c&&(c=n>4?u*o(2*s/n)/o(s/n):u/3);var d=s/n,f=-s/2,p=a+u*o(f),g=l+u*r(f);f+=d;var y=e.pointList=[];y.push([p,g]);for(var m,_=0,v=2*n-1;_<v;_++)m=_%2==0?c:u,y.push([a+m*o(f),l+m*r(f)]),f+=d;y.push([p,g]),t.moveTo(y[0][0],y[0][1]);for(var b=0;b<y.length;b++)t.lineTo(y[b][0],y[b][1]);t.closePath()}}},{key:"getRect",value:function(t){if(t.__rect)return t.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,i=this.refOriginalPosition;return e="stroke"==t.brushType||"fill"==t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(t.x+i[0]-t.r-e/2),y:Math.round(t.y+i[1]-t.r-e/2),width:2*t.r+e,height:2*t.r+e},t.__rect}}]),e}(c.Shape);e.SmicStar=f,u.Zondy.LevelRenderer.SmicStar=f},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(23),o=i(38),s=i(33),a=i(159),l=i(19),u=i(41),c=i(48);function h(t,e,i,n,r,o){let s,a;void 0!==r?(s=r,a=void 0!==o?o:0):(s=[],a=0);let l=e;for(;l<i;){const e=t[l++];s[a++]=t[l++],s[a++]=e;for(let e=2;e<n;++e)s[a++]=t[l++]}return s.length=a,s}var d=i(82),f=i(9);i.d(e,"encodeDeltas",function(){return g}),i.d(e,"decodeDeltas",function(){return y}),i.d(e,"encodeFloats",function(){return m}),i.d(e,"decodeFloats",function(){return _}),i.d(e,"encodeSignedIntegers",function(){return v}),i.d(e,"decodeSignedIntegers",function(){return b}),i.d(e,"encodeUnsignedIntegers",function(){return S}),i.d(e,"decodeUnsignedIntegers",function(){return O}),i.d(e,"encodeUnsignedInteger",function(){return C});const p=function(t){const e=t||{};a.a.call(this),this.dataProjection=Object(f.get)("EPSG:4326"),this.factor_=e.factor?e.factor:1e5,this.geometryLayout_=e.geometryLayout?e.geometryLayout:l.default.XY};function g(t,e,i){const n=i||1e5;let r;const o=new Array(e);for(r=0;r<e;++r)o[r]=0;for(let i=0,n=t.length;i<n;)for(r=0;r<e;++r,++i){const e=t[i],n=e-o[r];o[r]=e,t[i]=n}return m(t,n)}function y(t,e,i){const n=i||1e5;let r;const o=new Array(e);for(r=0;r<e;++r)o[r]=0;const s=_(t,n);for(let t=0,i=s.length;t<i;)for(r=0;r<e;++r,++t)o[r]+=s[t],s[t]=o[r];return s}function m(t,e){const i=e||1e5;for(let e=0,n=t.length;e<n;++e)t[e]=Math.round(t[e]*i);return v(t)}function _(t,e){const i=e||1e5,n=b(t);for(let t=0,e=n.length;t<e;++t)n[t]/=i;return n}function v(t){for(let e=0,i=t.length;e<i;++e){const i=t[e];t[e]=i<0?~(i<<1):i<<1}return S(t)}function b(t){const e=O(t);for(let t=0,i=e.length;t<i;++t){const i=e[t];e[t]=1&i?~(i>>1):i>>1}return e}function S(t){let e="";for(let i=0,n=t.length;i<n;++i)e+=C(t[i]);return e}function O(t){const e=[];let i=0,n=0;for(let r=0,o=t.length;r<o;++r){const o=t.charCodeAt(r)-63;i|=(31&o)<<n,o<32?(e.push(i),i=0,n=0):n+=5}return e}function C(t){let e,i="";for(;t>=32;)e=63+(32|31&t),i+=String.fromCharCode(e),t>>=5;return e=t+63,i+=String.fromCharCode(e)}Object(n.inherits)(p,a.a),p.prototype.readFeature,p.prototype.readFeatureFromText=function(t,e){const i=this.readGeometryFromText(t,e);return new o.default(i)},p.prototype.readFeatures,p.prototype.readFeaturesFromText=function(t,e){return[this.readFeatureFromText(t,e)]},p.prototype.readGeometry,p.prototype.readGeometryFromText=function(t,e){const i=Object(c.getStrideForLayout)(this.geometryLayout_),n=y(t,i,this.factor_);h(n,0,n.length,i,n);const r=Object(d.a)(n,0,n.length,i);return Object(s.transformWithOptions)(new u.default(r,this.geometryLayout_),!1,this.adaptOptions(e))},p.prototype.readProjection,p.prototype.writeFeatureText=function(t,e){const i=t.getGeometry();return i?this.writeGeometryText(i,e):(Object(r.a)(!1,40),"")},p.prototype.writeFeaturesText=function(t,e){return this.writeFeatureText(t[0],e)},p.prototype.writeGeometry,p.prototype.writeGeometryText=function(t,e){const i=(t=Object(s.transformWithOptions)(t,!0,this.adaptOptions(e))).getFlatCoordinates(),n=t.getStride();return h(i,0,i.length,n,i),g(i,n,this.factor_)};e.default=p},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(73),o=i(12),s=i(2),a=i(11),l=i(9),u=i(53),c={KVP:"KVP",REST:"REST"},h=i(360),d=i(95);i.d(e,"optionsFromCapabilities",function(){return p});const f=function(t){this.version_=void 0!==t.version?t.version:"1.0.0",this.format_=void 0!==t.format?t.format:"image/jpeg",this.dimensions_=void 0!==t.dimensions?t.dimensions:{},this.layer_=t.layer,this.matrixSet_=t.matrixSet,this.style_=t.style;let e=t.urls;void 0===e&&void 0!==t.url&&(e=Object(r.c)(t.url)),this.requestEncoding_=void 0!==t.requestEncoding?t.requestEncoding:c.KVP;const i=this.requestEncoding_,n=t.tileGrid,o={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};i==c.KVP&&Object(a.assign)(o,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_});const s=this.dimensions_;this.createFromWMTSTemplate_=function(t){return t=i==c.KVP?Object(d.appendParams)(t,o):t.replace(/\{(\w+?)\}/g,function(t,e){return e.toLowerCase()in o?o[e.toLowerCase()]:t}),function(e,r,o){if(e){const r={TileMatrix:n.getMatrixId(e[0]),TileCol:e[1],TileRow:-e[2]-1};Object(a.assign)(r,s);let o=t;return o=i==c.KVP?Object(d.appendParams)(o,r):o.replace(/\{(\w+?)\}/g,function(t,e){return r[e]})}}};const l=e&&e.length>0?Object(r.b)(e.map(this.createFromWMTSTemplate_)):r.d;u.default.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:n,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:l,urls:e,wrapX:void 0!==t.wrapX&&t.wrapX,transition:t.transition}),this.setKey(this.getKeyForDimensions_())};function p(t,e){const i=t.Contents.Layer,n=Object(o.d)(i,function(t,i,n){return t.Identifier==e.layer});if(null===n)return null;const r=t.Contents.TileMatrixSet;let a;(a=n.TileMatrixSetLink.length>1?"projection"in e?Object(o.e)(n.TileMatrixSetLink,function(t,i,n){const s=Object(o.d)(r,function(e){return e.Identifier==t.TileMatrixSet}).SupportedCRS,a=Object(l.get)(s.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||Object(l.get)(s),u=Object(l.get)(e.projection);return a&&u?Object(l.equivalent)(a,u):s==e.projection}):Object(o.e)(n.TileMatrixSetLink,function(t,i,n){return t.TileMatrixSet==e.matrixSet}):0)<0&&(a=0);const u=n.TileMatrixSetLink[a].TileMatrixSet,d=n.TileMatrixSetLink[a].TileMatrixSetLimits;let f=n.Format[0];"format"in e&&(f=e.format),(a=Object(o.e)(n.Style,function(t,i,n){return"style"in e?t.Title==e.style:t.isDefault}))<0&&(a=0);const p=n.Style[a].Identifier,g={};"Dimension"in n&&n.Dimension.forEach(function(t,e,i){const n=t.Identifier;let r=t.Default;void 0===r&&(r=t.Value[0]),g[n]=r});const y=t.Contents.TileMatrixSet,m=Object(o.d)(y,function(t,e,i){return t.Identifier==u});let _;const v=m.SupportedCRS;if(v&&(_=Object(l.get)(v.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||Object(l.get)(v)),"projection"in e){const t=Object(l.get)(e.projection);t&&(_&&!Object(l.equivalent)(t,_)||(_=t))}const b=n.WGS84BoundingBox;let S,O;if(void 0!==b){const t=Object(l.get)("EPSG:4326").getExtent();O=b[0]==t[0]&&b[2]==t[2],S=Object(l.transformExtent)(b,"EPSG:4326",_);const e=_.getExtent();e&&(Object(s.containsExtent)(e,S)||(S=void 0))}const C=Object(h.createFromCapabilitiesMatrixSet)(m,S,d),x=[];let T=e.requestEncoding;if(T=void 0!==T?T:"","OperationsMetadata"in t&&"GetTile"in t.OperationsMetadata){const e=t.OperationsMetadata.GetTile.DCP.HTTP.Get;for(let t=0,i=e.length;t<i;++t)if(e[t].Constraint){const i=Object(o.d)(e[t].Constraint,function(t){return"GetEncoding"==t.name}).AllowedValues.Value;if(""===T&&(T=i[0]),T!==c.KVP)break;Object(o.f)(i,c.KVP)&&x.push(e[t].href)}else e[t].href&&(T=c.KVP,x.push(e[t].href))}return 0===x.length&&(T=c.REST,n.ResourceURL.forEach(function(t){"tile"===t.resourceType&&(f=t.format,x.push(t.template))})),{urls:x,layer:e.layer,matrixSet:u,format:f,projection:_,requestEncoding:T,tileGrid:C,style:p,dimensions:g,wrapX:O,crossOrigin:e.crossOrigin}}Object(n.inherits)(f,u.default),f.prototype.setUrls=function(t){this.urls=t;const e=t.join("\n");this.setTileUrlFunction(this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):Object(r.b)(t.map(this.createFromWMTSTemplate_.bind(this))),e)},f.prototype.getDimensions=function(){return this.dimensions_},f.prototype.getFormat=function(){return this.format_},f.prototype.getLayer=function(){return this.layer_},f.prototype.getMatrixSet=function(){return this.matrixSet_},f.prototype.getRequestEncoding=function(){return this.requestEncoding_},f.prototype.getStyle=function(){return this.style_},f.prototype.getVersion=function(){return this.version_},f.prototype.getKeyForDimensions_=function(){let t=0;const e=[];for(const i in this.dimensions_)e[t++]=i+"-"+this.dimensions_[i];return e.join("/")},f.prototype.updateDimensions=function(t){Object(a.assign)(this.dimensions_,t),this.setKey(this.getKeyForDimensions_())};e.default=f},function(t,e,i){"use strict";i.r(e);var n=i(1),r=i(2),o=i(161),s=i(162),a=i(3),l=i(0);const u=function(){s.a.call(this)};Object(n.inherits)(u,s.a);const c=[null,"http://www.opengis.net/ows/1.1"],h=Object(l.makeStructureNS)(c,{ServiceIdentification:Object(l.makeObjectPropertySetter)(function(t,e){return Object(l.pushParseAndPop)({},C,t,e)}),ServiceProvider:Object(l.makeObjectPropertySetter)(function(t,e){return Object(l.pushParseAndPop)({},x,t,e)}),OperationsMetadata:Object(l.makeObjectPropertySetter)(function(t,e){return Object(l.pushParseAndPop)({},v,t,e)})}),d=Object(l.makeStructureNS)(c,{DeliveryPoint:Object(l.makeObjectPropertySetter)(a.h),City:Object(l.makeObjectPropertySetter)(a.h),AdministrativeArea:Object(l.makeObjectPropertySetter)(a.h),PostalCode:Object(l.makeObjectPropertySetter)(a.h),Country:Object(l.makeObjectPropertySetter)(a.h),ElectronicMailAddress:Object(l.makeObjectPropertySetter)(a.h)}),f=Object(l.makeStructureNS)(c,{Value:Object(l.makeObjectPropertyPusher)(function(t,e){return Object(a.h)(t)})}),p=Object(l.makeStructureNS)(c,{AllowedValues:Object(l.makeObjectPropertySetter)(function(t,e){return Object(l.pushParseAndPop)({},f,t,e)})}),g=Object(l.makeStructureNS)(c,{Phone:Object(l.makeObjectPropertySetter)(function(t,e){return Object(l.pushParseAndPop)({},b,t,e)}),Address:Object(l.makeObjectPropertySetter)(function(t,e){return Object(l.pushParseAndPop)({},d,t,e)})}),y=Object(l.makeStructureNS)(c,{HTTP:Object(l.makeObjectPropertySetter)(function(t,e){return Object(l.pushParseAndPop)({},m,t,e)})}),m=Object(l.makeStructureNS)(c,{Get:Object(l.makeObjectPropertyPusher)(function(t,e){const i=Object(o.a)(t);if(!i)return;return Object(l.pushParseAndPop)({href:i},S,t,e)}),Post:void 0}),_=Object(l.makeStructureNS)(c,{DCP:Object(l.makeObjectPropertySetter)(function(t,e){return Object(l.pushParseAndPop)({},y,t,e)})}),v=Object(l.makeStructureNS)(c,{Operation:function(t,e){const i=t.getAttribute("name"),n=Object(l.pushParseAndPop)({},_,t,e);if(!n)return;e[e.length-1][i]=n}}),b=Object(l.makeStructureNS)(c,{Voice:Object(l.makeObjectPropertySetter)(a.h),Facsimile:Object(l.makeObjectPropertySetter)(a.h)}),S=Object(l.makeStructureNS)(c,{Constraint:Object(l.makeObjectPropertyPusher)(function(t,e){const i=t.getAttribute("name");if(!i)return;return Object(l.pushParseAndPop)({name:i},p,t,e)})}),O=Object(l.makeStructureNS)(c,{IndividualName:Object(l.makeObjectPropertySetter)(a.h),PositionName:Object(l.makeObjectPropertySetter)(a.h),ContactInfo:Object(l.makeObjectPropertySetter)(function(t,e){return Object(l.pushParseAndPop)({},g,t,e)})}),C=Object(l.makeStructureNS)(c,{Abstract:Object(l.makeObjectPropertySetter)(a.h),AccessConstraints:Object(l.makeObjectPropertySetter)(a.h),Fees:Object(l.makeObjectPropertySetter)(a.h),Title:Object(l.makeObjectPropertySetter)(a.h),ServiceTypeVersion:Object(l.makeObjectPropertySetter)(a.h),ServiceType:Object(l.makeObjectPropertySetter)(a.h)}),x=Object(l.makeStructureNS)(c,{ProviderName:Object(l.makeObjectPropertySetter)(a.h),ProviderSite:Object(l.makeObjectPropertySetter)(o.a),ServiceContact:Object(l.makeObjectPropertySetter)(function(t,e){return Object(l.pushParseAndPop)({},O,t,e)})});u.prototype.readFromDocument=function(t){for(let e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null},u.prototype.readFromNode=function(t){const e=Object(l.pushParseAndPop)({},h,t,[]);return e||null};var T=u;const E=function(){s.a.call(this),this.owsParser_=new T};Object(n.inherits)(E,s.a);const P=[null,"http://www.opengis.net/wmts/1.0"],j=[null,"http://www.opengis.net/ows/1.1"],w=Object(l.makeStructureNS)(P,{Contents:Object(l.makeObjectPropertySetter)(function(t,e){return Object(l.pushParseAndPop)({},I,t,e)})}),I=Object(l.makeStructureNS)(P,{Layer:Object(l.makeObjectPropertyPusher)(function(t,e){return Object(l.pushParseAndPop)({},L,t,e)}),TileMatrixSet:Object(l.makeObjectPropertyPusher)(function(t,e){return Object(l.pushParseAndPop)({},D,t,e)})}),L=Object(l.makeStructureNS)(P,{Style:Object(l.makeObjectPropertyPusher)(function(t,e){const i=Object(l.pushParseAndPop)({},R,t,e);if(!i)return;const n="true"===t.getAttribute("isDefault");return i.isDefault=n,i}),Format:Object(l.makeObjectPropertyPusher)(a.h),TileMatrixSetLink:Object(l.makeObjectPropertyPusher)(function(t,e){return Object(l.pushParseAndPop)({},A,t,e)}),Dimension:Object(l.makeObjectPropertyPusher)(function(t,e){return Object(l.pushParseAndPop)({},k,t,e)}),ResourceURL:Object(l.makeObjectPropertyPusher)(function(t,e){const i=t.getAttribute("format"),n=t.getAttribute("template"),r=t.getAttribute("resourceType"),o={};i&&(o.format=i);n&&(o.template=n);r&&(o.resourceType=r);return o})},Object(l.makeStructureNS)(j,{Title:Object(l.makeObjectPropertySetter)(a.h),Abstract:Object(l.makeObjectPropertySetter)(a.h),WGS84BoundingBox:Object(l.makeObjectPropertySetter)(function(t,e){const i=Object(l.pushParseAndPop)([],N,t,e);if(2!=i.length)return;return Object(r.boundingExtent)(i)}),Identifier:Object(l.makeObjectPropertySetter)(a.h)})),R=Object(l.makeStructureNS)(P,{LegendURL:Object(l.makeObjectPropertyPusher)(function(t,e){const i={};return i.format=t.getAttribute("format"),i.href=Object(o.a)(t),i})},Object(l.makeStructureNS)(j,{Title:Object(l.makeObjectPropertySetter)(a.h),Identifier:Object(l.makeObjectPropertySetter)(a.h)})),A=Object(l.makeStructureNS)(P,{TileMatrixSet:Object(l.makeObjectPropertySetter)(a.h),TileMatrixSetLimits:Object(l.makeObjectPropertySetter)(function(t,e){return Object(l.pushParseAndPop)([],M,t,e)})}),M=Object(l.makeStructureNS)(P,{TileMatrixLimits:Object(l.makeArrayPusher)(function(t,e){return Object(l.pushParseAndPop)({},F,t,e)})}),F=Object(l.makeStructureNS)(P,{TileMatrix:Object(l.makeObjectPropertySetter)(a.h),MinTileRow:Object(l.makeObjectPropertySetter)(a.f),MaxTileRow:Object(l.makeObjectPropertySetter)(a.f),MinTileCol:Object(l.makeObjectPropertySetter)(a.f),MaxTileCol:Object(l.makeObjectPropertySetter)(a.f)}),k=Object(l.makeStructureNS)(P,{Default:Object(l.makeObjectPropertySetter)(a.h),Value:Object(l.makeObjectPropertyPusher)(a.h)},Object(l.makeStructureNS)(j,{Identifier:Object(l.makeObjectPropertySetter)(a.h)})),N=Object(l.makeStructureNS)(j,{LowerCorner:Object(l.makeArrayPusher)(B),UpperCorner:Object(l.makeArrayPusher)(B)}),D=Object(l.makeStructureNS)(P,{WellKnownScaleSet:Object(l.makeObjectPropertySetter)(a.h),TileMatrix:Object(l.makeObjectPropertyPusher)(function(t,e){return Object(l.pushParseAndPop)({},G,t,e)})},Object(l.makeStructureNS)(j,{SupportedCRS:Object(l.makeObjectPropertySetter)(a.h),Identifier:Object(l.makeObjectPropertySetter)(a.h)})),G=Object(l.makeStructureNS)(P,{TopLeftCorner:Object(l.makeObjectPropertySetter)(B),ScaleDenominator:Object(l.makeObjectPropertySetter)(a.d),TileWidth:Object(l.makeObjectPropertySetter)(a.f),TileHeight:Object(l.makeObjectPropertySetter)(a.f),MatrixWidth:Object(l.makeObjectPropertySetter)(a.f),MatrixHeight:Object(l.makeObjectPropertySetter)(a.f)},Object(l.makeStructureNS)(j,{Identifier:Object(l.makeObjectPropertySetter)(a.h)}));function B(t,e){const i=Object(a.h)(t).split(" ");if(!i||2!=i.length)return;const n=+i[0],r=+i[1];return isNaN(n)||isNaN(r)?void 0:[n,r]}E.prototype.read,E.prototype.readFromDocument=function(t){for(let e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null},E.prototype.readFromNode=function(t){const e=t.getAttribute("version").trim();let i=this.owsParser_.readFromNode(t);return i?(i.version=e,(i=Object(l.pushParseAndPop)(i,w,t,[]))||null):null};e.default=E}]);