<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>获取图层图片URL</title>
    <script src="../../libs/zondyclient/include-mapboxgl-local.js"></script>
    <!--引入当前页面样式表-->
    <link href="../../css/mapboxgl/style.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript">
        //使用严格模式
        "use strict";
        /**获取图层图片URL
        */
        function GetLayerImage() {
            //创建获取图层图片信息服务
            var LayerImageService = new Zondy.Service.GetLayerImageService({
                //图层在数据库中的url
                gdbps: 'gdbp://MapGisLocal/OpenLayerVecterMap/ds/地图编辑缓存经纬度/sfcls/mypntlayer',
                //图片类型
                picType: 'png',
                //图片宽
                picWidth: 500,
                //图片高
                picHeight: 600,
                //取图范围，依次是xmin、ymin、xmax、ymax
                bbox: '50,0,140,90',
                //IP地址
                ip: "develop.smaryun.com",
                //端口号
                port: "6163"
            });
            //获取图层图片url路径
            var layerUrl = LayerImageService.GetLayerImage();
            //将JSON对象转换成JSON字符串
            var formatData = JSON.stringify(layerUrl);
            //显示url结果，并设置链接供用户查看
            document.getElementById("show").innerHTML = layerUrl;
            document.getElementById("show").href = layerUrl;
        }
    </script>
</head>
<body>
   <div class="ToolLib" >
    <input type="button"  class="ButtonLib" value="获取图层图片URL" onclick='GetLayerImage()' />
  </div>
  <div id="reslutShow" style=" padding: 5px; margin-top: 10px;" >
     <font style=" float: left; text-align: left">图层图片的URL为：</font><br />
     <a id="show" target="blank"></a>
  </div>
</body>
</html>
